import{A as qt,a as L,b as be,c as xp,d as x,e as bI,f as Xu,g as SI,h as AI,i as RI,j as Np,k as MI,l as Sa,m as kp,n as el,o as xI,p as NI,q as tl,r as Le,s as gi,t as bn,u as nl,v as Aa,w as kI,x as PI,y as OI,z as Rr}from"./chunk-SC2QCK7C.js";function FI(n,e){return Object.is(n,e)}var rt=null,rl=!1,Op=1,Eo=Symbol("SIGNAL");function Te(n){let e=rt;return rt=n,e}function Fp(){return rt}var il={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Lp(n){if(rl)throw new Error("");if(rt===null)return;rt.consumerOnSignalRead(n);let e=rt.nextProducerIndex++;if(sl(rt),e<rt.producerNode.length&&rt.producerNode[e]!==n&&Ra(rt)){let t=rt.producerNode[e];ol(t,rt.producerIndexOfThis[e])}rt.producerNode[e]!==n&&(rt.producerNode[e]=n,rt.producerIndexOfThis[e]=Ra(rt)?UI(n,rt,e):0),rt.producerLastReadVersion[e]=n.version}function LI(){Op++}function VI(n){if(!(Ra(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Op)){if(!n.producerMustRecompute(n)&&!Bp(n)){Pp(n);return}n.producerRecomputeValue(n),Pp(n)}}function Vp(n){if(n.liveConsumerNode===void 0)return;let e=rl;rl=!0;try{for(let t of n.liveConsumerNode)t.dirty||Gx(t)}finally{rl=e}}function jI(){return rt?.consumerAllowSignalWrites!==!1}function Gx(n){n.dirty=!0,Vp(n),n.consumerMarkedDirty?.(n)}function Pp(n){n.dirty=!1,n.lastCleanEpoch=Op}function jp(n){return n&&(n.nextProducerIndex=0),Te(n)}function BI(n,e){if(Te(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ra(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)ol(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Bp(n){sl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(VI(t),r!==t.version))return!0}return!1}function Up(n){if(sl(n),Ra(n))for(let e=0;e<n.producerNode.length;e++)ol(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function UI(n,e,t){if($I(n),n.liveConsumerNode.length===0&&HI(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=UI(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function ol(n,e){if($I(n),n.liveConsumerNode.length===1&&HI(n))for(let r=0;r<n.producerNode.length;r++)ol(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];sl(i),i.producerIndexOfThis[r]=e}}function Ra(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function sl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function $I(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function HI(n){return n.producerNode!==void 0}function Wx(){throw new Error}var qI=Wx;function Kx(n){qI(n)}function $p(n){qI=n}var Qx=null;function Hp(n,e){jI()||Kx(n),n.equal(n.value,e)||(n.value=e,Zx(n))}var qp=be(L({},il),{equal:FI,value:void 0,kind:"signal"});function Zx(n){n.version++,LI(),Vp(n),Qx?.()}var zp;function Ma(){return zp}function Qn(n){let e=zp;return zp=n,e}var al=Symbol("NotFound");function ee(n){return typeof n=="function"}function Io(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var cl=Io(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function mi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var He=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ee(r))try{r()}catch(o){e=o instanceof cl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{zI(o)}catch(s){e=e??[],s instanceof cl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new cl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)zI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&mi(t,e)}remove(e){let{_finalizers:t}=this;t&&mi(t,e),e instanceof n&&e._removeParent(this)}};He.EMPTY=(()=>{let n=new He;return n.closed=!0,n})();var Gp=He.EMPTY;function ul(n){return n instanceof He||n&&"closed"in n&&ee(n.remove)&&ee(n.add)&&ee(n.unsubscribe)}function zI(n){ee(n)?n():n.unsubscribe()}var ln={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Do={setTimeout(n,e,...t){let{delegate:r}=Do;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Do;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ll(n){Do.setTimeout(()=>{let{onUnhandledError:e}=ln;if(e)e(n);else throw n})}function xa(){}var GI=Wp("C",void 0,void 0);function WI(n){return Wp("E",void 0,n)}function KI(n){return Wp("N",n,void 0)}function Wp(n,e,t){return{kind:n,value:e,error:t}}var yi=null;function To(n){if(ln.useDeprecatedSynchronousErrorHandling){let e=!yi;if(e&&(yi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=yi;if(yi=null,t)throw r}}else n()}function QI(n){ln.useDeprecatedSynchronousErrorHandling&&yi&&(yi.errorThrown=!0,yi.error=n)}var vi=class extends He{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ul(e)&&e.add(this)):this.destination=sN}static create(e,t,r){return new Zn(e,t,r)}next(e){this.isStopped?Qp(KI(e),this):this._next(e)}error(e){this.isStopped?Qp(WI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Qp(GI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},iN=Function.prototype.bind;function Kp(n,e){return iN.call(n,e)}var Zp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){dl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){dl(r)}else dl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){dl(t)}}},Zn=class extends vi{constructor(e,t,r){super();let i;if(ee(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&ln.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Kp(e.next,o),error:e.error&&Kp(e.error,o),complete:e.complete&&Kp(e.complete,o)}):i=e}this.destination=new Zp(i)}};function dl(n){ln.useDeprecatedSynchronousErrorHandling?QI(n):ll(n)}function oN(n){throw n}function Qp(n,e){let{onStoppedNotification:t}=ln;t&&Do.setTimeout(()=>t(n,e))}var sN={closed:!0,next:xa,error:oN,complete:xa};var Co=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Rt(n){return n}function Yp(...n){return Jp(n)}function Jp(n){return n.length===0?Rt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var de=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=cN(t)?t:new Zn(t,r,i);return To(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=ZI(r),new r((i,o)=>{let s=new Zn({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Co](){return this}pipe(...t){return Jp(t)(this)}toPromise(t){return t=ZI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function ZI(n){var e;return(e=n??ln.Promise)!==null&&e!==void 0?e:Promise}function aN(n){return n&&ee(n.next)&&ee(n.error)&&ee(n.complete)}function cN(n){return n&&n instanceof vi||aN(n)&&ul(n)}function Xp(n){return ee(n?.lift)}function ce(n){return e=>{if(Xp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(n,e,t,r,i){return new eg(n,e,t,r,i)}var eg=class extends vi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function bo(){return ce((n,e)=>{let t=null;n._refCount++;let r=le(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var So=class extends de{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Xp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new He;let t=this.getSubject();e.add(this.source.subscribe(le(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=He.EMPTY)}return e}refCount(){return bo()(this)}};var YI=Io(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ve=(()=>{class n extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new fl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new YI}next(t){To(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){To(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){To(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Gp:(this.currentObservers=null,o.push(t),new He(()=>{this.currentObservers=null,mi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new de;return t.source=this,t}}return n.create=(e,t)=>new fl(e,t),n})(),fl=class extends Ve{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Gp}};var ht=class extends Ve{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Na={now(){return(Na.delegate||Date).now()},delegate:void 0};var ka=class extends Ve{constructor(e=1/0,t=1/0,r=Na){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var hl=class extends He{constructor(e,t){super()}schedule(e,t=0){return this}};var Pa={setInterval(n,e,...t){let{delegate:r}=Pa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Pa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ao=class extends hl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Pa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Pa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,mi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ro=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ro.now=Na.now;var Mo=class extends Ro{constructor(e,t=Ro.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Oa=new Mo(Ao);var pl=class extends Ao{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var gl=class extends Mo{};var tg=new gl(pl);var Et=new de(n=>n.complete());function JI(n){return n&&ee(n.schedule)}function ng(n){return n[n.length-1]}function XI(n){return ee(ng(n))?n.pop():void 0}function Sn(n){return JI(ng(n))?n.pop():void 0}function eD(n,e){return typeof ng(n)=="number"?n.pop():e}var ml=n=>n&&typeof n.length=="number"&&typeof n!="function";function yl(n){return ee(n?.then)}function vl(n){return ee(n[Co])}function _l(n){return Symbol.asyncIterator&&ee(n?.[Symbol.asyncIterator])}function wl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function uN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var El=uN();function Il(n){return ee(n?.[El])}function Dl(n){return SI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Xu(t.read());if(i)return yield Xu(void 0);yield yield Xu(r)}}finally{t.releaseLock()}})}function Tl(n){return ee(n?.getReader)}function je(n){if(n instanceof de)return n;if(n!=null){if(vl(n))return lN(n);if(ml(n))return dN(n);if(yl(n))return fN(n);if(_l(n))return tD(n);if(Il(n))return hN(n);if(Tl(n))return pN(n)}throw wl(n)}function lN(n){return new de(e=>{let t=n[Co]();if(ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function dN(n){return new de(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function fN(n){return new de(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ll)})}function hN(n){return new de(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function tD(n){return new de(e=>{gN(n,e).catch(t=>e.error(t))})}function pN(n){return tD(Dl(n))}function gN(n,e){var t,r,i,o;return bI(this,void 0,void 0,function*(){try{for(t=AI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ft(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function An(n,e=0){return ce((t,r)=>{t.subscribe(le(r,i=>Ft(r,n,()=>r.next(i),e),()=>Ft(r,n,()=>r.complete(),e),i=>Ft(r,n,()=>r.error(i),e)))})}function Yn(n,e=0){return ce((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function nD(n,e){return je(n).pipe(Yn(e),An(e))}function rD(n,e){return je(n).pipe(Yn(e),An(e))}function iD(n,e){return new de(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function oD(n,e){return new de(t=>{let r;return Ft(t,e,()=>{r=n[El](),Ft(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ee(r?.return)&&r.return()})}function Cl(n,e){if(!n)throw new Error("Iterable cannot be null");return new de(t=>{Ft(t,e,()=>{let r=n[Symbol.asyncIterator]();Ft(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function sD(n,e){return Cl(Dl(n),e)}function aD(n,e){if(n!=null){if(vl(n))return nD(n,e);if(ml(n))return iD(n,e);if(yl(n))return rD(n,e);if(_l(n))return Cl(n,e);if(Il(n))return oD(n,e);if(Tl(n))return sD(n,e)}throw wl(n)}function Ee(n,e){return e?aD(n,e):je(n)}function Y(...n){let e=Sn(n);return Ee(n,e)}function xo(n,e){let t=ee(n)?n:()=>n,r=i=>i.error(t());return new de(e?i=>e.schedule(r,0,i):r)}function rg(n){return!!n&&(n instanceof de||ee(n.lift)&&ee(n.subscribe))}var Jn=Io(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function W(n,e){return ce((t,r)=>{let i=0;t.subscribe(le(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:mN}=Array;function yN(n,e){return mN(e)?n(...e):n(e)}function cD(n){return W(e=>yN(n,e))}var{isArray:vN}=Array,{getPrototypeOf:_N,prototype:wN,keys:EN}=Object;function uD(n){if(n.length===1){let e=n[0];if(vN(e))return{args:e,keys:null};if(IN(e)){let t=EN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function IN(n){return n&&typeof n=="object"&&_N(n)===wN}function lD(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Fa(...n){let e=Sn(n),t=XI(n),{args:r,keys:i}=uD(n);if(r.length===0)return Ee([],e);let o=new de(DN(r,e,i?s=>lD(i,s):Rt));return t?o.pipe(cD(t)):o}function DN(n,e,t=Rt){return r=>{dD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)dD(e,()=>{let l=Ee(n[u],e),f=!1;l.subscribe(le(r,p=>{o[u]=p,f||(f=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function dD(n,e,t){n?Ft(t,n,e):e()}function fD(n,e,t,r,i,o,s,a){let u=[],l=0,f=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=A=>l<r?b(A):u.push(A),b=A=>{o&&e.next(A),l++;let N=!1;je(t(A,f++)).subscribe(le(e,H=>{i?.(H),o?y(H):e.next(H)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let H=u.shift();s?Ft(e,s,()=>b(H)):b(H)}m()}catch(H){e.error(H)}}))};return n.subscribe(le(e,y,()=>{p=!0,m()})),()=>{a?.()}}function We(n,e,t=1/0){return ee(e)?We((r,i)=>W((o,s)=>e(r,o,i,s))(je(n(r,i))),t):(typeof e=="number"&&(t=e),ce((r,i)=>fD(r,i,n,t)))}function Mr(n=1/0){return We(Rt,n)}function hD(){return Mr(1)}function No(...n){return hD()(Ee(n,Sn(n)))}function bl(n){return new de(e=>{je(n()).subscribe(e)})}function ig(...n){let e=Sn(n),t=eD(n,1/0),r=n;return r.length?r.length===1?je(r[0]):Mr(t)(Ee(r,e)):Et}function ct(n,e){return ce((t,r)=>{let i=0;t.subscribe(le(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Xn(n){return ce((e,t)=>{let r=null,i=!1,o;r=e.subscribe(le(t,void 0,void 0,s=>{o=je(n(s,Xn(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function pD(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(le(s,f=>{let p=l++;u=a?n(u,f,p):(a=!0,f),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function xr(n,e){return ee(e)?We(n,e,1):We(n,1)}function Nr(n){return ce((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function er(n){return n<=0?()=>Et:ce((e,t)=>{let r=0;e.subscribe(le(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function og(n,e=Rt){return n=n??TN,ce((t,r)=>{let i,o=!0;t.subscribe(le(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function TN(n,e){return n===e}function Sl(n=CN){return ce((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function CN(){return new Jn}function La(n){return ce((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function dn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ct((i,o)=>n(i,o,r)):Rt,er(1),t?Nr(e):Sl(()=>new Jn))}function ko(n){return n<=0?()=>Et:ce((e,t)=>{let r=[];e.subscribe(le(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function sg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ct((i,o)=>n(i,o,r)):Rt,ko(1),t?Nr(e):Sl(()=>new Jn))}function Va(){return ce((n,e)=>{let t,r=!1;n.subscribe(le(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function _i(n,e){return ce(pD(n,e,arguments.length>=2,!0))}function gD(n={}){let{connector:e=()=>new Ve,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,f=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=u=void 0,f=p=!1},b=()=>{let A=s;y(),A?.unsubscribe()};return ce((A,N)=>{l++,!p&&!f&&m();let H=u=u??e();N.add(()=>{l--,l===0&&!p&&!f&&(a=ag(b,i))}),H.subscribe(N),!s&&l>0&&(s=new Zn({next:K=>H.next(K),error:K=>{p=!0,m(),a=ag(y,t,K),H.error(K)},complete:()=>{f=!0,m(),a=ag(y,r),H.complete()}}),je(A).subscribe(s))})(o)}}function ag(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Zn({next:()=>{r.unsubscribe(),n()}});return je(e(...t)).subscribe(r)}function Al(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,gD({connector:()=>new ka(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function wi(...n){let e=Sn(n);return ce((t,r)=>{(e?No(n,t,e):No(n,t)).subscribe(r)})}function qe(n,e){return ce((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(le(r,u=>{i?.unsubscribe();let l=0,f=o++;je(n(u,f)).subscribe(i=le(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Rl(n,e){return ee(e)?qe(()=>n,e):qe(()=>n)}function cg(n){return ce((e,t)=>{je(n).subscribe(le(t,()=>t.complete(),xa)),!t.closed&&e.subscribe(t)})}function pt(n,e,t){let r=ee(n)||e||t?{next:n,error:e,complete:t}:n;return r?ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(le(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Rt}var tT="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Q=class extends Error{code;constructor(e,t){super(nT(e,t)),this.code=e}};function bN(n){return`NG0${Math.abs(n)}`}function nT(n,e){return`${bN(n)}${e?": "+e:""}`}var rT=Symbol("InputSignalNode#UNSET"),SN=be(L({},qp),{transformFn:void 0,applyValueToInputSignal(n,e){Hp(n,e)}});function iT(n,e){let t=Object.create(SN);t.value=n,t.transformFn=e?.transform;function r(){if(Lp(t),t.value===rT){let i=null;throw new Q(-950,i)}return t.value}return r[Eo]=t,r}function Ja(n){return{toString:n}.toString()}var Ml="__parameters__";function AN(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function oT(n,e,t){return Ja(()=>{let r=AN(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,f){let p=u.hasOwnProperty(Ml)?u[Ml]:Object.defineProperty(u,Ml,{value:[]})[Ml];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var or=globalThis;function xe(n){for(let e in n)if(n[e]===xe)return e;throw Error("Could not find renamed property on target object.")}function zt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(zt).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function mD(n,e){return n?e?`${n} ${e}`:n:e||""}var RN=xe({__forward_ref__:xe});function sT(n){return n.__forward_ref__=sT,n.toString=function(){return zt(this())},n}function en(n){return aT(n)?n():n}function aT(n){return typeof n=="function"&&n.hasOwnProperty(RN)&&n.__forward_ref__===sT}function B(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function It(n){return{providers:n.providers||[],imports:n.imports||[]}}function ud(n){return yD(n,uT)||yD(n,lT)}function cT(n){return ud(n)!==null}function yD(n,e){return n.hasOwnProperty(e)?n[e]:null}function MN(n){let e=n&&(n[uT]||n[lT]);return e||null}function vD(n){return n&&(n.hasOwnProperty(_D)||n.hasOwnProperty(xN))?n[_D]:null}var uT=xe({\u0275prov:xe}),_D=xe({\u0275inj:xe}),lT=xe({ngInjectableDef:xe}),xN=xe({ngInjectorDef:xe}),z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=B({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function dT(n){return n&&!!n.\u0275providers}var NN=xe({\u0275cmp:xe}),kN=xe({\u0275dir:xe}),PN=xe({\u0275pipe:xe}),ON=xe({\u0275mod:xe}),Fl=xe({\u0275fac:xe}),$a=xe({__NG_ELEMENT_ID__:xe}),wD=xe({__NG_ENV_ID__:xe});function qa(n){return typeof n=="string"?n:n==null?"":String(n)}function FN(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():qa(n)}function fT(n,e){throw new Q(-200,n)}function Yg(n,e){throw new Q(-201,!1)}var ue=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ue||{}),mg;function hT(){return mg}function Xt(n){let e=mg;return mg=n,e}function pT(n,e,t){let r=ud(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ue.Optional)return null;if(e!==void 0)return e;Yg(n,"Injector")}var LN={},Ei=LN,yg="__NG_DI_FLAG__",Ll=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?al:Ei,r)}},Vl="ngTempTokenPath",VN="ngTokenPath",jN=/\n/gm,BN="\u0275",ED="__source";function UN(n,e=ue.Default){if(Ma()===void 0)throw new Q(-203,!1);if(Ma()===null)return pT(n,void 0,e);{let t=Ma(),r;return t instanceof Ll?r=t.injector:r=t,r.get(n,e&ue.Optional?null:void 0,e)}}function F(n,e=ue.Default){return(hT()||UN)(en(n),e)}function O(n,e=ue.Default){return F(n,ld(e))}function ld(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function vg(n){let e=[];for(let t=0;t<n.length;t++){let r=en(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Q(900,!1);let i,o=ue.Default;for(let s=0;s<r.length;s++){let a=r[s],u=$N(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(F(i,o))}else e.push(F(r))}return e}function gT(n,e){return n[yg]=e,n.prototype[yg]=e,n}function $N(n){return n[yg]}function HN(n,e,t,r){let i=n[Vl];throw e[ED]&&i.unshift(e[ED]),n.message=qN(`
`+n.message,i,t,r),n[VN]=i,n[Vl]=null,n}function qN(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==BN?n.slice(2):n;let i=zt(e);if(Array.isArray(e))i=e.map(zt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):zt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(jN,`
  `)}`}var Jg=gT(oT("Optional"),8);var zN=gT(oT("SkipSelf"),4);function Bo(n,e){let t=n.hasOwnProperty(Fl);return t?n[Fl]:null}function Xg(n,e){n.forEach(t=>Array.isArray(t)?Xg(t,e):e(t))}function mT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function jl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var Uo={},Rn=[],za=new z(""),yT=new z("",-1),vT=new z(""),Bl=class{get(e,t=Ei){if(t===Ei){let r=new Error(`NullInjectorError: No provider for ${zt(e)}!`);throw r.name="NullInjectorError",r}return t}};function _T(n,e){let t=n[ON]||null;if(!t&&e===!0)throw new Error(`Type ${zt(n)} does not have '\u0275mod' property.`);return t}function Ti(n){return n[NN]||null}function GN(n){return n[kN]||null}function WN(n){return n[PN]||null}function wT(n){return{\u0275providers:n}}function KN(...n){return{\u0275providers:ET(!0,n),\u0275fromNgModule:!0}}function ET(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Xg(e,s=>{let a=s;_g(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&IT(i,o),t}function IT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];em(i,o=>{e(o,r)})}}function _g(n,e,t,r){if(n=en(n),!n)return!1;let i=null,o=vD(n),s=!o&&Ti(n);if(!o&&!s){let u=n.ngModule;if(o=vD(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)_g(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Xg(o.imports,f=>{_g(f,e,t,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&IT(l,e)}if(!a){let l=Bo(i)||(()=>new i);e({provide:i,useFactory:l,deps:Rn},i),e({provide:vT,useValue:i,multi:!0},i),e({provide:za,useValue:()=>F(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;em(u,f=>{e(f,l)})}}else return!1;return i!==n&&n.providers!==void 0}function em(n,e){for(let t of n)dT(t)&&(t=t.\u0275providers),Array.isArray(t)?em(t,e):e(t)}var QN=xe({provide:String,useValue:xe});function DT(n){return n!==null&&typeof n=="object"&&QN in n}function ZN(n){return!!(n&&n.useExisting)}function YN(n){return!!(n&&n.useFactory)}function wg(n){return typeof n=="function"}var dd=new z(""),Nl={},ID={},ug;function tm(){return ug===void 0&&(ug=new Bl),ug}var Ke=class{},Ga=class extends Ke{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Ig(e,s=>this.processProvider(s)),this.records.set(yT,Po(void 0,this)),i.has("environment")&&this.records.set(Ke,Po(void 0,this));let o=this.records.get(dd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(vT,Rn,ue.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?al:Ei,r)}destroy(){Ba(this),this._destroyed=!0;let e=Te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Te(e)}}onDestroy(e){return Ba(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ba(this);let t=Qn(this),r=Xt(void 0),i;try{return e()}finally{Qn(t),Xt(r)}}get(e,t=Ei,r=ue.Default){if(Ba(this),e.hasOwnProperty(wD))return e[wD](this);r=ld(r);let i,o=Qn(this),s=Xt(void 0);try{if(!(r&ue.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=rk(e)&&ud(e);l&&this.injectableDefInScope(l)?u=Po(Eg(e),Nl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ue.Self?tm():this.parent;return t=r&ue.Optional&&t===Ei?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Vl]=a[Vl]||[]).unshift(zt(e)),o)throw a;return HN(a,e,"R3InjectorError",this.source)}else throw a}finally{Xt(s),Qn(o)}}resolveInjectorInitializers(){let e=Te(null),t=Qn(this),r=Xt(void 0),i;try{let o=this.get(za,Rn,ue.Self);for(let s of o)s()}finally{Qn(t),Xt(r),Te(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(zt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=en(e);let t=wg(e)?e:en(e&&e.provide),r=XN(e);if(!wg(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Po(void 0,Nl,!0),i.factory=()=>vg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Te(null);try{return t.value===ID?fT(zt(e)):t.value===Nl&&(t.value=ID,t.value=t.factory()),typeof t.value=="object"&&t.value&&nk(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=en(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Eg(n){let e=ud(n),t=e!==null?e.factory:Bo(n);if(t!==null)return t;if(n instanceof z)throw new Q(204,!1);if(n instanceof Function)return JN(n);throw new Q(204,!1)}function JN(n){if(n.length>0)throw new Q(204,!1);let t=MN(n);return t!==null?()=>t.factory(n):()=>new n}function XN(n){if(DT(n))return Po(void 0,n.useValue);{let e=ek(n);return Po(e,Nl)}}function ek(n,e,t){let r;if(wg(n)){let i=en(n);return Bo(i)||Eg(i)}else if(DT(n))r=()=>en(n.useValue);else if(YN(n))r=()=>n.useFactory(...vg(n.deps||[]));else if(ZN(n))r=()=>F(en(n.useExisting));else{let i=en(n&&(n.useClass||n.provide));if(tk(n))r=()=>new i(...vg(n.deps));else return Bo(i)||Eg(i)}return r}function Ba(n){if(n.destroyed)throw new Q(205,!1)}function Po(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function tk(n){return!!n.deps}function nk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function rk(n){return typeof n=="function"||typeof n=="object"&&n instanceof z}function Ig(n,e){for(let t of n)Array.isArray(t)?Ig(t,e):t&&dT(t)?Ig(t.\u0275providers,e):e(t)}function Gt(n,e){let t;n instanceof Ga?(Ba(n),t=n):t=new Ll(n);let r,i=Qn(t),o=Xt(void 0);try{return e()}finally{Qn(i),Xt(o)}}function TT(){return hT()!==void 0||Ma()!=null}function nm(n){if(!TT())throw new Q(-203,!1)}function ik(n){let e=or.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function ok(n){return typeof n=="function"}var sr=0,Ie=1,oe=2,Mt=3,hn=4,gn=5,Ul=6,DD=7,pn=8,Wa=9,tr=10,Vt=11,Ka=12,TD=13,Xa=14,xn=15,$o=16,Oo=17,Ho=18,fd=19,CT=20,kr=21,lg=22,$l=23,tn=24,Vo=25,nr=26,bT=1;var Ci=7,Hl=8,ql=9,nn=10;function Ii(n){return Array.isArray(n)&&typeof n[bT]=="object"}function ar(n){return Array.isArray(n)&&n[bT]===!0}function ST(n){return(n.flags&4)!==0}function ec(n){return n.componentOffset>-1}function AT(n){return(n.flags&1)===1}function Ri(n){return!!n.template}function zl(n){return(n[oe]&512)!==0}function tc(n){return(n[oe]&256)===256}var Dg=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function RT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var hd=(()=>{let n=()=>MT;return n.ngInherit=!0,n})();function MT(n){return n.type.prototype.ngOnChanges&&(n.setInput=ak),sk}function sk(){let n=NT(this),e=n?.current;if(e){let t=n.previous;if(t===Uo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function ak(n,e,t,r,i){let o=this.declaredInputs[r],s=NT(n)||ck(n,{previous:Uo,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Dg(l&&l.currentValue,t,u===Uo),RT(n,e,i,t)}var xT="__ngSimpleChanges__";function NT(n){return n[xT]||null}function ck(n,e){return n[xT]=e}var CD=null;var Oe=function(n,e=null,t){CD?.(n,e,t)},uk="svg",lk="math";function rr(n){for(;Array.isArray(n);)n=n[sr];return n}function dk(n,e){return rr(e[n])}function Fr(n,e){return rr(e[n.index])}function kT(n,e){return n.data[e]}function Pr(n,e){let t=e[n];return Ii(t)?t:t[sr]}function rm(n){return(n[oe]&128)===128}function fk(n){return ar(n[Mt])}function Gl(n,e){return e==null?null:n[e]}function PT(n){n[Oo]=0}function OT(n){n[oe]&1024||(n[oe]|=1024,rm(n)&&nc(n))}function pd(n){return!!(n[oe]&9216||n[tn]?.dirty)}function Tg(n){n[tr].changeDetectionScheduler?.notify(8),n[oe]&64&&(n[oe]|=1024),pd(n)&&nc(n)}function nc(n){n[tr].changeDetectionScheduler?.notify(0);let e=bi(n);for(;e!==null&&!(e[oe]&8192||(e[oe]|=8192,!rm(e)));)e=bi(e)}function FT(n,e){if(tc(n))throw new Q(911,!1);n[kr]===null&&(n[kr]=[]),n[kr].push(e)}function hk(n,e){if(n[kr]===null)return;let t=n[kr].indexOf(e);t!==-1&&n[kr].splice(t,1)}function bi(n){let e=n[Mt];return ar(e)?e[Mt]:e}var De={lFrame:zT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Cg=!1;function pk(){return De.lFrame.elementDepthCount}function gk(){De.lFrame.elementDepthCount++}function mk(){De.lFrame.elementDepthCount--}function LT(){return De.bindingsEnabled}function yk(){return De.skipHydrationRootTNode!==null}function vk(n){return De.skipHydrationRootTNode===n}function _k(){De.skipHydrationRootTNode=null}function it(){return De.lFrame.lView}function Mi(){return De.lFrame.tView}function cr(){let n=VT();for(;n!==null&&n.type===64;)n=n.parent;return n}function VT(){return De.lFrame.currentTNode}function wk(){let n=De.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function rc(n,e){let t=De.lFrame;t.currentTNode=n,t.isParent=e}function jT(){return De.lFrame.isParent}function Ek(){De.lFrame.isParent=!1}function BT(){return Cg}function bD(n){let e=Cg;return Cg=n,e}function Ik(){return De.lFrame.bindingIndex}function Dk(n){return De.lFrame.bindingIndex=n}function UT(){return De.lFrame.bindingIndex++}function Tk(n){let e=De.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Ck(){return De.lFrame.inI18n}function bk(n,e){let t=De.lFrame;t.bindingIndex=t.bindingRootIndex=n,bg(e)}function Sk(){return De.lFrame.currentDirectiveIndex}function bg(n){De.lFrame.currentDirectiveIndex=n}function $T(n){De.lFrame.currentQueryIndex=n}function Ak(n){let e=n[Ie];return e.type===2?e.declTNode:e.type===1?n[gn]:null}function HT(n,e,t){if(t&ue.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ue.Host);)if(i=Ak(o),i===null||(o=o[Xa],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=De.lFrame=qT();return r.currentTNode=e,r.lView=n,!0}function im(n){let e=qT(),t=n[Ie];De.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function qT(){let n=De.lFrame,e=n===null?null:n.child;return e===null?zT(n):e}function zT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function GT(){let n=De.lFrame;return De.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var WT=GT;function om(){let n=GT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function gd(){return De.lFrame.selectedIndex}function Si(n){De.lFrame.selectedIndex=n}function KT(){let n=De.lFrame;return kT(n.tView,n.selectedIndex)}function Rk(){return De.lFrame.currentNamespace}var QT=!0;function sm(){return QT}function am(n){QT=n}function Mk(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=MT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function ZT(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function kl(n,e,t){YT(n,e,3,t)}function Pl(n,e,t,r){(n[oe]&3)===t&&YT(n,e,t,r)}function dg(n,e){let t=n[oe];(t&3)===e&&(t&=16383,t+=1,n[oe]=t)}function YT(n,e,t,r){let i=r!==void 0?n[Oo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Oo]+=65536),(a<o||o==-1)&&(xk(n,t,e,u),n[Oo]=(n[Oo]&4294901760)+u+2),u++}function SD(n,e){Oe(4,n,e);let t=Te(null);try{e.call(n)}finally{Te(t),Oe(5,n,e)}}function xk(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[oe]>>14<n[Oo]>>16&&(n[oe]&3)===e&&(n[oe]+=16384,SD(a,o)):SD(a,o)}var jo=-1,Qa=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function Nk(n){return(n.flags&8)!==0}function kk(n){return(n.flags&16)!==0}function Pk(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];Fk(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Ok(n){return n===3||n===4||n===6}function Fk(n){return n.charCodeAt(0)===64}function cm(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?AD(n,t,i,null,e[++r]):AD(n,t,i,null,null))}}return n}function AD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function JT(n){return n!==jo}function Wl(n){return n&32767}function Lk(n){return n>>16}function Kl(n,e){let t=Lk(n),r=e;for(;t>0;)r=r[Xa],t--;return r}var Sg=!0;function RD(n){let e=Sg;return Sg=n,e}var Vk=256,XT=Vk-1,eC=5,jk=0,Mn={};function Bk(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty($a)&&(r=t[$a]),r==null&&(r=t[$a]=jk++);let i=r&XT,o=1<<i;e.data[n+(i>>eC)]|=o}function tC(n,e){let t=nC(n,e);if(t!==-1)return t;let r=e[Ie];r.firstCreatePass&&(n.injectorIndex=e.length,fg(r.data,n),fg(e,null),fg(r.blueprint,null));let i=um(n,e),o=n.injectorIndex;if(JT(i)){let s=Wl(i),a=Kl(i,e),u=a[Ie].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function fg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function nC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function um(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=aC(i),r===null)return jo;if(t++,i=i[Xa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return jo}function Uk(n,e,t){Bk(n,e,t)}function rC(n,e,t){if(t&ue.Optional||n!==void 0)return n;Yg(e,"NodeInjector")}function iC(n,e,t,r){if(t&ue.Optional&&r===void 0&&(r=null),(t&(ue.Self|ue.Host))===0){let i=n[Wa],o=Xt(void 0);try{return i?i.get(e,r,t&ue.Optional):pT(e,r,t&ue.Optional)}finally{Xt(o)}}return rC(r,e,t)}function oC(n,e,t,r=ue.Default,i){if(n!==null){if(e[oe]&2048&&!(r&ue.Self)){let s=Gk(n,e,t,r,Mn);if(s!==Mn)return s}let o=sC(n,e,t,r,Mn);if(o!==Mn)return o}return iC(e,t,r,i)}function sC(n,e,t,r,i){let o=qk(t);if(typeof o=="function"){if(!HT(e,n,r))return r&ue.Host?rC(i,t,r):iC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ue.Optional))Yg(t);else return s}finally{WT()}}else if(typeof o=="number"){let s=null,a=nC(n,e),u=jo,l=r&ue.Host?e[xn][gn]:null;for((a===-1||r&ue.SkipSelf)&&(u=a===-1?um(n,e):e[a+8],u===jo||!xD(r,!1)?a=-1:(s=e[Ie],a=Wl(u),e=Kl(u,e)));a!==-1;){let f=e[Ie];if(MD(o,a,f.data)){let p=$k(a,e,t,s,r,l);if(p!==Mn)return p}u=e[a+8],u!==jo&&xD(r,e[Ie].data[a+8]===l)&&MD(o,a,e)?(s=f,a=Wl(u),e=Kl(u,e)):a=-1}}return i}function $k(n,e,t,r,i,o){let s=e[Ie],a=s.data[n+8],u=r==null?ec(a)&&Sg:r!=s&&(a.type&3)!==0,l=i&ue.Host&&o===a,f=Hk(a,s,t,u,l);return f!==null?Ag(e,s,f,a):Mn}function Hk(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,f=o>>20,p=r?a:a+f,m=i?a+f:l;for(let y=p;y<m;y++){let b=s[y];if(y<u&&t===b||y>=u&&b.type===t)return y}if(i){let y=s[u];if(y&&Ri(y)&&y.type===t)return u}return null}function Ag(n,e,t,r){let i=n[t],o=e.data;if(i instanceof Qa){let s=i;s.resolving&&fT(FN(o[t]));let a=RD(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Xt(s.injectImpl):null,f=HT(n,r,ue.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&Mk(t,o[t],e)}finally{l!==null&&Xt(l),RD(a),s.resolving=!1,WT()}}return i}function qk(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty($a)?n[$a]:void 0;return typeof e=="number"?e>=0?e&XT:zk:e}function MD(n,e,t){let r=1<<n;return!!(t[e+(n>>eC)]&r)}function xD(n,e){return!(n&ue.Self)&&!(n&ue.Host&&e)}var Di=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return oC(this._tNode,this._lView,e,ld(r),t)}};function zk(){return new Di(cr(),it())}function lm(n){return Ja(()=>{let e=n.prototype.constructor,t=e[Fl]||Rg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Fl]||Rg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Rg(n){return aT(n)?()=>{let e=Rg(en(n));return e&&e()}:Bo(n)}function Gk(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[oe]&2048&&!zl(s);){let a=sC(o,s,t,r|ue.Self,Mn);if(a!==Mn)return a;let u=o.parent;if(!u){let l=s[CT];if(l){let f=l.get(t,Mn,r);if(f!==Mn)return f}u=aC(s),s=s[Xa]}o=u}return i}function aC(n){let e=n[Ie],t=e.type;return t===2?e.declTNode:t===1?n[gn]:null}function ND(n,e=null,t=null,r){let i=cC(n,e,t,r);return i.resolveInjectorInitializers(),i}function cC(n,e=null,t=null,r,i=new Set){let o=[t||Rn,KN(n)];return r=r||(typeof n=="object"?void 0:zt(n)),new Ga(o,e||tm(),r||null,i)}var xt=class n{static THROW_IF_NOT_FOUND=Ei;static NULL=new Bl;static create(e,t){if(Array.isArray(e))return ND({name:""},t,e,"");{let r=e.name??"";return ND({name:r},e.parent,e.providers,r)}}static \u0275prov=B({token:n,providedIn:"any",factory:()=>F(yT)});static __NG_ELEMENT_ID__=-1};var Wk=new z("");Wk.__NG_ELEMENT_ID__=n=>{let e=cr();if(e===null)throw new Q(204,!1);if(e.type&2)return e.value;if(n&ue.Optional)return null;throw new Q(204,!1)};var uC=!1,Wo=(()=>{class n{static __NG_ELEMENT_ID__=Kk;static __NG_ENV_ID__=t=>t}return n})(),Mg=class extends Wo{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return FT(this._lView,e),()=>hk(this._lView,e)}};function Kk(){return new Mg(it())}var Ai=class{},lC=new z("",{providedIn:"root",factory:()=>!1});var dC=new z(""),fC=new z(""),xi=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new ht(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})(),dm=(()=>{class n{internalPendingTasks=O(xi);scheduler=O(Ai);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return x(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})(),xg=class extends Ve{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,TT()&&(this.destroyRef=O(Wo,{optional:!0})??void 0,this.pendingTasks=O(xi,{optional:!0})??void 0)}emit(e){let t=Te(null);try{super.next(e)}finally{Te(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof He&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Lt=xg;function Ql(...n){}function hC(n){let e,t;function r(){n=Ql;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function kD(n){return queueMicrotask(()=>n()),()=>{n=Ql}}var fm="isAngularZone",Zl=fm+"_ID",Qk=0,he=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Lt(!1);onMicrotaskEmpty=new Lt(!1);onStable=new Lt(!1);onError=new Lt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=uC}=e;if(typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Jk(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(fm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Zk,Ql,Ql);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Zk={};function hm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Yk(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){hC(()=>{n.callbackScheduled=!1,Ng(n),n.isCheckStableRunning=!0,hm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Ng(n)}function Jk(n){let e=()=>{Yk(n)},t=Qk++;n._inner=n._inner.fork({name:"angular",properties:{[fm]:!0,[Zl]:t,[Zl+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(Xk(u))return r.invokeTask(o,s,a,u);try{return PD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),OD(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return PD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!eP(u)&&e(),OD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Ng(n),hm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Ng(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function PD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function OD(n){n._nesting--,hm(n)}var Yl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Lt;onMicrotaskEmpty=new Lt;onStable=new Lt;onError=new Lt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Xk(n){return pC(n,"__ignore_ng_zone__")}function eP(n){return pC(n,"__scheduler_tick__")}function pC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function tP(n="zone.js",e){return n==="noop"?new Yl:n==="zone.js"?new he(e):n}var ir=class{_console=console;handleError(e){this._console.error("ERROR",e)}},nP=new z("",{providedIn:"root",factory:()=>{let n=O(he),e=O(ir);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function FD(n,e){return iT(n,e)}function rP(n){return iT(rT,n)}var gC=(FD.required=rP,FD);function iP(){return md(cr(),it())}function md(n,e){return new yd(Fr(n,e))}var yd=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=iP}return n})();function mC(n){return(n.flags&128)===128}var yC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(yC||{}),vC=new Map,oP=0;function sP(){return oP++}function aP(n){vC.set(n[fd],n)}function kg(n){vC.delete(n[fd])}var LD="__ngContext__";function ic(n,e){Ii(e)?(n[LD]=e[fd],aP(e)):n[LD]=e}function _C(n){return EC(n[Ka])}function wC(n){return EC(n[hn])}function EC(n){for(;n!==null&&!ar(n);)n=n[hn];return n}var Pg;function IC(n){Pg=n}function cP(){if(Pg!==void 0)return Pg;if(typeof document<"u")return document;throw new Q(210,!1)}var pm=new z("",{providedIn:"root",factory:()=>uP}),uP="ng",gm=new z(""),rn=new z("",{providedIn:"platform",factory:()=>"unknown"});var mm=new z("",{providedIn:"root",factory:()=>cP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var lP="h",dP="b";var DC=!1,fP=new z("",{providedIn:"root",factory:()=>DC});var ym=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(ym||{}),Ko=new z(""),VD=new Set;function oc(n){VD.has(n)||(VD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var TC=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=hP}return n})();function hP(){return new TC(it(),cr())}var Fo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Fo||{}),CC=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})(),pP=[Fo.EarlyRead,Fo.Write,Fo.MixedReadWrite,Fo.Read],gP=(()=>{class n{ngZone=O(he);scheduler=O(Ai);errorHandler=O(ir,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){O(Ko,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Oe(16),this.executing=!0;for(let r of pP)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Oe(17)}register(t){let{view:r}=t;r!==void 0?((r[Vo]??=[]).push(t),nc(r),r[oe]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(ym.AFTER_NEXT_RENDER,t):t()}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})(),Og=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Vo];e&&(this.view[Vo]=e.filter(t=>t!==this))}};function vm(n,e){!e?.injector&&nm(vm);let t=e?.injector??O(xt);return oc("NgAfterNextRender"),yP(n,t,e,!0)}function mP(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function yP(n,e,t,r){let i=e.get(CC);i.impl??=e.get(gP);let o=e.get(Ko,null,{optional:!0}),s=t?.phase??Fo.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(Wo):null,u=e.get(TC,null,{optional:!0}),l=new Og(i.impl,mP(n,s),u?.view,r,a,o?.snapshot(null));return i.impl.register(l),l}var vP=()=>null;function bC(n,e,t=!1){return vP(n,e,t)}function SC(n,e){let t=n.contentQueries;if(t!==null){let r=Te(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];$T(o),a.contentQueries(2,e[s],s)}}}finally{Te(r)}}}function Fg(n,e,t){$T(0);let r=Te(null);try{e(n,t)}finally{Te(r)}}function AC(n,e,t){if(ST(e)){let r=Te(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{Te(r)}}}var Nn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Nn||{});var Jl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tT})`}};function RC(n){return n instanceof Jl?n.changingThisBreaksApplicationSecurity:n}function _P(n,e){let t=wP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${tT})`)}return t===e}function wP(n){return n instanceof Jl&&n.getTypeName()||null}var EP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function IP(n){return n=String(n),n.match(EP)?n:"unsafe:"+n}var MC=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(MC||{});function xC(n){let e=DP();return e?e.sanitize(MC.URL,n)||"":_P(n,"URL")?RC(n):IP(qa(n))}function DP(){let n=it();return n&&n[tr].sanitizer}function NC(n){return n instanceof Function?n():n}function TP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var kC="ng-template";function CP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&TP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(_m(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function _m(n){return n.type===4&&n.value!==kC}function bP(n,e,t){let r=n.type===4&&!t?kC:n.value;return e===r}function SP(n,e,t){let r=4,i=n.attrs,o=i!==null?MP(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!fn(r)&&!fn(u))return!1;if(s&&fn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!bP(n,u,t)||u===""&&e.length===1){if(fn(r))return!1;s=!0}}else if(r&8){if(i===null||!CP(n,i,u,t)){if(fn(r))return!1;s=!0}}else{let l=e[++a],f=AP(u,i,_m(n),t);if(f===-1){if(fn(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(fn(r))return!1;s=!0}}}}return fn(r)||s}function fn(n){return(n&1)===0}function AP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return xP(e,n)}function RP(n,e,t=!1){for(let r=0;r<e.length;r++)if(SP(n,e[r],t))return!0;return!1}function MP(n){for(let e=0;e<n.length;e++){let t=n[e];if(Ok(t))return e}return n.length}function xP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function jD(n,e){return n?":not("+e.trim()+")":e}function NP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!fn(s)&&(e+=jD(o,i),i=""),r=s,o=o||!fn(r);t++}return i!==""&&(e+=jD(o,i)),e}function kP(n){return n.map(NP).join(",")}function PP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!fn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Ni={};function OP(n,e){return n.createText(e)}function FP(n,e,t){n.setValue(e,t)}function PC(n,e,t){return n.createElement(e,t)}function Xl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function OC(n,e,t){n.appendChild(e,t)}function BD(n,e,t,r,i){r!==null?Xl(n,e,t,r,i):OC(n,e,t)}function LP(n,e,t){n.removeChild(null,e,t)}function VP(n,e,t){n.setAttribute(e,"style",t)}function jP(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function FC(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Pk(n,e,r),i!==null&&jP(n,e,i),o!==null&&VP(n,e,o)}function wm(n,e,t,r,i,o,s,a,u,l,f){let p=nr+r,m=p+i,y=BP(p,m),b=typeof l=="function"?l():l;return y[Ie]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:f}}function BP(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ni);return t}function UP(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=wm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Em(n,e,t,r,i,o,s,a,u,l,f){let p=e.blueprint.slice();return p[sr]=i,p[oe]=r|4|128|8|64|1024,(l!==null||n&&n[oe]&2048)&&(p[oe]|=2048),PT(p),p[Mt]=p[Xa]=n,p[pn]=t,p[tr]=s||n&&n[tr],p[Vt]=a||n&&n[Vt],p[Wa]=u||n&&n[Wa]||null,p[gn]=o,p[fd]=sP(),p[Ul]=f,p[CT]=l,p[xn]=e.type==2?n[xn]:p,p}function $P(n,e,t){let r=Fr(e,n),i=UP(t),o=n[tr].rendererFactory,s=Im(n,Em(n,i,null,LC(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function LC(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function VC(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Im(n,e){return n[Ka]?n[TD][hn]=e:n[Ka]=e,n[TD]=e,e}function pe(n=1){jC(Mi(),it(),gd()+n,!1)}function jC(n,e,t,r){if(!r)if((e[oe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&kl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Pl(e,o,0,t)}Si(t)}var vd=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(vd||{});function Lg(n,e,t,r){let i=Te(null);try{let[o,s,a]=n.inputs[t],u=null;(s&vd.SignalBased)!==0&&(u=e[o][Eo]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):RT(e,u,o,r)}finally{Te(i)}}function BC(n,e,t,r,i){let o=gd(),s=r&2;try{Si(-1),s&&e.length>nr&&jC(n,e,nr,!1),Oe(s?2:0,i),t(r,i)}finally{Si(o),Oe(s?3:1,i)}}function Dm(n,e,t){KP(n,e,t),(t.flags&64)===64&&QP(n,e,t)}function UC(n,e,t=Fr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function HP(n,e,t,r){let o=r.get(fP,DC)||t===Nn.ShadowDom,s=n.selectRootElement(e,o);return qP(s),s}function qP(n){zP(n)}var zP=()=>null;function GP(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function $C(n,e,t,r,i,o,s,a){if(!a&&Tm(e,n,t,r,i)){ec(e)&&WP(t,e.index);return}if(e.type&3){let u=Fr(e,t);r=GP(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function WP(n,e){let t=Pr(e,n);t[oe]&16||(t[oe]|=64)}function KP(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ec(t)&&$P(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||tC(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=Ag(e,n,s,t);if(ic(u,e),o!==null&&YP(e,s-r,u,a,t,o),Ri(a)){let l=Pr(t.index,e);l[pn]=Ag(e,n,s,t)}}}function QP(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=Sk();try{Si(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];bg(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&ZP(u,l)}}finally{Si(-1),bg(s)}}function ZP(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function HC(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];RP(e,o.selectors,!1)&&(r??=[],Ri(o)?r.unshift(o):r.push(o))}return r}function YP(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Lg(r,t,u,l)}}function JP(n,e){let t=n[Wa],r=t?t.get(ir,null):null;r&&r.handleError(e)}function Tm(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],f=s[u+1],p=e.data[l];Lg(p,t[l],f,i),a=!0}if(o)for(let u of o){let l=t[u],f=e.data[u];Lg(f,l,r,i),a=!0}return a}function XP(n,e){let t=Pr(e,n),r=t[Ie];e1(r,t);let i=t[sr];i!==null&&t[Ul]===null&&(t[Ul]=bC(i,t[Wa])),Oe(18),Cm(r,t,t[pn]),Oe(19,t[pn])}function e1(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Cm(n,e,t){im(e);try{let r=n.viewQuery;r!==null&&Fg(1,r,t);let i=n.template;i!==null&&BC(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ho]?.finishViewCreation(n),n.staticContentQueries&&SC(n,e),n.staticViewQueries&&Fg(2,n.viewQuery,t);let o=n.components;o!==null&&t1(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[oe]&=-5,om()}}function t1(n,e){for(let t=0;t<e.length;t++)XP(n,e[t])}function n1(n,e,t,r){let i=Te(null);try{let o=e.tView,a=n[oe]&4096?4096:16,u=Em(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[$o]=l;let f=n[Ho];return f!==null&&(u[Ho]=f.createEmbeddedView(o)),Cm(o,u,t),u}finally{Te(i)}}function UD(n,e){return!e||e.firstChild===null||mC(n)}var r1;function bm(n,e){return r1(n,e)}var Qo=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Qo||{});function qC(n){return(n.flags&32)===32}function Lo(n,e,t,r,i){if(r!=null){let o,s=!1;ar(r)?o=r:Ii(r)&&(s=!0,r=r[sr]);let a=rr(r);n===0&&t!==null?i==null?OC(e,t,a):Xl(e,t,a,i||null,!0):n===1&&t!==null?Xl(e,t,a,i||null,!0):n===2?LP(e,a,s):n===3&&e.destroyNode(a),o!=null&&g1(e,n,o,t,i)}}function i1(n,e){zC(n,e),e[sr]=null,e[gn]=null}function o1(n,e,t,r,i,o){r[sr]=i,r[gn]=e,_d(n,r,t,1,i,o)}function zC(n,e){e[tr].changeDetectionScheduler?.notify(9),_d(n,e,e[Vt],2,null,null)}function s1(n){let e=n[Ka];if(!e)return hg(n[Ie],n);for(;e;){let t=null;if(Ii(e))t=e[Ka];else{let r=e[nn];r&&(t=r)}if(!t){for(;e&&!e[hn]&&e!==n;)Ii(e)&&hg(e[Ie],e),e=e[Mt];e===null&&(e=n),Ii(e)&&hg(e[Ie],e),t=e&&e[hn]}e=t}}function Sm(n,e){let t=n[ql],r=t.indexOf(e);t.splice(r,1)}function GC(n,e){if(tc(e))return;let t=e[Vt];t.destroyNode&&_d(n,e,t,3,null,null),s1(e)}function hg(n,e){if(tc(e))return;let t=Te(null);try{e[oe]&=-129,e[oe]|=256,e[tn]&&Up(e[tn]),c1(n,e),a1(n,e),e[Ie].type===1&&e[Vt].destroy();let r=e[$o];if(r!==null&&ar(e[Mt])){r!==e[Mt]&&Sm(r,e);let i=e[Ho];i!==null&&i.detachView(n)}kg(e)}finally{Te(t)}}function a1(n,e){let t=n.cleanup,r=e[DD];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[DD]=null);let i=e[kr];if(i!==null){e[kr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[$l];if(o!==null){e[$l]=null;for(let s of o)s.destroy()}}function c1(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Qa)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Oe(4,a,u);try{u.call(a)}finally{Oe(5,a,u)}}else{Oe(4,i,o);try{o.call(i)}finally{Oe(5,i,o)}}}}}function u1(n,e,t){return l1(n,e.parent,t)}function l1(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[sr];if(ec(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Nn.None||i===Nn.Emulated)return null}return Fr(r,t)}function d1(n,e,t){return h1(n,e,t)}function f1(n,e,t){return n.type&40?Fr(n,t):null}var h1=f1,$D;function Am(n,e,t,r){let i=u1(n,r,e),o=e[Vt],s=r.parent||e[gn],a=d1(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)BD(o,i,t[u],a,!1);else BD(o,i,t,a,!1);$D!==void 0&&$D(o,r,e,t,i)}function Ua(n,e){if(e!==null){let t=e.type;if(t&3)return Fr(e,n);if(t&4)return Vg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ua(n,r);{let i=n[e.index];return ar(i)?Vg(-1,i):rr(i)}}else{if(t&128)return Ua(n,e.next);if(t&32)return bm(e,n)()||rr(n[e.index]);{let r=WC(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=bi(n[xn]);return Ua(i,r)}else return Ua(n,e.next)}}}return null}function WC(n,e){if(e!==null){let r=n[xn][gn],i=e.projection;return r.projection[i]}return null}function Vg(n,e){let t=nn+n+1;if(t<e.length){let r=e[t],i=r[Ie].firstChild;if(i!==null)return Ua(r,i)}return e[Ci]}function Rm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&ic(rr(a),r),t.flags|=2),!qC(t))if(u&8)Rm(n,e,t.child,r,i,o,!1),Lo(e,n,i,a,o);else if(u&32){let l=bm(t,r),f;for(;f=l();)Lo(e,n,i,f,o);Lo(e,n,i,a,o)}else u&16?p1(n,e,r,t,i,o):Lo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function _d(n,e,t,r,i,o){Rm(t,r,n.firstChild,e,i,o,!1)}function p1(n,e,t,r,i,o){let s=t[xn],u=s[gn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];Lo(e,n,i,f,o)}else{let l=u,f=s[Mt];mC(r)&&(l.flags|=128),Rm(n,e,l,f,i,o,!0)}}function g1(n,e,t,r,i){let o=t[Ci],s=rr(t);o!==s&&Lo(e,n,r,o,i);for(let a=nn;a<t.length;a++){let u=t[a];_d(u[Ie],u,n,e,r,o)}}function ed(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(rr(o)),ar(o)&&m1(o,r);let s=t.type;if(s&8)ed(n,e,t.child,r);else if(s&32){let a=bm(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=WC(e,t);if(Array.isArray(a))r.push(...a);else{let u=bi(e[xn]);ed(u[Ie],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function m1(n,e){for(let t=nn;t<n.length;t++){let r=n[t],i=r[Ie].firstChild;i!==null&&ed(r[Ie],r,i,e)}n[Ci]!==n[sr]&&e.push(n[Ci])}function KC(n){if(n[Vo]!==null){for(let e of n[Vo])e.impl.addSequence(e);n[Vo].length=0}}var QC=[];function y1(n){return n[tn]??v1(n)}function v1(n){let e=QC.pop()??Object.create(w1);return e.lView=n,e}function _1(n){n.lView[tn]!==n&&(n.lView=null,QC.push(n))}var w1=be(L({},il),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{nc(n.lView)},consumerOnSignalRead(){this.lView[tn]=this}});function E1(n){let e=n[tn]??Object.create(I1);return e.lView=n,e}var I1=be(L({},il),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=bi(n.lView);for(;e&&!ZC(e[Ie]);)e=bi(e);e&&OT(e)},consumerOnSignalRead(){this.lView[tn]=this}});function ZC(n){return n.type!==2}function YC(n){if(n[$l]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[$l])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[oe]&8192)}}var D1=100;function JC(n,e=!0,t=0){let i=n[tr].rendererFactory,o=!1;o||i.begin?.();try{T1(n,t)}catch(s){throw e&&JP(n,s),s}finally{o||i.end?.()}}function T1(n,e){let t=BT();try{bD(!0),jg(n,e);let r=0;for(;pd(n);){if(r===D1)throw new Q(103,!1);r++,jg(n,1)}}finally{bD(t)}}function C1(n,e,t,r){if(tc(e))return;let i=e[oe],o=!1,s=!1;im(e);let a=!0,u=null,l=null;o||(ZC(n)?(l=y1(e),u=jp(l)):Fp()===null?(a=!1,l=E1(e),u=jp(l)):e[tn]&&(Up(e[tn]),e[tn]=null));try{PT(e),Dk(n.bindingStartIndex),t!==null&&BC(n,e,t,2,r);let f=(i&3)===3;if(!o)if(f){let y=n.preOrderCheckHooks;y!==null&&kl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Pl(e,y,0,null),dg(e,0)}if(s||b1(e),YC(e),XC(e,0),n.contentQueries!==null&&SC(n,e),!o)if(f){let y=n.contentCheckHooks;y!==null&&kl(e,y)}else{let y=n.contentHooks;y!==null&&Pl(e,y,1),dg(e,1)}A1(n,e);let p=n.components;p!==null&&tb(e,p,0);let m=n.viewQuery;if(m!==null&&Fg(2,m,r),!o)if(f){let y=n.viewCheckHooks;y!==null&&kl(e,y)}else{let y=n.viewHooks;y!==null&&Pl(e,y,2),dg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[lg]){for(let y of e[lg])y();e[lg]=null}o||(KC(e),e[oe]&=-73)}catch(f){throw o||nc(e),f}finally{l!==null&&(BI(l,u),a&&_1(l)),om()}}function XC(n,e){for(let t=_C(n);t!==null;t=wC(t))for(let r=nn;r<t.length;r++){let i=t[r];eb(i,e)}}function b1(n){for(let e=_C(n);e!==null;e=wC(e)){if(!(e[oe]&2))continue;let t=e[ql];for(let r=0;r<t.length;r++){let i=t[r];OT(i)}}}function S1(n,e,t){Oe(18);let r=Pr(e,n);eb(r,t),Oe(19,r[pn])}function eb(n,e){rm(n)&&jg(n,e)}function jg(n,e){let r=n[Ie],i=n[oe],o=n[tn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Bp(o)),s||=!1,o&&(o.dirty=!1),n[oe]&=-9217,s)C1(r,n,r.template,n[pn]);else if(i&8192){YC(n),XC(n,1);let a=r.components;a!==null&&tb(n,a,1),KC(n)}}function tb(n,e,t){for(let r=0;r<e.length;r++)S1(n,e[r],t)}function A1(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Si(~i);else{let o=i,s=t[++r],a=t[++r];bk(s,o);let u=e[o];Oe(24,u),a(2,u),Oe(25,u)}}}finally{Si(-1)}}function nb(n,e){let t=BT()?64:1088;for(n[tr].changeDetectionScheduler?.notify(e);n;){n[oe]|=t;let r=bi(n);if(zl(n)&&!r)return n;n=r}return null}function rb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function R1(n,e,t,r=!0){let i=e[Ie];if(M1(i,e,n,t),r){let s=Vg(t,n),a=e[Vt],u=a.parentNode(n[Ci]);u!==null&&o1(i,n[gn],a,e,u,s)}let o=e[Ul];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Bg(n,e){if(n.length<=nn)return;let t=nn+e,r=n[t];if(r){let i=r[$o];i!==null&&i!==n&&Sm(i,r),e>0&&(n[t-1][hn]=r[hn]);let o=jl(n,nn+e);i1(r[Ie],r);let s=o[Ho];s!==null&&s.detachView(o[Ie]),r[Mt]=null,r[hn]=null,r[oe]&=-129}return r}function M1(n,e,t,r){let i=nn+r,o=t.length;r>0&&(t[i-1][hn]=e),r<o-nn?(e[hn]=t[i],mT(t,nn+r,e)):(t.push(e),e[hn]=null),e[Mt]=t;let s=e[$o];s!==null&&t!==s&&ib(s,e);let a=e[Ho];a!==null&&a.insertView(n),Tg(e),e[oe]|=128}function ib(n,e){let t=n[ql],r=e[Mt];if(Ii(r))n[oe]|=2;else{let i=r[Mt][xn];e[xn]!==i&&(n[oe]|=2)}t===null?n[ql]=[e]:t.push(e)}var Za=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Ie];return ed(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[pn]}set context(e){this._lView[pn]=e}get destroyed(){return tc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Mt];if(ar(e)){let t=e[Hl],r=t?t.indexOf(this):-1;r>-1&&(Bg(e,r),jl(t,r))}this._attachedToViewContainer=!1}GC(this._lView[Ie],this._lView)}onDestroy(e){FT(this._lView,e)}markForCheck(){nb(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[oe]&=-129}reattach(){Tg(this._lView),this._lView[oe]|=128}detectChanges(){this._lView[oe]|=1024,JC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=zl(this._lView),t=this._lView[$o];t!==null&&!e&&Sm(t,this._lView),zC(this._lView[Ie],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e;let t=zl(this._lView),r=this._lView[$o];r!==null&&!t&&ib(r,this._lView),Tg(this._lView)}};var Mm=(()=>{class n{static __NG_ELEMENT_ID__=k1}return n})(),x1=Mm,N1=class extends x1{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=n1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Za(i)}};function k1(){return P1(cr(),it())}function P1(n,e){return n.type&4?new N1(e,n,md(n,e)):null}function xm(n,e,t,r,i){let o=n.data[e];if(o===null)o=O1(n,e,t,r,i),Ck()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=wk();o.injectorIndex=s===null?-1:s.injectorIndex}return rc(o,!0),o}function O1(n,e,t,r,i){let o=VT(),s=jT(),a=s?o:o&&o.parent,u=n.data[e]=L1(n,a,t,e,r,i);return F1(n,u,o,s),u}function F1(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function L1(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return yk()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var H9=new RegExp(`^(\\d+)*(${dP}|${lP})*(.*)`);var V1=()=>null;function HD(n,e){return V1(n,e)}var j1=class{},ob=class{},Ug=class{resolveComponentFactory(e){throw Error(`No component factory found for ${zt(e)}.`)}},wd=class{static NULL=new Ug},qo=class{};var B1=(()=>{class n{static \u0275prov=B({token:n,providedIn:"root",factory:()=>null})}return n})();var pg={},$g=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=ld(r);let i=this.injector.get(e,pg,r);return i!==pg||t===pg?i:this.parentInjector.get(e,t,r)}};function qD(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=mD(i,a);else if(o==2){let u=a,l=e[++s];r=mD(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ze(n,e=ue.Default){let t=it();if(t===null)return F(n,e);let r=cr();return oC(r,t,en(n),e)}function sb(){let n="invalid";throw new Error(n)}function ab(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,u=null,l=null,f=$1(s);f===null?a=s:[a,u,l]=f,z1(n,e,t,a,o,u,l)}o!==null&&r!==null&&U1(t,r,o)}function U1(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Q(-301,!1);r.push(e[i],o)}}function $1(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&Ri(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,H1(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function H1(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function q1(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function z1(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&Ri(y)&&(u=!0,q1(n,t,m)),Uk(tC(t,e),n,y.type)}Y1(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,f=!1,p=VC(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=cm(t.mergedAttrs,y.hostAttrs),W1(n,t,e,p,y),Z1(p,y,i),s!==null&&s.has(y)){let[A,N]=s.get(y);t.directiveToIndex.set(y.type,[p,A+t.directiveStart,N+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let b=y.type.prototype;!l&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!f&&(b.ngOnChanges||b.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),p++}G1(n,t,o)}function G1(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))zD(0,e,i,r),zD(1,e,i,r),WD(e,r,!1);else{let o=t.get(i);GD(0,e,o,r),GD(1,e,o,r),WD(e,r,!0)}}}function zD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),cb(e,o)}}function GD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),cb(e,s)}}function cb(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function WD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||_m(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let f of l)if(f===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let f=0;f<l.length;f+=2)if(l[f]===e){s??=[],s.push(l[f+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function W1(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Bo(i.type,!0)),s=new Qa(o,Ri(i),ze);n.blueprint[r]=s,t[r]=s,K1(n,e,r,VC(n,t,i.hostVars,Ni),i)}function K1(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Q1(s)!=a&&s.push(a),s.push(t,r,o)}}function Q1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Z1(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ri(e)&&(t[""]=n)}}function Y1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function ub(n,e,t,r,i,o,s,a){let u=e.consts,l=Gl(u,s),f=xm(e,n,2,r,l);return o&&ab(e,t,f,Gl(u,a),i),f.mergedAttrs=cm(f.mergedAttrs,f.attrs),f.attrs!==null&&qD(f,f.attrs,!1),f.mergedAttrs!==null&&qD(f,f.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,f),f}function lb(n,e){ZT(n,e),ST(e)&&n.queries.elementEnd(e)}var td=class extends wd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ti(e);return new zo(t,this.ngModule)}};function J1(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&vd.SignalBased)!==0};return i&&(o.transform=i),o})}function X1(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function eO(n,e,t){let r=e instanceof Ke?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new $g(t,r):t}function tO(n){let e=n.get(qo,null);if(e===null)throw new Q(407,!1);let t=n.get(B1,null),r=n.get(Ai,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function nO(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return PC(e,t,t==="svg"?uk:t==="math"?lk:null)}var zo=class extends ob{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=J1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=X1(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=kP(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){Oe(22);let o=Te(null);try{let s=this.componentDef,a=r?["ng-version","19.2.7"]:PP(this.componentDef.selectors[0]),u=wm(0,null,null,1,0,null,null,null,null,[a],null),l=eO(s,i||this.ngModule,e),f=tO(l),p=f.rendererFactory.createRenderer(null,s),m=r?HP(p,r,s.encapsulation,l):nO(s,p),y=Em(null,u,null,512|LC(s),null,null,f,p,l,null,bC(m,l,!0));y[nr]=m,im(y);let b=null;try{let A=ub(nr,u,y,"#host",()=>[this.componentDef],!0,0);m&&(FC(p,m,A),ic(m,y)),Dm(u,y,A),AC(u,A,y),lb(u,A),t!==void 0&&rO(A,this.ngContentSelectors,t),b=Pr(A.index,y),y[pn]=b[pn],Cm(u,y,null)}catch(A){throw b!==null&&kg(b),kg(y),A}finally{Oe(23),om()}return new Hg(this.componentType,y)}finally{Te(o)}}},Hg=class extends j1{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=kT(t[Ie],nr),this.location=md(this._tNode,t),this.instance=Pr(this._tNode.index,t)[pn],this.hostView=this.changeDetectorRef=new Za(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Tm(r,i[Ie],i,e,t);this.previousInputValues.set(e,t);let s=Pr(r.index,i);nb(s,1)}get injector(){return new Di(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function rO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var sc=(()=>{class n{static __NG_ELEMENT_ID__=iO}return n})();function iO(){let n=cr();return sO(n,it())}var oO=sc,db=class extends oO{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return md(this._hostTNode,this._hostLView)}get injector(){return new Di(this._hostTNode,this._hostLView)}get parentInjector(){let e=um(this._hostTNode,this._hostLView);if(JT(e)){let t=Kl(e,this._hostLView),r=Wl(e),i=t[Ie].data[r+8];return new Di(i,t)}else return new Di(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=KD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-nn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=HD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,UD(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!ok(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let u=s?e:new zo(Ti(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let A=(s?l:this.parentInjector).get(Ke,null);A&&(o=A)}let f=Ti(u.componentType??{}),p=HD(this._lContainer,f?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,a,UD(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(fk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Mt],l=new db(u,u[gn],u[Mt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return R1(s,i,o,r),e.attachToViewContainerRef(),mT(gg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=KD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Bg(this._lContainer,t);r&&(jl(gg(this._lContainer),t),GC(r[Ie],r))}detach(e){let t=this._adjustIndex(e,-1),r=Bg(this._lContainer,t);return r&&jl(gg(this._lContainer),t)!=null?new Za(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function KD(n){return n[Hl]}function gg(n){return n[Hl]||(n[Hl]=[])}function sO(n,e){let t,r=e[n.index];return ar(r)?t=r:(t=rb(r,e,null,n),e[n.index]=t,Im(e,t)),cO(t,e,n,r),new db(t,n,e)}function aO(n,e){let t=n[Vt],r=t.createComment(""),i=Fr(e,n),o=t.parentNode(i);return Xl(t,o,r,t.nextSibling(i),!1),r}var cO=dO,uO=()=>!1;function lO(n,e,t){return uO(n,e,t)}function dO(n,e,t,r){if(n[Ci])return;let i;t.type&8?i=rr(r):i=aO(e,t),n[Ci]=i}function fO(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(mO))}return o}return nd.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,f=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(y=>{a[l+m]=y,f.splice(f.indexOf(p),1),f.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>yO(o));e.push(u)}),pO(),Promise.all(e).then(()=>{})}var nd=new Map,hO=new Set;function pO(){let n=nd;return nd=new Map,n}function gO(){return nd.size===0}function mO(n){return typeof n=="string"?n:n.text()}function yO(n){hO.delete(n)}var Ya=class{},Nm=class{};var rd=class extends Ya{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new td(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=_T(e);this._bootstrapComponents=NC(o.bootstrap),this._r3Injector=cC(e,t,[{provide:Ya,useValue:this},{provide:wd,useValue:this.componentFactoryResolver},...r],zt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},id=class extends Nm{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new rd(this.moduleType,e,[])}};function vO(n,e,t){return new rd(n,e,t,!1)}var qg=class extends Ya{injector;componentFactoryResolver=new td(this);instance=null;constructor(e){super();let t=new Ga([...e.providers,{provide:Ya,useValue:this},{provide:wd,useValue:this.componentFactoryResolver}],e.parent||tm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ac(n,e,t=null){return new qg({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var _O=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=ET(!1,t.type),i=r.length>0?ac([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=B({token:n,providedIn:"environment",factory:()=>new n(F(Ke))})}return n})();function ut(n){return Ja(()=>{let e=fb(n),t=be(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===yC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(_O).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Nn.Emulated,styles:n.styles||Rn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&oc("NgStandalone"),hb(t);let r=n.dependencies;return t.directiveDefs=QD(r,!1),t.pipeDefs=QD(r,!0),t.id=TO(t),t})}function wO(n){return Ti(n)||GN(n)}function EO(n){return n!==null}function Dt(n){return Ja(()=>({type:n.type,bootstrap:n.bootstrap||Rn,declarations:n.declarations||Rn,imports:n.imports||Rn,exports:n.exports||Rn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function IO(n,e){if(n==null)return Uo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=vd.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function DO(n){if(n==null)return Uo;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function cc(n){return Ja(()=>{let e=fb(n);return hb(e),e})}function fb(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Uo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Rn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:IO(n.inputs,e),outputs:DO(n.outputs),debugInfo:null}}function hb(n){n.features?.forEach(e=>e(n))}function QD(n,e){if(!n)return null;let t=e?WN:wO;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(EO)}function TO(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function pb(n){return bO(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function CO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function bO(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function od(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function SO(n,e,t,r){let i=od(n,e,t);return od(n,e+1,r)||i}function AO(n,e,t,r,i,o,s,a,u){let l=e.consts,f=xm(e,n,4,s||null,a||null);LT()&&ab(e,t,f,Gl(l,u),HC),f.mergedAttrs=cm(f.mergedAttrs,f.attrs),ZT(e,f);let p=f.tView=wm(2,f,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}function RO(n,e,t,r,i,o,s,a,u,l){let f=t+nr,p=e.firstCreatePass?AO(f,e,n,r,i,o,s,a,u):e.data[f];rc(p,!1);let m=MO(e,n,p,t);sm()&&Am(e,n,m,p),ic(m,n);let y=rb(m,n,m,p);return n[f]=y,Im(n,y),lO(y,p,n),AT(p)&&Dm(e,n,p),u!=null&&UC(n,p,l),p}function Wt(n,e,t,r,i,o,s,a){let u=it(),l=Mi(),f=Gl(l.consts,o);return RO(u,l,n,e,t,r,i,f,s,a),Wt}var MO=xO;function xO(n,e,t,r){return am(!0),e[Vt].createComment("")}var gb=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var km=new z(""),uc=new z(""),Ed=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];taskTrackingZone=null;constructor(t,r,i){this._ngZone=t,this.registry=r,Pm||(NO(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(F(he),F(Id),F(uc))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),Id=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Pm?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function NO(n){Pm=n}var Pm,kO=(()=>{class n{static \u0275prov=B({token:n,providedIn:"root",factory:()=>new zg})}return n})(),zg=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Dd(n){return!!n&&typeof n.then=="function"}function PO(n){return!!n&&typeof n.subscribe=="function"}var mb=new z("");function Om(n){return wT([{provide:mb,multi:!0,useValue:n}])}var yb=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=O(mb,{optional:!0})??[];injector=O(xt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Gt(this.injector,i);if(Dd(o))t.push(o);else if(PO(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fm=new z("");function OO(){$p(()=>{throw new Q(600,!1)})}function FO(n){return n.isBoundToModule}var LO=10;function vb(n,e){return Array.isArray(e)?e.reduce(vb,n):L(L({},n),e)}var Or=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=O(nP);afterRenderManager=O(CC);zonelessEnabled=O(lC);rootEffectScheduler=O(kO);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Ve;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=O(xi).hasPendingTasks.pipe(W(t=>!t));constructor(){O(Ko,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=O(Ke);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=xt.NULL){Oe(10);let o=t instanceof ob;if(!this._injector.get(yb).done){let y="";throw new Q(405,y)}let a;o?a=t:a=this._injector.get(wd).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let u=FO(a)?void 0:this._injector.get(Ya),l=r||a.selector,f=a.create(i,[],l,u),p=f.location.nativeElement,m=f.injector.get(km,null);return m?.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),Ol(this.components,f),m?.unregisterApplication(p)}),this._loadComponent(f),Oe(11,f),f}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Oe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(ym.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Q(101,!1);let t=Te(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Te(t),this.afterTick.next(),Oe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(qo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<LO;)Oe(14),this.synchronizeOnce(),Oe(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)VO(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>pd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Ol(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Fm,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ol(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Q(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ol(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function VO(n,e,t,r){if(!t&&!pd(n))return;JC(n,e,t&&!r?0:1)}function _b(n,e,t,r){return od(n,UT(),t)?e+qa(t)+r:Ni}function jO(n,e,t,r,i,o){let s=Ik(),a=SO(n,s,t,i);return Tk(2),a?e+qa(t)+r+qa(i)+o:Ni}function Nt(n,e,t){let r=it(),i=UT();if(od(r,i,e)){let o=Mi(),s=KT();$C(o,s,r,n,e,r[Vt],t,!1)}return Nt}function ZD(n,e,t,r,i){Tm(e,n,t,i?"class":"style",r)}function te(n,e,t,r){let i=it(),o=Mi(),s=nr+n,a=i[Vt],u=o.firstCreatePass?ub(s,o,i,e,HC,LT(),t,r):o.data[s],l=BO(o,i,u,a,e,n);i[s]=l;let f=AT(u);return rc(u,!0),FC(a,l,u),!qC(u)&&sm()&&Am(o,i,l,u),(pk()===0||f)&&ic(l,i),gk(),f&&(Dm(o,i,u),AC(o,u,i)),r!==null&&UC(i,u),te}function ne(){let n=cr();jT()?Ek():(n=n.parent,rc(n,!1));let e=n;vk(e)&&_k(),mk();let t=Mi();return t.firstCreatePass&&lb(t,e),e.classesWithoutHost!=null&&Nk(e)&&ZD(t,e,it(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&kk(e)&&ZD(t,e,it(),e.stylesWithoutHost,!1),ne}function ve(n,e,t,r){return te(n,e,t,r),ne(),ve}var BO=(n,e,t,r,i,o)=>(am(!0),PC(r,i,Rk()));var sd="en-US";var UO=sd;function $O(n){typeof n=="string"&&(UO=n.toLowerCase().replace(/_/g,"-"))}function Lm(n,e,t){return wb(n,"",e,"",t),Lm}function wb(n,e,t,r,i){let o=it(),s=_b(o,e,t,r);if(s!==Ni){let a=Mi(),u=KT();$C(a,u,o,n,s,o[Vt],i,!1)}return wb}function ge(n,e=""){let t=it(),r=Mi(),i=n+nr,o=r.firstCreatePass?xm(r,i,1,e,null):r.data[i],s=HO(r,t,o,e,n);t[i]=s,sm()&&Am(r,t,s,o),rc(o,!1)}var HO=(n,e,t,r,i)=>(am(!0),OP(e[Vt],r));function ot(n){return on("",n,""),ot}function on(n,e,t){let r=it(),i=_b(r,n,e,t);return i!==Ni&&Eb(r,gd(),i),on}function lc(n,e,t,r,i){let o=it(),s=jO(o,n,e,t,r,i);return s!==Ni&&Eb(o,gd(),s),lc}function Eb(n,e,t){let r=dk(e,n);FP(n[Vt],r,t)}var xl=null;function qO(n){xl!==null&&(n.defaultEncapsulation!==xl.defaultEncapsulation||n.preserveWhitespaces!==xl.preserveWhitespaces)||(xl=n)}var Go=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Ib=new Go("19.2.7"),Gg=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Td=(()=>{class n{compileModuleSync(t){return new id(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=_T(t),o=NC(i.declarations).reduce((s,a)=>{let u=Ti(a);return u&&s.push(new zo(u)),s},[]);return new Gg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zO=new z("");function GO(n,e,t){let r=new id(t);return Promise.resolve(r)}function YD(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var WO=(()=>{class n{zone=O(he);changeDetectionScheduler=O(Ai);applicationRef=O(Or);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function KO({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new he(be(L({},Db()),{scheduleInRootZone:t})),[{provide:he,useFactory:n},{provide:za,multi:!0,useFactory:()=>{let r=O(WO,{optional:!0});return()=>r.initialize()}},{provide:za,multi:!0,useFactory:()=>{let r=O(QO);return()=>{r.initialize()}}},e===!0?{provide:dC,useValue:!0}:[],{provide:fC,useValue:t??uC}]}function Db(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var QO=(()=>{class n{subscription=new He;initialized=!1;zone=O(he);pendingTasks=O(xi);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{he.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ZO=(()=>{class n{appRef=O(Or);taskService=O(xi);ngZone=O(he);zonelessEnabled=O(lC);tracing=O(Ko,{optional:!0});disableScheduling=O(dC,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new He;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Zl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(fC,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Yl||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?kD:hC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Zl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,kD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function YO(){return typeof $localize<"u"&&$localize.locale||sd}var Tb=new z("",{providedIn:"root",factory:()=>O(Tb,ue.Optional|ue.SkipSelf)||YO()});var ad=new z(""),JO=new z("");function ja(n){return!n.moduleRef}function XO(n){let e=ja(n)?n.r3Injector:n.moduleRef.injector,t=e.get(he);return t.run(()=>{ja(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ir,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),ja(n)){let o=()=>e.destroy(),s=n.platformInjector.get(ad);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(ad);s.add(o),n.moduleRef.onDestroy(()=>{Ol(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return tF(r,t,()=>{let o=e.get(yb);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Tb,sd);if($O(s||sd),!e.get(JO,!0))return ja(n)?e.get(Or):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(ja(n)){let u=e.get(Or);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return eF(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function eF(n,e){let t=n.injector.get(Or);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Q(-403,!1);e.push(n)}function tF(n,e,t){try{let r=t();return Dd(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Cb=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>tP(r?.ngZone,be(L({},Db({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[KO({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Ai,useExisting:ZO}],u=vO(t.moduleType,this.injector,a);return XO({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=vb({},r);return GO(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Q(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(ad,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(F(xt))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Ha=null,bb=new z("");function nF(n){if(Ha&&!Ha.get(bb,!1))throw new Q(400,!1);OO(),Ha=n;let e=n.get(Cb);return oF(n),e}function Vm(n,e,t=[]){let r=`Platform: ${e}`,i=new z(r);return(o=[])=>{let s=Sb();if(!s||s.injector.get(bb,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):nF(rF(a,r))}return iF(i)}}function rF(n=[],e){return xt.create({name:e,providers:[{provide:dd,useValue:"platform"},{provide:ad,useValue:new Set([()=>Ha=null])},...n]})}function iF(n){let e=Sb();if(!e)throw new Q(401,!1);return e}function Sb(){return Ha?.get(Cb)??null}function oF(n){let e=n.get(gm,null);Gt(n,()=>{e?.forEach(t=>t())})}function dc(){return!1}var ki=(()=>{class n{static __NG_ELEMENT_ID__=sF}return n})();function sF(n){return aF(cr(),it(),(n&16)===16)}function aF(n,e,t){if(ec(n)&&!t){let r=Pr(n.index,e);return new Za(r,r)}else if(n.type&175){let r=e[xn];return new Za(r,e)}return null}var Wg=class{constructor(){}supports(e){return pb(e)}create(e){return new Kg(e)}},cF=(n,e)=>e,Kg=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||cF}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<JD(r,i,o)?t:r,a=JD(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,f=u-i;if(l!=f){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,b=y+m;f<=b&&b<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=f-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!pb(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,CO(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Qg(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new cd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new cd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Qg=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Zg=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},cd=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Zg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function JD(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function XD(){return new jm([new Wg])}var jm=(()=>{class n{factories;static \u0275prov=B({token:n,providedIn:"root",factory:XD});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||XD()),deps:[[n,new zN,new Jg]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Q(901,!1)}}return n})();var Ab=Vm(null,"core",[]),Rb=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(F(Or))};static \u0275mod=Dt({type:n});static \u0275inj=It({})}return n})();var eT=class{[Eo];constructor(e){this[Eo]=e}destroy(){this[Eo].destroy()}};function Mb(n){let e=Ti(n);if(!e)return null;let t=new zo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var lt=new z("");var kb=null;function kn(){return kb}function Bm(n){kb??=n}var fc=class{},hc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>O(Pb),providedIn:"platform"})}return n})(),Um=new z(""),Pb=(()=>{class n extends hc{_location;_history;_doc=O(lt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return kn().getBaseHref(this._doc)}onPopState(t){let r=kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Cd(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function xb(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function mn(n){return n&&n[0]!=="?"?`?${n}`:n}var ur=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>O(Sd),providedIn:"root"})}return n})(),bd=new z(""),Sd=(()=>{class n extends ur{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(lt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Cd(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+mn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+mn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+mn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(F(hc),F(bd,8))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lr=(()=>{class n{_subject=new Ve;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=dF(xb(Nb(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+mn(r))}normalize(t){return n.stripTrailingSlash(lF(this._basePath,Nb(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=mn;static joinWithSlash=Cd;static stripTrailingSlash=xb;static \u0275fac=function(r){return new(r||n)(F(ur))};static \u0275prov=B({token:n,factory:()=>uF(),providedIn:"root"})}return n})();function uF(){return new Lr(F(ur))}function lF(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Nb(n){return n.replace(/\/index.html$/,"")}function dF(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var $m=(()=>{class n extends ur{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Cd(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+mn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+mn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(F(hc),F(bd,8))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})();var Ad=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},jt=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ad(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Ob(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Ob(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ze(sc),ze(Mm),ze(jm))};static \u0275dir=cc({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Ob(n,e){n.context.$implicit=e.item}var Hm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Dt({type:n});static \u0275inj=It({})}return n})();function qm(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var zm="browser",Lb="server";function Vr(n){return n===Lb}var pc=class{};var Vb=(()=>{class n{static \u0275prov=B({token:n,providedIn:"root",factory:()=>new Gm(O(lt),window)})}return n})(),Gm=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=pF(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function pF(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var xd=new z(""),Zm=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(F(xd),F(he))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),gc=class{_doc;constructor(e){this._doc=e}manager},Rd="ng-app-id";function jb(n){for(let e of n)e.remove()}function Bb(n,e){let t=e.createElement("style");return t.textContent=n,t}function gF(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Rd}="${e}"],link[${Rd}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Rd),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Km(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Ym=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Vr(o),gF(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Bb);r?.forEach(i=>this.addUsage(i,this.external,Km))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(jb(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])jb(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Bb(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Km(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Rd,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(F(lt),F(pm),F(mm,8),F(rn))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),Wm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Jm=/%COMP%/g;var $b="%COMP%",mF=`_nghost-${$b}`,yF=`_ngcontent-${$b}`,vF=!0,_F=new z("",{providedIn:"root",factory:()=>vF});function wF(n){return yF.replace(Jm,n)}function EF(n){return mF.replace(Jm,n)}function Hb(n,e){return e.map(t=>t.replace(Jm,n))}var Xm=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,f=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=f,this.platformIsServer=Vr(a),this.defaultRenderer=new mc(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Nn.ShadowDom&&(r=be(L({},r),{encapsulation:Nn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Md?i.applyToHost(t):i instanceof yc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Nn.Emulated:o=new Md(u,l,r,this.appId,f,s,a,p,m);break;case Nn.ShadowDom:return new Qm(u,l,t,r,s,a,this.nonce,p,m);default:o=new yc(u,l,r,f,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(F(Zm),F(Ym),F(pm),F(_F),F(lt),F(rn),F(he),F(mm),F(Ko,8))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),mc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Wm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Ub(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ub(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Wm[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Wm[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Qo.DashCase|Qo.Important)?e.style.setProperty(t,r,i&Qo.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Qo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=kn().getGlobalEventTarget(this.doc,e),!e))throw new Q(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Ub(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Qm=class extends mc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=Hb(i.id,f);for(let m of f){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=Km(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},yc=class extends mc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=l?Hb(l,f):f,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Md=class extends yc{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let f=i+"-"+r.id;super(e,t,r,o,s,a,u,l,f),this.contentAttr=wF(f),this.hostAttr=EF(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Nd=class n extends fc{supportsDOMEvents=!0;static makeCurrent(){Bm(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=IF();return t==null?null:DF(t)}resetBaseElement(){vc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return qm(document.cookie,e)}},vc=null;function IF(){return vc=vc||document.querySelector("base"),vc?vc.getAttribute("href"):null}function DF(n){return new URL(n,document.baseURI).pathname}var kd=class{addToWindow(e){or.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new Q(5103,!1);return o},or.getAllAngularTestabilities=()=>e.getAllTestabilities(),or.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=or.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};or.frameworkStabilizers||(or.frameworkStabilizers=[]),or.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?kn().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},TF=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),zb=(()=>{class n extends gc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(F(lt))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),qb=["alt","control","meta","shift"],CF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bF={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Gb=(()=>{class n extends gc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>kn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),qb.forEach(l=>{let f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=CF[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),qb.forEach(s=>{if(s!==i){let a=bF[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(F(lt))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})();function SF(){Nd.makeCurrent()}function AF(){return new ir}function RF(){return IC(document),document}var MF=[{provide:rn,useValue:zm},{provide:gm,useValue:SF,multi:!0},{provide:lt,useFactory:RF}],ey=Vm(Ab,"browser",MF);var xF=[{provide:uc,useClass:kd},{provide:km,useClass:Ed,deps:[he,Id,uc]},{provide:Ed,useClass:Ed,deps:[he,Id,uc]}],NF=[{provide:dd,useValue:"root"},{provide:ir,useFactory:AF},{provide:xd,useClass:zb,multi:!0,deps:[lt]},{provide:xd,useClass:Gb,multi:!0,deps:[lt]},Xm,Ym,Zm,{provide:qo,useExisting:Xm},{provide:pc,useClass:TF},[]],ty=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Dt({type:n});static \u0275inj=It({providers:[...NF,...xF],imports:[Hm,Rb]})}return n})();var Wb=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(F(lt))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ae="primary",Nc=Symbol("RouteTitle"),sy=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ns(n){return new sy(n)}function PF(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function OF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Pn(n[t],e[t]))return!1;return!0}function Pn(n,e){let t=n?ay(n):void 0,r=e?ay(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!t0(n[i],e[i]))return!1;return!0}function ay(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function t0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function n0(n){return n.length>0?n[n.length-1]:null}function jr(n){return rg(n)?n:Dd(n)?Ee(Promise.resolve(n)):Y(n)}var FF={exact:i0,subset:o0},r0={exact:LF,subset:VF,ignored:()=>!0};function Kb(n,e,t){return FF[t.paths](n.root,e.root,t.matrixParams)&&r0[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function LF(n,e){return Pn(n,e)}function i0(n,e,t){if(!Oi(n.segments,e.segments)||!Fd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!i0(n.children[r],e.children[r],t))return!1;return!0}function VF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>t0(n[t],e[t]))}function o0(n,e,t){return s0(n,e,e.segments,t)}function s0(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Oi(i,t)||e.hasChildren()||!Fd(i,t,r))}else if(n.segments.length===t.length){if(!Oi(n.segments,t)||!Fd(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!o0(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Oi(n.segments,i)||!Fd(n.segments,i,r)||!n.children[ae]?!1:s0(n.children[ae],e,o,r)}}function Fd(n,e,t){return e.every((r,i)=>r0[t](n[i].parameters,r.parameters))}var dr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ce([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ns(this.queryParams),this._queryParamMap}toString(){return UF.serialize(this)}},Ce=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ld(this)}},Pi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ns(this.parameters),this._parameterMap}toString(){return c0(this)}};function jF(n,e){return Oi(n,e)&&n.every((t,r)=>Pn(t.parameters,e[r].parameters))}function Oi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function BF(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ae&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ae&&(t=t.concat(e(i,r)))}),t}var ss=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>new Fi,providedIn:"root"})}return n})(),Fi=class{parse(e){let t=new uy(e);return new dr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${_c(e.root,!0)}`,r=qF(e.queryParams),i=typeof e.fragment=="string"?`#${$F(e.fragment)}`:"";return`${t}${r}${i}`}},UF=new Fi;function Ld(n){return n.segments.map(e=>c0(e)).join("/")}function _c(n,e){if(!n.hasChildren())return Ld(n);if(e){let t=n.children[ae]?_c(n.children[ae],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ae&&r.push(`${i}:${_c(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=BF(n,(r,i)=>i===ae?[_c(n.children[ae],!1)]:[`${i}:${_c(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ae]!=null?`${Ld(n)}/${t[0]}`:`${Ld(n)}/(${t.join("//")})`}}function a0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pd(n){return a0(n).replace(/%3B/gi,";")}function $F(n){return encodeURI(n)}function cy(n){return a0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vd(n){return decodeURIComponent(n)}function Qb(n){return Vd(n.replace(/\+/g,"%20"))}function c0(n){return`${cy(n.path)}${HF(n.parameters)}`}function HF(n){return Object.entries(n).map(([e,t])=>`;${cy(e)}=${cy(t)}`).join("")}function qF(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Pd(t)}=${Pd(i)}`).join("&"):`${Pd(t)}=${Pd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var zF=/^[^\/()?;#]+/;function ny(n){let e=n.match(zF);return e?e[0]:""}var GF=/^[^\/()?;=#]+/;function WF(n){let e=n.match(GF);return e?e[0]:""}var KF=/^[^=?&#]+/;function QF(n){let e=n.match(KF);return e?e[0]:""}var ZF=/^[^&#]+/;function YF(n){let e=n.match(ZF);return e?e[0]:""}var uy=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ce([],{}):new Ce([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ae]=new Ce(e,t)),r}parseSegment(){let e=ny(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new Pi(Vd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=WF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=ny(this.remaining);i&&(r=i,this.capture(r))}e[Vd(t)]=Vd(r)}parseQueryParam(e){let t=QF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=YF(this.remaining);s&&(r=s,this.capture(r))}let i=Qb(t),o=Qb(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ny(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Q(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ae);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ae]:new Ce([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}};function u0(n){return n.segments.length>0?new Ce([],{[ae]:n}):n}function l0(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=l0(i);if(r===ae&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ce(n.segments,e);return JF(t)}function JF(n){if(n.numberOfChildren===1&&n.children[ae]){let e=n.children[ae];return new Ce(n.segments.concat(e.segments),e.children)}return n}function rs(n){return n instanceof dr}function XF(n,e,t=null,r=null){let i=d0(n);return f0(i,e,t,r)}function d0(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Ce(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=u0(r);return e??i}function f0(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return ry(i,i,i,t,r);let o=eL(e);if(o.toRoot())return ry(i,i,new Ce([],{}),t,r);let s=tL(o,i,n),a=s.processChildren?Ec(s.segmentGroup,s.index,o.commands):p0(s.segmentGroup,s.index,o.commands);return ry(i,s.segmentGroup,a,t,r)}function Bd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Dc(n){return typeof n=="object"&&n!=null&&n.outlets}function ry(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`});let s;n===e?s=t:s=h0(n,e,t);let a=u0(l0(s));return new dr(a,o,i)}function h0(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=h0(o,e,t)}),new Ce(n.segments,r)}var Ud=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Bd(r[0]))throw new Q(4003,!1);let i=r.find(Dc);if(i&&i!==n0(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function eL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ud(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ud(t,e,r)}var Xo=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function tL(n,e,t){if(n.isAbsolute)return new Xo(e,!0,0);if(!t)return new Xo(e,!1,NaN);if(t.parent===null)return new Xo(t,!0,0);let r=Bd(n.commands[0])?0:1,i=t.segments.length-1+r;return nL(t,i,n.numberOfDoubleDots)}function nL(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new Xo(r,!1,i-o)}function rL(n){return Dc(n[0])?n[0].outlets:{[ae]:n}}function p0(n,e,t){if(n??=new Ce([],{}),n.segments.length===0&&n.hasChildren())return Ec(n,e,t);let r=iL(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ce(n.segments.slice(0,r.pathIndex),{});return o.children[ae]=new Ce(n.segments.slice(r.pathIndex),n.children),Ec(o,0,i)}else return r.match&&i.length===0?new Ce(n.segments,{}):r.match&&!n.hasChildren()?ly(n,e,t):r.match?Ec(n,0,i):ly(n,e,t)}function Ec(n,e,t){if(t.length===0)return new Ce(n.segments,{});{let r=rL(t),i={};if(Object.keys(r).some(o=>o!==ae)&&n.children[ae]&&n.numberOfChildren===1&&n.children[ae].segments.length===0){let o=Ec(n.children[ae],e,t);return new Ce(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=p0(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ce(n.segments,i)}}function iL(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Dc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!Yb(u,l,s))return o;r+=2}else{if(!Yb(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ly(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Dc(o)){let u=oL(o.outlets);return new Ce(r,u)}if(i===0&&Bd(t[0])){let u=n.segments[e];r.push(new Pi(u.path,Zb(t[0]))),i++;continue}let s=Dc(o)?o.outlets[ae]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Bd(a)?(r.push(new Pi(s,Zb(a))),i+=2):(r.push(new Pi(s,{})),i++)}return new Ce(r,{})}function oL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=ly(new Ce([],{}),0,r))}),e}function Zb(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Yb(n,e,t){return n==t.path&&Pn(e,t.parameters)}var jd="imperative",dt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(dt||{}),sn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Li=class extends sn{type=dt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},On=class extends sn{urlAfterRedirects;type=dt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Qt||{}),Tc=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Tc||{}),lr=class extends sn{reason;code;type=dt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},fr=class extends sn{reason;code;type=dt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Cc=class extends sn{error;target;type=dt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},$d=class extends sn{urlAfterRedirects;state;type=dt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dy=class extends sn{urlAfterRedirects;state;type=dt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fy=class extends sn{urlAfterRedirects;state;shouldActivate;type=dt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},hy=class extends sn{urlAfterRedirects;state;type=dt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},py=class extends sn{urlAfterRedirects;state;type=dt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gy=class{route;type=dt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},my=class{route;type=dt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},yy=class{snapshot;type=dt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vy=class{snapshot;type=dt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_y=class{snapshot;type=dt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wy=class{snapshot;type=dt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bc=class{routerEvent;position;anchor;type=dt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Sc=class{},is=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function sL(n,e){return n.providers&&!n._injector&&(n._injector=ac(n.providers,e,`Route: ${n.path}`)),n._injector??e}function yn(n){return n.outlet||ae}function aL(n,e){let t=n.filter(r=>yn(r)===e);return t.push(...n.filter(r=>yn(r)!==e)),t}function kc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ey=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return kc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new as(this.rootInjector)}},as=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ey(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(F(Ke))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Iy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Iy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Dy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Dy(e,this._root).map(t=>t.value)}};function Iy(n,e){if(n===e.value)return e;for(let t of e.children){let r=Iy(n,t);if(r)return r}return null}function Dy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Dy(n,t);if(r.length)return r.unshift(e),r}return[]}var Kt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Jo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var qd=class extends Hd{snapshot;constructor(e,t){super(e),this.snapshot=t,Ny(this,e)}toString(){return this.snapshot.toString()}};function g0(n){let e=cL(n),t=new ht([new Pi("",{})]),r=new ht({}),i=new ht({}),o=new ht({}),s=new ht(""),a=new Vi(t,r,o,s,i,ae,n,e.root);return a.snapshot=e.root,new qd(new Kt(a,[]),e)}function cL(n){let e={},t={},r={},i="",o=new es([],e,r,i,t,ae,n,null,{});return new Gd("",new Kt(o,[]))}var Vi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(W(l=>l[Nc]))??Y(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(W(e=>ns(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(W(e=>ns(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function zd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&y0(i)&&(r.resolve[Nc]=i.title),r}var es=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Nc]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ns(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ns(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Gd=class extends Hd{url;constructor(e,t){super(t),this.url=e,Ny(this,t)}toString(){return m0(this._root)}};function Ny(n,e){e.value._routerState=n,e.children.forEach(t=>Ny(n,t))}function m0(n){let e=n.children.length>0?` { ${n.children.map(m0).join(", ")} } `:"";return`${n.value}${e}`}function iy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Pn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Pn(e.params,t.params)||n.paramsSubject.next(t.params),OF(e.url,t.url)||n.urlSubject.next(t.url),Pn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ty(n,e){let t=Pn(n.params,e.params)&&jF(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Ty(n.parent,e.parent))}function y0(n){return typeof n.title=="string"||n.title===null}var uL=new z(""),v0=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ae;activateEvents=new Lt;deactivateEvents=new Lt;attachEvents=new Lt;detachEvents=new Lt;routerOutletData=gC(void 0);parentContexts=O(as);location=O(sc);changeDetector=O(ki);inputBinder=O(Pc,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Cy(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=cc({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[hd]})}return n})(),Cy=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Vi?this.route:e===as?this.childContexts:e===uL?this.outletData:this.parent.get(e,t)}},Pc=new z(""),ky=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Fa([r.queryParams,r.params,r.data]).pipe(qe(([o,s,a],u)=>(a=L(L(L({},o),s),a),u===0?Y(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=Mb(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})();function lL(n,e,t){let r=Ac(n,e._root,t?t._root:void 0);return new qd(r,e)}function Ac(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=dL(n,e,t);return new Kt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ac(n,a)),s}}let r=fL(e.value),i=e.children.map(o=>Ac(n,o));return new Kt(r,i)}}function dL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ac(n,r,i);return Ac(n,r)})}function fL(n){return new Vi(new ht(n.url),new ht(n.params),new ht(n.queryParams),new ht(n.fragment),new ht(n.data),n.outlet,n.component,n)}var Rc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},_0="ngNavigationCancelingError";function Wd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=rs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=w0(!1,Qt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function w0(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[_0]=!0,t.cancellationCode=e,t}function hL(n){return E0(n)&&rs(n.url)}function E0(n){return!!n&&n[_0]}var pL=(n,e,t,r)=>W(i=>(new by(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),by=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),iy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Jo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Jo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Jo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Jo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new wy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new vy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(iy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),iy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Kd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ts=class{component;route;constructor(e,t){this.component=e,this.route=t}};function gL(n,e,t){let r=n._root,i=e?e._root:null;return wc(r,i,t,[r.value])}function mL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function cs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!cT(n)?n:e.get(n):r}function wc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Jo(e);return n.children.forEach(s=>{yL(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ic(a,t.getContext(s),i)),i}function yL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=vL(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Kd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?wc(n,e,a?a.children:null,r,i):wc(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ts(a.outlet.component,s))}else s&&Ic(e,a,i),i.canActivateChecks.push(new Kd(r)),o.component?wc(n,null,a?a.children:null,r,i):wc(n,null,t,r,i);return i}function vL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Oi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Oi(n.url,e.url)||!Pn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ty(n,e)||!Pn(n.queryParams,e.queryParams);case"paramsChange":default:return!Ty(n,e)}}function Ic(n,e,t){let r=Jo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ic(s,e.children.getContext(o),t):Ic(s,null,t):Ic(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ts(e.outlet.component,i)):t.canDeactivateChecks.push(new ts(null,i)):t.canDeactivateChecks.push(new ts(null,i))}function Oc(n){return typeof n=="function"}function _L(n){return typeof n=="boolean"}function wL(n){return n&&Oc(n.canLoad)}function EL(n){return n&&Oc(n.canActivate)}function IL(n){return n&&Oc(n.canActivateChild)}function DL(n){return n&&Oc(n.canDeactivate)}function TL(n){return n&&Oc(n.canMatch)}function I0(n){return n instanceof Jn||n?.name==="EmptyError"}var Od=Symbol("INITIAL_VALUE");function os(){return qe(n=>Fa(n.map(e=>e.pipe(er(1),wi(Od)))).pipe(W(e=>{for(let t of e)if(t!==!0){if(t===Od)return Od;if(t===!1||CL(t))return t}return!0}),ct(e=>e!==Od),er(1)))}function CL(n){return rs(n)||n instanceof Rc}function bL(n,e){return We(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Y(be(L({},t),{guardsResult:!0})):SL(s,r,i,n).pipe(We(a=>a&&_L(a)?AL(r,o,n,e):Y(a)),W(a=>be(L({},t),{guardsResult:a})))})}function SL(n,e,t,r){return Ee(n).pipe(We(i=>kL(i.component,i.route,t,e,r)),dn(i=>i!==!0,!0))}function AL(n,e,t,r){return Ee(e).pipe(xr(i=>No(ML(i.route.parent,r),RL(i.route,r),NL(n,i.path,t),xL(n,i.route,t))),dn(i=>i!==!0,!0))}function RL(n,e){return n!==null&&e&&e(new _y(n)),Y(!0)}function ML(n,e){return n!==null&&e&&e(new yy(n)),Y(!0)}function xL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(o=>bl(()=>{let s=kc(e)??t,a=cs(o,s),u=EL(a)?a.canActivate(e,n):Gt(s,()=>a(e,n));return jr(u).pipe(dn())}));return Y(i).pipe(os())}function NL(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>mL(s)).filter(s=>s!==null).map(s=>bl(()=>{let a=s.guards.map(u=>{let l=kc(s.node)??t,f=cs(u,l),p=IL(f)?f.canActivateChild(r,n):Gt(l,()=>f(r,n));return jr(p).pipe(dn())});return Y(a).pipe(os())}));return Y(o).pipe(os())}function kL(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let u=kc(e)??i,l=cs(a,u),f=DL(l)?l.canDeactivate(n,e,t,r):Gt(u,()=>l(n,e,t,r));return jr(f).pipe(dn())});return Y(s).pipe(os())}function PL(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let o=i.map(s=>{let a=cs(s,n),u=wL(a)?a.canLoad(e,t):Gt(n,()=>a(e,t));return jr(u)});return Y(o).pipe(os(),D0(r))}function D0(n){return Yp(pt(e=>{if(typeof e!="boolean")throw Wd(n,e)}),W(e=>e===!0))}function OL(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let o=i.map(s=>{let a=cs(s,n),u=TL(a)?a.canMatch(e,t):Gt(n,()=>a(e,t));return jr(u)});return Y(o).pipe(os(),D0(r))}var Mc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},xc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Yo(n){return xo(new Mc(n))}function FL(n){return xo(new Q(4e3,!1))}function LL(n){return xo(w0(!1,Qt.GuardRejected))}var Sy=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[ae])return FL(`${e.redirectTo}`);i=i.children[ae]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:f,url:p,outlet:m,params:y,data:b,title:A}=i,N=Gt(o,()=>a({params:y,data:b,queryParams:u,fragment:l,routeConfig:f,url:p,outlet:m,title:A}));if(N instanceof dr)throw new xc(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new xc(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new dr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ce(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Ay={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function VL(n,e,t,r,i){let o=T0(n,e,t);return o.matched?(r=sL(e,r),OL(r,e,t,i).pipe(W(s=>s===!0?o:L({},Ay)))):Y(o)}function T0(n,e,t){if(e.path==="**")return jL(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},Ay):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||PF)(t,n,e);if(!i)return L({},Ay);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function jL(n){return{matched:!0,parameters:n.length>0?n0(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Jb(n,e,t,r){return t.length>0&&$L(n,t,r)?{segmentGroup:new Ce(e,UL(r,new Ce(t,n.children))),slicedSegments:[]}:t.length===0&&HL(n,t,r)?{segmentGroup:new Ce(n.segments,BL(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ce(n.segments,n.children),slicedSegments:t}}function BL(n,e,t,r){let i={};for(let o of t)if(Qd(n,e,o)&&!r[yn(o)]){let s=new Ce([],{});i[yn(o)]=s}return L(L({},r),i)}function UL(n,e){let t={};t[ae]=e;for(let r of n)if(r.path===""&&yn(r)!==ae){let i=new Ce([],{});t[yn(r)]=i}return t}function $L(n,e,t){return t.some(r=>Qd(n,e,r)&&yn(r)!==ae)}function HL(n,e,t){return t.some(r=>Qd(n,e,r))}function Qd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function qL(n,e,t){return e.length===0&&!n.children[t]}var Ry=class{};function zL(n,e,t,r,i,o,s="emptyOnly"){return new My(n,e,t,r,i,s,o).recognize()}var GL=31,My=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Sy(this.urlSerializer,this.urlTree)}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){let e=Jb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(W(({children:t,rootSnapshot:r})=>{let i=new Kt(r,t),o=new Gd("",i),s=XF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new es([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ae,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ae,t).pipe(W(r=>({children:r,rootSnapshot:t})),Xn(r=>{if(r instanceof xc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Mc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(W(s=>s instanceof Kt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ee(o).pipe(xr(s=>{let a=r.children[s],u=aL(t,s);return this.processSegmentGroup(e,u,a,s,i)}),_i((s,a)=>(s.push(...a),s)),Nr(null),sg(),We(s=>{if(s===null)return Yo(r);let a=C0(s);return WL(a),Y(a)}))}processSegment(e,t,r,i,o,s,a){return Ee(t).pipe(xr(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Xn(l=>{if(l instanceof Mc)return Y(null);throw l}))),dn(u=>!!u),Xn(u=>{if(I0(u))return qL(r,i,o)?Y(new Ry):Yo(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return yn(r)!==s&&(s===ae||!Qd(i,o,r))?Yo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Yo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:f,positionalParamSegments:p,remainingSegments:m}=T0(t,i,o);if(!u)return Yo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>GL&&(this.allowRedirects=!1));let y=new es(o,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Xb(i),yn(i),i.component??i._loadedComponent??null,i,e0(i)),b=zd(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);let A=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(We(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=VL(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(qe(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(qe(({routes:l})=>{let f=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,b=new es(m,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Xb(r),yn(r),r.component??r._loadedComponent??null,r,e0(r)),A=zd(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(A.params),b.data=Object.freeze(A.data);let{segmentGroup:N,slicedSegments:H}=Jb(t,m,y,l);if(H.length===0&&N.hasChildren())return this.processChildren(f,l,N,b).pipe(W(V=>new Kt(b,V)));if(l.length===0&&H.length===0)return Y(new Kt(b,[]));let K=yn(r)===o;return this.processSegment(f,l,N,H,K?ae:o,!0,b).pipe(W(V=>new Kt(b,V instanceof Kt?[V]:[])))}))):Yo(t)))}getChildConfig(e,t,r){return t.children?Y({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Y({routes:t._loadedRoutes,injector:t._loadedInjector}):PL(e,t,r,this.urlSerializer).pipe(We(i=>i?this.configLoader.loadChildren(e,t).pipe(pt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):LL(t))):Y({routes:[],injector:e})}};function WL(n){n.sort((e,t)=>e.value.outlet===ae?-1:t.value.outlet===ae?1:e.value.outlet.localeCompare(t.value.outlet))}function KL(n){let e=n.value.routeConfig;return e&&e.path===""}function C0(n){let e=[],t=new Set;for(let r of n){if(!KL(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=C0(r.children);e.push(new Kt(r.value,i))}return e.filter(r=>!t.has(r))}function Xb(n){return n.data||{}}function e0(n){return n.resolve||{}}function QL(n,e,t,r,i,o){return We(s=>zL(n,e,t,r,s.extractedUrl,i,o).pipe(W(({state:a,tree:u})=>be(L({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function ZL(n,e){return We(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Y(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of b0(u))s.add(l);let a=0;return Ee(s).pipe(xr(u=>o.has(u)?YL(u,r,n,e):(u.data=zd(u,u.parent,n).resolve,Y(void 0))),pt(()=>a++),ko(1),We(u=>a===s.size?Y(t):Et))})}function b0(n){let e=n.children.map(t=>b0(t)).flat();return[n,...e]}function YL(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!y0(i)&&(o[Nc]=i.title),JL(o,n,e,r).pipe(W(s=>(n._resolvedData=s,n.data=zd(n,n.parent,t).resolve,null)))}function JL(n,e,t,r){let i=ay(n);if(i.length===0)return Y({});let o={};return Ee(i).pipe(We(s=>XL(n[s],e,t,r).pipe(dn(),pt(a=>{if(a instanceof Rc)throw Wd(new Fi,a);o[s]=a}))),ko(1),W(()=>o),Xn(s=>I0(s)?Et:xo(s)))}function XL(n,e,t,r){let i=kc(e)??r,o=cs(n,i),s=o.resolve?o.resolve(e,t):Gt(i,()=>o(e,t));return jr(s)}function oy(n){return qe(e=>{let t=n(e);return t?Ee(t).pipe(W(()=>e)):Y(e)})}var S0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ae);return r}getResolvedTitleForRoute(t){return t.data[Nc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>O(eV),providedIn:"root"})}return n})(),eV=(()=>{class n extends S0{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(F(Wb))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),us=new z("",{providedIn:"root",factory:()=>({})}),A0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ut({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ve(0,"router-outlet")},dependencies:[v0],encapsulation:2})}return n})();function Py(n){let e=n.children&&n.children.map(Py),t=e?be(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ae&&(t.component=A0),t}var Fc=new z(""),Zd=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=O(Td);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Y(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=jr(t.loadComponent()).pipe(W(R0),pt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),La(()=>{this.componentLoaders.delete(t)})),i=new So(r,()=>new Ve).pipe(bo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=tV(r,this.compiler,t,this.onLoadEndListener).pipe(La(()=>{this.childrenLoaders.delete(r)})),s=new So(o,()=>new Ve).pipe(bo());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tV(n,e,t,r){return jr(n.loadChildren()).pipe(W(R0),We(i=>i instanceof Nm||Array.isArray(i)?Y(i):Ee(e.compileModuleAsync(i))),W(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Fc,[],{optional:!0,self:!0}).flat()),{routes:s.map(Py),injector:o}}))}function nV(n){return n&&typeof n=="object"&&"default"in n}function R0(n){return nV(n)?n.default:n}var Oy=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>O(rV),providedIn:"root"})}return n})(),rV=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fy=new z(""),Ly=new z("");function M0(n,e,t){let r=n.get(Ly),i=n.get(lt);return n.get(he).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),iV(n))),{onViewTransitionCreated:u}=r;return u&&Gt(n,()=>u({transition:a,from:e,to:t})),s})}function iV(n){return new Promise(e=>{vm({read:()=>setTimeout(e)},{injector:n})})}var Vy=new z(""),Yd=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ve;transitionAbortSubject=new Ve;configLoader=O(Zd);environmentInjector=O(Ke);destroyRef=O(Wo);urlSerializer=O(ss);rootContexts=O(as);location=O(Lr);inputBindingEnabled=O(Pc,{optional:!0})!==null;titleStrategy=O(S0);options=O(us,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=O(Oy);createViewTransition=O(Fy,{optional:!0});navigationErrorHandler=O(Vy,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Y(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new gy(i)),r=i=>this.events.next(new my(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(be(L({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new ht(null),this.transitions.pipe(ct(r=>r!==null),qe(r=>{let i=!1,o=!1;return Y(r).pipe(qe(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Qt.SupersededByNewNavigation),Et;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?be(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&u!=="reload"){let l="";return this.events.next(new fr(s.id,this.urlSerializer.serialize(s.rawUrl),l,Tc.IgnoredSameUrlNavigation)),s.resolve(!1),Et}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Y(s).pipe(qe(l=>(this.events.next(new Li(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Et:Promise.resolve(l))),QL(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),pt(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=be(L({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let f=new $d(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:f,source:p,restoredState:m,extras:y}=s,b=new Li(l,this.urlSerializer.serialize(f),p,m);this.events.next(b);let A=g0(this.rootComponentType).snapshot;return this.currentTransition=r=be(L({},s),{targetSnapshot:A,urlAfterRedirects:f,extras:be(L({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,Y(r)}else{let l="";return this.events.next(new fr(s.id,this.urlSerializer.serialize(s.extractedUrl),l,Tc.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Et}}),pt(s=>{let a=new dy(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),W(s=>(this.currentTransition=r=be(L({},s),{guards:gL(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),bL(this.environmentInjector,s=>this.events.next(s)),pt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Wd(this.urlSerializer,s.guardsResult);let a=new fy(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),ct(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Qt.GuardRejected),!1)),oy(s=>{if(s.guards.canActivateChecks.length!==0)return Y(s).pipe(pt(a=>{let u=new hy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),qe(a=>{let u=!1;return Y(a).pipe(ZL(this.paramsInheritanceStrategy,this.environmentInjector),pt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",Qt.NoDataFromResolver)}}))}),pt(a=>{let u=new py(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),oy(s=>{let a=u=>{let l=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(u.routeConfig).pipe(pt(f=>{u.component=f}),W(()=>{})));for(let f of u.children)l.push(...a(f));return l};return Fa(a(s.targetSnapshot.root)).pipe(Nr(null),er(1))}),oy(()=>this.afterPreactivation()),qe(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?Ee(u).pipe(W(()=>r)):Y(r)}),W(s=>{let a=lL(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=be(L({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),pt(()=>{this.events.next(new Sc)}),pL(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),er(1),pt({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new On(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),cg(this.transitionAbortSubject.pipe(pt(s=>{throw s}))),La(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",Qt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Xn(s=>{if(this.destroyed)return r.resolve(!1),Et;if(o=!0,E0(s))this.events.next(new lr(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),hL(s)?this.events.next(new is(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Cc(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=Gt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Rc){let{message:l,cancellationCode:f}=Wd(this.urlSerializer,u);this.events.next(new lr(r.id,this.urlSerializer.serialize(r.extractedUrl),l,f)),this.events.next(new is(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Et}))}))}cancelNavigationTransition(t,r,i){let o=new lr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oV(n){return n!==jd}var sV=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>O(aV),providedIn:"root"})}return n})(),xy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},aV=(()=>{class n extends xy{static \u0275fac=(()=>{let t;return function(i){return(t||(t=lm(n)))(i||n)}})();static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),x0=(()=>{class n{urlSerializer=O(ss);options=O(us,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=O(Lr);urlHandlingStrategy=O(Oy);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new dr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof dr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=g0(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>O(cV),providedIn:"root"})}return n})(),cV=(()=>{class n extends x0{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Li?this.updateStateMemento():t instanceof fr?this.commitTransition(r):t instanceof $d?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Sc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof lr&&(t.code===Qt.GuardRejected||t.code===Qt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Cc?this.restoreHistory(r,!0):t instanceof On&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=L(L({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=L(L({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=lm(n)))(i||n)}})();static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jy(n,e){n.events.pipe(ct(t=>t instanceof On||t instanceof lr||t instanceof Cc||t instanceof fr),W(t=>t instanceof On||t instanceof fr?0:(t instanceof lr?t.code===Qt.Redirect||t.code===Qt.SupersededByNewNavigation:!1)?2:1),ct(t=>t!==2),er(1)).subscribe(()=>{e()})}var uV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ji=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=O(gb);stateManager=O(x0);options=O(us,{optional:!0})||{};pendingTasks=O(xi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=O(Yd);urlSerializer=O(ss);location=O(Lr);urlHandlingStrategy=O(Oy);_events=new Ve;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=O(sV);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=O(Fc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!O(Pc,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new He;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof lr&&r.code!==Qt.Redirect&&r.code!==Qt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof On)this.navigated=!0;else if(r instanceof is){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||oV(i.source)},s);this.scheduleNavigation(a,jd,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}fV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),jd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Py),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=d0(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return f0(p,t,f,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=rs(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,jd,null,r)}navigate(t,r={skipLocationChange:!1}){return dV(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},uV):r===!1?i=L({},lV):i=r,rs(t))return Kb(this.currentUrlTree,t,i);let o=this.parseUrl(t);return Kb(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let f=this.pendingTasks.add();return jy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dV(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Q(4008,!1)}function fV(n){return!(n instanceof Sc)&&!(n instanceof is)}var Lc=class{};var N0=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ct(t=>t instanceof On),xr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=ac(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ee(i).pipe(Mr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Y(null);let o=i.pipe(We(s=>s===null?Y(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ee([o,s]).pipe(Mr())}else return o})}static \u0275fac=function(r){return new(r||n)(F(ji),F(Td),F(Ke),F(Lc),F(Zd))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),k0=new z(""),hV=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Li?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof On?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof fr&&t.code===Tc.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof bc&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new bc(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){sb()};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})();function pV(n){return n.routerState.root}function Vc(n,e){return{\u0275kind:n,\u0275providers:e}}function gV(){let n=O(xt);return e=>{let t=n.get(Or);if(e!==t.components[0])return;let r=n.get(ji),i=n.get(P0);n.get(Uy)===1&&r.initialNavigation(),n.get(L0,null,ue.Optional)?.setUpPreloading(),n.get(k0,null,ue.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var P0=new z("",{factory:()=>new Ve}),Uy=new z("",{providedIn:"root",factory:()=>1});function O0(){let n=[{provide:Uy,useValue:0},Om(()=>{let e=O(xt);return e.get(Um,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(ji),o=e.get(P0);jy(i,()=>{r(!0)}),e.get(Yd).afterPreactivation=()=>(r(!0),o.closed?Y(void 0):o),i.initialNavigation()}))})];return Vc(2,n)}function F0(){let n=[Om(()=>{O(ji).setUpLocationChangeListener()}),{provide:Uy,useValue:2}];return Vc(3,n)}var L0=new z("");function V0(n){return Vc(0,[{provide:L0,useExisting:N0},{provide:Lc,useExisting:n}])}function j0(){return Vc(8,[ky,{provide:Pc,useExisting:ky}])}function B0(n){oc("NgRouterViewTransitions");let e=[{provide:Fy,useValue:M0},{provide:Ly,useValue:L({skipNextTransition:!!n?.skipInitialTransition},n)}];return Vc(9,e)}var U0=[Lr,{provide:ss,useClass:Fi},ji,as,{provide:Vi,useFactory:pV,deps:[ji]},Zd,[]],Jd=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[U0,[],{provide:Fc,multi:!0,useValue:t},[],r?.errorHandler?{provide:Vy,useValue:r.errorHandler}:[],{provide:us,useValue:r||{}},r?.useHash?yV():vV(),mV(),r?.preloadingStrategy?V0(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?_V(r):[],r?.bindToComponentInputs?j0().\u0275providers:[],r?.enableViewTransitions?B0().\u0275providers:[],wV()]}}static forChild(t){return{ngModule:n,providers:[{provide:Fc,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Dt({type:n});static \u0275inj=It({})}return n})();function mV(){return{provide:k0,useFactory:()=>{let n=O(Vb),e=O(he),t=O(us),r=O(Yd),i=O(ss);return t.scrollOffset&&n.setOffset(t.scrollOffset),new hV(i,r,n,e,t)}}}function yV(){return{provide:ur,useClass:$m}}function vV(){return{provide:ur,useClass:Sd}}function _V(n){return[n.initialNavigation==="disabled"?F0().\u0275providers:[],n.initialNavigation==="enabledBlocking"?O0().\u0275providers:[]]}var By=new z("");function wV(){return[{provide:By,useFactory:gV},{provide:Fm,multi:!0,useExisting:By}]}var IV=[],Xd=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Dt({type:n});static \u0275inj=It({imports:[Jd.forRoot(IV),Jd]})};var DV="firebase",TV="11.6.0";Rr(DV,TV,"app");function kt(n){n===void 0&&(nm(kt),n=O(xt));let e=n.get(dm);return t=>new de(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var tf=new Go("ANGULARFIRE2_VERSION");var $0=(n,e)=>{let t=e?[e]:OI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},$y=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}($y||{}),_6=dc()&&typeof Zone<"u"?$y.WARN:$y.SILENT;var ef=class{zone;delegate;constructor(e,t=tg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},jc=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=O(he);this.outsideAngular=t.runOutsideAngular(()=>new ef(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new ef(typeof Zone>"u"?void 0:Zone.current,Oa))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var SV=new Map,AV={activated:!1,tokenObservers:[]},RV={initialized:!1,enabled:!1};function vn(n){return SV.get(n)||Object.assign({},AV)}function W0(){return RV}var MV="https://content-firebaseappcheck.googleapis.com/v1";var xV="exchangeDebugToken",q0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},S6=24*60*60*1e3;var zy=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return x(this,null,function*(){this.stop();try{this.pending=new Np,this.pending.promise.catch(t=>{}),yield NV(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Np,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function NV(n){return new Promise(e=>{setTimeout(e,n)})}var kV={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Br=new NI("appCheck","AppCheck",kV);function K0(n){if(!vn(n).activated)throw Br.create("use-before-activation",{appName:n.name})}function Q0(r,i){return x(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw Br.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Br.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Br.create("fetch-parse-error",{originalErrorMessage:y?.message})}let f=l.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw Br.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(f[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function Z0(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${MV}/projects/${t}/apps/${r}:${xV}?key=${i}`,body:{debug_token:e}}}var PV="firebase-app-check-database",OV=1,Gy="firebase-app-check-store";var nf=null;function FV(){return nf||(nf=new Promise((n,e)=>{try{let t=indexedDB.open(PV,OV);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Br.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Gy,{keyPath:"compositeKey"})}}}catch(t){e(Br.create("storage-open",{originalErrorMessage:t?.message}))}}),nf)}function LV(n,e){return VV(jV(n),e)}function VV(n,e){return x(this,null,function*(){let r=(yield FV()).transaction(Gy,"readwrite"),o=r.objectStore(Gy).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Br.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function jV(n){return`${n.options.appId}-${n.name}`}var Bc=new nl("@firebase/app-check");function Hy(n,e){return el()?LV(n,e).catch(t=>{Bc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Y0(){return W0().enabled}function J0(){return x(this,null,function*(){let n=W0();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var BV={error:"UNKNOWN_ERROR"};function UV(n){return RI.encodeString(JSON.stringify(n),!1)}function Wy(n,e=!1,t=!1){return x(this,null,function*(){let r=n.app;K0(r);let i=vn(r),o=i.token,s;if(o&&!Uc(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Uc(l)?o=l:yield Hy(r,void 0))}if(!e&&o&&Uc(o))return{token:o.token};let a=!1;if(Y0())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=Q0(Z0(r,yield J0()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield Hy(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Bc.warn(l.message):t&&Bc.error(l),qy(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield vn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Bc.warn(l.message):t&&Bc.error(l),s=l}let u;return o?s?Uc(o)?u={token:o.token,internalError:s}:u=qy(s):(u={token:o.token},i.token=o,yield Hy(r,o)):u=qy(s),a&&zV(r,u),u})}function $V(n){return x(this,null,function*(){let e=n.app;K0(e);let{provider:t}=vn(e);if(Y0()){let r=yield J0(),{token:i}=yield Q0(Z0(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function HV(n,e,t,r){let{app:i}=n,o=vn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Uc(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),z0(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>z0(n))}function X0(n,e){let t=vn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function z0(n){let{app:e}=n,t=vn(e),r=t.tokenRefresher;r||(r=qV(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qV(n){let{app:e}=n;return new zy(()=>x(this,null,function*(){let t=vn(e),r;if(t.token?r=yield Wy(n,!0):r=yield Wy(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=vn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},q0.RETRIAL_MIN_WAIT,q0.RETRIAL_MAX_WAIT)}function zV(n,e){let t=vn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Uc(n){return n.expireTimeMillis-Date.now()>0}function qy(n){return{token:UV(BV),error:n}}var Ky=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=vn(this.app);for(let t of e)X0(this.app,t.next);return Promise.resolve()}};function GV(n,e){return new Ky(n,e)}function WV(n){return{getToken:e=>Wy(n,e),getLimitedUseToken:()=>$V(n),addTokenListener:e=>HV(n,"INTERNAL",e),removeTokenListener:e=>X0(n.app,e)}}var KV="@firebase/app-check",QV="0.8.13";var ZV="app-check",G0="app-check-internal";function YV(){Aa(new gi(ZV,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return GV(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(G0).initialize()})),Aa(new gi(G0,n=>{let e=n.getProvider("app-check").getImmediate();return WV(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Rr(KV,QV)}YV();var JV="app-check";var ls=class{constructor(){return $0(JV)}};var XV=["localhost","0.0.0.0","127.0.0.1"],$6=typeof window<"u"&&XV.includes(window.location.hostname);var ej="firebase",tj="11.6.0";qt.registerVersion(ej,tj,"app-compat");var nj=["ngOnDestroy"],nS=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(nj.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(f=>{let p=f?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var rf=class{constructor(e){return e}},ds=new z("angularfire2.app.options"),fs=new z("angularfire2.app.name");function $c(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=qt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>qt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;rj("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new rf(s)}var rj=(n,...e)=>{dc()&&typeof console<"u"&&console[n](...e)},ij={provide:rf,useFactory:$c,deps:[ds,he,[new Jg,fs]]},rS=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:ds,useValue:t},{provide:fs,useValue:r}]}}constructor(t){qt.registerVersion("angularfire",tf.full,"core"),qt.registerVersion("angularfire",tf.full,"app-compat"),qt.registerVersion("angular",Ib.full,t.toString())}static \u0275fac=function(r){return new(r||n)(F(rn))};static \u0275mod=Dt({type:n});static \u0275inj=It({providers:[ij]})}return n})();function of(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return oj(i,s)||(tS("error",`${e} was already initialized on the ${t} Firebase App with different settings.${sj?" You may need to reload as Firebase is not HMR aware.":""}`),tS("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function oj(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var sj=typeof module<"u"&&!!module.hot,tS=(n,...e)=>{dc()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Qy=new z("angularfire2.auth.use-emulator"),Zy=new z("angularfire2.auth.settings"),Yy=new z("angularfire2.auth.tenant-id"),Jy=new z("angularfire2.auth.langugage-code"),Xy=new z("angularfire2.auth.use-device-language"),ev=new z("angularfire.auth.persistence"),tv=(n,e,t,r,i,o,s,a)=>of(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,f]of Object.entries(s))u.settings[l]=f;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),iS=(()=>{class n{injector=O(Ke);authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,f,p,m,y){let b=new Ve,A=Y(void 0).pipe(An(s.outsideAngular),qe(()=>o.runOutsideAngular(()=>import("./chunk-N4IJLZBM.js"))),W(()=>$c(t,o,r)),W(N=>tv(N,o,a,l,f,p,u,m)),Al({bufferSize:1,refCount:!1}));if(Vr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Y(null);else{A.pipe(dn()).subscribe();let N=A.pipe(qe(V=>V.getRedirectResult().then(J=>J,()=>null)),kt(this.injector),Al({bufferSize:1,refCount:!1})),H=A.pipe(qe(V=>new de(J=>({unsubscribe:o.runOutsideAngular(()=>V.onAuthStateChanged(re=>J.next(re),re=>J.error(re),()=>J.complete()))})))),K=A.pipe(qe(V=>new de(J=>({unsubscribe:o.runOutsideAngular(()=>V.onIdTokenChanged(re=>J.next(re),re=>J.error(re),()=>J.complete()))}))));this.authState=N.pipe(Rl(H),Yn(s.outsideAngular),An(s.insideAngular)),this.user=N.pipe(Rl(K),Yn(s.outsideAngular),An(s.insideAngular)),this.idToken=this.user.pipe(qe(V=>V?Ee(V.getIdToken()):Y(null))),this.idTokenResult=this.user.pipe(qe(V=>V?Ee(V.getIdTokenResult()):Y(null))),this.credential=ig(N,b,this.authState.pipe(ct(V=>!V))).pipe(W(V=>V?.user?V:null),Yn(s.outsideAngular),An(s.insideAngular))}return nS(this,A,o,{spy:{apply:(N,H,K)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&K.then(V=>b.next(V))}}})}static \u0275fac=function(r){return new(r||n)(F(ds),F(fs,8),F(rn),F(he),F(jc),F(Qy,8),F(Zy,8),F(Yy,8),F(Jy,8),F(Xy,8),F(ev,8),F(ls,8))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var oS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sS={};var hr,nv;(function(){var n;function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(I,D,C){for(var _=Array(arguments.length-2),Gn=2;Gn<arguments.length;Gn++)_[Gn-2]=arguments[Gn];return v.prototype[D].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)I[D]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(D=0;16>D;++D)I[D]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],D=E.g[2];var C=E.g[3],_=v+(C^w&(D^C))+I[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=C+(D^v&(w^D))+I[1]+3905402710&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(w^C&(v^w))+I[2]+606105819&4294967295,D=C+(_<<17&4294967295|_>>>15),_=w+(v^D&(C^v))+I[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(C^w&(D^C))+I[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=C+(D^v&(w^D))+I[5]+1200080426&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(w^C&(v^w))+I[6]+2821735955&4294967295,D=C+(_<<17&4294967295|_>>>15),_=w+(v^D&(C^v))+I[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(C^w&(D^C))+I[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=C+(D^v&(w^D))+I[9]+2336552879&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(w^C&(v^w))+I[10]+4294925233&4294967295,D=C+(_<<17&4294967295|_>>>15),_=w+(v^D&(C^v))+I[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(C^w&(D^C))+I[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=C+(D^v&(w^D))+I[13]+4254626195&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(w^C&(v^w))+I[14]+2792965006&4294967295,D=C+(_<<17&4294967295|_>>>15),_=w+(v^D&(C^v))+I[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(D^C&(w^D))+I[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=C+(w^D&(v^w))+I[6]+3225465664&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(C^v))+I[11]+643717713&4294967295,D=C+(_<<14&4294967295|_>>>18),_=w+(C^v&(D^C))+I[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^C&(w^D))+I[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=C+(w^D&(v^w))+I[10]+38016083&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(C^v))+I[15]+3634488961&4294967295,D=C+(_<<14&4294967295|_>>>18),_=w+(C^v&(D^C))+I[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^C&(w^D))+I[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=C+(w^D&(v^w))+I[14]+3275163606&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(C^v))+I[3]+4107603335&4294967295,D=C+(_<<14&4294967295|_>>>18),_=w+(C^v&(D^C))+I[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^C&(w^D))+I[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=C+(w^D&(v^w))+I[2]+4243563512&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(C^v))+I[7]+1735328473&4294967295,D=C+(_<<14&4294967295|_>>>18),_=w+(C^v&(D^C))+I[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(w^D^C)+I[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=C+(v^w^D)+I[8]+2272392833&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^w)+I[11]+1839030562&4294967295,D=C+(_<<16&4294967295|_>>>16),_=w+(D^C^v)+I[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^C)+I[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=C+(v^w^D)+I[4]+1272893353&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^w)+I[7]+4139469664&4294967295,D=C+(_<<16&4294967295|_>>>16),_=w+(D^C^v)+I[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^C)+I[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=C+(v^w^D)+I[0]+3936430074&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^w)+I[3]+3572445317&4294967295,D=C+(_<<16&4294967295|_>>>16),_=w+(D^C^v)+I[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^C)+I[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=C+(v^w^D)+I[12]+3873151461&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^w)+I[15]+530742520&4294967295,D=C+(_<<16&4294967295|_>>>16),_=w+(D^C^v)+I[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(D^(w|~C))+I[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=C+(w^(v|~D))+I[7]+1126891415&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~w))+I[14]+2878612391&4294967295,D=C+(_<<15&4294967295|_>>>17),_=w+(C^(D|~v))+I[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~C))+I[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=C+(w^(v|~D))+I[3]+2399980690&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~w))+I[10]+4293915773&4294967295,D=C+(_<<15&4294967295|_>>>17),_=w+(C^(D|~v))+I[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~C))+I[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=C+(w^(v|~D))+I[15]+4264355552&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~w))+I[6]+2734768916&4294967295,D=C+(_<<15&4294967295|_>>>17),_=w+(C^(D|~v))+I[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~C))+I[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=C+(w^(v|~D))+I[11]+3174756917&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~w))+I[2]+718787259&4294967295,D=C+(_<<15&4294967295|_>>>17),_=w+(C^(D|~v))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+C&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,I=this.B,D=this.h,C=0;C<v;){if(D==0)for(;C<=w;)i(this,E,C),C+=this.blockSize;if(typeof E=="string"){for(;C<v;)if(I[D++]=E.charCodeAt(C++),D==this.blockSize){i(this,I),D=0;break}}else for(;C<v;)if(I[D++]=E[C++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)E[w++]=this.g[v]>>>I&255;return E};function o(E,v){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function s(E,v){this.h=v;for(var w=[],I=!0,D=E.length-1;0<=D;D--){var C=E[D]|0;I&&C==v||(w[D]=C,I=!1)}this.g=w}var a={};function u(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return N(l(-E));for(var v=[],w=1,I=0;E>=w;I++)v[I]=E/w|0,w*=4294967296;return new s(v,0)}function f(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return N(f(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),I=p,D=0;D<E.length;D+=8){var C=Math.min(8,E.length-D),_=parseInt(E.substring(D,D+C),v);8>C?(C=l(Math.pow(v,C)),I=I.j(C).add(l(_))):(I=I.j(w),I=I.add(l(_)))}return I}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(A(this))return-N(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);E+=(0<=I?I:4294967296+I)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(b(this))return"0";if(A(this))return"-"+N(this).toString(E);for(var v=l(Math.pow(E,6)),w=this,I="";;){var D=J(w,v).g;w=H(w,D.j(v));var C=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=D,b(w))return C+I;for(;6>C.length;)C="0"+C;I=C+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function b(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function A(E){return E.h==-1}n.l=function(E){return E=H(this,E),A(E)?-1:b(E)?0:1};function N(E){for(var v=E.g.length,w=[],I=0;I<v;I++)w[I]=~E.g[I];return new s(w,~E.h).add(m)}n.abs=function(){return A(this)?N(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0,D=0;D<=v;D++){var C=I+(this.i(D)&65535)+(E.i(D)&65535),_=(C>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);I=_>>>16,C&=65535,_&=65535,w[D]=_<<16|C}return new s(w,w[w.length-1]&-2147483648?-1:0)};function H(E,v){return E.add(N(v))}n.j=function(E){if(b(this)||b(E))return p;if(A(this))return A(E)?N(this).j(N(E)):N(N(this).j(E));if(A(E))return N(this.j(N(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<E.g.length;D++){var C=this.i(I)>>>16,_=this.i(I)&65535,Gn=E.i(D)>>>16,ca=E.i(D)&65535;w[2*I+2*D]+=_*ca,K(w,2*I+2*D),w[2*I+2*D+1]+=C*ca,K(w,2*I+2*D+1),w[2*I+2*D+1]+=_*Gn,K(w,2*I+2*D+1),w[2*I+2*D+2]+=C*Gn,K(w,2*I+2*D+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new s(w,0)};function K(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function V(E,v){this.g=E,this.h=v}function J(E,v){if(b(v))throw Error("division by zero");if(b(E))return new V(p,p);if(A(E))return v=J(N(E),v),new V(N(v.g),N(v.h));if(A(v))return v=J(E,N(v)),new V(N(v.g),v.h);if(30<E.g.length){if(A(E)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,I=v;0>=I.l(E);)w=re(w),I=re(I);var D=ie(w,1),C=ie(I,1);for(I=ie(I,2),w=ie(w,2);!b(I);){var _=C.add(I);0>=_.l(E)&&(D=D.add(w),C=_),I=ie(I,1),w=ie(w,1)}return v=H(E,D.j(v)),new V(D,v)}for(D=p;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),C=l(w),_=C.j(v);A(_)||0<_.l(E);)w-=I,C=l(w),_=C.j(v);b(C)&&(C=m),D=D.add(C),E=H(E,_)}return new V(D,E)}n.A=function(E){return J(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&E.i(I);return new s(w,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|E.i(I);return new s(w,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^E.i(I);return new s(w,this.h^E.h)};function re(E){for(var v=E.g.length+1,w=[],I=0;I<v;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new s(w,E.h)}function ie(E,v){var w=v>>5;v%=32;for(var I=E.g.length-w,D=[],C=0;C<I;C++)D[C]=0<v?E.i(C+w)>>>v|E.i(C+w+1)<<32-v:E.i(C+w);return new s(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nv=sS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,hr=sS.Integer=s}).apply(typeof oS<"u"?oS:typeof self<"u"?self:typeof window<"u"?window:{});var sf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pr={};var rv,cj,hs,iv,Hc,af,ov,sv,av;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,h){return c==Array.prototype||c==Object.prototype||(c[d]=h.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof sf=="object"&&sf];for(var d=0;d<c.length;++d){var h=c[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var h=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var T=c[g];if(!(T in h))break e;h=h[T]}c=c[c.length-1],g=h[c],d=d(g),d!=g&&d!=null&&e(h,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var h=0,g=!1,T={next:function(){if(!g&&h<c.length){var M=h++;return{value:d(M,c[M]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,h){return h})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function f(c,d,h){return c.call.apply(c.bind,arguments)}function p(c,d,h){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function m(c,d,h){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function y(c,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function h(){}h.prototype=d.prototype,c.aa=d.prototype,c.prototype=new h,c.prototype.constructor=c,c.Qb=function(g,T,M){for(var j=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)j[Me-2]=arguments[Me];return d.prototype[T].apply(g,j)}}function A(c){let d=c.length;if(0<d){let h=Array(d);for(let g=0;g<d;g++)h[g]=c[g];return h}return[]}function N(c,d){for(let h=1;h<arguments.length;h++){let g=arguments[h];if(u(g)){let T=c.length||0,M=g.length||0;c.length=T+M;for(let j=0;j<M;j++)c[T+j]=g[j]}else c.push(g)}}class H{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function K(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function J(c){return J[" "](c),c}J[" "]=function(){};var re=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function ie(c,d,h){for(let g in c)d.call(h,c[g],g,c)}function E(c,d){for(let h in c)d.call(void 0,c[h],h,c)}function v(c){let d={};for(let h in c)d[h]=c[h];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let h,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(h in g)c[h]=g[h];for(let M=0;M<w.length;M++)h=w[M],Object.prototype.hasOwnProperty.call(g,h)&&(c[h]=g[h])}}function D(c){var d=1;c=c.split(":");let h=[];for(;0<d&&c.length;)h.push(c.shift()),d--;return c.length&&h.push(c.join(":")),h}function C(c){a.setTimeout(()=>{throw c},0)}function _(){var c=sp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Gn{constructor(){this.h=this.g=null}add(d,h){let g=ca.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var ca=new H(()=>new fx,c=>c.reset());class fx{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let ua,la=!1,sp=new Gn,CE=()=>{let c=a.Promise.resolve(void 0);ua=()=>{c.then(hx)}};var hx=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(h){C(h)}var d=ca;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}la=!1};function Cr(){this.s=this.s,this.C=this.C}Cr.prototype.s=!1,Cr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Cr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function yt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}yt.prototype.h=function(){this.defaultPrevented=!0};var px=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let h=()=>{};a.addEventListener("test",h,d),a.removeEventListener("test",h,d)}catch{}return c}();function da(c,d){if(yt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var h=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(re){e:{try{J(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else h=="mouseover"?d=c.fromElement:h=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:gx[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&da.aa.h.call(this)}}b(da,yt);var gx={2:"touch",3:"pen",4:"mouse"};da.prototype.h=function(){da.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var fa="closure_listenable_"+(1e6*Math.random()|0),mx=0;function yx(c,d,h,g,T){this.listener=c,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=T,this.key=++mx,this.da=this.fa=!1}function Fu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Lu(c){this.src=c,this.g={},this.h=0}Lu.prototype.add=function(c,d,h,g,T){var M=c.toString();c=this.g[M],c||(c=this.g[M]=[],this.h++);var j=cp(c,d,g,T);return-1<j?(d=c[j],h||(d.fa=!1)):(d=new yx(d,this.src,M,!!g,T),d.fa=h,c.push(d)),d};function ap(c,d){var h=d.type;if(h in c.g){var g=c.g[h],T=Array.prototype.indexOf.call(g,d,void 0),M;(M=0<=T)&&Array.prototype.splice.call(g,T,1),M&&(Fu(d),c.g[h].length==0&&(delete c.g[h],c.h--))}}function cp(c,d,h,g){for(var T=0;T<c.length;++T){var M=c[T];if(!M.da&&M.listener==d&&M.capture==!!h&&M.ha==g)return T}return-1}var up="closure_lm_"+(1e6*Math.random()|0),lp={};function bE(c,d,h,g,T){if(g&&g.once)return AE(c,d,h,g,T);if(Array.isArray(d)){for(var M=0;M<d.length;M++)bE(c,d[M],h,g,T);return null}return h=pp(h),c&&c[fa]?c.K(d,h,l(g)?!!g.capture:!!g,T):SE(c,d,h,!1,g,T)}function SE(c,d,h,g,T,M){if(!d)throw Error("Invalid event type");var j=l(T)?!!T.capture:!!T,Me=fp(c);if(Me||(c[up]=Me=new Lu(c)),h=Me.add(d,h,g,j,M),h.proxy)return h;if(g=vx(),h.proxy=g,g.src=c,g.listener=h,c.addEventListener)px||(T=j),T===void 0&&(T=!1),c.addEventListener(d.toString(),g,T);else if(c.attachEvent)c.attachEvent(ME(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function vx(){function c(h){return d.call(c.src,c.listener,h)}let d=_x;return c}function AE(c,d,h,g,T){if(Array.isArray(d)){for(var M=0;M<d.length;M++)AE(c,d[M],h,g,T);return null}return h=pp(h),c&&c[fa]?c.L(d,h,l(g)?!!g.capture:!!g,T):SE(c,d,h,!0,g,T)}function RE(c,d,h,g,T){if(Array.isArray(d))for(var M=0;M<d.length;M++)RE(c,d[M],h,g,T);else g=l(g)?!!g.capture:!!g,h=pp(h),c&&c[fa]?(c=c.i,d=String(d).toString(),d in c.g&&(M=c.g[d],h=cp(M,h,g,T),-1<h&&(Fu(M[h]),Array.prototype.splice.call(M,h,1),M.length==0&&(delete c.g[d],c.h--)))):c&&(c=fp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=cp(d,h,g,T)),(h=-1<c?d[c]:null)&&dp(h))}function dp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[fa])ap(d.i,c);else{var h=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(h,g,c.capture):d.detachEvent?d.detachEvent(ME(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=fp(d))?(ap(h,c),h.h==0&&(h.src=null,d[up]=null)):Fu(c)}}}function ME(c){return c in lp?lp[c]:lp[c]="on"+c}function _x(c,d){if(c.da)c=!0;else{d=new da(d,this);var h=c.listener,g=c.ha||c.src;c.fa&&dp(c),c=h.call(g,d)}return c}function fp(c){return c=c[up],c instanceof Lu?c:null}var hp="__closure_events_fn_"+(1e9*Math.random()>>>0);function pp(c){return typeof c=="function"?c:(c[hp]||(c[hp]=function(d){return c.handleEvent(d)}),c[hp])}function vt(){Cr.call(this),this.i=new Lu(this),this.M=this,this.F=null}b(vt,Cr),vt.prototype[fa]=!0,vt.prototype.removeEventListener=function(c,d,h,g){RE(this,c,d,h,g)};function St(c,d){var h,g=c.F;if(g)for(h=[];g;g=g.F)h.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new yt(d,c);else if(d instanceof yt)d.target=d.target||c;else{var T=d;d=new yt(g,c),I(d,T)}if(T=!0,h)for(var M=h.length-1;0<=M;M--){var j=d.g=h[M];T=Vu(j,g,!0,d)&&T}if(j=d.g=c,T=Vu(j,g,!0,d)&&T,T=Vu(j,g,!1,d)&&T,h)for(M=0;M<h.length;M++)j=d.g=h[M],T=Vu(j,g,!1,d)&&T}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var h=c.g[d],g=0;g<h.length;g++)Fu(h[g]);delete c.g[d],c.h--}}this.F=null},vt.prototype.K=function(c,d,h,g){return this.i.add(String(c),d,!1,h,g)},vt.prototype.L=function(c,d,h,g){return this.i.add(String(c),d,!0,h,g)};function Vu(c,d,h,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,M=0;M<d.length;++M){var j=d[M];if(j&&!j.da&&j.capture==h){var Me=j.listener,ft=j.ha||j.src;j.fa&&ap(c.i,j),T=Me.call(ft,g)!==!1&&T}}return T&&!g.defaultPrevented}function xE(c,d,h){if(typeof c=="function")h&&(c=m(c,h));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function NE(c){c.g=xE(()=>{c.g=null,c.i&&(c.i=!1,NE(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class wx extends Cr{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:NE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ha(c){Cr.call(this),this.h=c,this.g={}}b(ha,Cr);var kE=[];function PE(c){ie(c.g,function(d,h){this.g.hasOwnProperty(h)&&dp(d)},c),c.g={}}ha.prototype.N=function(){ha.aa.N.call(this),PE(this)},ha.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gp=a.JSON.stringify,Ex=a.JSON.parse,Ix=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function mp(){}mp.prototype.h=null;function OE(c){return c.h||(c.h=c.i())}function FE(){}var pa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yp(){yt.call(this,"d")}b(yp,yt);function vp(){yt.call(this,"c")}b(vp,yt);var di={},LE=null;function ju(){return LE=LE||new vt}di.La="serverreachability";function VE(c){yt.call(this,di.La,c)}b(VE,yt);function ga(c){let d=ju();St(d,new VE(d))}di.STAT_EVENT="statevent";function jE(c,d){yt.call(this,di.STAT_EVENT,c),this.stat=d}b(jE,yt);function At(c){let d=ju();St(d,new jE(d,c))}di.Ma="timingevent";function BE(c,d){yt.call(this,di.Ma,c),this.size=d}b(BE,yt);function ma(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ya(){this.g=!0}ya.prototype.xa=function(){this.g=!1};function Dx(c,d,h,g,T,M){c.info(function(){if(c.g)if(M)for(var j="",Me=M.split("&"),ft=0;ft<Me.length;ft++){var we=Me[ft].split("=");if(1<we.length){var _t=we[0];we=we[1];var wt=_t.split("_");j=2<=wt.length&&wt[1]=="type"?j+(_t+"="+we+"&"):j+(_t+"=redacted&")}}else j=null;else j=M;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+h+`
`+j})}function Tx(c,d,h,g,T,M,j){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+h+`
`+M+" "+j})}function yo(c,d,h,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+bx(c,h)+(g?" "+g:"")})}function Cx(c,d){c.info(function(){return"TIMEOUT: "+d})}ya.prototype.info=function(){};function bx(c,d){if(!c.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(c=0;c<h.length;c++)if(Array.isArray(h[c])){var g=h[c];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var M=T[0];if(M!="noop"&&M!="stop"&&M!="close")for(var j=1;j<T.length;j++)T[j]=""}}}}return gp(h)}catch{return d}}var Bu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},UE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_p;function Uu(){}b(Uu,mp),Uu.prototype.g=function(){return new XMLHttpRequest},Uu.prototype.i=function(){return{}},_p=new Uu;function br(c,d,h,g){this.j=c,this.i=d,this.l=h,this.R=g||1,this.U=new ha(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $E}function $E(){this.i=null,this.g="",this.h=!1}var HE={},wp={};function Ep(c,d,h){c.L=1,c.v=zu(Wn(d)),c.m=h,c.P=!0,qE(c,null)}function qE(c,d){c.F=Date.now(),$u(c),c.A=Wn(c.v);var h=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),iI(h.i,"t",g),c.C=0,h=c.j.J,c.h=new $E,c.g=II(c.j,h?d:null,!c.m),0<c.O&&(c.M=new wx(m(c.Y,c,c.g),c.O)),d=c.U,h=c.g,g=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(kE[0]=T.toString()),T=kE);for(var M=0;M<T.length;M++){var j=bE(h,T[M],g||d.handleEvent,!1,d.h||d);if(!j)break;d.g[j.key]=j}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ga(),Dx(c.i,c.u,c.A,c.l,c.R,c.m)}br.prototype.ca=function(c){c=c.target;let d=this.M;d&&Kn(c)==3?d.j():this.Y(c)},br.prototype.Y=function(c){try{if(c==this.g)e:{let wt=Kn(this.g);var d=this.g.Ba();let wo=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||dI(this.g)))){this.J||wt!=4||d==7||(d==8||0>=wo?ga(3):ga(2)),Ip(this);var h=this.g.Z();this.X=h;t:if(zE(this)){var g=dI(this.g);c="";var T=g.length,M=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fi(this),va(this);var j="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(M&&d==T-1)});g.length=0,this.h.g+=c,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=h==200,Tx(this.i,this.u,this.A,this.l,this.R,wt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Me,ft=this.g;if((Me=ft.g?ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(Me)){var we=Me;break t}}we=null}if(h=we)yo(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dp(this,h);else{this.o=!1,this.s=3,At(12),fi(this),va(this);break e}}if(this.P){h=!0;let un;for(;!this.J&&this.C<j.length;)if(un=Sx(this,j),un==wp){wt==4&&(this.s=4,At(14),h=!1),yo(this.i,this.l,null,"[Incomplete Response]");break}else if(un==HE){this.s=4,At(15),yo(this.i,this.l,j,"[Invalid Chunk]"),h=!1;break}else yo(this.i,this.l,un,null),Dp(this,un);if(zE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||j.length!=0||this.h.h||(this.s=1,At(16),h=!1),this.o=this.o&&h,!h)yo(this.i,this.l,j,"[Invalid Chunked Response]"),fi(this),va(this);else if(0<j.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Rp(_t),_t.M=!0,At(11))}}else yo(this.i,this.l,j,null),Dp(this,j);wt==4&&fi(this),this.o&&!this.J&&(wt==4?vI(this.j,this):(this.o=!1,$u(this)))}else qx(this.g),h==400&&0<j.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),fi(this),va(this)}}}catch{}finally{}};function zE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Sx(c,d){var h=c.C,g=d.indexOf(`
`,h);return g==-1?wp:(h=Number(d.substring(h,g)),isNaN(h)?HE:(g+=1,g+h>d.length?wp:(d=d.slice(g,g+h),c.C=g+h,d)))}br.prototype.cancel=function(){this.J=!0,fi(this)};function $u(c){c.S=Date.now()+c.I,GE(c,c.I)}function GE(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ma(m(c.ba,c),d)}function Ip(c){c.B&&(a.clearTimeout(c.B),c.B=null)}br.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(Cx(this.i,this.A),this.L!=2&&(ga(),At(17)),fi(this),this.s=2,va(this)):GE(this,this.S-c)};function va(c){c.j.G==0||c.J||vI(c.j,c)}function fi(c){Ip(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,PE(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Dp(c,d){try{var h=c.j;if(h.G!=0&&(h.g==c||Tp(h.h,c))){if(!c.K&&Tp(h.h,c)&&h.G==3){try{var g=h.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<c.F)Zu(h),Ku(h);else break e;Ap(h),At(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=ma(m(h.Za,h),6e3));if(1>=QE(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else pi(h,11)}else if((c.K||h.g==c)&&Zu(h),!K(d))for(T=h.Da.g.parse(d),d=0;d<T.length;d++){let we=T[d];if(h.T=we[0],we=we[1],h.G==2)if(we[0]=="c"){h.K=we[1],h.ia=we[2];let _t=we[3];_t!=null&&(h.la=_t,h.j.info("VER="+h.la));let wt=we[4];wt!=null&&(h.Aa=wt,h.j.info("SVER="+h.Aa));let wo=we[5];wo!=null&&typeof wo=="number"&&0<wo&&(g=1.5*wo,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let un=c.g;if(un){let Ju=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ju){var M=g.h;M.g||Ju.indexOf("spdy")==-1&&Ju.indexOf("quic")==-1&&Ju.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Cp(M,M.h),M.h=null))}if(g.D){let Mp=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;Mp&&(g.ya=Mp,ke(g.I,g.D,Mp))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-c.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var j=c;if(g.qa=EI(g,g.J?g.ia:null,g.W),j.K){ZE(g.h,j);var Me=j,ft=g.L;ft&&(Me.I=ft),Me.B&&(Ip(Me),$u(Me)),g.g=j}else mI(g);0<h.i.length&&Qu(h)}else we[0]!="stop"&&we[0]!="close"||pi(h,7);else h.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?pi(h,7):Sp(h):we[0]!="noop"&&h.l&&h.l.ta(we),h.v=0)}}ga(4)}catch{}}var Ax=class{constructor(c,d){this.g=c,this.map=d}};function WE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function KE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function QE(c){return c.h?1:c.g?c.g.size:0}function Tp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Cp(c,d){c.g?c.g.add(d):c.h=d}function ZE(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}WE.prototype.cancel=function(){if(this.i=YE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function YE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let h of c.g.values())d=d.concat(h.D);return d}return A(c.i)}function Rx(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],h=c.length,g=0;g<h;g++)d.push(c[g]);return d}d=[],h=0;for(g in c)d[h++]=c[g];return d}function Mx(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var h=0;h<c;h++)d.push(h);return d}d=[],h=0;for(let g in c)d[h++]=g;return d}}}function JE(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var h=Mx(c),g=Rx(c),T=g.length,M=0;M<T;M++)d.call(void 0,g[M],h&&h[M],c)}var XE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xx(c,d){if(c){c=c.split("&");for(var h=0;h<c.length;h++){var g=c[h].indexOf("="),T=null;if(0<=g){var M=c[h].substring(0,g);T=c[h].substring(g+1)}else M=c[h];d(M,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function hi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof hi){this.h=c.h,Hu(this,c.j),this.o=c.o,this.g=c.g,qu(this,c.s),this.l=c.l;var d=c.i,h=new Ea;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),eI(this,h),this.m=c.m}else c&&(d=String(c).match(XE))?(this.h=!1,Hu(this,d[1]||"",!0),this.o=_a(d[2]||""),this.g=_a(d[3]||"",!0),qu(this,d[4]),this.l=_a(d[5]||"",!0),eI(this,d[6]||"",!0),this.m=_a(d[7]||"")):(this.h=!1,this.i=new Ea(null,this.h))}hi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(wa(d,tI,!0),":");var h=this.g;return(h||d=="file")&&(c.push("//"),(d=this.o)&&c.push(wa(d,tI,!0),"@"),c.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&c.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&c.push("/"),c.push(wa(h,h.charAt(0)=="/"?Px:kx,!0))),(h=this.i.toString())&&c.push("?",h),(h=this.m)&&c.push("#",wa(h,Fx)),c.join("")};function Wn(c){return new hi(c)}function Hu(c,d,h){c.j=h?_a(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function qu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function eI(c,d,h){d instanceof Ea?(c.i=d,Lx(c.i,c.h)):(h||(d=wa(d,Ox)),c.i=new Ea(d,c.h))}function ke(c,d,h){c.i.set(d,h)}function zu(c){return ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function _a(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function wa(c,d,h){return typeof c=="string"?(c=encodeURI(c).replace(d,Nx),h&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Nx(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var tI=/[#\/\?@]/g,kx=/[#\?:]/g,Px=/[#\?]/g,Ox=/[#\?@]/g,Fx=/#/g;function Ea(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Sr(c){c.g||(c.g=new Map,c.h=0,c.i&&xx(c.i,function(d,h){c.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}n=Ea.prototype,n.add=function(c,d){Sr(this),this.i=null,c=vo(this,c);var h=this.g.get(c);return h||this.g.set(c,h=[]),h.push(d),this.h+=1,this};function nI(c,d){Sr(c),d=vo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function rI(c,d){return Sr(c),d=vo(c,d),c.g.has(d)}n.forEach=function(c,d){Sr(this),this.g.forEach(function(h,g){h.forEach(function(T){c.call(d,T,g,this)},this)},this)},n.na=function(){Sr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let g=0;g<d.length;g++){let T=c[g];for(let M=0;M<T.length;M++)h.push(d[g])}return h},n.V=function(c){Sr(this);let d=[];if(typeof c=="string")rI(this,c)&&(d=d.concat(this.g.get(vo(this,c))));else{c=Array.from(this.g.values());for(let h=0;h<c.length;h++)d=d.concat(c[h])}return d},n.set=function(c,d){return Sr(this),this.i=null,c=vo(this,c),rI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function iI(c,d,h){nI(c,d),0<h.length&&(c.i=null,c.g.set(vo(c,d),A(h)),c.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var g=d[h];let M=encodeURIComponent(String(g)),j=this.V(g);for(g=0;g<j.length;g++){var T=M;j[g]!==""&&(T+="="+encodeURIComponent(String(j[g]))),c.push(T)}}return this.i=c.join("&")};function vo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Lx(c,d){d&&!c.j&&(Sr(c),c.i=null,c.g.forEach(function(h,g){var T=g.toLowerCase();g!=T&&(nI(this,g),iI(this,T,h))},c)),c.j=d}function Vx(c,d){let h=new ya;if(a.Image){let g=new Image;g.onload=y(Ar,h,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Ar,h,"TestLoadImage: error",!1,d,g),g.onabort=y(Ar,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Ar,h,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function jx(c,d){let h=new ya,g=new AbortController,T=setTimeout(()=>{g.abort(),Ar(h,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(M=>{clearTimeout(T),M.ok?Ar(h,"TestPingServer: ok",!0,d):Ar(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Ar(h,"TestPingServer: error",!1,d)})}function Ar(c,d,h,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(h)}catch{}}function Bx(){this.g=new Ix}function Ux(c,d,h){let g=h||"";try{JE(c,function(T,M){let j=T;l(T)&&(j=gp(T)),d.push(g+M+"="+encodeURIComponent(j))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function Ia(c){this.l=c.Ub||null,this.j=c.eb||!1}b(Ia,mp),Ia.prototype.g=function(){return new Gu(this.l,this.j)},Ia.prototype.i=function(c){return function(){return c}}({});function Gu(c,d){vt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Gu,vt),n=Gu.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ta(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Da(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ta(this)),this.g&&(this.readyState=3,Ta(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;oI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function oI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Da(this):Ta(this),this.readyState==3&&oI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Da(this))},n.Qa=function(c){this.g&&(this.response=c,Da(this))},n.ga=function(){this.g&&Da(this)};function Da(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ta(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,c.push(h[0]+": "+h[1]),h=d.next();return c.join(`\r
`)};function Ta(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Gu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function sI(c){let d="";return ie(c,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function bp(c,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=sI(h),typeof c=="string"?h!=null&&encodeURIComponent(String(h)):ke(c,d,h))}function $e(c){vt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b($e,vt);var $x=/^https?$/i,Hx=["POST","PUT"];n=$e.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_p.g(),this.v=this.o?OE(this.o):OE(_p),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(M){aI(this,M);return}if(c=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)h.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let M of g.keys())h.set(M,g.get(M));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(M=>M.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Hx,d,void 0))||g||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,j]of h)this.g.setRequestHeader(M,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lI(this),this.u=!0,this.g.send(c),this.u=!1}catch(M){aI(this,M)}};function aI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,cI(c),Wu(c)}function cI(c){c.A||(c.A=!0,St(c,"complete"),St(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,St(this,"complete"),St(this,"abort"),Wu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wu(this,!0)),$e.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?uI(this):this.bb())},n.bb=function(){uI(this)};function uI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Kn(c)!=4||c.Z()!=2)){if(c.u&&Kn(c)==4)xE(c.Ea,0,c);else if(St(c,"readystatechange"),Kn(c)==4){c.h=!1;try{let j=c.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=j===0){var T=String(c.D).match(XE)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),g=!$x.test(T?T.toLowerCase():"")}h=g}if(h)St(c,"complete"),St(c,"success");else{c.m=6;try{var M=2<Kn(c)?c.g.statusText:""}catch{M=""}c.l=M+" ["+c.Z()+"]",cI(c)}}finally{Wu(c)}}}}function Wu(c,d){if(c.g){lI(c);let h=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||St(c,"ready");try{h.onreadystatechange=g}catch{}}}function lI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Kn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Ex(d)}};function dI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function qx(c){let d={};c=(c.g&&2<=Kn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(K(c[g]))continue;var h=D(c[g]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let M=d[T]||[];d[T]=M,M.push(h)}E(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ca(c,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[c]||d}function fI(c){this.Aa=0,this.i=[],this.j=new ya,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ca("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ca("baseRetryDelayMs",5e3,c),this.cb=Ca("retryDelaySeedMs",1e4,c),this.Wa=Ca("forwardChannelMaxRetries",2,c),this.wa=Ca("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new WE(c&&c.concurrentRequestLimit),this.Da=new Bx,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=fI.prototype,n.la=8,n.G=1,n.connect=function(c,d,h,g){At(0),this.W=c,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=EI(this,null,this.W),Qu(this)};function Sp(c){if(hI(c),c.G==3){var d=c.U++,h=Wn(c.I);if(ke(h,"SID",c.K),ke(h,"RID",d),ke(h,"TYPE","terminate"),ba(c,h),d=new br(c,c.j,d),d.L=2,d.v=zu(Wn(h)),h=!1,a.navigator&&a.navigator.sendBeacon)try{h=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&a.Image&&(new Image().src=d.v,h=!0),h||(d.g=II(d.j,null),d.g.ea(d.v)),d.F=Date.now(),$u(d)}wI(c)}function Ku(c){c.g&&(Rp(c),c.g.cancel(),c.g=null)}function hI(c){Ku(c),c.u&&(a.clearTimeout(c.u),c.u=null),Zu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Qu(c){if(!KE(c.h)&&!c.s){c.s=!0;var d=c.Ga;ua||CE(),la||(ua(),la=!0),sp.add(d,c),c.B=0}}function zx(c,d){return QE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ma(m(c.Ga,c,d),_I(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new br(this,this.j,c),M=this.o;if(this.S&&(M?(M=v(M),I(M,this.S)):M=this.S),this.m!==null||this.O||(T.H=M,M=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=gI(this,T,d),h=Wn(this.I),ke(h,"RID",c),ke(h,"CVER",22),this.D&&ke(h,"X-HTTP-Session-Id",this.D),ba(this,h),M&&(this.O?d="headers="+encodeURIComponent(String(sI(M)))+"&"+d:this.m&&bp(h,this.m,M)),Cp(this.h,T),this.Ua&&ke(h,"TYPE","init"),this.P?(ke(h,"$req",d),ke(h,"SID","null"),T.T=!0,Ep(T,h,null)):Ep(T,h,d),this.G=2}}else this.G==3&&(c?pI(this,c):this.i.length==0||KE(this.h)||pI(this))};function pI(c,d){var h;d?h=d.l:h=c.U++;let g=Wn(c.I);ke(g,"SID",c.K),ke(g,"RID",h),ke(g,"AID",c.T),ba(c,g),c.m&&c.o&&bp(g,c.m,c.o),h=new br(c,c.j,h,c.B+1),c.m===null&&(h.H=c.o),d&&(c.i=d.D.concat(c.i)),d=gI(c,h,1e3),h.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Cp(c.h,h),Ep(h,g,d)}function ba(c,d){c.H&&ie(c.H,function(h,g){ke(d,g,h)}),c.l&&JE({},function(h,g){ke(d,g,h)})}function gI(c,d,h){h=Math.min(c.i.length,h);var g=c.l?m(c.l.Na,c.l,c):null;e:{var T=c.i;let M=-1;for(;;){let j=["count="+h];M==-1?0<h?(M=T[0].g,j.push("ofs="+M)):M=0:j.push("ofs="+M);let Me=!0;for(let ft=0;ft<h;ft++){let we=T[ft].g,_t=T[ft].map;if(we-=M,0>we)M=Math.max(0,T[ft].g-100),Me=!1;else try{Ux(_t,j,"req"+we+"_")}catch{g&&g(_t)}}if(Me){g=j.join("&");break e}}}return c=c.i.splice(0,h),d.D=c,g}function mI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ua||CE(),la||(ua(),la=!0),sp.add(d,c),c.v=0}}function Ap(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ma(m(c.Fa,c),_I(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,yI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ma(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),Ku(this),yI(this))};function Rp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function yI(c){c.g=new br(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Wn(c.qa);ke(d,"RID","rpc"),ke(d,"SID",c.K),ke(d,"AID",c.T),ke(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&ke(d,"TO",c.ja),ke(d,"TYPE","xmlhttp"),ba(c,d),c.m&&c.o&&bp(d,c.m,c.o),c.L&&(c.g.I=c.L);var h=c.g;c=c.ia,h.L=1,h.v=zu(Wn(d)),h.m=null,h.P=!0,qE(h,c)}n.Za=function(){this.C!=null&&(this.C=null,Ku(this),Ap(this),At(19))};function Zu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function vI(c,d){var h=null;if(c.g==d){Zu(c),Rp(c),c.g=null;var g=2}else if(Tp(c.h,d))h=d.D,ZE(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;g=ju(),St(g,new BE(g,h)),Qu(c)}else mI(c);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&zx(c,d)||g==2&&Ap(c)))switch(h&&0<h.length&&(d=c.h,d.i=d.i.concat(h)),T){case 1:pi(c,5);break;case 4:pi(c,10);break;case 3:pi(c,6);break;default:pi(c,2)}}}function _I(c,d){let h=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(h*=2),h*d}function pi(c,d){if(c.j.info("Error code "+d),d==2){var h=m(c.fb,c),g=c.Xa;let T=!g;g=new hi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Hu(g,"https"),zu(g),T?Vx(g.toString(),h):jx(g.toString(),h)}else At(2);c.G=0,c.l&&c.l.sa(d),wI(c),hI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function wI(c){if(c.G=0,c.ka=[],c.l){let d=YE(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function EI(c,d,h){var g=h instanceof hi?Wn(h):new hi(h);if(g.g!="")d&&(g.g=d+"."+g.g),qu(g,g.s);else{var T=a.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var M=new hi(null);g&&Hu(M,g),d&&(M.g=d),T&&qu(M,T),h&&(M.l=h),g=M}return h=c.D,d=c.ya,h&&d&&ke(g,h,d),ke(g,"VER",c.la),ba(c,g),g}function II(c,d,h){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new $e(new Ia({eb:h})):new $e(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function DI(){}n=DI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Yu(){}Yu.prototype.g=function(c,d){return new Ht(c,d)};function Ht(c,d){vt.call(this),this.g=new fI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!K(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!K(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new _o(this)}b(Ht,vt),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Sp(this.g)},Ht.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var h={};h.__data__=c,c=h}else this.u&&(h={},h.__data__=gp(c),c=h);d.i.push(new Ax(d.Ya++,c)),d.G==3&&Qu(d)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Sp(this.g),delete this.g,Ht.aa.N.call(this)};function TI(c){yp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let h in d){c=h;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(TI,yp);function CI(){vp.call(this),this.status=1}b(CI,vp);function _o(c){this.g=c}b(_o,DI),_o.prototype.ua=function(){St(this.g,"a")},_o.prototype.ta=function(c){St(this.g,new TI(c))},_o.prototype.sa=function(c){St(this.g,new CI)},_o.prototype.ra=function(){St(this.g,"b")},Yu.prototype.createWebChannel=Yu.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,av=pr.createWebChannelTransport=function(){return new Yu},sv=pr.getStatEventTarget=function(){return ju()},ov=pr.Event=di,af=pr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bu.NO_ERROR=0,Bu.TIMEOUT=8,Bu.HTTP_ERROR=6,Hc=pr.ErrorCode=Bu,UE.COMPLETE="complete",iv=pr.EventType=UE,FE.EventType=pa,pa.OPEN="a",pa.CLOSE="b",pa.ERROR="c",pa.MESSAGE="d",vt.prototype.listen=vt.prototype.K,hs=pr.WebChannel=FE,cj=pr.FetchXmlHttpFactory=Ia,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,rv=pr.XhrIo=$e}).apply(typeof sf<"u"?sf:typeof self<"u"?self:typeof window<"u"?window:{});var aS="@firebase/firestore",cS="4.7.10";var tt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");var Js="11.5.0";var Qr=new nl("@firebase/firestore");function ws(){return Qr.logLevel}function EA(n){Qr.setLogLevel(n)}function P(n,...e){if(Qr.logLevel<=bn.DEBUG){let t=e.map(Ew);Qr.debug(`Firestore (${Js}): ${n}`,...t)}}function Qe(n,...e){if(Qr.logLevel<=bn.ERROR){let t=e.map(Ew);Qr.error(`Firestore (${Js}): ${n}`,...t)}}function wn(n,...e){if(Qr.logLevel<=bn.WARN){let t=e.map(Ew);Qr.warn(`Firestore (${Js}): ${n}`,...t)}}function Ew(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function q(n="Unexpected state"){let e=`FIRESTORE (${Js}) INTERNAL ASSERTION FAILED: `+n;throw Qe(e),new Error(e)}function G(n,e){n||q()}function IA(n,e){n||q()}function U(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends xI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var st=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var wf=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},gv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(tt.UNAUTHENTICATED))}shutdown(){}},mv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},yv=class{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){G(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new st;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new st,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>x(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new st)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(G(typeof r.accessToken=="string"),new wf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return G(e===null||typeof e=="string"),new tt(e)}},vv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},_v=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new vv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ef=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},wv=class{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,kI(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){G(this.o===void 0);let r=o=>{o.error!=null&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,P("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Ef(this.V));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(G(typeof t.token=="string"),this.R=t.token,new Ef(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function uj(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function Iw(){return new TextEncoder}var If=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=uj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function X(n,e){return n<e?-1:n>e?1:0}function Ev(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return X(r,i);{let o=Iw(),s=lj(o.encode(uS(n,t)),o.encode(uS(e,t)));return s!==0?s:X(r,i)}}t+=r>65535?2:1}return X(n.length,e.length)}function uS(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function lj(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return X(n[t],e[t]);return X(n.length,e.length)}function Rs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function DA(n){return n+"\0"}var lS=-62135596800,dS=1e6,Be=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*dS);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<lS)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dS}_compareTo(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-lS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Z=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Be(0,0))}static max(){return new n(new Be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var fS="__name__",Df=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&q(),r===void 0?r=e.length-t:r>e.length-t&&q(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return X(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Ev(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hr.fromString(e.substring(4,e.length-2))}},ye=class n extends Df{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},dj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ze=class n extends Df{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return dj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fS}static keyField(){return new n([fS])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(ye.fromString(e))}static fromName(e){return new n(ye.fromString(e).popFirst(5))}static empty(){return new n(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ye(e.slice()))}};var Ms=-1,xs=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Iv(n){return n.fields.find(e=>e.kind===2)}function Ui(n){return n.fields.filter(e=>e.kind!==2)}xs.UNKNOWN_ID=-1;var bs=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var nu=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,an.min())}};function TA(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new Be(t+1,0):new Be(t,r));return new an(i,$.empty(),e)}function CA(n){return new an(n.readTime,n.key,Ms)}var an=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Z.min(),$.empty(),Ms)}static max(){return new n(Z.max(),$.empty(),Ms)}};function Dw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:X(n.largestBatchId,e.largestBatchId))}var bA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Tf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function si(n){return x(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==bA)throw n;P("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(f=>{s[l]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Zt="SimpleDb",Cf=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Qi(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new st,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new Qi(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{let i=Tw(r.target.error);this.m.reject(new Qi(e,i))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(P(Zt,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Tv(t)}},Zr=class n{static delete(e){return P(Zt,"Removing database:",e),Hi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!el())return!1;if(n.v())return!0;let e=Sa(),t=n.C(e),r=0<t&&t<10,i=SA(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,n.C(Sa())===12.2&&Qe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}N(e){return x(this,null,function*(){return this.db||(P(Zt,"Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Qi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Qi(e,s))},i.onupgradeneeded=o=>{P(Zt,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.O.B(s,i.transaction,o.oldVersion,this.version).next(()=>{P(Zt,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db})}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return x(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.N(e);let a=Cf.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.S(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.p,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(P(Zt,"Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function SA(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Dv=class{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return Hi(this.q.delete())}},Qi=class extends k{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function ai(n){return n.name==="IndexedDbTransactionError"}var Tv=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(P(Zt,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(P(Zt,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Hi(r)}add(e){return P(Zt,"ADD",this.store.name,e,e),Hi(this.store.add(e))}get(e){return Hi(this.store.get(e)).next(t=>(t===void 0&&(t=null),P(Zt,"GET",this.store.name,e,t),t))}delete(e){return P(Zt,"DELETE",this.store.name,e),Hi(this.store.delete(e))}count(){return P(Zt,"COUNT",this.store.name),Hi(this.store.count())}G(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.j(o,(a,u)=>{s.push(u)}).next(()=>s)}}H(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}J(e,t){P(Zt,"DELETE ALL",this.store.name);let r=this.options(e,t);r.Y=!1;let i=this.cursor(r);return this.j(i,(o,s,a)=>a.delete())}Z(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.j(i,t)}X(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=Tw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}j(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Dv(a),l=t(a.primaryKey,a.value,u);if(l instanceof S){let f=l.catch(p=>(u.done(),S.reject(p)));r.push(f)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Hi(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Tw(r.target.error);t(i)}})}var hS=!1;function Tw(n){let e=Zr.C(Sa());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hS||(hS=!0,setTimeout(()=>{throw r},0)),r}}return n}var Zc="IndexBackfiller",Cv=class{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){P(Zc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>x(this,null,function*(){this.task=null;try{let t=yield this.ee.ne();P(Zc,`Documents written: ${t}`)}catch(t){ai(t)?P(Zc,"Ignoring IndexedDB error during index backfill: ",t):yield si(t)}yield this.te(6e4)}))}},bv=class{constructor(e,t){this.localStore=e,this.persistence=t}ne(e=50){return x(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))})}re(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return P(Zc,`Processing collection: ${s}`),this.ie(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.se(i,o)).next(a=>(P(Zc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}se(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=CA(o);Dw(s,r)>0&&(r=s)}),new an(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Yt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this._e&&this._e(t),t}}n.ae=-1;return n})(),Wr=-1;function Su(n){return n==null}function ru(n){return n===0&&1/n==-1/0}function AA(n){return typeof n=="number"&&Number.isInteger(n)&&!ru(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var bf="";function bt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=pS(e)),e=fj(n.get(t),e);return pS(e)}function fj(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case bf:t+="";break;default:t+=o}}return t}function pS(n){return n+bf+""}function Ln(n){let e=n.length;if(G(e>=2),e===2)return G(n.charAt(0)===bf&&n.charAt(1)===""),ye.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf(bf,o);switch((s<0||s>t)&&q(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:q()}o=s+2}return new ye(r)}var $i="remoteDocuments",Au="owner",ps="owner",iu="mutationQueues",hj="userId",_n="mutations",gS="batchId",Wi="userMutationsIndex",mS=["userId","batchId"];function hf(n,e){return[n,bt(e)]}function RA(n,e,t){return[n,bt(e),t]}var pj={},Ns="documentMutations",Sf="remoteDocumentsV14",gj=["prefixPath","collectionGroup","readTime","documentId"],pf="documentKeyIndex",mj=["prefixPath","collectionGroup","documentId"],MA="collectionGroupIndex",yj=["collectionGroup","readTime","prefixPath","documentId"],ou="remoteDocumentGlobal",Sv="remoteDocumentGlobalKey",ks="targets",xA="queryTargetsIndex",vj=["canonicalId","targetId"],Ps="targetDocuments",_j=["targetId","path"],Cw="documentTargetsIndex",wj=["path","targetId"],Af="targetGlobalKey",Zi="targetGlobal",su="collectionParents",Ej=["collectionId","parent"],Os="clientMetadata",Ij="clientId",Th="bundles",Dj="bundleId",Ch="namedQueries",Tj="name",bw="indexConfiguration",Cj="indexId",Av="collectionGroupIndex",bj="collectionGroup",Rf="indexState",Sj=["indexId","uid"],NA="sequenceNumberIndex",Aj=["uid","sequenceNumber"],Mf="indexEntries",Rj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kA="documentKeyIndex",Mj=["indexId","uid","orderedDocumentKey"],bh="documentOverlays",xj=["userId","collectionPath","documentId"],Rv="collectionPathOverlayIndex",Nj=["userId","collectionPath","largestBatchId"],PA="collectionGroupOverlayIndex",kj=["userId","collectionGroup","largestBatchId"],Sw="globals",Pj="name",OA=[iu,_n,Ns,$i,ks,Au,Zi,Ps,Os,ou,su,Th,Ch],Oj=[...OA,bh],FA=[iu,_n,Ns,Sf,ks,Au,Zi,Ps,Os,ou,su,Th,Ch,bh],LA=FA,Aw=[...LA,bw,Rf,Mf],Fj=Aw,Lj=[...Aw,Sw];var au=class extends Tf{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}};function at(n,e){let t=U(n);return Zr.M(t.ue,e)}function yS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ci(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function VA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Pe=class n{constructor(e,t){this.comparator=e,this.root=t||jn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cs(this.root,e,this.comparator,!0)}},Cs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},jn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw q();let e=this.left.check();if(e!==this.right.check())throw q();return e+(this.isRed()?0:1)}};jn.EMPTY=null,jn.RED=!0,jn.BLACK=!1;jn.EMPTY=new class{constructor(){this.size=0}get key(){throw q()}get value(){throw q()}get color(){throw q()}get left(){throw q()}get right(){throw q()}copy(e,t,r,i,o){return this}insert(e,t,r){return new jn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Re=class n{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xf(this.data.getIterator())}getIteratorFrom(e){return new xf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},xf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function gs(n){return n.hasNext()?n.getNext():void 0}var Jt=class n{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new n([])}unionWith(e){let t=new Re(Ze.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Nf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function jA(){return typeof atob<"u"}var Je=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Nf("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return X(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Je.EMPTY_BYTE_STRING=new Je("");var Vj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yr(n){if(G(!!n),typeof n=="string"){let e=0,t=Vj.exec(n);if(G(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(n.seconds),nanos:Fe(n.nanos)}}function Fe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function vr(n){return typeof n=="string"?Je.fromBase64String(n):Je.fromUint8Array(n)}var BA="server_timestamp",UA="__type__",$A="__previous_value__",HA="__local_write_time__";function Sh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[UA])===null||t===void 0?void 0:t.stringValue)===BA}function Ah(n){let e=n.mapValue.fields[$A];return Sh(e)?Ah(e):e}function cu(n){let e=yr(n.mapValue.fields[HA].timestampValue);return new Be(e.seconds,e.nanos)}var Mv=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},xv="(default)",Yr=class n{constructor(e,t){this.projectId=e,this.database=t||xv}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===xv}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Rw="__type__",qA="__max__",zr={mapValue:{fields:{__type__:{stringValue:qA}}}},Mw="__vector__",Fs="value",gf={nullValue:"NULL_VALUE"};function Jr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sh(n)?4:zA(n)?9007199254740991:Rh(n)?10:11:q()}function $n(n,e){if(n===e)return!0;let t=Jr(n);if(t!==Jr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cu(n).isEqual(cu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=yr(i.timestampValue),a=yr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return vr(i.bytesValue).isEqual(vr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Fe(i.geoPointValue.latitude)===Fe(o.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Fe(i.integerValue)===Fe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Fe(i.doubleValue),a=Fe(o.doubleValue);return s===a?ru(s)===ru(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Rs(n.arrayValue.values||[],e.arrayValue.values||[],$n);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(yS(s)!==yS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!$n(s[u],a[u])))return!1;return!0}(n,e);default:return q()}}function uu(n,e){return(n.values||[]).find(t=>$n(t,e))!==void 0}function Xr(n,e){if(n===e)return 0;let t=Jr(n),r=Jr(e);if(t!==r)return X(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return X(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Fe(o.integerValue||o.doubleValue),u=Fe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return vS(n.timestampValue,e.timestampValue);case 4:return vS(cu(n),cu(e));case 5:return Ev(n.stringValue,e.stringValue);case 6:return function(o,s){let a=vr(o),u=vr(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let f=X(a[l],u[l]);if(f!==0)return f}return X(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=X(Fe(o.latitude),Fe(s.latitude));return a!==0?a:X(Fe(o.longitude),Fe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return _S(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,f;let p=o.fields||{},m=s.fields||{},y=(a=p[Fs])===null||a===void 0?void 0:a.arrayValue,b=(u=m[Fs])===null||u===void 0?void 0:u.arrayValue,A=X(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((f=b?.values)===null||f===void 0?void 0:f.length)||0);return A!==0?A:_S(y,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===zr.mapValue&&s===zr.mapValue)return 0;if(o===zr.mapValue)return 1;if(s===zr.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let m=Ev(u[p],f[p]);if(m!==0)return m;let y=Xr(a[u[p]],l[f[p]]);if(y!==0)return y}return X(u.length,f.length)}(n.mapValue,e.mapValue);default:throw q()}}function vS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return X(n,e);let t=yr(n),r=yr(e),i=X(t.seconds,r.seconds);return i!==0?i:X(t.nanos,r.nanos)}function _S(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Xr(t[i],r[i]);if(o)return o}return X(t.length,r.length)}function Ls(n){return Nv(n)}function Nv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=yr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return vr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Nv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Nv(t.fields[s])}`;return i+"}"}(n.mapValue):q()}function mf(n){switch(Jr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Ah(n);return e?16+mf(e):16;case 5:return 2*n.stringValue.length;case 6:return vr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+mf(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return ci(r.fields,(o,s)=>{i+=o.length+mf(s)}),i}(n.mapValue);default:throw q()}}function Yi(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kv(n){return!!n&&"integerValue"in n}function lu(n){return!!n&&"arrayValue"in n}function wS(n){return!!n&&"nullValue"in n}function ES(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yf(n){return!!n&&"mapValue"in n}function Rh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Rw])===null||t===void 0?void 0:t.stringValue)===Mw}function Yc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ci(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Yc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function zA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===qA}var GA={mapValue:{fields:{[Rw]:{stringValue:Mw},[Fs]:{arrayValue:{}}}}};function jj(n){return"nullValue"in n?gf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Yi(Yr.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Rh(n)?GA:{mapValue:{}}:q()}function Bj(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Yi(Yr.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?GA:"mapValue"in n?Rh(n)?{mapValue:{}}:zr:q()}function IS(n,e){let t=Xr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function DS(n,e){let t=Xr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Ct=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!yf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yc(t)}setAll(e){let t=Ze.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Yc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());yf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $n(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];yf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ci(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Yc(this.value))}};function WA(n){let e=[];return ci(n.fields,(t,r)=>{let i=new Ze([t]);if(yf(r)){let o=WA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Jt(e)}var nt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Z.min(),Z.min(),Z.min(),Ct.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Z.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Z.min(),Z.min(),Ct.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Z.min(),Z.min(),Ct.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Hn=class{constructor(e,t){this.position=e,this.inclusive=t}};function TS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=Xr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function CS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$n(n.position[t],e.position[t]))return!1;return!0}var Ji=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Uj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var kf=class{},fe=class n extends kf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Fv(e,t,r):t==="array-contains"?new jv(e,r):t==="in"?new Pf(e,r):t==="not-in"?new Bv(e,r):t==="array-contains-any"?new Uv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Lv(e,r):new Vv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Xr(t,this.value)):t!==null&&Jr(this.value)===Jr(t)&&this.matchesComparison(Xr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Se=class n extends kf{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new n(e,t)}matches(e){return Vs(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}};function Vs(n){return n.op==="and"}function Pv(n){return n.op==="or"}function xw(n){return KA(n)&&Vs(n)}function KA(n){for(let e of n.filters)if(e instanceof Se)return!1;return!0}function Ov(n){if(n instanceof fe)return n.field.canonicalString()+n.op.toString()+Ls(n.value);if(xw(n))return n.filters.map(e=>Ov(e)).join(",");{let e=n.filters.map(t=>Ov(t)).join(",");return`${n.op}(${e})`}}function QA(n,e){return n instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&$n(r.value,i.value)}(n,e):n instanceof Se?function(r,i){return i instanceof Se&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&QA(s,i.filters[a]),!0):!1}(n,e):void q()}function ZA(n,e){let t=n.filters.concat(e);return Se.create(t,n.op)}function YA(n){return n instanceof fe?function(t){return`${t.field.canonicalString()} ${t.op} ${Ls(t.value)}`}(n):n instanceof Se?function(t){return t.op.toString()+" {"+t.getFilters().map(YA).join(" ,")+"}"}(n):"Filter"}var Fv=class extends fe{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},Lv=class extends fe{constructor(e,t){super(e,"in",t),this.keys=JA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Vv=class extends fe{constructor(e,t){super(e,"not-in",t),this.keys=JA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function JA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var jv=class extends fe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return lu(t)&&uu(t.arrayValue,this.value)}},Pf=class extends fe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&uu(this.value.arrayValue,t)}},Bv=class extends fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!uu(this.value.arrayValue,t)}},Uv=class extends fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!lu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>uu(this.value.arrayValue,r))}};var $v=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.le=null}};function Hv(n,e=null,t=[],r=[],i=null,o=null,s=null){return new $v(n,e,t,r,i,o,s)}function Xi(n){let e=U(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ov(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Su(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ls(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ls(r)).join(",")),e.le=t}return e.le}function Ru(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Uj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!QA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!CS(n.startAt,e.startAt)&&CS(n.endAt,e.endAt)}function Of(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Ff(n,e){return n.filters.filter(t=>t instanceof fe&&t.field.isEqual(e))}function bS(n,e,t){let r=gf,i=!0;for(let o of Ff(n,e)){let s=gf,a=!0;switch(o.op){case"<":case"<=":s=jj(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=gf}IS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];IS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function SS(n,e,t){let r=zr,i=!0;for(let o of Ff(n,e)){let s=zr,a=!0;switch(o.op){case">=":case">":s=Bj(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=zr}DS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];DS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var En=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}};function XA(n,e,t,r,i,o,s,a){return new En(n,e,t,r,i,o,s,a)}function Xs(n){return new En(n)}function AS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Nw(n){return n.collectionGroup!==null}function Ss(n){let e=U(n);if(e.he===null){e.he=[];let t=new Set;for(let o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Re(Ze.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new Ji(o,r))}),t.has(Ze.keyField().canonicalString())||e.he.push(new Ji(Ze.keyField(),r))}return e.he}function Pt(n){let e=U(n);return e.Pe||(e.Pe=$j(e,Ss(n))),e.Pe}function $j(n,e){if(n.limitType==="F")return Hv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ji(i.field,o)});let t=n.endAt?new Hn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Hn(n.startAt.position,n.startAt.inclusive):null;return Hv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function qv(n,e){let t=n.filters.concat([e]);return new En(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Lf(n,e,t){return new En(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Mu(n,e){return Ru(Pt(n),Pt(e))&&n.limitType===e.limitType}function eR(n){return`${Xi(Pt(n))}|lt:${n.limitType}`}function Es(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>YA(i)).join(", ")}]`),Su(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ls(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ls(i)).join(",")),`Target(${r})`}(Pt(n))}; limitType=${n.limitType})`}function xu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Ss(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=TS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Ss(r),i)||r.endAt&&!function(s,a,u){let l=TS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Ss(r),i))}(n,e)}function tR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function nR(n){return(e,t)=>{let r=!1;for(let i of Ss(n)){let o=Hj(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Hj(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Xr(u,l):q()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return q()}}var In=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ci(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return VA(this.inner)}size(){return this.innerSize}};var qj=new Pe($.comparator);function Ut(){return qj}var rR=new Pe($.comparator);function Kc(...n){let e=rR;for(let t of n)e=e.insert(t.key,t);return e}function iR(n){let e=rR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Vn(){return Jc()}function oR(){return Jc()}function Jc(){return new In(n=>n.toString(),(n,e)=>n.isEqual(e))}var zj=new Pe($.comparator),Gj=new Re($.comparator);function se(...n){let e=Gj;for(let t of n)e=e.add(t);return e}var Wj=new Re(X);function kw(){return Wj}function Pw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ru(e)?"-0":e}}function sR(n){return{integerValue:""+n}}function aR(n,e){return AA(e)?sR(e):Pw(n,e)}var js=class{constructor(){this._=void 0}};function Kj(n,e,t){return n instanceof ei?function(i,o){let s={fields:{[UA]:{stringValue:BA},[HA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Sh(o)&&(o=Ah(o)),o&&(s.fields[$A]=o),{mapValue:s}}(t,e):n instanceof _r?uR(n,e):n instanceof wr?lR(n,e):function(i,o){let s=cR(i,o),a=RS(s)+RS(i.Ie);return kv(s)&&kv(i.Ie)?sR(a):Pw(i.serializer,a)}(n,e)}function Qj(n,e,t){return n instanceof _r?uR(n,e):n instanceof wr?lR(n,e):t}function cR(n,e){return n instanceof ti?function(r){return kv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var ei=class extends js{},_r=class extends js{constructor(e){super(),this.elements=e}};function uR(n,e){let t=dR(e);for(let r of n.elements)t.some(i=>$n(i,r))||t.push(r);return{arrayValue:{values:t}}}var wr=class extends js{constructor(e){super(),this.elements=e}};function lR(n,e){let t=dR(e);for(let r of n.elements)t=t.filter(i=>!$n(i,r));return{arrayValue:{values:t}}}var ti=class extends js{constructor(e,t){super(),this.serializer=e,this.Ie=t}};function RS(n){return Fe(n.integerValue||n.doubleValue)}function dR(n){return lu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var eo=class{constructor(e,t){this.field=e,this.transform=t}};function Zj(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof _r&&i instanceof _r||r instanceof wr&&i instanceof wr?Rs(r.elements,i.elements,$n):r instanceof ti&&i instanceof ti?$n(r.Ie,i.Ie):r instanceof ei&&i instanceof ei}(n.transform,e.transform)}var zv=class{constructor(e,t){this.version=e,this.transformResults=t}},Ge=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function vf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Bs=class{};function fR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ri(n.key,Ge.none()):new ni(n.key,n.data,Ge.none());{let t=n.data,r=Ct.empty(),i=new Re(Ze.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Dn(n.key,r,new Jt(i.toArray()),Ge.none())}}function Yj(n,e,t){n instanceof ni?function(i,o,s){let a=i.value.clone(),u=xS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Dn?function(i,o,s){if(!vf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=xS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(hR(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Xc(n,e,t,r){return n instanceof ni?function(o,s,a,u){if(!vf(o.precondition,s))return a;let l=o.value.clone(),f=NS(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Dn?function(o,s,a,u){if(!vf(o.precondition,s))return a;let l=NS(o.fieldTransforms,u,s),f=s.data;return f.setAll(hR(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return vf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function Jj(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=cR(r.transform,i||null);o!=null&&(t===null&&(t=Ct.empty()),t.set(r.field,o))}return t||null}function MS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Rs(r,i,(o,s)=>Zj(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ni=class extends Bs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Dn=class extends Bs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function hR(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function xS(n,e,t){let r=new Map;G(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Qj(s,a,t[i]))}return r}function NS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,Kj(o,s,e))}return r}var ri=class extends Bs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},du=class extends Bs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var fu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Yj(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Xc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Xc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=oR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=fR(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),se())}isEqual(e){return this.batchId===e.batchId&&Rs(this.mutations,e.mutations,(t,r)=>MS(t,r))&&Rs(this.baseMutations,e.baseMutations,(t,r)=>MS(t,r))}},Gv=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){G(e.mutations.length===r.length);let i=function(){return zj}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var hu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Wv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Xe,me;function pR(n){switch(n){case R.OK:return q();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0;default:return q()}}function gR(n){if(n===void 0)return Qe("GRPC error has no .code"),R.UNKNOWN;switch(n){case Xe.OK:return R.OK;case Xe.CANCELLED:return R.CANCELLED;case Xe.UNKNOWN:return R.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return R.INTERNAL;case Xe.UNAVAILABLE:return R.UNAVAILABLE;case Xe.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Xe.NOT_FOUND:return R.NOT_FOUND;case Xe.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Xe.ABORTED:return R.ABORTED;case Xe.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Xe.DATA_LOSS:return R.DATA_LOSS;default:return q()}}(me=Xe||(Xe={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";var kS=null;var Xj=new hr([4294967295,4294967295],0);function PS(n){let e=Iw().encode(n),t=new nv;return t.update(e),new Uint8Array(t.digest())}function OS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new hr([t,r],0),new hr([i,o],0)]}var Kv=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ki(`Invalid padding: ${t}`);if(r<0)throw new Ki(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ki(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ki(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=hr.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(hr.fromNumber(r)));return i.compare(Xj)===1&&(i=new hr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;let t=PS(e),[r,i]=OS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ae(r,i,o);if(!this.Re(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ee===0)return;let t=PS(e),[r,i]=OS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ae(r,i,o);this.Ve(s)}}Ve(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ki=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var pu=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,gu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Z.min(),i,new Pe(X),Ut(),se())}},gu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,se(),se(),se())}};var As=class{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}},Vf=class{constructor(e,t){this.targetId=e,this.ge=t}},jf=class{constructor(e,t,r=Je.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Bf=class{constructor(){this.pe=0,this.ye=FS(),this.we=Je.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=se(),t=se(),r=se();return this.ye.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:q()}}),new gu(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=FS()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,G(this.pe>=0)}Le(){this.be=!0,this.Se=!0}},Qv=class{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ut(),this.$e=cf(),this.Ue=cf(),this.Ke=new Pe(X)}We(e){for(let t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(let t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{let r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:q()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){let t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){let o=i.target;if(Of(o))if(r===0){let s=new $(o.path);this.ze(t,s,nt.newNoDocument(s,Z.min()))}else G(r===1);else{let s=this.et(t);if(s!==r){let a=this.tt(e),u=a?this.nt(a,e,s):1;if(u!==0){this.Ye(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,l)}kS?.rt(function(f,p,m,y,b){var A,N,H,K,V,J;let re={localCacheCount:f,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},ie=p.unchangedNames;return ie&&(re.bloomFilter={applied:b===0,hashCount:(A=ie?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(K=(H=(N=ie?.bits)===null||N===void 0?void 0:N.bitmap)===null||H===void 0?void 0:H.length)!==null&&K!==void 0?K:0,padding:(J=(V=ie?.bits)===null||V===void 0?void 0:V.padding)!==null&&J!==void 0?J:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),re}(s,e.ge,this.ke.it(),a,u))}}}}tt(e){let t=e.ge.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=vr(r).toUint8Array()}catch(u){if(u instanceof Nf)return wn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Kv(s,i,o)}catch(u){return wn(u instanceof Ki?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ee===0?null:a}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){let r=this.ke.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.ke.it(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,o,null),i++)}),i}ot(e){let t=new Map;this.qe.forEach((o,s)=>{let a=this.Xe(s);if(a){if(o.current&&Of(a.target)){let u=new $(a.target.path);this._t(u).has(s)||this.ut(s,u)||this.ze(s,u,nt.newNoDocument(u,e))}o.ve&&(t.set(s,o.Fe()),o.Me())}});let r=se();this.Ue.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Xe(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.Qe.forEach((o,s)=>s.setReadTime(e));let i=new pu(e,t,this.Ke,this.Qe,r);return this.Qe=Ut(),this.$e=cf(),this.Ue=cf(),this.Ke=new Pe(X),i}Ge(e,t){if(!this.Je(e))return;let r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;let i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){let t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Bf,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Re(X),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Re(X),this.$e=this.$e.insert(e,t)),t}Je(e){let t=this.Xe(e)!==null;return t||P("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){let t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Bf),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}};function cf(){return new Pe($.comparator)}function FS(){return new Pe($.comparator)}var e2={asc:"ASCENDING",desc:"DESCENDING"},t2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},n2={and:"AND",or:"OR"},Zv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Yv(n,e){return n.useProto3Json||Su(e)?e:{value:e}}function Us(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function r2(n,e){return Us(n,e.toTimestamp())}function Ye(n){return G(!!n),Z.fromTimestamp(function(t){let r=yr(t);return new Be(r.seconds,r.nanos)}(n))}function Ow(n,e){return Jv(n,e).canonicalString()}function Jv(n,e){let t=function(i){return new ye(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function yR(n){let e=ye.fromString(n);return G(SR(e)),e}function mu(n,e){return Ow(n.databaseId,e.path)}function Bn(n,e){let t=yR(e);if(t.get(1)!==n.databaseId.projectId)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(wR(t))}function vR(n,e){return Ow(n.databaseId,e)}function _R(n){let e=yR(n);return e.length===4?ye.emptyPath():wR(e)}function Xv(n){return new ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function wR(n){return G(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function LS(n,e,t){return{name:mu(n,e),fields:t.value.mapValue.fields}}function ER(n,e,t){let r=Bn(n,e.name),i=Ye(e.updateTime),o=e.createTime?Ye(e.createTime):Z.min(),s=new Ct({mapValue:{fields:e.fields}}),a=nt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function i2(n,e){return"found"in e?function(r,i){G(!!i.found),i.found.name,i.found.updateTime;let o=Bn(r,i.found.name),s=Ye(i.found.updateTime),a=i.found.createTime?Ye(i.found.createTime):Z.min(),u=new Ct({mapValue:{fields:i.found.fields}});return nt.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){G(!!i.missing),G(!!i.readTime);let o=Bn(r,i.missing),s=Ye(i.readTime);return nt.newNoDocument(o,s)}(n,e):q()}function o2(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,f){return l.useProto3Json?(G(f===void 0||typeof f=="string"),Je.fromBase64String(f||"")):(G(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Je.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let f=l.code===void 0?R.UNKNOWN:gR(l.code);return new k(f,l.message||"")}(s);t=new jf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Bn(n,r.document.name),o=Ye(r.document.updateTime),s=r.document.createTime?Ye(r.document.createTime):Z.min(),a=new Ct({mapValue:{fields:r.document.fields}}),u=nt.newFoundDocument(i,o,s,a),l=r.targetIds||[],f=r.removedTargetIds||[];t=new As(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Bn(n,r.document),o=r.readTime?Ye(r.readTime):Z.min(),s=nt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new As([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Bn(n,r.document),o=r.removedTargetIds||[];t=new As([],o,i,null)}else{if(!("filter"in e))return q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Wv(i,o),a=r.targetId;t=new Vf(a,s)}}return t}function yu(n,e){let t;if(e instanceof ni)t={update:LS(n,e.key,e.value)};else if(e instanceof ri)t={delete:mu(n,e.key)};else if(e instanceof Dn)t={update:LS(n,e.key,e.data),updateMask:d2(e.fieldMask)};else{if(!(e instanceof du))return q();t={verify:mu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof ei)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof _r)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof wr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ti)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw q()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:r2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:q()}(n,e.precondition)),t}function e_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Ge.updateTime(Ye(o.updateTime)):o.exists!==void 0?Ge.exists(o.exists):Ge.none()}(e.currentDocument):Ge.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)G(a.setToServerValue==="REQUEST_TIME"),u=new ei;else if("appendMissingElements"in a){let f=a.appendMissingElements.values||[];u=new _r(f)}else if("removeAllFromArray"in a){let f=a.removeAllFromArray.values||[];u=new wr(f)}else"increment"in a?u=new ti(s,a.increment):q();let l=Ze.fromServerFormat(a.fieldPath);return new eo(l,u)}(n,i)):[];if(e.update){e.update.name;let i=Bn(n,e.update.name),o=new Ct({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new Jt(l.map(f=>Ze.fromServerFormat(f)))}(e.updateMask);return new Dn(i,o,s,t,r)}return new ni(i,o,t,r)}if(e.delete){let i=Bn(n,e.delete);return new ri(i,t)}if(e.verify){let i=Bn(n,e.verify);return new du(i,t)}return q()}function s2(n,e){return n&&n.length>0?(G(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Ye(i.updateTime):Ye(o);return s.isEqual(Z.min())&&(s=Ye(o)),new zv(s,i.transformResults||[])}(t,e))):[]}function IR(n,e){return{documents:[vR(n,e.path)]}}function DR(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=vR(n,i);let o=function(l){if(l.length!==0)return bR(Se.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(f=>function(m){return{field:Is(m.field),direction:c2(m.dir)}}(f))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Yv(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ht:t,parent:i}}function TR(n){let e=_R(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){G(r===1);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=function(p){let m=CR(p);return m instanceof Se&&xw(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new Ji(Ds(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Su(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new Hn(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new Hn(y,m)}(t.endAt)),XA(e,i,s,o,a,"F",u,l)}function a2(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function CR(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ds(t.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ds(t.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ds(t.unaryFilter.field);return fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ds(t.unaryFilter.field);return fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return q()}}(n):n.fieldFilter!==void 0?function(t){return fe.create(Ds(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return q()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Se.create(t.compositeFilter.filters.map(r=>CR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q()}}(t.compositeFilter.op))}(n):q()}function c2(n){return e2[n]}function u2(n){return t2[n]}function l2(n){return n2[n]}function Is(n){return{fieldPath:n.canonicalString()}}function Ds(n){return Ze.fromServerFormat(n.fieldPath)}function bR(n){return n instanceof fe?function(t){if(t.op==="=="){if(ES(t.value))return{unaryFilter:{field:Is(t.field),op:"IS_NAN"}};if(wS(t.value))return{unaryFilter:{field:Is(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ES(t.value))return{unaryFilter:{field:Is(t.field),op:"IS_NOT_NAN"}};if(wS(t.value))return{unaryFilter:{field:Is(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Is(t.field),op:u2(t.op),value:t.value}}}(n):n instanceof Se?function(t){let r=t.getFilters().map(i=>bR(i));return r.length===1?r[0]:{compositeFilter:{op:l2(t.op),filters:r}}}(n):q()}function d2(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function SR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var $s=class n{constructor(e,t,r,i,o=Z.min(),s=Z.min(),a=Je.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Uf=class{constructor(e){this.Tt=e}};function f2(n,e){let t;if(e.document)t=ER(n.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=no(e.noDocument.readTime);t=nt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return q();{let r=$.fromSegments(e.unknownDocument.path),i=no(e.unknownDocument.version);t=nt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Be(i[0],i[1]);return Z.fromTimestamp(o)}(e.readTime)),t}function VS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:$f(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:mu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Us(o,s.version.toTimestamp()),createTime:Us(o,s.createTime.toTimestamp())}}(n.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:to(e.version)};else{if(!e.isUnknownDocument())return q();r.unknownDocument={path:t.path.toArray(),version:to(e.version)}}return r}function $f(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function to(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function no(n){let e=new Be(n.seconds,n.nanoseconds);return Z.fromTimestamp(e)}function qi(n,e){let t=(e.baseMutations||[]).map(o=>e_(n.Tt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>e_(n.Tt,o)),i=Be.fromMillis(e.localWriteTimeMs);return new fu(e.batchId,i,t,r)}function Qc(n){let e=no(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?no(n.lastLimboFreeSnapshotVersion):Z.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return G(o.documents.length===1),Pt(Xs(_R(o.documents[0])))}(n.query):function(o){return Pt(TR(o))}(n.query),new $s(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Je.fromBase64String(n.resumeToken))}function AR(n,e){let t=to(e.snapshotVersion),r=to(e.lastLimboFreeSnapshotVersion),i;i=Of(e.target)?IR(n.Tt,e.target):DR(n.Tt,e.target).ht;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xi(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Fw(n){let e=TR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Lf(e,e.limit,"L"):e}function cv(n,e){return new hu(e.largestBatchId,e_(n.Tt,e.overlayMutation))}function jS(n,e){let t=e.path.lastSegment();return[n,bt(e.path.popLast()),t]}function BS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:to(r.readTime),documentKey:bt(r.documentKey.path),largestBatchId:r.largestBatchId}}var t_=class{getBundleMetadata(e,t){return US(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:no(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return US(e).put(function(i){return{bundleId:i.id,createTime:to(Ye(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return $S(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:Fw(o.bundledQuery),readTime:no(o.readTime)}}(r)})}saveNamedQuery(e,t){return $S(e).put(function(i){return{name:i.name,readTime:to(Ye(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function US(n){return at(n,Th)}function $S(n){return at(n,Ch)}var Hf=class n{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return qc(e).get(jS(this.userId,t)).next(r=>r?cv(this.serializer,r):null)}getOverlays(e,t){let r=Vn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new hu(t,s);i.push(this.Et(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(bt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(qc(e).J(Rv,a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Vn(),o=bt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return qc(e).G(Rv,s).next(a=>{for(let u of a){let l=cv(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Vn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qc(e).Z({index:PA,range:a},(u,l,f)=>{let p=cv(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):f.done()}).next(()=>o)}Et(e,t){return qc(e).put(function(i,o,s){let[a,u,l]=jS(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:yu(i.Tt,s.mutation)}}(this.serializer,this.userId,t))}};function qc(n){return at(n,bh)}var n_=class{dt(e){return at(e,Sw)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Je.fromUint8Array(r):Je.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var gr=class{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(Fe(e.integerValue));else if("doubleValue"in e){let r=Fe(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),ru(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=yr(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(vr(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?zA(e)?this.ft(t,Number.MAX_SAFE_INTEGER):Rh(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):q()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){let r=e.fields||{};this.ft(t,55);for(let i of Object.keys(r))this.wt(i,t),this.Rt(r[i],t)}vt(e,t){var r,i;let o=e.fields||{};this.ft(t,53);let s=Fs,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.ft(t,15),t.gt(Fe(a)),this.wt(s,t),this.Rt(o[s],t)}Ft(e,t){let r=e.values||[];this.ft(t,50);for(let i of r)this.Rt(i,t)}Dt(e,t){this.ft(t,37),$.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}};gr.xt=new gr;var ms=255;function h2(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function HS(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=h2(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var r_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{let i=t.codePointAt(0);this.Nt(240|i>>>18),this.Nt(128|63&i>>>12),this.Nt(128|63&i>>>6),this.Nt(128|63&i)}}this.Bt()}$t(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{let i=t.codePointAt(0);this.kt(240|i>>>18),this.kt(128|63&i>>>12),this.kt(128|63&i>>>6),this.kt(128|63&i)}}this.qt()}Ut(e){let t=this.Kt(e),r=HS(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Gt(e){let t=this.Kt(e),r=HS(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}zt(){this.jt(ms),this.jt(255)}Ht(){this.Jt(ms),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Nt(e){let t=255&e;t===0?(this.jt(0),this.jt(255)):t===ms?(this.jt(ms),this.jt(0)):this.jt(t)}kt(e){let t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===ms?(this.Jt(ms),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},i_=class{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}},o_=class{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}},zi=class{constructor(){this.Zt=new r_,this.Xt=new i_(this.Zt),this.en=new o_(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}};var Gi=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}nn(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Ur(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=qS(n.arrayValue,e.arrayValue),t!==0?t:(t=qS(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function qS(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var qf=class{constructor(e){this.rn=new Re((t,r)=>Ze.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(let t of e.filters){let r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(G(e.collectionGroup===this.collectionId),this.an)return!1;let t=Iv(e);if(t!==void 0&&!this.cn(t))return!1;let r=Ui(e),i=new Set,o=0,s=0;for(;o<r.length&&this.cn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.rn.size>0){let a=this.rn.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.ln(a,u)||!this.hn(this.sn[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.sn.length||!this.hn(this.sn[s++],a))return!1}return!0}Pn(){if(this.an)return null;let e=new Re(Ze.comparator),t=[];for(let r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new bs(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new bs(r.field,0))}for(let r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new bs(r.field,r.dir==="asc"?0:1)));return new xs(xs.UNKNOWN_ID,this.collectionId,t,nu.empty())}cn(e){for(let t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function RR(n){var e,t;if(G(n instanceof fe||n instanceof Se),n instanceof fe){if(n instanceof Pf){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>fe.create(n.field,"==",o)))||[];return Se.create(i,"or")}return n}let r=n.filters.map(i=>RR(i));return Se.create(r,n.op)}function p2(n){if(n.getFilters().length===0)return[];let e=c_(RR(n));return G(MR(e)),s_(e)||a_(e)?[e]:e.getFilters()}function s_(n){return n instanceof fe}function a_(n){return n instanceof Se&&xw(n)}function MR(n){return s_(n)||a_(n)||function(t){if(t instanceof Se&&Pv(t)){for(let r of t.getFilters())if(!s_(r)&&!a_(r))return!1;return!0}return!1}(n)}function c_(n){if(G(n instanceof fe||n instanceof Se),n instanceof fe)return n;if(n.filters.length===1)return c_(n.filters[0]);let e=n.filters.map(r=>c_(r)),t=Se.create(e,n.op);return t=zf(t),MR(t)?t:(G(t instanceof Se),G(Vs(t)),G(t.filters.length>1),t.filters.reduce((r,i)=>Lw(r,i)))}function Lw(n,e){let t;return G(n instanceof fe||n instanceof Se),G(e instanceof fe||e instanceof Se),t=n instanceof fe?e instanceof fe?function(i,o){return Se.create([i,o],"and")}(n,e):zS(n,e):e instanceof fe?zS(e,n):function(i,o){if(G(i.filters.length>0&&o.filters.length>0),Vs(i)&&Vs(o))return ZA(i,o.getFilters());let s=Pv(i)?i:o,a=Pv(i)?o:i,u=s.filters.map(l=>Lw(l,a));return Se.create(u,"or")}(n,e),zf(t)}function zS(n,e){if(Vs(e))return ZA(e,n.getFilters());{let t=e.filters.map(r=>Lw(n,r));return Se.create(t,"or")}}function zf(n){if(G(n instanceof fe||n instanceof Se),n instanceof fe)return n;let e=n.getFilters();if(e.length===1)return zf(e[0]);if(KA(n))return n;let t=e.map(i=>zf(i)),r=[];return t.forEach(i=>{i instanceof fe?r.push(i):i instanceof Se&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Se.create(r,n.op)}var u_=class{constructor(){this.Tn=new vu}addToCollectionParentIndex(e,t){return this.Tn.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(an.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(an.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},vu=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Re(ye.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Re(ye.comparator)).toArray()}};var GS="IndexedDbIndexManager",uf=new Uint8Array(0),l_=class{constructor(e,t){this.databaseId=t,this.In=new vu,this.En=new In(r=>Xi(r),(r,i)=>Ru(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});let o={collectionId:r,parent:bt(i)};return WS(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[DA(t),""],!1,!0);return WS(e).G(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Ln(s.parent))}return r})}addFieldIndex(e,t){let r=zc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=vs(e);return o.next(a=>{s.put(BS(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=zc(e),i=vs(e),o=ys(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=zc(e),r=ys(e),i=vs(e);return t.J().next(()=>r.J()).next(()=>i.J())}createTargetIndexes(e,t){return S.forEach(this.dn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new qf(r).Pn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=ys(e),i=!0,o=new Map;return S.forEach(this.dn(t),s=>this.An(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=se(),a=[];return S.forEach(o,(u,l)=>{P(GS,`Using index ${function(V){return`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map(J=>`${J.fieldPath}:${J.kind}`).join(",")}`}(u)} to execute ${Xi(t)}`);let f=function(V,J){let re=Iv(J);if(re===void 0)return null;for(let ie of Ff(V,re.fieldPath))switch(ie.op){case"array-contains-any":return ie.value.arrayValue.values||[];case"array-contains":return[ie.value]}return null}(l,u),p=function(V,J){let re=new Map;for(let ie of Ui(J))for(let E of Ff(V,ie.fieldPath))switch(E.op){case"==":case"in":re.set(ie.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return re.set(ie.fieldPath.canonicalString(),E.value),Array.from(re.values())}return null}(l,u),m=function(V,J){let re=[],ie=!0;for(let E of Ui(J)){let v=E.kind===0?bS(V,E.fieldPath,V.startAt):SS(V,E.fieldPath,V.startAt);re.push(v.value),ie&&(ie=v.inclusive)}return new Hn(re,ie)}(l,u),y=function(V,J){let re=[],ie=!0;for(let E of Ui(J)){let v=E.kind===0?SS(V,E.fieldPath,V.endAt):bS(V,E.fieldPath,V.endAt);re.push(v.value),ie&&(ie=v.inclusive)}return new Hn(re,ie)}(l,u),b=this.Rn(u,l,m),A=this.Rn(u,l,y),N=this.Vn(u,l,p),H=this.mn(u.indexId,f,b,m.inclusive,A,y.inclusive,N);return S.forEach(H,K=>r.H(K,t.limit).next(V=>{V.forEach(J=>{let re=$.fromSegments(J.documentKey);s.has(re)||(s=s.add(re),a.push(re))})}))}).next(()=>a)}return S.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=p2(Se.create(e.filters,"and")).map(r=>Hv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),f=[];for(let p=0;p<u;++p){let m=t?this.fn(t[p/l]):uf,y=this.gn(e,m,r[p%l],i),b=this.pn(e,m,o[p%l],s),A=a.map(N=>this.gn(e,m,N,!0));f.push(...this.createRange(y,b,A))}return f}gn(e,t,r,i){let o=new Gi(e,$.empty(),t,r);return i?o:o.nn()}pn(e,t,r,i){let o=new Gi(e,$.empty(),t,r);return i?o.nn():o}An(e,t){let r=new qf(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.un(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.dn(t);return S.forEach(i,o=>this.An(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Re(Ze.comparator),f=!1;for(let p of u.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?f=!0:l=l.add(m.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(f?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}yn(e,t){let r=new zi;for(let i of Ui(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.tn(i.kind);gr.xt.At(o,s)}return r.Yt()}fn(e){let t=new zi;return gr.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){let r=new zi;return gr.xt.At(Yi(this.databaseId,t),r.tn(function(o){let s=Ui(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let i=[];i.push(new zi);let o=0;for(let s of Ui(e)){let a=r[o++];for(let u of i)if(this.Sn(t,s.fieldPath)&&lu(a))i=this.bn(i,s,a);else{let l=u.tn(s.kind);gr.xt.At(a,l)}}return this.Dn(i)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}bn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new zi;u.seed(a.Yt()),gr.xt.At(s,u.tn(t.kind)),o.push(u)}return o}Sn(e,t){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=zc(e),i=vs(e);return(t?r.G(Av,IDBKeyRange.bound(t,t)):r.G()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(f,p){let m=p?new nu(p.sequenceNumber,new an(no(p.readTime),new $(Ln(p.documentKey)),p.largestBatchId)):nu.empty(),y=f.fields.map(([b,A])=>new bs(Ze.fromServerFormat(b),A));return new xs(f.indexId,f.collectionGroup,y,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:X(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=zc(e),o=vs(e);return this.vn(e).next(s=>i.G(Av,IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,u=>o.put(BS(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.Cn(e,i,u).next(l=>{let f=this.Fn(o,u);return l.isEqual(f)?S.resolve():this.Mn(e,o,u,l,f)}))))})}xn(e,t,r,i){return ys(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,i){return ys(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){let i=ys(e),o=new Re(Ur);return i.Z({index:kA,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(s,a)=>{o=o.add(new Gi(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Fn(e,t){let r=new Re(Ur),i=this.yn(t,e);if(i==null)return r;let o=Iv(t);if(o!=null){let s=e.data.field(o.fieldPath);if(lu(s))for(let a of s.arrayValue.values||[])r=r.add(new Gi(t.indexId,e.key,this.fn(a),i))}else r=r.add(new Gi(t.indexId,e.key,uf,i));return r}Mn(e,t,r,i,o){P(GS,"Updating index entries for document '%s'",t.key);let s=[];return function(u,l,f,p,m){let y=u.getIterator(),b=l.getIterator(),A=gs(y),N=gs(b);for(;A||N;){let H=!1,K=!1;if(A&&N){let V=f(A,N);V<0?K=!0:V>0&&(H=!0)}else A!=null?K=!0:H=!0;H?(p(N),N=gs(b)):K?(m(A),A=gs(y)):(A=gs(y),N=gs(b))}}(i,o,Ur,a=>{s.push(this.xn(e,t,r,a))},a=>{s.push(this.On(e,t,r,a))}),S.waitFor(s)}vn(e){let t=1;return vs(e).Z({index:NA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Ur(s,a)).filter((s,a,u)=>!a||Ur(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Ur(s,e),u=Ur(s,t);if(a===0)i[0]=e.nn();else if(a>0&&u<0)i.push(s),i.push(s.nn());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Nn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,uf,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,uf,[]];o.push(IDBKeyRange.bound(a,u))}return o}Nn(e,t){return Ur(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(KS)}getMinOffset(e,t){return S.mapArray(this.dn(t),r=>this.An(e,r).next(i=>i||q())).next(KS)}};function WS(n){return at(n,su)}function ys(n){return at(n,Mf)}function zc(n){return at(n,bw)}function vs(n){return at(n,Rf)}function KS(n){G(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Dw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new an(e.readTime,e.documentKey,t)}var QS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xR=41943040,Bt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function NR(n,e,t){let r=n.store(_n),i=n.store(Ns),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.Z({range:s},(f,p,m)=>(a++,m.delete()));o.push(u.next(()=>{G(a===1)}));let l=[];for(let f of t.mutations){let p=RA(e,f.key.path,t.batchId);o.push(i.delete(p)),l.push(f.key)}return S.waitFor(o).next(()=>l)}function Gf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw q();e=n.noDocument}return JSON.stringify(e).length}Bt.DEFAULT_COLLECTION_PERCENTILE=10,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bt.DEFAULT=new Bt(xR,Bt.DEFAULT_COLLECTION_PERCENTILE,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bt.DISABLED=new Bt(-1,0,0);var Wf=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Bn={}}static It(e,t,r,i){G(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $r(e).Z({index:Wi,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Ts(e),s=$r(e);return s.add({}).next(a=>{G(typeof a=="number");let u=new fu(a,t,r,i),l=function(y,b,A){let N=A.baseMutations.map(K=>yu(y.Tt,K)),H=A.mutations.map(K=>yu(y.Tt,K));return{userId:b,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:N,mutations:H}}(this.serializer,this.userId,u),f=[],p=new Re((m,y)=>X(m.canonicalString(),y.canonicalString()));for(let m of i){let y=RA(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),f.push(s.put(l)),f.push(o.put(y,pj))}return p.forEach(m=>{f.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Bn[a]=u.keys()}),S.waitFor(f).next(()=>u)})}lookupMutationBatch(e,t){return $r(e).get(t).next(r=>r?(G(r.userId===this.userId),qi(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?S.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Bn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return $r(e).Z({index:Wi,range:i},(s,a,u)=>{a.userId===this.userId&&(G(a.batchId>=r),o=qi(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=Wr;return $r(e).Z({index:Wi,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,Wr],[this.userId,Number.POSITIVE_INFINITY]);return $r(e).G(Wi,t).next(r=>r.map(i=>qi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=hf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ts(e).Z({range:i},(s,a,u)=>{let[l,f,p]=s,m=Ln(f);if(l===this.userId&&t.path.isEqual(m))return $r(e).get(p).next(y=>{if(!y)throw q();G(y.userId===this.userId),o.push(qi(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Re(X),i=[];return t.forEach(o=>{let s=hf(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Ts(e).Z({range:a},(l,f,p)=>{let[m,y,b]=l,A=Ln(y);m===this.userId&&o.path.isEqual(A)?r=r.add(b):p.done()});i.push(u)}),S.waitFor(i).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=hf(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Re(X);return Ts(e).Z({range:s},(u,l,f)=>{let[p,m,y]=u,b=Ln(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(y)):f.done()}).next(()=>this.kn(e,a))}kn(e,t){let r=[],i=[];return t.forEach(o=>{i.push($r(e).get(o).next(s=>{if(s===null)throw q();G(s.userId===this.userId),r.push(qi(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return NR(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Ts(e).Z({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Ln(o[1]);i.push(u)}else a.done()}).next(()=>{G(i.length===0)})})}containsKey(e,t){return kR(e,this.userId,t)}Qn(e){return PR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Wr,lastStreamToken:""})}};function kR(n,e,t){let r=hf(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ts(n).Z({range:o,Y:!0},(a,u,l)=>{let[f,p,m]=a;f===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function $r(n){return at(n,_n)}function Ts(n){return at(n,Ns)}function PR(n){return at(n,iu)}var Hs=class n{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new n(0)}static Kn(){return new n(-1)}};var d_=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{let r=new Hs(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>Z.fromTimestamp(new Be(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Gn(e,i)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>_s(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(G(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return _s(e).Z((s,a)=>{let u=Qc(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return _s(e).Z((r,i)=>{let o=Qc(i);t(o)})}Wn(e){return ZS(e).get(Af).next(t=>(G(t!==null),t))}Gn(e,t){return ZS(e).put(Af,t)}zn(e,t){return _s(e).put(AR(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Xi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return _s(e).Z({range:i,index:xA},(s,a,u)=>{let l=Qc(a);Ru(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=qr(e);return t.forEach(s=>{let a=bt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=qr(e);return S.forEach(t,o=>{let s=bt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=qr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=qr(e),o=se();return i.Z({range:r,Y:!0},(s,a,u)=>{let l=Ln(s[1]),f=new $(l);o=o.add(f)}).next(()=>o)}containsKey(e,t){let r=bt(t.path),i=IDBKeyRange.bound([r],[DA(r)],!1,!0),o=0;return qr(e).Z({index:Cw,Y:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}lt(e,t){return _s(e).get(t).next(r=>r?Qc(r):null)}};function _s(n){return at(n,ks)}function ZS(n){return at(n,Zi)}function qr(n){return at(n,Ps)}var YS="LruGarbageCollector",g2=1048576;function JS([n,e],[t,r]){let i=X(n,t);return i===0?X(e,r):i}var f_=class{constructor(e){this.Hn=e,this.buffer=new Re(JS),this.Jn=0}Yn(){return++this.Jn}Zn(e){let t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();JS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Kf=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){P(YS,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>x(this,null,function*(){this.Xn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ai(t)?P(YS,"Ignoring IndexedDB error during garbage collection: ",t):yield si(t)}yield this.er(3e5)}))}},h_=class{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(Yt.ae);let r=new f_(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(P("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(QS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QS):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,o,s,a,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ws()<=bn.DEBUG&&P("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function OR(n,e){return new h_(n,e)}var p_=class{constructor(e,t){this.db=e,this.garbageCollector=OR(this,t)}nr(e){let t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,i)=>t(i))}addReference(e,t,r){return lf(e,r)}removeReference(e,t,r){return lf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lf(e,t)}ar(e,t){return function(i,o){let s=!1;return PR(i).X(a=>kR(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this._r(e,(s,a)=>{if(a<=t){let u=this.ar(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Z.min()),qr(e).delete(function(p){return[0,bt(p.path)]}(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lf(e,t)}_r(e,t){let r=qr(e),i,o=Yt.ae;return r.Z({index:Cw},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==Yt.ae&&t(new $(Ln(i)),o),o=l,i=u):o=Yt.ae}).next(()=>{o!==Yt.ae&&t(new $(Ln(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function lf(n,e){return qr(n).put(function(r,i){return{targetId:0,path:bt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Qf=class{constructor(){this.changes=new In(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var g_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Bi(e).put(r)}removeEntry(e,t,r){return Bi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],$f(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=nt.newInvalidDocument(t);return Bi(e).Z({index:pf,range:IDBKeyRange.only(Gc(t))},(i,o)=>{r=this.cr(t,o)}).next(()=>r)}lr(e,t){let r={size:0,document:nt.newInvalidDocument(t)};return Bi(e).Z({index:pf,range:IDBKeyRange.only(Gc(t))},(i,o)=>{r={document:this.cr(t,o),size:Gf(o)}}).next(()=>r)}getEntries(e,t){let r=Ut();return this.hr(e,t,(i,o)=>{let s=this.cr(i,o);r=r.insert(i,s)}).next(()=>r)}Pr(e,t){let r=Ut(),i=new Pe($.comparator);return this.hr(e,t,(o,s)=>{let a=this.cr(o,s);r=r.insert(o,a),i=i.insert(o,Gf(s))}).next(()=>({documents:r,Tr:i}))}hr(e,t,r){if(t.isEmpty())return S.resolve();let i=new Re(tA);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(Gc(i.first()),Gc(i.last())),s=i.getIterator(),a=s.getNext();return Bi(e).Z({index:pf,range:o},(u,l,f)=>{let p=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&tA(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?f.W(Gc(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),$f(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bi(e).G(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let f=Ut();for(let p of l){let m=this.cr($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(xu(t,m)||i.has(m.key))&&(f=f.insert(m.key,m))}return f})}getAllFromCollectionGroup(e,t,r,i){let o=Ut(),s=eA(t,r),a=eA(t,an.max());return Bi(e).Z({index:MA,range:IDBKeyRange.bound(s,a,!0)},(u,l,f)=>{let p=this.cr($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&f.done()}).next(()=>o)}newChangeBuffer(e){return new m_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return XS(e).get(Sv).next(t=>(G(!!t),t))}ur(e,t){return XS(e).put(Sv,t)}cr(e,t){if(t){let r=f2(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Z.min())))return r}return nt.newInvalidDocument(e)}};function FR(n){return new g_(n)}var m_=class extends Qf{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new In(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Re((o,s)=>X(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Er.get(o);if(t.push(this.Ir.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=VS(this.Ir.serializer,s);i=i.add(o.path.popLast());let l=Gf(u);r+=l-a.size,t.push(this.Ir.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=VS(this.Ir.serializer,s.convertToNoDocument(Z.min()));t.push(this.Ir.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Ir.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:i})=>(i.forEach((o,s)=>{this.Er.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function XS(n){return at(n,ou)}function Bi(n){return at(n,Sf)}function Gc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function eA(n,e){let t=e.documentKey.path.toArray();return[n,$f(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function tA(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=X(t[o],r[o]),i)return i;return i=X(t.length,r.length),i||(i=X(t[t.length-2],r[r.length-2]),i||X(t[t.length-1],r[r.length-1]))}var y_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Zf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Xc(r.mutation,i,Jt.empty(),Be.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=se()){let i=Vn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Kc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Vn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,se()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Ut(),s=Jc(),a=function(){return Jc()}();return t.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof Dn)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),Xc(f.mutation,l,f.mutation.getFieldMask(),Be.now())):s.set(l.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),t.forEach((l,f)=>{var p;return a.set(l,new y_(f,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Jc(),i=new Pe((s,a)=>s-a),o=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let f=r.get(u)||Jt.empty();f=a.applyToLocalView(l,f),r.set(u,f);let p=(i.get(a.batchId)||se()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,f=u.value,p=oR();f.forEach(m=>{if(!o.has(m)){let y=fR(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Nw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(Vn()),a=Ms,u=o;return s.next(l=>S.forEach(l,(f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(f)?S.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,se())).next(f=>({batchId:a,changes:iR(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=Kc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Kc();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=function(p,m){return new En(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,nt.newInvalidDocument(f)))});let a=Kc();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&Xc(f.mutation,l,Jt.empty(),Be.now()),xu(t,l)&&(a=a.insert(u,l))}),a})}};var v_=class{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return S.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ye(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:Fw(i.bundledQuery),readTime:Ye(i.readTime)}}(t)),S.resolve()}};var __=class{constructor(){this.overlays=new Pe($.comparator),this.Rr=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Vn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Et(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Rr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=Vn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Pe((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=Vn(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let a=Vn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return S.resolve(a)}Et(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new hu(t,r));let o=this.Rr.get(t);o===void 0&&(o=se(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}};var w_=class{constructor(){this.sessionToken=Je.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var _u=class{constructor(){this.Vr=new Re(et.mr),this.gr=new Re(et.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){let r=new et(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new et(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){let t=new $(new ye([])),r=new et(t,e),i=new et(t,e+1),o=[];return this.gr.forEachInRange([r,i],s=>{this.wr(s),o.push(s.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){let t=new $(new ye([])),r=new et(t,e),i=new et(t,e+1),o=se();return this.gr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new et(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},et=class{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return $.comparator(e.key,t.key)||X(e.Cr,t.Cr)}static pr(e,t){return X(e.Cr,t.Cr)||$.comparator(e.key,t.key)}};var E_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Re(et.mr)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new fu(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Mr=this.Mr.add(new et(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Nr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?Wr:this.Fr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new et(t,0),i=new et(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,i],s=>{let a=this.Or(s.Cr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Re(X);return t.forEach(i=>{let o=new et(i,0),s=new et(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,s],a=>{r=r.add(a.Cr)})}),S.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new et(new $(o),0),a=new Re(X);return this.Mr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Cr)),!0)},s),S.resolve(this.Br(a))}Br(e){let t=[];return e.forEach(r=>{let i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){G(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return S.forEach(t.mutations,i=>{let o=new et(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){let r=new et(t,0),i=this.Mr.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){let t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var I_=class{constructor(e){this.kr=e,this.docs=function(){return new Pe($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(t))}getEntries(e,t){let r=Ut();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():nt.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ut(),s=t.path,a=new $(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Dw(CA(f),r)<=0||(i.has(f.key)||xu(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){q()}qr(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new D_(this)}getSize(e){return S.resolve(this.size)}},D_=class extends Qf{constructor(e){super(),this.Ir=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}};var T_=class{constructor(e){this.persistence=e,this.Qr=new In(t=>Xi(t),Ru),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.$r=0,this.Ur=new _u,this.targetCount=0,this.Kr=Hs.Un()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),S.resolve()}zn(e){this.Qr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Kr=new Hs(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.zn(t),S.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Qr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Qr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Qr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Ur.vr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Ur.containsKey(t))}};var wu=class{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Yt(0),this.zr=!1,this.zr=!0,this.jr=new w_,this.referenceDelegate=e(this),this.Hr=new T_(this),this.indexManager=new u_,this.remoteDocumentCache=function(i){return new I_(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new Uf(t),this.Yr=new v_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new __,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new E_(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){P("MemoryPersistence","Starting transaction:",e);let i=new C_(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(o=>this.referenceDelegate.Xr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}ei(e,t){return S.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}},C_=class extends Tf{constructor(e){super(),this.currentSequenceNumber=e}},Yf=class n{constructor(e){this.persistence=e,this.ti=new _u,this.ni=null}static ri(e){return new n(e)}get ii(){if(this.ni)return this.ni;throw q()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),S.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(i=>this.ii.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.ii,r=>{let i=$.fromPath(r);return this.si(e,i).next(o=>{o||t.removeEntry(i,Z.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return S.or([()=>S.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}},Jf=class n{constructor(e,t){this.persistence=e,this.oi=new In(r=>bt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=OR(this,t)}static ri(e,t){return new n(e,t)}Zr(){}Xr(e){return S.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){let t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return S.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(o=>o?S.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.qr(e,s=>this.ar(e,s,t).next(a=>{a||(r++,o.removeEntry(s,Z.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),S.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),S.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),S.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),S.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mf(e.data.value)),t}ar(e,t,r){return S.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.oi.get(t);return S.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var b_=class{constructor(e){this.serializer=e}B(e,t,r,i){let o=new Cf("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore(Au)}(e),function(u){u.createObjectStore(iu,{keyPath:hj}),u.createObjectStore(_n,{keyPath:gS,autoIncrement:!0}).createIndex(Wi,mS,{unique:!0}),u.createObjectStore(Ns)}(e),nA(e),function(u){u.createObjectStore($i)}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore(Ps),u.deleteObjectStore(ks),u.deleteObjectStore(Zi)}(e),nA(e)),s=s.next(()=>function(u){let l=u.store(Zi),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Z.min().toTimestamp(),targetCount:0};return l.put(Af,f)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store(_n).G().next(p=>{u.deleteObjectStore(_n),u.createObjectStore(_n,{keyPath:gS,autoIncrement:!0}).createIndex(Wi,mS,{unique:!0});let m=l.store(_n),y=p.map(b=>m.put(b));return S.waitFor(y)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore(Os,{keyPath:Ij})})(e)})),r<5&&i>=5&&(s=s.next(()=>this._i(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore(ou)}(e),this.ai(o)))),r<7&&i>=7&&(s=s.next(()=>this.ui(o))),r<8&&i>=8&&(s=s.next(()=>this.ci(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.li(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore(Th,{keyPath:Dj})})(e),function(u){u.createObjectStore(Ch,{keyPath:Tj})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore(bh,{keyPath:xj});l.createIndex(Rv,Nj,{unique:!1}),l.createIndex(PA,kj,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore(Sf,{keyPath:gj});l.createIndex(pf,mj),l.createIndex(MA,yj)}(e)).next(()=>this.hi(e,o)).next(()=>e.deleteObjectStore($i))),r<14&&i>=14&&(s=s.next(()=>this.Pi(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore(bw,{keyPath:Cj,autoIncrement:!0}).createIndex(Av,bj,{unique:!1}),u.createObjectStore(Rf,{keyPath:Sj}).createIndex(NA,Aj,{unique:!1}),u.createObjectStore(Mf,{keyPath:Rj}).createIndex(kA,Mj,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(Rf).clear()}).next(()=>{t.objectStore(Mf).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore(Sw,{keyPath:Pj})})(e)})),s}ai(e){let t=0;return e.store($i).Z((r,i)=>{t+=Gf(i)}).next(()=>{let r={byteSize:t};return e.store(ou).put(Sv,r)})}_i(e){let t=e.store(iu),r=e.store(_n);return t.G().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,Wr],[o.userId,o.lastAcknowledgedBatchId]);return r.G(Wi,s).next(a=>S.forEach(a,u=>{G(u.userId===o.userId);let l=qi(this.serializer,u);return NR(e,o.userId,l).next(()=>{})}))}))}ui(e){let t=e.store(Ps),r=e.store($i);return e.store(Zi).get(Af).next(i=>{let o=[];return r.Z((s,a)=>{let u=new ye(s),l=function(p){return[0,bt(p)]}(u);o.push(t.get(l).next(f=>f?S.resolve():(p=>t.put({targetId:0,path:bt(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}ci(e,t){e.createObjectStore(su,{keyPath:Ej});let r=t.store(su),i=new vu,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:bt(u)})}};return t.store($i).Z({Y:!0},(s,a)=>{let u=new ye(s);return o(u.popLast())}).next(()=>t.store(Ns).Z({Y:!0},([s,a,u],l)=>{let f=Ln(a);return o(f.popLast())}))}li(e){let t=e.store(ks);return t.Z((r,i)=>{let o=Qc(i),s=AR(this.serializer,o);return t.put(s)})}hi(e,t){let r=t.store($i),i=[];return r.Z((o,s)=>{let a=t.store(Sf),u=function(p){return p.document?new $(ye.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):q()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}Pi(e,t){let r=t.store(_n),i=FR(this.serializer),o=new wu(Yf.ri,this.serializer.Tt);return r.G().next(s=>{let a=new Map;return s.forEach(u=>{var l;let f=(l=a.get(u.userId))!==null&&l!==void 0?l:se();qi(this.serializer,u).keys().forEach(p=>f=f.add(p)),a.set(u.userId,f)}),S.forEach(a,(u,l)=>{let f=new tt(l),p=Hf.It(this.serializer,f),m=o.getIndexManager(f),y=Wf.It(f,this.serializer,m,o.referenceDelegate);return new Zf(i,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new au(t,Yt.ae),u).next()})})}};function nA(n){n.createObjectStore(Ps,{keyPath:_j}).createIndex(Cw,wj,{unique:!0}),n.createObjectStore(ks,{keyPath:"targetId"}).createIndex(xA,vj,{unique:!0}),n.createObjectStore(Zi)}var Hr="IndexedDbPersistence",uv=18e5,lv=5e3,dv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",LR="main",S_=class n{constructor(e,t,r,i,o,s,a,u,l,f,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=o,this.window=s,this.document=a,this.Ii=l,this.Ei=f,this.di=p,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=m=>Promise.resolve(),!n.D())throw new k(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new p_(this,i),this.gi=t+LR,this.serializer=new Uf(u),this.pi=new Zr(this.gi,this.di,new b_(this.serializer)),this.jr=new n_,this.Hr=new d_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=FR(this.serializer),this.Yr=new t_,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,f===!1&&Qe(Hr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,dv);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new Yt(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=t=>x(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(t=>x(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(()=>x(this,null,function*(){this.started&&(yield this.wi())})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>df(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(ai(e))return P(Hr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return P(Hr,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return Wc(e).get(ps).next(t=>S.resolve(this.Ni(t)))}Bi(e){return df(e).delete(this.clientId)}Li(){return x(this,null,function*(){if(this.isPrimary&&!this.ki(this.mi,uv)){this.mi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=at(t,Os);return r.G().next(i=>{let o=this.qi(i,uv),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.yi)for(let t of e)this.yi.removeItem(this.Qi(t.clientId))}})}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?S.resolve(!0):Wc(e).get(ps).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,lv)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,dv);return!1}}return!(!this.networkEnabled||!this.inForeground)||df(e).G().next(r=>this.qi(r,lv).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&P(Hr,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return x(this,null,function*(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),yield this.pi.runTransaction("shutdown","readwrite",[Au,Os],e=>{let t=new au(e,Yt.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()})}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>df(e).G().next(t=>this.qi(t,uv).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return Wf.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new l_(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return Hf.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){P(Hr,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?Lj:u===16?Fj:u===15?Aw:u===14?LA:u===13?FA:u===12?Oj:u===11?OA:void q()}(this.di),s;return this.pi.runTransaction(e,i,o,a=>(s=new au(a,this.Gr?this.Gr.next():Yt.ae),t==="readwrite-primary"?this.Fi(s).next(u=>!!u||this.Mi(s)).next(u=>{if(!u)throw Qe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new k(R.FAILED_PRECONDITION,bA);return r(s)}).next(u=>this.Oi(s).next(()=>u)):this.ji(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ji(e){return Wc(e).get(ps).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,lv)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new k(R.FAILED_PRECONDITION,dv)})}Oi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wc(e).put(ps,t)}static D(){return Zr.D()}xi(e){let t=Wc(e);return t.get(ps).next(r=>this.Ni(r)?(P(Hr,"Releasing primary lease."),t.delete(ps)):S.resolve())}ki(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Qe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();let t=/(?:Version|Mobile)\/1[456]/;kp()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{let r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return P(Hr,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Qe(Hr,"Failed to get zombied client id.",r),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){Qe("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Wc(n){return at(n,Au)}function df(n){return at(n,Os)}function Vw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var A_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=se(),i=se();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var R_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Xf=class{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return kp()?8:SA(Sa())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.rs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ss(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new R_;return this._s(e,t,s).next(a=>{if(o.result=a,this.Xi)return this.us(e,t,s,a.size)})}).next(()=>o.result)}us(e,t,r,i){return r.documentReadCount<this.es?(ws()<=bn.DEBUG&&P("QueryEngine","SDK will not create cache indexes for query:",Es(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),S.resolve()):(ws()<=bn.DEBUG&&P("QueryEngine","Query:",Es(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(ws()<=bn.DEBUG&&P("QueryEngine","The SDK decides to create cache indexes for query:",Es(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pt(t))):S.resolve())}rs(e,t){if(AS(t))return S.resolve(null);let r=Pt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Lf(t,null,"F"),r=Pt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=se(...o);return this.ns.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.cs(t,a);return this.ls(t,l,s,u.readTime)?this.rs(e,Lf(t,null,"F")):this.hs(e,l,t,u)}))})))}ss(e,t,r,i){return AS(t)||i.isEqual(Z.min())?S.resolve(null):this.ns.getDocuments(e,r).next(o=>{let s=this.cs(t,o);return this.ls(t,s,r,i)?S.resolve(null):(ws()<=bn.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Es(t)),this.hs(e,s,t,TA(i,Ms)).next(a=>a))})}cs(e,t){let r=new Re(nR(e));return t.forEach((i,o)=>{xu(e,o)&&(r=r.add(o))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}_s(e,t,r){return ws()<=bn.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",Es(t)),this.ns.getDocumentsMatchingQuery(e,t,an.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var jw="LocalStore",m2=3e8,M_=class{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new Pe(X),this.Is=new In(o=>Xi(o),Ru),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zf(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}};function VR(n,e,t,r){return new M_(n,e,t,r)}function jR(n,e){return x(this,null,function*(){let t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=se();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){a.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Rs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function y2(n,e){let t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,u,l,f){let p=l.batch,m=p.keys(),y=S.resolve();return m.forEach(b=>{y=y.next(()=>f.getEntry(u,b)).next(A=>{let N=l.docVersions.get(b);G(N!==null),A.version.compareTo(N)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),f.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=se();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function BR(n){let e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function v2(n,e){let t=U(n),r=e.snapshotVersion,i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;let a=[];e.targetChanges.forEach((f,p)=>{let m=i.get(p);if(!m)return;a.push(t.Hr.removeMatchingKeys(o,f.removedDocuments,p).next(()=>t.Hr.addMatchingKeys(o,f.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Je.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),function(A,N,H){return A.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=m2?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(m,y,f)&&a.push(t.Hr.updateTargetData(o,y))});let u=Ut(),l=se();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(UR(o,s,e.documentUpdates).next(f=>{u=f.Vs,l=f.fs})),!r.isEqual(Z.min())){let f=t.Hr.getLastRemoteSnapshotVersion(o).next(p=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Ts=i,o))}function UR(n,e,t){let r=se(),i=se();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Ut();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):P(jw,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Vs:s,fs:i}})}function _2(n,e){let t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Wr),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qs(n,e){let t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Hr.allocateTargetId(r).next(s=>(i=new $s(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}function zs(n,e,t){return x(this,null,function*(){let r=U(n),i=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ai(s))throw s;P(jw,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)})}function eh(n,e,t){let r=U(n),i=Z.min(),o=se();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,f){let p=U(u),m=p.Is.get(f);return m!==void 0?S.resolve(p.Ts.get(m)):p.Hr.getTargetData(l,f)}(r,s,Pt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Ps.getDocumentsMatchingQuery(s,e,t?i:Z.min(),t?o:se())).next(a=>(qR(r,tR(e),a),{documents:a,gs:o})))}function $R(n,e){let t=U(n),r=U(t.Hr),i=t.Ts.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.lt(o,e).next(s=>s?s.target:null))}function HR(n,e){let t=U(n),r=t.Es.get(e)||Z.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ds.getAllFromCollectionGroup(i,e,TA(r,Ms),Number.MAX_SAFE_INTEGER)).then(i=>(qR(t,e,i),i))}function qR(n,e,t){let r=n.Es.get(e)||Z.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}function w2(n,e,t,r){return x(this,null,function*(){let i=U(n),o=se(),s=Ut();for(let l of t){let f=e.ps(l.metadata.name);l.document&&(o=o.add(f));let p=e.ys(l);p.setReadTime(e.ws(l.metadata.readTime)),s=s.insert(f,p)}let a=i.ds.newChangeBuffer({trackRemovals:!0}),u=yield qs(i,function(f){return Pt(Xs(ye.fromString(`__bundle__/docs/${f}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>UR(l,a,s).next(f=>(a.apply(l),f)).next(f=>i.Hr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Hr.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,f.Vs,f.fs)).next(()=>f.Vs)))})}function E2(r,i){return x(this,arguments,function*(n,e,t=se()){let o=yield qs(n,Pt(Fw(e.bundledQuery))),s=U(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Ye(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Yr.saveNamedQuery(a,e);let l=o.withResumeToken(Je.EMPTY_BYTE_STRING,u);return s.Ts=s.Ts.insert(l.targetId,l),s.Hr.updateTargetData(a,l).next(()=>s.Hr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Hr.addMatchingKeys(a,t,o.targetId)).next(()=>s.Yr.saveNamedQuery(a,e))})})}var zR="firestore_clients";function rA(n,e){return`${zR}_${n}_${e}`}var GR="firestore_mutations";function iA(n,e,t){let r=`${GR}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}var WR="firestore_targets";function fv(n,e){return`${WR}_${n}_${e}`}var Fn="SharedClientState",th=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ss(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Qe(Fn,`Failed to parse mutation state for ID '${t}': ${r}`),null)}bs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},eu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ss(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new n(e,r.state,i):(Qe(Fn,`Failed to parse target state for ID '${e}': ${t}`),null)}bs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},nh=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ss(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=kw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=AA(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Qe(Fn,`Failed to parse client data for instance '${e}': ${t}`),null)}},x_=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Ss(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Qe(Fn,`Failed to parse online state: ${e}`),null)}},Eu=class{constructor(){this.activeTargetIds=kw()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},tu=class{constructor(e,t,r,i,o){this.window=e,this.Ti=t,this.persistenceKey=r,this.Cs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new Pe(X),this.started=!1,this.Os=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ns=rA(this.persistenceKey,this.Cs),this.Bs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new Eu),this.Ls=new RegExp(`^${zR}_${s}_([^_]*)$`),this.ks=new RegExp(`^${GR}_${s}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${WR}_${s}_(\\d+)$`),this.Qs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.$s=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}start(){return x(this,null,function*(){let e=yield this.syncEngine.zi();for(let r of e){if(r===this.Cs)continue;let i=this.getItem(rA(this.persistenceKey,r));if(i){let o=nh.Ss(r,i);o&&(this.xs=this.xs.insert(o.clientId,o))}}this.Us();let t=this.storage.getItem(this.Qs);if(t){let r=this.Ks(t);r&&this.Ws(r)}for(let r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,r){this.zs(e,t,r),this.js(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(fv(this.persistenceKey,e));if(i){let o=eu.Ss(e,i);o&&(r=o.state)}}return t&&this.Hs.Ds(e),this.Us(),r}removeLocalQueryTarget(e){this.Hs.vs(e),this.Us()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(fv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Js(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.js(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return P(Fn,"READ",e,t),t}setItem(e,t){P(Fn,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){P(Fn,"REMOVE",e),this.storage.removeItem(e)}Ms(e){let t=e;if(t.storageArea===this.storage){if(P(Fn,"EVENT",t.key,t.newValue),t.key===this.Ns)return void Qe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(()=>x(this,null,function*(){if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){let r=this.Xs(t.key);return this.eo(r,null)}{let r=this.no(t.key,t.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(t.key)){if(t.newValue!==null){let r=this.ro(t.key,t.newValue);if(r)return this.io(r)}}else if(this.qs.test(t.key)){if(t.newValue!==null){let r=this.so(t.key,t.newValue);if(r)return this.oo(r)}}else if(t.key===this.Qs){if(t.newValue!==null){let r=this.Ks(t.newValue);if(r)return this.Ws(r)}}else if(t.key===this.Bs){let r=function(o){let s=Yt.ae;if(o!=null)try{let a=JSON.parse(o);G(typeof a=="number"),s=a}catch(a){Qe(Fn,"Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Yt.ae&&this.sequenceNumberHandler(r)}else if(t.key===this.$s){let r=this._o(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.ao(i)))}}}else this.Os.push(t)}))}}get Hs(){return this.xs.get(this.Cs)}Us(){this.setItem(this.Ns,this.Hs.bs())}zs(e,t,r){let i=new th(this.currentUser,e,t,r),o=iA(this.persistenceKey,this.currentUser,e);this.setItem(o,i.bs())}js(e){let t=iA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){let t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,r){let i=fv(this.persistenceKey,e),o=new eu(e,t,r);this.setItem(i,o.bs())}Zs(e){let t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){let t=this.Ls.exec(e);return t?t[1]:null}no(e,t){let r=this.Xs(e);return nh.Ss(r,t)}ro(e,t){let r=this.ks.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return th.Ss(new tt(o),i,t)}so(e,t){let r=this.qs.exec(e),i=Number(r[1]);return eu.Ss(i,t)}Ks(e){return x_.Ss(e)}_o(e){return JSON.parse(e)}io(e){return x(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);P(Fn,`Ignoring mutation for non-active user ${e.user.uid}`)})}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){let r=t?this.xs.insert(e,t):this.xs.remove(e),i=this.Gs(this.xs),o=this.Gs(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.lo(s,a).then(()=>{this.xs=r})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=kw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},rh=class{constructor(){this.ho=new Eu,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Eu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var N_=class{To(e){}shutdown(){}};var oA="ConnectivityMonitor",ih=class{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){P(oA,"Network connectivity changed: AVAILABLE");for(let e of this.Vo)e(0)}Ro(){P(oA,"Network connectivity changed: UNAVAILABLE");for(let e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ff=null;function k_(){return ff===null?ff=function(){return 268435456+Math.round(2147483648*Math.random())}():ff++,"0x"+ff.toString(16)}var hv="RestConnection",I2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},P_=class{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===xv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(e,t,r,i,o){let s=k_(),a=this.bo(e,t.toUriEncodedString());P(hv,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,i,o),this.vo(e,a,u,r).then(l=>(P(hv,`Received RPC '${e}' ${s}: `,l),l),l=>{throw wn(hv,`RPC '${e}' ${s} failed with error: `,l,"url: ",a,"request:",r),l})}Co(e,t,r,i,o,s){return this.So(e,t,r,i,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Js}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}bo(e,t){let r=I2[e];return`${this.po}/v1/${t}:${r}`}terminate(){}};var O_=class{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}};var Tt="WebChannelConnection",F_=class extends P_{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){let o=k_();return new Promise((s,a)=>{let u=new rv;u.setWithCredentials(!0),u.listenOnce(iv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Hc.NO_ERROR:let f=u.getResponseJson();P(Tt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case Hc.TIMEOUT:P(Tt,`RPC '${e}' ${o} timed out`),a(new k(R.DEADLINE_EXCEEDED,"Request time out"));break;case Hc.HTTP_ERROR:let p=u.getStatus();if(P(Tt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let b=function(N){let H=N.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(H)>=0?H:R.UNKNOWN}(y.status);a(new k(b,y.message))}else a(new k(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new k(R.UNAVAILABLE,"Connection failed."));break;default:q()}}finally{P(Tt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);P(Tt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Wo(e,t,r){let i=k_(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=av(),a=sv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let f=o.join("");P(Tt,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u),m=!1,y=!1,b=new O_({Fo:N=>{y?P(Tt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(P(Tt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),P(Tt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Mo:()=>p.close()}),A=(N,H,K)=>{N.listen(H,V=>{try{K(V)}catch(J){setTimeout(()=>{throw J},0)}})};return A(p,hs.EventType.OPEN,()=>{y||(P(Tt,`RPC '${e}' stream ${i} transport opened.`),b.Qo())}),A(p,hs.EventType.CLOSE,()=>{y||(y=!0,P(Tt,`RPC '${e}' stream ${i} transport closed`),b.Uo())}),A(p,hs.EventType.ERROR,N=>{y||(y=!0,wn(Tt,`RPC '${e}' stream ${i} transport errored:`,N),b.Uo(new k(R.UNAVAILABLE,"The operation could not be completed")))}),A(p,hs.EventType.MESSAGE,N=>{var H;if(!y){let K=N.data[0];G(!!K);let V=K,J=V?.error||((H=V[0])===null||H===void 0?void 0:H.error);if(J){P(Tt,`RPC '${e}' stream ${i} received error:`,J);let re=J.status,ie=function(w){let I=Xe[w];if(I!==void 0)return gR(I)}(re),E=J.message;ie===void 0&&(ie=R.INTERNAL,E="Unknown error status: "+re+" with message "+J.message),y=!0,b.Uo(new k(ie,E)),p.close()}else P(Tt,`RPC '${e}' stream ${i} received:`,K),b.Ko(K)}}),A(a,ov.STAT_EVENT,N=>{N.stat===af.PROXY?P(Tt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===af.NOPROXY&&P(Tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.$o()},0),b}};function KR(){return typeof window<"u"?window:null}function _f(){return typeof document<"u"?document:null}function Nu(n){return new Zv(n,!0)}var Iu=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();let t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&P("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}};var sA="PersistentStream",oh=class{constructor(e,t,r,i,o,s,a,u){this.Ti=e,this.n_=r,this.r_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Iu(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}stop(){return x(this,null,function*(){this.u_()&&(yield this.close(0))})}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}T_(){return x(this,null,function*(){if(this.c_())return this.close(0)})}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}close(e,t){return x(this,null,function*(){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(Qe(t.toString()),Qe("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Lo(t)})}A_(){}auth(){this.state=1;let e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{let i=new k(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){let r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(()=>x(this,null,function*(){this.state=0,this.start()}))}m_(e){return P(sA,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(P(sA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},L_=class extends oh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();let t=o2(this.serializer,e),r=function(o){if(!("targetChange"in o))return Z.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Z.min():s.readTime?Ye(s.readTime):Z.min()}(e);return this.listener.p_(t,r)}y_(e){let t={};t.database=Xv(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=Of(u)?{documents:IR(o,u)}:{query:DR(o,u).ht},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=mR(o,s.resumeToken);let l=Yv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Z.min())>0){a.readTime=Us(o,s.snapshotVersion.toTimestamp());let l=Yv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=a2(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){let t={};t.database=Xv(this.serializer),t.removeTarget=e,this.I_(t)}},V_=class extends oh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return G(!!e.streamToken),this.lastStreamToken=e.streamToken,G(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){G(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();let t=s2(e.writeResults,e.commitTime),r=Ye(e.commitTime);return this.listener.v_(r,t)}C_(){let e={};e.database=Xv(this.serializer),this.I_(e)}b_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>yu(this.serializer,r))};this.I_(t)}};var j_=class{},B_=class extends j_{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,Jv(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(R.UNKNOWN,o.toString())})}Co(e,t,r,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(e,Jv(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(R.UNKNOWN,s.toString())})}terminate(){this.F_=!0,this.connection.terminate()}},U_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Qe(t),this.N_=!1):P("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}};var ro="RemoteStore",$_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(s=>{r.enqueueAndForget(()=>x(this,null,function*(){ui(this)&&(P(ro,"Restarting streams for network reachability change."),yield function(u){return x(this,null,function*(){let l=U(u);l.W_.add(4),yield ea(l),l.j_.set("Unknown"),l.W_.delete(4),yield ku(l)})}(this))}))}),this.j_=new U_(r,i)}};function ku(n){return x(this,null,function*(){if(ui(n))for(let e of n.G_)yield e(!0)})}function ea(n){return x(this,null,function*(){for(let e of n.G_)yield e(!1)})}function Mh(n,e){let t=U(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),$w(t)?Uw(t):na(t).c_()&&Bw(t,e))}function Gs(n,e){let t=U(n),r=na(t);t.K_.delete(e),r.c_()&&QR(t,e),t.K_.size===0&&(r.c_()?r.P_():ui(t)&&t.j_.set("Unknown"))}function Bw(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}na(n).y_(e)}function QR(n,e){n.H_.Ne(e),na(n).w_(e)}function Uw(n){n.H_=new Qv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),na(n).start(),n.j_.B_()}function $w(n){return ui(n)&&!na(n).u_()&&n.K_.size>0}function ui(n){return U(n).W_.size===0}function ZR(n){n.H_=void 0}function D2(n){return x(this,null,function*(){n.j_.set("Online")})}function T2(n){return x(this,null,function*(){n.K_.forEach((e,t)=>{Bw(n,e)})})}function C2(n,e){return x(this,null,function*(){ZR(n),$w(n)?(n.j_.q_(e),Uw(n)):n.j_.set("Unknown")})}function b2(n,e,t){return x(this,null,function*(){if(n.j_.set("Online"),e instanceof jf&&e.state===2&&e.cause)try{yield function(i,o){return x(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.K_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.K_.delete(a),i.H_.removeTarget(a))})}(n,e)}catch(r){P(ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield sh(n,r)}else if(e instanceof As?n.H_.We(e):e instanceof Vf?n.H_.Ze(e):n.H_.je(e),!t.isEqual(Z.min()))try{let r=yield BR(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.H_.ot(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.K_.get(l);f&&o.K_.set(l,f.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let f=o.K_.get(u);if(!f)return;o.K_.set(u,f.withResumeToken(Je.EMPTY_BYTE_STRING,f.snapshotVersion)),QR(o,u);let p=new $s(f.target,u,l,f.sequenceNumber);Bw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){P(ro,"Failed to raise snapshot:",r),yield sh(n,r)}})}function sh(n,e,t){return x(this,null,function*(){if(!ai(e))throw e;n.W_.add(1),yield ea(n),n.j_.set("Offline"),t||(t=()=>BR(n.localStore)),n.asyncQueue.enqueueRetryable(()=>x(this,null,function*(){P(ro,"Retrying IndexedDB access"),yield t(),n.W_.delete(1),yield ku(n)}))})}function YR(n,e){return e().catch(t=>sh(n,t,e))}function ta(n){return x(this,null,function*(){let e=U(n),t=ii(e),r=e.U_.length>0?e.U_[e.U_.length-1].batchId:Wr;for(;S2(e);)try{let i=yield _2(e.localStore,r);if(i===null){e.U_.length===0&&t.P_();break}r=i.batchId,A2(e,i)}catch(i){yield sh(e,i)}JR(e)&&XR(e)})}function S2(n){return ui(n)&&n.U_.length<10}function A2(n,e){n.U_.push(e);let t=ii(n);t.c_()&&t.S_&&t.b_(e.mutations)}function JR(n){return ui(n)&&!ii(n).u_()&&n.U_.length>0}function XR(n){ii(n).start()}function R2(n){return x(this,null,function*(){ii(n).C_()})}function M2(n){return x(this,null,function*(){let e=ii(n);for(let t of n.U_)e.b_(t.mutations)})}function x2(n,e,t){return x(this,null,function*(){let r=n.U_.shift(),i=Gv.from(r,e,t);yield YR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ta(n)})}function N2(n,e){return x(this,null,function*(){e&&ii(n).S_&&(yield function(r,i){return x(this,null,function*(){if(function(s){return pR(s)&&s!==R.ABORTED}(i.code)){let o=r.U_.shift();ii(r).h_(),yield YR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ta(r)}})}(n,e)),JR(n)&&XR(n)})}function aA(n,e){return x(this,null,function*(){let t=U(n);t.asyncQueue.verifyOperationInProgress(),P(ro,"RemoteStore received new credentials");let r=ui(t);t.W_.add(3),yield ea(t),r&&t.j_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),yield ku(t)})}function H_(n,e){return x(this,null,function*(){let t=U(n);e?(t.W_.delete(2),yield ku(t)):e||(t.W_.add(2),yield ea(t),t.j_.set("Unknown"))})}function na(n){return n.J_||(n.J_=function(t,r,i){let o=U(t);return o.M_(),new L_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:D2.bind(null,n),No:T2.bind(null,n),Lo:C2.bind(null,n),p_:b2.bind(null,n)}),n.G_.push(e=>x(this,null,function*(){e?(n.J_.h_(),$w(n)?Uw(n):n.j_.set("Unknown")):(yield n.J_.stop(),ZR(n))}))),n.J_}function ii(n){return n.Y_||(n.Y_=function(t,r,i){let o=U(t);return o.M_(),new V_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:R2.bind(null,n),Lo:N2.bind(null,n),D_:M2.bind(null,n),v_:x2.bind(null,n)}),n.G_.push(e=>x(this,null,function*(){e?(n.Y_.h_(),yield ta(n)):(yield n.Y_.stop(),n.U_.length>0&&(P(ro,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))}))),n.Y_}var q_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new st,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ra(n,e){if(Qe("AsyncQueue",`${e}: ${n}`),ai(n))return new k(R.UNAVAILABLE,`${e}: ${n}`);throw n}var ah=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=Kc(),this.sortedSet=new Pe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var ch=class{constructor(){this.Z_=new Pe($.comparator)}track(e){let t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):q():this.Z_=this.Z_.insert(t,e)}X_(){let e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ws=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,ah.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var z_=class{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}},G_=class{constructor(){this.queries=cA(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){let i=U(t),o=i.queries;i.queries=cA(),o.forEach((s,a)=>{for(let u of a.ta)u.onError(r)})})(this,new k(R.ABORTED,"Firestore shutting down"))}};function cA(){return new In(n=>eR(n),Mu)}function Hw(n,e){return x(this,null,function*(){let t=U(n),r=3,i=e.query,o=t.queries.get(i);o?!o.na()&&e.ra()&&(r=2):(o=new z_,r=e.ra()?0:1);try{switch(r){case 0:o.ea=yield t.onListen(i,!0);break;case 1:o.ea=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=ra(s,`Initialization of query '${Es(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&zw(t)})}function qw(n,e){return x(this,null,function*(){let t=U(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.ta.indexOf(e);s>=0&&(o.ta.splice(s,1),o.ta.length===0?i=e.ra()?0:1:!o.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function k2(n,e){let t=U(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.ta)a.oa(i)&&(r=!0);s.ea=i}}r&&zw(t)}function P2(n,e,t){let r=U(n),i=r.queries.get(e);if(i)for(let o of i.ta)o.onError(t);r.queries.delete(e)}function zw(n){n.ia.forEach(e=>{e.next()})}var W_,uA;(uA=W_||(W_={}))._a="default",uA.Cache="cache";var Du=class{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ws(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;let r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;let t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Ws.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==W_.Cache}};var K_=class{constructor(e,t){this.Ia=e,this.byteLength=t}Ea(){return"metadata"in this.Ia}};var uh=class{constructor(e){this.serializer=e}ps(e){return Bn(this.serializer,e)}ys(e){return e.metadata.exists?ER(this.serializer,e.document,!1):nt.newNoDocument(this.ps(e.metadata.name),this.ws(e.metadata.readTime))}ws(e){return Ye(e)}},Q_=class{constructor(e,t,r){this.da=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=eM(e)}Aa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ia.namedQuery)this.queries.push(e.Ia.namedQuery);else if(e.Ia.documentMetadata){this.documents.push({metadata:e.Ia.documentMetadata}),e.Ia.documentMetadata.exists||++t;let r=ye.fromString(e.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ia.document&&(this.documents[this.documents.length-1].document=e.Ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ra(e){let t=new Map,r=new uh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.ps(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||se()).add(o);t.set(s,a)}}return t}complete(){return x(this,null,function*(){let e=yield w2(this.localStore,new uh(this.serializer),this.documents,this.da.id),t=this.Ra(this.documents);for(let r of this.queries)yield E2(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:e}})}};function eM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var lh=class{constructor(e){this.key=e}},dh=class{constructor(e){this.key=e}},fh=class{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=se(),this.mutatedKeys=se(),this.ya=nR(e),this.wa=new ah(this.ya)}get Sa(){return this.fa}ba(e,t){let r=t?t.Da:new ch,i=t?t.wa:this.wa,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let m=i.get(f),y=xu(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;m&&y?m.data.isEqual(y.data)?b!==A&&(r.track({type:3,doc:y}),N=!0):this.va(m,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.ya(y,u)>0||l&&this.ya(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),N=!0):m&&!y&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(a=!0)),N&&(y?(s=s.add(y),o=A?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{wa:s,Da:r,ls:a,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;let s=e.Da.X_();s.sort((f,p)=>function(y,b){let A=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q()}};return A(y)-A(b)}(f.type,p.type)||this.ya(f.doc,p.doc)),this.Ca(r),i=i!=null&&i;let a=t&&!i?this.Fa():[],u=this.pa.size===0&&this.current&&!i?1:0,l=u!==this.ga;return this.ga=u,s.length!==0||l?{snapshot:new Ws(this.query,e.wa,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new ch,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];let e=this.pa;this.pa=se(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});let t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new dh(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new lh(r))}),t}Oa(e){this.fa=e.gs,this.pa=se();let t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Ws.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}},li="SyncEngine",Z_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Y_=class{constructor(e){this.key=e,this.Ba=!1}},J_=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new In(a=>eR(a),Mu),this.qa=new Map,this.Qa=new Set,this.$a=new Pe($.comparator),this.Ua=new Map,this.Ka=new _u,this.Wa={},this.Ga=new Map,this.za=Hs.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}};function O2(n,e,t=!0){return x(this,null,function*(){let r=xh(n),i,o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Na()):i=yield tM(r,e,t,!0),i})}function F2(n,e){return x(this,null,function*(){let t=xh(n);yield tM(t,e,!0,!1)})}function tM(n,e,t,r){return x(this,null,function*(){let i=yield qs(n.localStore,Pt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Gw(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Mh(n.remoteStore,i),a})}function Gw(n,e,t,r,i){return x(this,null,function*(){n.Ha=(p,m,y)=>function(A,N,H,K){return x(this,null,function*(){let V=N.view.ba(H);V.ls&&(V=yield eh(A.localStore,N.query,!1).then(({documents:E})=>N.view.ba(E,V)));let J=K&&K.targetChanges.get(N.targetId),re=K&&K.targetMismatches.get(N.targetId)!=null,ie=N.view.applyChanges(V,A.isPrimaryClient,J,re);return X_(A,N.targetId,ie.Ma),ie.snapshot})}(n,p,m,y);let o=yield eh(n.localStore,e,!0),s=new fh(e,o.gs),a=s.ba(o.documents),u=gu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);X_(n,t,l.Ma);let f=new Z_(e,t,s);return n.ka.set(e,f),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),l.snapshot})}function L2(n,e,t){return x(this,null,function*(){let r=U(n),i=r.ka.get(e),o=r.qa.get(i.targetId);if(o.length>1)return r.qa.set(i.targetId,o.filter(s=>!Mu(s,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield zs(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Gs(r.remoteStore,i.targetId),Ks(r,i.targetId)}).catch(si))):(Ks(r,i.targetId),yield zs(r.localStore,i.targetId,!0))})}function V2(n,e){return x(this,null,function*(){let t=U(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Gs(t.remoteStore,r.targetId))})}function j2(n,e,t){return x(this,null,function*(){let r=Zw(n);try{let i=yield function(s,a){let u=U(s),l=Be.now(),f=a.reduce((y,b)=>y.add(b.key),se()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Ut(),A=se();return u.ds.getEntries(y,f).next(N=>{b=N,b.forEach((H,K)=>{K.isValidDocument()||(A=A.add(H))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,b)).next(N=>{p=N;let H=[];for(let K of a){let V=Jj(K,p.get(K.key).overlayedDocument);V!=null&&H.push(new Dn(K.key,V,WA(V.value.mapValue),Ge.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,H,a)}).next(N=>{m=N;let H=N.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,N.batchId,H)})}).then(()=>({batchId:m.batchId,changes:iR(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Wa[s.currentUser.toKey()];l||(l=new Pe(X)),l=l.insert(a,u),s.Wa[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Dr(r,i.changes),yield ta(r.remoteStore)}catch(i){let o=ra(i,"Failed to persist write");t.reject(o)}})}function nM(n,e){return x(this,null,function*(){let t=U(n);try{let r=yield v2(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Ua.get(o);s&&(G(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ba=!0:i.modifiedDocuments.size>0?G(s.Ba):i.removedDocuments.size>0&&(G(s.Ba),s.Ba=!1))}),yield Dr(t,r,e)}catch(r){yield si(r)}})}function lA(n,e,t){let r=U(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ka.forEach((o,s)=>{let a=s.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=U(s);u.onlineState=a;let l=!1;u.queries.forEach((f,p)=>{for(let m of p.ta)m.sa(a)&&(l=!0)}),l&&zw(u)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function B2(n,e,t){return x(this,null,function*(){let r=U(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Ua.get(e),o=i&&i.key;if(o){let s=new Pe($.comparator);s=s.insert(o,nt.newNoDocument(o,Z.min()));let a=se().add(o),u=new pu(Z.min(),new Map,new Pe(X),s,a);yield nM(r,u),r.$a=r.$a.remove(o),r.Ua.delete(e),Qw(r)}else yield zs(r.localStore,e,!1).then(()=>Ks(r,e,t)).catch(si)})}function U2(n,e){return x(this,null,function*(){let t=U(n),r=e.batch.batchId;try{let i=yield y2(t.localStore,e);Kw(t,r,null),Ww(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Dr(t,i)}catch(i){yield si(i)}})}function $2(n,e,t){return x(this,null,function*(){let r=U(n);try{let i=yield function(s,a){let u=U(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(G(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})}(r.localStore,e);Kw(r,e,t),Ww(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Dr(r,i)}catch(i){yield si(i)}})}function H2(n,e){return x(this,null,function*(){let t=U(n);ui(t.remoteStore)||P(li,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=U(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===Wr)return void e.resolve();let i=t.Ga.get(r)||[];i.push(e),t.Ga.set(r,i)}catch(r){let i=ra(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Ww(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function Kw(n,e,t){let r=U(n),i=r.Wa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function Ks(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||rM(n,r)})}function rM(n,e){n.Qa.delete(e.path.canonicalString());let t=n.$a.get(e);t!==null&&(Gs(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),Qw(n))}function X_(n,e,t){for(let r of t)r instanceof lh?(n.Ka.addReference(r.key,e),q2(n,r)):r instanceof dh?(P(li,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||rM(n,r.key)):q()}function q2(n,e){let t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(P(li,"New document in limbo: "+t),n.Qa.add(r),Qw(n))}function Qw(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){let e=n.Qa.values().next().value;n.Qa.delete(e);let t=new $(ye.fromString(e)),r=n.za.next();n.Ua.set(r,new Y_(t)),n.$a=n.$a.insert(t,r),Mh(n.remoteStore,new $s(Pt(Xs(t.path)),r,"TargetPurposeLimboResolution",Yt.ae))}}function Dr(n,e,t){return x(this,null,function*(){let r=U(n),i=[],o=[],s=[];r.ka.isEmpty()||(r.ka.forEach((a,u)=>{s.push(r.Ha(u,e,t).then(l=>{var f;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(f=t?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=A_.Yi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.La.p_(i),yield function(u,l){return x(this,null,function*(){let f=U(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.Hi,y=>f.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>S.forEach(m.Ji,y=>f.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!ai(p))throw p;P(jw,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=f.Ts.get(m),b=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(b);f.Ts=f.Ts.insert(m,A)}}})}(r.localStore,o))})}function z2(n,e){return x(this,null,function*(){let t=U(n);if(!t.currentUser.isEqual(e)){P(li,"User change. New user:",e.toKey());let r=yield jR(t.localStore,e);t.currentUser=e,function(o,s){o.Ga.forEach(a=>{a.forEach(u=>{u.reject(new k(R.CANCELLED,s))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Dr(t,r.Rs)}})}function G2(n,e){let t=U(n),r=t.Ua.get(e);if(r&&r.Ba)return se().add(r.key);{let i=se(),o=t.qa.get(e);if(!o)return i;for(let s of o){let a=t.ka.get(s);i=i.unionWith(a.view.Sa)}return i}}function W2(n,e){return x(this,null,function*(){let t=U(n),r=yield eh(t.localStore,e.query,!0),i=e.view.Oa(r);return t.isPrimaryClient&&X_(t,e.targetId,i.Ma),i})}function K2(n,e){return x(this,null,function*(){let t=U(n);return HR(t.localStore,e).then(r=>Dr(t,r))})}function Q2(n,e,t,r){return x(this,null,function*(){let i=U(n),o=yield function(a,u){let l=U(a),f=U(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>f.Ln(p,u).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield ta(i.remoteStore):t==="acknowledged"||t==="rejected"?(Kw(i,e,r||null),Ww(i,e),function(a,u){U(U(a).mutationQueue).qn(u)}(i.localStore,e)):q(),yield Dr(i,o)):P(li,"Cannot apply mutation batch with id: "+e)})}function Z2(n,e){return x(this,null,function*(){let t=U(n);if(xh(t),Zw(t),e===!0&&t.ja!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield dA(t,r.toArray());t.ja=!0,yield H_(t.remoteStore,!0);for(let o of i)Mh(t.remoteStore,o)}else if(e===!1&&t.ja!==!1){let r=[],i=Promise.resolve();t.qa.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ks(t,s),zs(t.localStore,s,!0))),Gs(t.remoteStore,s)}),yield i,yield dA(t,r),function(s){let a=U(s);a.Ua.forEach((u,l)=>{Gs(a.remoteStore,l)}),a.Ka.Dr(),a.Ua=new Map,a.$a=new Pe($.comparator)}(t),t.ja=!1,yield H_(t.remoteStore,!1)}})}function dA(n,e,t){return x(this,null,function*(){let r=U(n),i=[],o=[];for(let s of e){let a,u=r.qa.get(s);if(u&&u.length!==0){a=yield qs(r.localStore,Pt(u[0]));for(let l of u){let f=r.ka.get(l),p=yield W2(r,f);p.snapshot&&o.push(p.snapshot)}}else{let l=yield $R(r.localStore,s);a=yield qs(r.localStore,l),yield Gw(r,iM(l),s,!1,a.resumeToken)}i.push(a)}return r.La.p_(o),i})}function iM(n){return XA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Y2(n){return function(t){return U(U(t).persistence).zi()}(U(n).localStore)}function J2(n,e,t,r){return x(this,null,function*(){let i=U(n);if(i.ja)return void P(li,"Ignoring unexpected query state notification.");let o=i.qa.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield HR(i.localStore,tR(o[0])),a=pu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Je.EMPTY_BYTE_STRING);yield Dr(i,s,a);break}case"rejected":yield zs(i.localStore,e,!0),Ks(i,e,r);break;default:q()}})}function X2(n,e,t){return x(this,null,function*(){let r=xh(n);if(r.ja){for(let i of e){if(r.qa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){P(li,"Adding an already active target "+i);continue}let o=yield $R(r.localStore,i),s=yield qs(r.localStore,o);yield Gw(r,iM(o),s.targetId,!1,s.resumeToken),Mh(r.remoteStore,s)}for(let i of t)r.qa.has(i)&&(yield zs(r.localStore,i,!1).then(()=>{Gs(r.remoteStore,i),Ks(r,i)}).catch(si))}})}function xh(n){let e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=G2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=B2.bind(null,e),e.La.p_=k2.bind(null,e.eventManager),e.La.Ja=P2.bind(null,e.eventManager),e}function Zw(n){let e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=U2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$2.bind(null,e),e}function eB(n,e,t){let r=U(n);(function(o,s,a){return x(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,b){let A=U(y),N=Ye(b.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",H=>A.Yr.getBundleMetadata(H,b.id)).then(H=>!!H&&H.createTime.compareTo(N)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(eM(u));let l=new Q_(u,o.localStore,s.serializer),f=yield s.Ya();for(;f;){let m=yield l.Aa(f);m&&a._updateProgress(m),f=yield s.Ya()}let p=yield l.complete();return yield Dr(o,p.ma,void 0),yield function(y,b){let A=U(y);return A.persistence.runTransaction("Save bundle","readwrite",N=>A.Yr.saveBundleMetadata(N,b))}(o.localStore,u),a._completeWith(p.progress),Promise.resolve(p.Va)}catch(u){return wn(li,`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Yw=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return x(this,null,function*(){this.serializer=Nu(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),yield this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)})}tu(t,r){return null}nu(t,r){return null}eu(t){return VR(this.persistence,new Xf,t.initialUser,this.serializer)}Xa(t){return new wu(Yf.ri,this.serializer)}Za(t){return new rh}terminate(){return x(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),ew=class extends Yw{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){G(this.persistence.referenceDelegate instanceof Jf);let r=this.persistence.referenceDelegate.garbageCollector;return new Kf(r,e.asyncQueue,t)}Xa(e){let t=this.cacheSizeBytes!==void 0?Bt.withCacheSize(this.cacheSizeBytes):Bt.DEFAULT;return new wu(r=>Jf.ri(r,t),this.serializer)}},hh=class n extends Yw{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return x(this,null,function*(){yield xp(n.prototype,this,"initialize").call(this,e),yield this.ru.initialize(this,e),yield Zw(this.ru.syncEngine),yield ta(this.ru.remoteStore),yield this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}eu(e){return VR(this.persistence,new Xf,e.initialUser,this.serializer)}tu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Kf(r,e.asyncQueue,t)}nu(e,t){let r=new bv(t,this.persistence);return new Cv(e.asyncQueue,r)}Xa(e){let t=Vw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Bt.withCacheSize(this.cacheSizeBytes):Bt.DEFAULT;return new S_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,KR(),_f(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new rh}},tw=class n extends hh{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return x(this,null,function*(){yield xp(n.prototype,this,"initialize").call(this,e);let t=this.ru.syncEngine;this.sharedClientState instanceof tu&&(this.sharedClientState.syncEngine={uo:Q2.bind(null,t),co:J2.bind(null,t),lo:X2.bind(null,t),zi:Y2.bind(null,t),ao:K2.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.Ci(r=>x(this,null,function*(){yield Z2(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Za(e){let t=KR();if(!tu.D(t))throw new k(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Vw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Jw=(()=>{class n{initialize(t,r){return x(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>lA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=z2.bind(null,this.syncEngine),yield H_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new G_}()}createDatastore(t){let r=Nu(t.databaseInfo.databaseId),i=function(s){return new F_(s)}(t.databaseInfo);return function(s,a,u,l){return new B_(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new $_(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>lA(this.syncEngine,r,0),function(){return ih.D()?new ih:new N_}())}createSyncEngine(t,r){return function(o,s,a,u,l,f,p){let m=new J_(o,s,a,u,l,f);return p&&(m.ja=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return x(this,null,function*(){var t,r;yield function(o){return x(this,null,function*(){let s=U(o);P(ro,"RemoteStore shutting down."),s.W_.add(5),yield ea(s),s.z_.shutdown(),s.j_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function fA(n,e=10240){let t=0;return{read(){return x(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return x(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Qs=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Qe("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var nw=class{constructor(e,t){this.ou=e,this.serializer=t,this.metadata=new st,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}getMetadata(){return x(this,null,function*(){return this.metadata.promise})}Ya(){return x(this,null,function*(){return yield this.getMetadata(),this.au()})}au(){return x(this,null,function*(){let e=yield this.uu();if(e===null)return null;let t=this._u.decode(e),r=Number(t);isNaN(r)&&this.cu(`length string (${t}) is not valid number`);let i=yield this.lu(r);return new K_(JSON.parse(i),e.length+r)})}hu(){return this.buffer.findIndex(e=>e===123)}uu(){return x(this,null,function*(){for(;this.hu()<0&&!(yield this.Pu()););if(this.buffer.length===0)return null;let e=this.hu();e<0&&this.cu("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}lu(e){return x(this,null,function*(){for(;this.buffer.length<e;)(yield this.Pu())&&this.cu("Reached the end of bundle when more is expected.");let t=this._u.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}cu(e){throw this.ou.cancel(),new Error(`Invalid bundle format: ${e}`)}Pu(){return x(this,null,function*(){let e=yield this.ou.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var rw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return x(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return x(this,null,function*(){let s=U(i),a={documents:o.map(p=>mu(s.serializer,p))},u=yield s.Co("BatchGetDocuments",s.serializer.databaseId,ye.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let m=i2(s.serializer,p);l.set(m.key.toString(),m)});let f=[];return o.forEach(p=>{let m=l.get(p.toString());G(!!m),f.push(m)}),f})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ri(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return x(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new du(i,this.precondition(i)))}),yield function(r,i){return x(this,null,function*(){let o=U(r),s={writes:i.map(a=>yu(o.serializer,a))};yield o.So("Commit",o.serializer.databaseId,ye.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw q();t=Z.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new k(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Z.min())?Ge.exists(!1):Ge.updateTime(t):Ge.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Z.min()))throw new k(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ge.updateTime(t)}return Ge.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var iw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Tu=r.maxAttempts,this.a_=new Iu(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(()=>x(this,null,function*(){let e=new rw(this.datastore),t=this.du(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Au(i)}))}).catch(r=>{this.Au(r)})}))}du(e){try{let t=this.updateFunction(e);return!Su(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(e)}Ru(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!pR(t)}return!1}};var oi="FirestoreClient",ow=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=tt.UNAUTHENTICATED,this.clientId=If.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>x(this,null,function*(){P(oi,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(P(oi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new st;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>x(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ra(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function pv(n,e){return x(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),P(oi,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>x(this,null,function*(){r.isEqual(i)||(yield jR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function hA(n,e){return x(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Xw(n);P(oi,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>aA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>aA(e.remoteStore,i)),n._onlineComponents=e})}function Xw(n){return x(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){P(oi,"Using user provided OfflineComponentProvider");try{yield pv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;wn("Error using user provided cache. Falling back to memory cache: "+t),yield pv(n,new Yw)}}else P(oi,"Using default OfflineComponentProvider"),yield pv(n,new ew(void 0));return n._offlineComponents})}function Nh(n){return x(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(P(oi,"Using user provided OnlineComponentProvider"),yield hA(n,n._uninitializedComponentsProvider._online)):(P(oi,"Using default OnlineComponentProvider"),yield hA(n,new Jw))),n._onlineComponents})}function oM(n){return Xw(n).then(e=>e.persistence)}function eE(n){return Xw(n).then(e=>e.localStore)}function sM(n){return Nh(n).then(e=>e.remoteStore)}function tE(n){return Nh(n).then(e=>e.syncEngine)}function tB(n){return Nh(n).then(e=>e.datastore)}function Zs(n){return x(this,null,function*(){let e=yield Nh(n),t=e.eventManager;return t.onListen=O2.bind(null,e.syncEngine),t.onUnlisten=L2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=F2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=V2.bind(null,e.syncEngine),t})}function nB(n){return n.asyncQueue.enqueue(()=>x(this,null,function*(){let e=yield oM(n),t=yield sM(n);return e.setNetworkEnabled(!0),function(i){let o=U(i);return o.W_.delete(0),ku(o)}(t)}))}function rB(n){return n.asyncQueue.enqueue(()=>x(this,null,function*(){let e=yield oM(n),t=yield sM(n);return e.setNetworkEnabled(!1),function(i){return x(this,null,function*(){let o=U(i);o.W_.add(0),yield ea(o),o.j_.set("Offline")})}(t)}))}function iB(n,e){let t=new st;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,o,s){return x(this,null,function*(){try{let a=yield function(l,f){let p=U(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,f))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=ra(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield eE(n),e,t)})),t.promise}function aM(n,e,t={}){let r=new st;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(o,s,a,u,l){let f=new Qs({next:m=>{f.su(),s.enqueueAndForget(()=>qw(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new k(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Du(Xs(a.path),f,{includeMetadataChanges:!0,Ta:!0});return Hw(o,p)}(yield Zs(n),n.asyncQueue,e,t,r)})),r.promise}function oB(n,e){let t=new st;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,o,s){return x(this,null,function*(){try{let a=yield eh(i,o,!0),u=new fh(o,a.gs),l=u.ba(a.documents),f=u.applyChanges(l,!1);s.resolve(f.snapshot)}catch(a){let u=ra(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield eE(n),e,t)})),t.promise}function cM(n,e,t={}){let r=new st;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(o,s,a,u,l){let f=new Qs({next:m=>{f.su(),s.enqueueAndForget(()=>qw(o,p)),m.fromCache&&u.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Du(a,f,{includeMetadataChanges:!0,Ta:!0});return Hw(o,p)}(yield Zs(n),n.asyncQueue,e,t,r)})),r.promise}function sB(n,e){let t=new Qs(e);return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,o){U(i).ia.add(o),o.next()}(yield Zs(n),t)})),()=>{t.su(),n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,o){U(i).ia.delete(o)}(yield Zs(n),t)}))}}function aB(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?Iw().encode(s):s,function(f,p){return new nw(f,p)}(function(f,p){if(f instanceof Uint8Array)return fA(f,p);if(f instanceof ArrayBuffer)return fA(new Uint8Array(f),p);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,Nu(e));n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){eB(yield tE(n),i,r)}))}function cB(n,e){return n.asyncQueue.enqueue(()=>x(this,null,function*(){return function(r,i){let o=U(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Yr.getNamedQuery(s,i))}(yield eE(n),e)}))}function uM(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var pA=new Map;function nE(n,e,t){if(!t)throw new k(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rE(n,e,t,r){if(e===!0&&r===!0)throw new k(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gA(n){if(!$.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mA(n){if($.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function kh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":q()}function _e(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new k(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=kh(n);throw new k(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function lM(n,e){if(e<=0)throw new k(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var dM="firestore.googleapis.com",yA=!0,ph=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dM,this.ssl=yA}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:yA;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<g2)throw new k(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},io=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ph({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new k(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ph(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gv;switch(r.type){case"firstParty":return new _v(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return x(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=pA.get(t);r&&(P("ComponentProvider","Removing Datastore"),pA.delete(t),r.terminate())}(this),Promise.resolve()}};function fM(n,e,t,r={}){var i;let o=(n=_e(n,io))._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;o.host!==dM&&o.host!==a&&wn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},o),{host:a,ssl:!1,emulatorOptions:r});if(!tl(u,s)&&(n._setSettings(u),r.mockUserToken)){let l,f;if(typeof r.mockUserToken=="string")l=r.mockUserToken,f=tt.MOCK_USER;else{l=MI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new k(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new tt(p)}n._authCredentials=new mv(new wf(l,f))}}var gt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ne=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Un(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Un=class n extends gt{constructor(e,t,r){super(e,t,Xs(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ne(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function iE(n,e,...t){if(n=Le(n),nE("collection","path",e),n instanceof io){let r=ye.fromString(e,...t);return mA(r),new Un(n,null,r)}{if(!(n instanceof Ne||n instanceof Un))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return mA(r),new Un(n.firestore,null,r)}}function hM(n,e){if(n=_e(n,io),nE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gt(n,null,function(r){return new En(ye.emptyPath(),r)}(e))}function Pu(n,e,...t){if(n=Le(n),arguments.length===1&&(e=If.newId()),nE("doc","path",e),n instanceof io){let r=ye.fromString(e,...t);return gA(r),new Ne(n,null,new $(r))}{if(!(n instanceof Ne||n instanceof Un))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return gA(r),new Ne(n.firestore,n instanceof Un?n.converter:null,new $(r))}}function oE(n,e){return n=Le(n),e=Le(e),(n instanceof Ne||n instanceof Un)&&(e instanceof Ne||e instanceof Un)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function sE(n,e){return n=Le(n),e=Le(e),n instanceof gt&&e instanceof gt&&n.firestore===e.firestore&&Mu(n._query,e._query)&&n.converter===e.converter}var vA="AsyncQueue",gh=class{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Iu(this,"async_queue_retry"),this.Su=()=>{let r=_f();r&&P(vA,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;let t=_f();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;let t=_f();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});let t=new st;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}Cu(){return x(this,null,function*(){if(this.Vu.length!==0){try{yield this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!ai(e))throw e;P(vA,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}})}vu(e){let t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Qe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);let i=q_.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(i),i}Du(){this.gu&&q()}verifyOperationInProgress(){}Mu(){return x(this,null,function*(){let e;do e=this.bu,yield e;while(e!==this.bu)})}xu(e){for(let t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){let t=this.fu.indexOf(e);this.fu.splice(t,1)}};function sw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var aw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new st,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var pM=-1,Ue=class extends io{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new gh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return x(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new gh(e),this._firestoreClient=void 0,yield e}})}};function mt(n){if(n._terminated)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||gM(n),n._firestoreClient}function gM(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,f){return new Mv(a,u,l,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,uM(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new ow(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function mM(n,e){wn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return vM(n,Jw.provider,{build:r=>new hh(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function yM(n){return x(this,null,function*(){wn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();vM(n,Jw.provider,{build:t=>new tw(t,e.cacheSizeBytes)})})}function vM(n,e,t){if((n=_e(n,Ue))._firestoreClient||n._terminated)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new k(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},gM(n)}function _M(n){if(n._initialized&&!n._terminated)throw new k(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new st;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>x(this,null,function*(){try{yield function(r){return x(this,null,function*(){if(!Zr.D())return Promise.resolve();let i=r+LR;yield Zr.delete(i)})}(Vw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function wM(n){return function(t){let r=new st;return t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return H2(yield tE(t),r)})),r.promise}(mt(n=_e(n,Ue)))}function EM(n){return nB(mt(n=_e(n,Ue)))}function IM(n){return rB(mt(n=_e(n,Ue)))}function DM(n,e){let t=mt(n=_e(n,Ue)),r=new aw;return aB(t,n._databaseId,e,r),r}function TM(n,e){return cB(mt(n=_e(n,Ue)),e).then(t=>t?new gt(n,null,t.query):null)}var qn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Je.fromBase64String(e))}catch(t){throw new k(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Tn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new k(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Er=class{constructor(e){this._methodName=e}};var oo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new k(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new k(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return X(this._lat,e._lat)||X(this._long,e._long)}};var Tu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var uB=/^__.*__$/,cw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Dn(e,this.data,this.fieldMask,t,this.fieldTransforms):new ni(e,this.data,t,this.fieldTransforms)}},mh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Dn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function CM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q()}}var yh=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Uu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return vh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(CM(this.Lu)&&uB.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}},uw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Nu(e)}ju(e,t,r,i=!1){return new yh({Lu:e,methodName:t,zu:r,path:Ze.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function co(n){let e=n._freezeSettings(),t=Nu(n._databaseId);return new uw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ph(n,e,t,r,i,o={}){let s=n.ju(o.merge||o.mergeFields?2:0,e,t,i);uE("Data must be an object, but it was:",s,r);let a=AM(r,s),u,l;if(o.merge)u=new Jt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let m=pw(e,p,t);if(!s.contains(m))throw new k(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);MM(f,m)||f.push(m)}u=new Jt(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new cw(new Ct(a),u,l)}var Cu=class n extends Er{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function bM(n,e,t){return new yh({Lu:3,zu:e.settings.zu,methodName:n._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var lw=class n extends Er{_toFieldTransform(e){return new eo(e.path,new ei)}isEqual(e){return e instanceof n}},dw=class n extends Er{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){let t=bM(this,e,!0),r=this.Hu.map(o=>uo(o,t)),i=new _r(r);return new eo(e.path,i)}isEqual(e){return e instanceof n&&tl(this.Hu,e.Hu)}},fw=class n extends Er{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){let t=bM(this,e,!0),r=this.Hu.map(o=>uo(o,t)),i=new wr(r);return new eo(e.path,i)}isEqual(e){return e instanceof n&&tl(this.Hu,e.Hu)}},hw=class n extends Er{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){let t=new ti(e.serializer,aR(e.serializer,this.Ju));return new eo(e.path,t)}isEqual(e){return e instanceof n&&this.Ju===e.Ju}};function aE(n,e,t,r){let i=n.ju(1,e,t);uE("Data must be an object, but it was:",i,r);let o=[],s=Ct.empty();ci(r,(u,l)=>{let f=lE(e,u,t);l=Le(l);let p=i.Uu(f);if(l instanceof Cu)o.push(f);else{let m=uo(l,p);m!=null&&(o.push(f),s.set(f,m))}});let a=new Jt(o);return new mh(s,a,i.fieldTransforms)}function cE(n,e,t,r,i,o){let s=n.ju(1,e,t),a=[pw(e,r,t)],u=[i];if(o.length%2!=0)throw new k(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(pw(e,o[m])),u.push(o[m+1]);let l=[],f=Ct.empty();for(let m=a.length-1;m>=0;--m)if(!MM(l,a[m])){let y=a[m],b=u[m];b=Le(b);let A=s.Uu(y);if(b instanceof Cu)l.push(y);else{let N=uo(b,A);N!=null&&(l.push(y),f.set(y,N))}}let p=new Jt(l);return new mh(f,p,s.fieldTransforms)}function SM(n,e,t,r=!1){return uo(t,n.ju(r?4:3,e))}function uo(n,e){if(RM(n=Le(n)))return uE("Unsupported field value:",e,n),AM(n,e);if(n instanceof Er)return function(r,i){if(!CM(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=uo(a,i.Ku(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Le(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Be.fromDate(r);return{timestampValue:Us(i.serializer,o)}}if(r instanceof Be){let o=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Us(i.serializer,o)}}if(r instanceof oo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qn)return{bytesValue:mR(i.serializer,r._byteString)};if(r instanceof Ne){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Wu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ow(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Tu)return function(s,a){return{mapValue:{fields:{[Rw]:{stringValue:Mw},[Fs]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Wu("VectorValues must only contain numeric values.");return Pw(a.serializer,l)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${kh(r)}`)}(n,e)}function AM(n,e){let t={};return VA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ci(n,(r,i)=>{let o=uo(i,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function RM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Be||n instanceof oo||n instanceof qn||n instanceof Ne||n instanceof Er||n instanceof Tu)}function uE(n,e,t){if(!RM(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=kh(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function pw(n,e,t){if((e=Le(e))instanceof Tn)return e._internalPath;if(typeof e=="string")return lE(n,e);throw vh("Field path arguments must be of type string or ",n,!1,void 0,t)}var lB=new RegExp("[~\\*/\\[\\]]");function lE(n,e,t){if(e.search(lB)>=0)throw vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Tn(...e.split("."))._internalPath}catch{throw vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new k(R.INVALID_ARGUMENT,a+n+u)}function MM(n,e){return n.some(t=>t.isEqual(e))}var so=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ne(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new gw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Oh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},gw=class extends so{data(){return super.data()}};function Oh(n,e){return typeof e=="string"?lE(n,e):e instanceof Tn?e._internalPath:e._delegate._internalPath}function xM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new k(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var bu=class{},ao=class extends bu{};function Tr(n,e,...t){let r=[];e instanceof bu&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof mw).length,a=o.filter(u=>u instanceof _h).length;if(s>1||s>0&&a>0)throw new k(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var _h=class n extends ao{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return UM(e._query,t),new gt(e.firestore,e.converter,qv(e._query,t))}_parse(e){let t=co(e.firestore);return function(o,s,a,u,l,f,p){let m;if(l.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new k(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){wA(p,f);let b=[];for(let A of p)b.push(_A(u,o,A));m={arrayValue:{values:b}}}else m=_A(u,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||wA(p,f),m=SM(a,s,p,f==="in"||f==="not-in");return fe.create(l,f,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function NM(n,e,t){let r=e,i=Oh("where",n);return _h._create(i,r,t)}var mw=class n extends bu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Se.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)UM(s,u),s=qv(s,u)}(e._query,t),new gt(e.firestore,e.converter,qv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var yw=class n extends ao{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ji(o,s)}(e._query,this._field,this._direction);return new gt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new En(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function kM(n,e="asc"){let t=e,r=Oh("orderBy",n);return yw._create(r,t)}var wh=class n extends ao{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new gt(e.firestore,e.converter,Lf(e._query,this._limit,this._limitType))}};function PM(n){return lM("limit",n),wh._create("limit",n,"F")}function OM(n){return lM("limitToLast",n),wh._create("limitToLast",n,"L")}var Eh=class n extends ao{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=BM(e,this.type,this._docOrFields,this._inclusive);return new gt(e.firestore,e.converter,function(i,o){return new En(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function FM(...n){return Eh._create("startAt",n,!0)}function LM(...n){return Eh._create("startAfter",n,!1)}var Ih=class n extends ao{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=BM(e,this.type,this._docOrFields,this._inclusive);return new gt(e.firestore,e.converter,function(i,o){return new En(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function VM(...n){return Ih._create("endBefore",n,!1)}function jM(...n){return Ih._create("endAt",n,!0)}function BM(n,e,t,r){if(t[0]=Le(t[0]),t[0]instanceof so)return function(o,s,a,u,l){if(!u)throw new k(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let f=[];for(let p of Ss(o))if(p.field.isKeyField())f.push(Yi(s,u.key));else{let m=u.data.field(p.field);if(Sh(m))throw new k(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=p.field.canonicalString();throw new k(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}f.push(m)}return new Hn(f,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=co(n.firestore);return function(s,a,u,l,f,p){let m=s.explicitOrderBy;if(f.length>m.length)throw new k(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let b=0;b<f.length;b++){let A=f[b];if(m[b].field.isKeyField()){if(typeof A!="string")throw new k(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof A}`);if(!Nw(s)&&A.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${A}' contains a slash.`);let N=s.path.child(ye.fromString(A));if(!$.isDocumentKey(N))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let H=new $(N);y.push(Yi(a,H))}else{let N=SM(u,l,A);y.push(N)}}return new Hn(y,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function _A(n,e,t){if(typeof(t=Le(t))=="string"){if(t==="")throw new k(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nw(e)&&t.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ye.fromString(t));if(!$.isDocumentKey(r))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yi(n,new $(r))}if(t instanceof Ne)return Yi(n,t._key);throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kh(t)}.`)}function wA(n,e){if(!Array.isArray(n)||n.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UM(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Ys=class{convertValue(e,t="none"){switch(Jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw q()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ci(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Fs].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Fe(s.doubleValue));return new Tu(o)}convertGeoPoint(e){return new oo(Fe(e.latitude),Fe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Ah(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(cu(e));default:return null}}convertTimestamp(e){let t=yr(e);return new Be(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ye.fromString(e);G(SR(r));let i=new Yr(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||Qe(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Fh(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var vw=class extends Ys{constructor(e){super(),this.firestore=e}convertBytes(e){return new qn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ne(this.firestore,null,t)}};var mr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},cn=class extends so{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Kr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Oh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Kr=class extends cn{data(e={}){return super.data(e)}},Cn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new mr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Kr(this._firestore,this._userDataWriter,r.key,r,new mr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new k(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Kr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new mr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Kr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new mr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:dB(a.type),doc:u,oldIndex:l,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function dB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q()}}function dE(n,e){return n instanceof cn&&e instanceof cn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Cn&&e instanceof Cn&&n._firestore===e._firestore&&sE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function $M(n){n=_e(n,Ne);let e=_e(n.firestore,Ue);return aM(mt(e),n._key).then(t=>gE(e,n,t))}var Ir=class extends Ys{constructor(e){super(),this.firestore=e}convertBytes(e){return new qn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ne(this.firestore,null,t)}};function HM(n){n=_e(n,Ne);let e=_e(n.firestore,Ue),t=mt(e),r=new Ir(e);return iB(t,n._key).then(i=>new cn(e,r,n._key,i,new mr(i!==null&&i.hasLocalMutations,!0),n.converter))}function qM(n){n=_e(n,Ne);let e=_e(n.firestore,Ue);return aM(mt(e),n._key,{source:"server"}).then(t=>gE(e,n,t))}function zM(n){n=_e(n,gt);let e=_e(n.firestore,Ue),t=mt(e),r=new Ir(e);return xM(n._query),cM(t,n._query).then(i=>new Cn(e,r,n,i))}function GM(n){n=_e(n,gt);let e=_e(n.firestore,Ue),t=mt(e),r=new Ir(e);return oB(t,n._query).then(i=>new Cn(e,r,n,i))}function WM(n){n=_e(n,gt);let e=_e(n.firestore,Ue),t=mt(e),r=new Ir(e);return cM(t,n._query,{source:"server"}).then(i=>new Cn(e,r,n,i))}function fE(n,e,t){n=_e(n,Ne);let r=_e(n.firestore,Ue),i=Fh(n.converter,e,t);return ia(r,[Ph(co(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ge.none())])}function hE(n,e,t,...r){n=_e(n,Ne);let i=_e(n.firestore,Ue),o=co(i),s;return s=typeof(e=Le(e))=="string"||e instanceof Tn?cE(o,"updateDoc",n._key,e,t,r):aE(o,"updateDoc",n._key,e),ia(i,[s.toMutation(n._key,Ge.exists(!0))])}function KM(n){return ia(_e(n.firestore,Ue),[new ri(n._key,Ge.none())])}function QM(n,e){let t=_e(n.firestore,Ue),r=Pu(n),i=Fh(n.converter,e);return ia(t,[Ph(co(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ge.exists(!1))]).then(()=>r)}function pE(n,...e){var t,r,i;n=Le(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||sw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(sw(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,f;if(n instanceof Ne)l=_e(n.firestore,Ue),f=Xs(n._key.path),u={next:p=>{e[s]&&e[s](gE(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=_e(n,gt);l=_e(p.firestore,Ue),f=p._query;let m=new Ir(l);u={next:y=>{e[s]&&e[s](new Cn(l,m,p,y))},error:e[s+1],complete:e[s+2]},xM(n._query)}return function(m,y,b,A){let N=new Qs(A),H=new Du(y,N,b);return m.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return Hw(yield Zs(m),H)})),()=>{N.su(),m.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return qw(yield Zs(m),H)}))}}(mt(l),f,a,u)}function ZM(n,e){return sB(mt(n=_e(n,Ue)),sw(e)?e:{next:e})}function ia(n,e){return function(r,i){let o=new st;return r.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return j2(yield tE(r),i,o)})),o.promise}(mt(n),e)}function gE(n,e,t){let r=t.docs.get(e._key),i=new Ir(n);return new cn(n,i,e._key,r,new mr(t.hasPendingWrites,t.fromCache),e.converter)}var fB={maxAttempts:5};var Dh=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=co(e)}set(e,t,r){this._verifyNotCommitted();let i=Gr(e,this._firestore),o=Fh(i.converter,t,r),s=Ph(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ge.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Gr(e,this._firestore),s;return s=typeof(t=Le(t))=="string"||t instanceof Tn?cE(this._dataReader,"WriteBatch.update",o._key,t,r,i):aE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Ge.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Gr(e,this._firestore);return this._mutations=this._mutations.concat(new ri(t._key,Ge.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Gr(n,e){if((n=Le(n)).firestore!==e)throw new k(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var _w=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=co(e)}get(e){let t=Gr(e,this._firestore),r=new vw(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return q();let o=i[0];if(o.isFoundDocument())return new so(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new so(this._firestore,r,t._key,null,t.converter);throw q()})}set(e,t,r){let i=Gr(e,this._firestore),o=Fh(i.converter,t,r),s=Ph(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=Gr(e,this._firestore),s;return s=typeof(t=Le(t))=="string"||t instanceof Tn?cE(this._dataReader,"Transaction.update",o._key,t,r,i):aE(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=Gr(e,this._firestore);return this._transaction.delete(t._key),this}};var ww=class extends _w{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Gr(e,this._firestore),r=new Ir(this._firestore);return super.get(e).then(i=>new cn(this._firestore,r,t._key,i._document,new mr(!1,!1),t.converter))}};function YM(n,e,t){n=_e(n,Ue);let r=Object.assign(Object.assign({},fB),t);return function(o){if(o.maxAttempts<1)throw new k(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new st;return o.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){let l=yield tB(o);new iw(o.asyncQueue,l,a,s,u).Iu()})),u.promise}(mt(n),i=>e(new ww(n,i)),r)}function JM(){return new Cu("deleteField")}function XM(){return new lw("serverTimestamp")}function ex(...n){return new dw("arrayUnion",n)}function tx(...n){return new fw("arrayRemove",n)}function nx(n){return new hw("increment",n)}(function(e,t=!0){(function(i){Js=i})(PI),Aa(new gi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ue(new yv(r.getProvider("auth-internal")),new wv(s,r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yr(l.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Rr(aS,cS,e),Rr(aS,cS,"esm2017")})();var hB="@firebase/firestore-compat",pB="0.3.45";function EE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new k("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function rx(){if(typeof Uint8Array>"u")throw new k("unimplemented","Uint8Arrays are not available in this environment.")}function ix(){if(!jA())throw new k("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Lh=class n{constructor(e){this._delegate=e}static fromBase64String(e){return ix(),new n(qn.fromBase64String(e))}static fromUint8Array(e){return rx(),new n(qn.fromUint8Array(e))}toBase64(){return ix(),this._delegate.toBase64()}toUint8Array(){return rx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function mE(n){return gB(n,["next","error","complete"])}function gB(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var yE=class{enableIndexedDbPersistence(e,t){return mM(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return yM(e._delegate)}clearIndexedDbPersistence(e){return _M(e._delegate)}},Vh=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Yr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&wn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){fM(this._delegate,e,t,r)}enableNetwork(){return EM(this._delegate)}disableNetwork(){return IM(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,rE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return wM(this._delegate)}onSnapshotsInSync(e){return ZM(this._delegate,e)}get app(){if(!this._appCompat)throw new k("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new aa(this,iE(this._delegate,e))}catch(t){throw Ot(t,"collection()","Firestore.collection()")}}doc(e){try{return new zn(this,Pu(this._delegate,e))}catch(t){throw Ot(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new po(this,hM(this._delegate,e))}catch(t){throw Ot(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return YM(this._delegate,t=>e(new jh(this,t)))}batch(){return mt(this._delegate),new Bh(new Dh(this._delegate,e=>ia(this._delegate,e)))}loadBundle(e){return DM(this._delegate,e)}namedQuery(e){return TM(this._delegate,e).then(t=>t?new po(this,t):null)}},oa=class extends Ys{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lh(new qn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return zn.forKey(t,this.firestore,null)}};function mB(n){EA(n)}var jh=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new oa(e)}get(e){let t=lo(e);return this._delegate.get(t).then(r=>new fo(this._firestore,new cn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=lo(e);return r?(EE("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=lo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=lo(e);return this._delegate.delete(t),this}},Bh=class{constructor(e){this._delegate=e}set(e,t,r){let i=lo(e);return r?(EE("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=lo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=lo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},sa=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Kr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ho(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new oa(e),t),i.set(t,o)),o}};sa.INSTANCES=new WeakMap;var zn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oa(e)}static forPath(e,t,r){if(e.length%2!==0)throw new k("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Ne(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Ne(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new aa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new aa(this.firestore,iE(this._delegate,e))}catch(t){throw Ot(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Le(e),e instanceof Ne?oE(this._delegate,e):!1}set(e,t){t=EE("DocumentReference.set",t);try{return t?fE(this._delegate,e,t):fE(this._delegate,e)}catch(r){throw Ot(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?hE(this._delegate,e):hE(this._delegate,e,t,...r)}catch(i){throw Ot(i,"updateDoc()","DocumentReference.update()")}}delete(){return KM(this._delegate)}onSnapshot(...e){let t=ox(e),r=sx(e,i=>new fo(this.firestore,new cn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return pE(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=HM(this._delegate):e?.source==="server"?t=qM(this._delegate):t=$M(this._delegate),t.then(r=>new fo(this.firestore,new cn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(sa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ot(n,e,t){return n.message=n.message.replace(e,t),n}function ox(n){for(let e of n)if(typeof e=="object"&&!mE(e))return e;return{}}function sx(n,e){var t,r;let i;return mE(n[0])?i=n[0]:mE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var fo=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new zn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return dE(this._delegate,e._delegate)}},ho=class extends fo{data(e){let t=this._delegate.data(e);return this._delegate._converter||IA(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},po=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oa(e)}where(e,t,r){try{return new n(this.firestore,Tr(this._delegate,NM(e,t,r)))}catch(i){throw Ot(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Tr(this._delegate,kM(e,t)))}catch(r){throw Ot(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Tr(this._delegate,PM(e)))}catch(t){throw Ot(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Tr(this._delegate,OM(e)))}catch(t){throw Ot(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Tr(this._delegate,FM(...e)))}catch(t){throw Ot(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Tr(this._delegate,LM(...e)))}catch(t){throw Ot(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Tr(this._delegate,VM(...e)))}catch(t){throw Ot(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Tr(this._delegate,jM(...e)))}catch(t){throw Ot(t,"endAt()","Query.endAt()")}}isEqual(e){return sE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=GM(this._delegate):e?.source==="server"?t=WM(this._delegate):t=zM(this._delegate),t.then(r=>new Ou(this.firestore,new Cn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=ox(e),r=sx(e,i=>new Ou(this.firestore,new Cn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return pE(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(sa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},vE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ho(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Ou=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new po(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ho(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new vE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ho(this._firestore,r))})}isEqual(e){return dE(this._delegate,e._delegate)}},aa=class n extends po{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new zn(this.firestore,e):null}doc(e){try{return e===void 0?new zn(this.firestore,Pu(this._delegate)):new zn(this.firestore,Pu(this._delegate,e))}catch(t){throw Ot(t,"doc()","CollectionReference.doc()")}}add(e){return QM(this._delegate,e).then(t=>new zn(this.firestore,t))}isEqual(e){return oE(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(sa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function lo(n){return _e(n,Ne)}var _E=class n{constructor(...e){this._delegate=new Tn(...e)}static documentId(){return new n(Ze.keyField().canonicalString())}isEqual(e){return e=Le(e),e instanceof Tn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var wE=class n{static serverTimestamp(){let e=XM();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=JM();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=ex(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=tx(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=nx(e);return t._methodName="FieldValue.increment",new n(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}};var yB={Firestore:Vh,GeoPoint:oo,Timestamp:Be,Blob:Lh,Transaction:jh,WriteBatch:Bh,DocumentReference:zn,DocumentSnapshot:fo,Query:po,QueryDocumentSnapshot:ho,QuerySnapshot:Ou,CollectionReference:aa,FieldPath:_E,FieldValue:wE,setLogLevel:mB,CACHE_SIZE_UNLIMITED:pM};function vB(n,e){n.INTERNAL.registerComponent(new gi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},yB)))}function _B(n){vB(n,(e,t)=>new Vh(e,t,new yE)),n.registerVersion(hB,pB)}_B(qt);function wB(n,e=Oa){return new de(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function ax(n,e){return wB(n,e)}function EB(n,e){return ax(n,e).pipe(wi(void 0),Va(),W(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function TE(n,e){return ax(n,e).pipe(W(t=>({payload:t,type:"query"})))}var Uh=class{ref;afs;injector=O(Ke);constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=lx(r,t);return new Hh(i,o,this.afs)}snapshotChanges(){return EB(this.ref,this.afs.schedulers.outsideAngular).pipe(kt(this.injector))}valueChanges(e={}){return this.snapshotChanges().pipe(W(({payload:t})=>e.idField?be(L({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ee(this.ref.get(e)).pipe(kt(this.injector))}};function $h(n,e){return TE(n,e).pipe(wi(void 0),Va(),W(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function cx(n,e,t){return $h(n,t).pipe(_i((r,i)=>IB(r,i.map(o=>o.payload),e),[]),og(),W(r=>r.map(i=>({type:i.type,payload:i}))))}function IB(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=DB(n,r))}),n}function IE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function DB(n,e){switch(e.type){case"added":if(!n[e.newIndex]?.doc.ref.isEqual(e.doc.ref))return IE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return IE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]?.doc.ref.isEqual(e.doc.ref))return IE(n,e.oldIndex,1);break}return n}function ux(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Hh=class{ref;query;afs;injector=O(Ke);constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=$h(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(W(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(wi(void 0),Va(),ct(([r,i])=>i.length>0||!r),W(([,r])=>r),kt(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(_i((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=ux(e);return cx(this.query,t,this.afs.schedulers.outsideAngular).pipe(kt(this.injector))}valueChanges(e={}){return TE(this.query,this.afs.schedulers.outsideAngular).pipe(W(t=>t.payload.docs.map(r=>e.idField?be(L({},r.data()),{[e.idField]:r.id}):r.data())),kt(this.injector))}get(e){return Ee(this.query.get(e)).pipe(kt(this.injector))}add(e){return this.ref.add(e)}doc(e){return new Uh(this.ref.doc(e),this.afs)}},DE=class{query;afs;injector=O(Ke);constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?$h(this.query,this.afs.schedulers.outsideAngular).pipe(kt(this.injector)):$h(this.query,this.afs.schedulers.outsideAngular).pipe(W(t=>t.filter(r=>e.indexOf(r.type)>-1)),ct(t=>t.length>0),kt(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(_i((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=ux(e);return cx(this.query,t,this.afs.schedulers.outsideAngular).pipe(kt(this.injector))}valueChanges(e={}){return TE(this.query,this.afs.schedulers.outsideAngular).pipe(W(r=>r.payload.docs.map(i=>e.idField?L({[e.idField]:i.id},i.data()):i.data())),kt(this.injector))}get(e){return Ee(this.query.get(e)).pipe(kt(this.injector))}},TB=new z("angularfire2.enableFirestorePersistence"),CB=new z("angularfire2.firestore.persistenceSettings"),bB=new z("angularfire2.firestore.settings"),SB=new z("angularfire2.firestore.use-emulator");function lx(n,e=t=>t){return{query:e(n),ref:n}}var $t=(()=>{class n{schedulers;firestore;persistenceEnabled$;ngZone=O(he);constructor(t,r,i,o,s,a,u,l,f,p,m,y,b,A,N,H,K){this.schedulers=u;let V=$c(t,a,r),J=f;p&&tv(V,a,m,b,A,N,y,H),[this.firestore,this.persistenceEnabled$]=of(`${V.name}.firestore`,"AngularFirestore",V.name,()=>{let re=a.runOutsideAngular(()=>V.firestore());if(o&&re.settings(o),J&&re.useEmulator(...J),i&&!Vr(s)){let ie=()=>{try{return Ee(re.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),Y(!1)}};return[re,a.runOutsideAngular(ie)]}else return[re,Y(!1)]},[o,J,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=lx(i,r),a=this.ngZone.run(()=>o);return new Hh(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new DE(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.ngZone.run(()=>r);return new Uh(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(F(ds),F(fs,8),F(TB,8),F(bB,8),F(rn),F(he),F(jc),F(CB,8),F(SB,8),F(iS,8),F(Qy,8),F(Zy,8),F(Yy,8),F(Jy,8),F(Xy,8),F(ev,8),F(ls,8))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var qh=class n{constructor(e){this.db=e;this.headerRef=e.collection(this.dbPath)}accessHeader="header service running...";dbPath="/header";headerRef;getHeader(){return this.headerRef}static \u0275fac=function(t){return new(t||n)(F($t))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};var zh=class n{constructor(e){this.headerService=e;this.headerService.getHeader().snapshotChanges().pipe(W(t=>t.map(r=>L({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.header=t[0],this.isLoading=!1,console.log(this.header)})}header;isLoading=!0;static \u0275fac=function(t){return new(t||n)(ze(qh))};static \u0275cmp=ut({type:n,selectors:[["app-header"]],standalone:!1,decls:22,vars:8,consts:[["align","rigth"],[1,"profile-container"],["alt","Foto de perfil",1,"profile-image",3,"src","align"],[1,"profile-info"],[1,"fa-solid","fa-circle-user"],[1,"fa-solid","fa-paper-plane"],[1,"fa-solid","fa-envelope"],[1,"fa-solid","fa-phone"],[1,"fa-solid","fa-location-dot"],[1,"fa-brands","fa-instagram"]],template:function(t,r){t&1&&(te(0,"tr",0)(1,"div",1),ve(2,"img",2),te(3,"div",3)(4,"p"),ve(5,"i",4),ge(6),ne(),te(7,"p"),ve(8,"i",5),ge(9),ne(),te(10,"p"),ve(11,"i",6),ge(12),ne(),te(13,"p"),ve(14,"i",7),ge(15),ne(),te(16,"p"),ve(17,"i",8),ge(18),ne(),te(19,"p"),ve(20,"i",9),ge(21),ne()()()()),t&2&&(pe(2),Lm("src",r.header.photoUrl,xC),Nt("align","right"),pe(4),ot(" "+r.header.name),pe(3),ot(" "+r.header.goalLife),pe(3),ot(" "+r.header.email),pe(3),ot(" "+r.header.phoneNumber),pe(3),ot(" "+r.header.location),pe(3),ot(" "+r.header.socialNetwork))},styles:[".profile-image[_ngcontent-%COMP%]{width:300px;height:300px;border-radius:50%;object-fit:cover;border:4px solid #32578f}.profile-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;justify-content:center}.profile-info[_ngcontent-%COMP%]{text-align:left;color:#c8ceda}"]})};var Gh=class n{constructor(e){this.db=e;this.workExperienceRef=e.collection(this.dbPath)}accessWorkExperience="work experience running...";dbPath="/work-experience";workExperienceRef;getWorkExperience(){return this.workExperienceRef}static \u0275fac=function(t){return new(t||n)(F($t))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};function xB(n,e){if(n&1&&(te(0,"ul")(1,"li"),ge(2),te(3,"i"),ge(4),ne(),ve(5,"br"),te(6,"b"),ge(7),ne(),ve(8,"br"),ge(9),ve(10,"br"),ge(11," Logros: "),ve(12,"br"),te(13,"ul"),ge(14),ne()()()),n&2){let t=e.$implicit;pe(2),lc(" ",t.startDate," - ",t.endDate," "),pe(2),ot(t.location),pe(3),ot(t.position),pe(2),on(" ",t.company," "),pe(5),on(" ",t.accomplishment," ")}}var Wh=class n{constructor(e){this.workExperienceService=e;console.log(this.workExperienceService),this.workExperienceService.getWorkExperience().snapshotChanges().pipe(W(t=>t.map(r=>L({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.workExperience=t,console.log(this.workExperience)})}workExperience=[];static \u0275fac=function(t){return new(t||n)(ze(Gh))};static \u0275cmp=ut({type:n,selectors:[["app-work-experience"]],standalone:!1,decls:3,vars:1,consts:[[1,"shadow-title"],[4,"ngFor","ngForOf"]],template:function(t,r){t&1&&(te(0,"h2",0),ge(1,"Work Experience"),ne(),Wt(2,xB,15,6,"ul",1)),t&2&&(pe(2),Nt("ngForOf",r.workExperience))},dependencies:[jt],encapsulation:2})};var Kh=class n{constructor(e){this.db=e;this.educationRef=e.collection(this.dbPath)}accesoEducation="education running...";dbPath="/education";educationRef;getEducation(){return this.educationRef}static \u0275fac=function(t){return new(t||n)(F($t))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};function PB(n,e){if(n&1&&(te(0,"ul")(1,"li")(2,"p"),ve(3,"i",2),ge(4),ne(),te(5,"p")(6,"b"),ve(7,"i",3),ge(8),ne()(),te(9,"p"),ve(10,"i",4),ge(11),ne(),ve(12,"br"),ne()()),n&2){let t=e.$implicit;pe(4),lc(""," "+t.admissionDate," - ",t.gradationDate,""),pe(4),ot(" "+t.carrer),pe(3),on(""," "+t.institutionName," ")}}var Qh=class n{constructor(e){this.educationService=e;console.log(this.educationService),this.educationService.getEducation().snapshotChanges().pipe(W(t=>t.map(r=>L({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.education=t,console.log(this.education)})}education=[];static \u0275fac=function(t){return new(t||n)(ze(Kh))};static \u0275cmp=ut({type:n,selectors:[["app-education"]],standalone:!1,decls:3,vars:1,consts:[[1,"shadow-title"],[4,"ngFor","ngForOf"],[1,"fa-solid","fa-calendar"],[1,"fa-solid","fa-book"],[1,"fa-solid","fa-city"]],template:function(t,r){t&1&&(te(0,"h2",0),ge(1,"Education"),ne(),Wt(2,PB,13,4,"ul",1)),t&2&&(pe(2),Nt("ngForOf",r.education))},dependencies:[jt],encapsulation:2})};var Zh=class n{constructor(e){this.db=e;this.skillsRef=e.collection(this.dbPath)}accesoSkills="skills running...";dbPath="/skills";skillsRef;getSkills(){return this.skillsRef}static \u0275fac=function(t){return new(t||n)(F($t))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};function LB(n,e){if(n&1&&(te(0,"li")(1,"b"),ge(2),ne()()),n&2){let t=e.$implicit;pe(2),ot(t.skill)}}var Yh=class n{constructor(e){this.skillsService=e;console.log(this.skillsService),this.skillsService.getSkills().snapshotChanges().pipe(W(t=>t.map(r=>L({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.skills=t,console.log(this.skills)})}skills=[];static \u0275fac=function(t){return new(t||n)(ze(Zh))};static \u0275cmp=ut({type:n,selectors:[["app-skills"]],standalone:!1,decls:4,vars:1,consts:[[1,"shadow-title"],[4,"ngFor","ngForOf"]],template:function(t,r){t&1&&(te(0,"h2",0),ge(1,"Skills "),ne(),te(2,"ul"),Wt(3,LB,3,1,"li",1),ne()),t&2&&(pe(3),Nt("ngForOf",r.skills))},dependencies:[jt],encapsulation:2})};var Jh=class n{constructor(e){this.db=e;this.certificatesRef=e.collection(this.dbPath)}accesoCertificates="certificates running...";dbPath="/certificates";certificatesRef;getCertificates(){return this.certificatesRef}static \u0275fac=function(t){return new(t||n)(F($t))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};function BB(n,e){if(n&1&&(te(0,"ul")(1,"li")(2,"b"),ge(3),ne(),ve(4,"br"),te(5,"b"),ge(6),ne(),ve(7,"br"),ge(8),ve(9,"br"),ne()()),n&2){let t=e.$implicit;pe(3),on("- - ",t.certificate," - -"),pe(3),ot(t.certificateDate),pe(2),on(" ",t.description," ")}}var Xh=class n{constructor(e){this.certificatesService=e;console.log(this.certificatesService),this.certificatesService.getCertificates().snapshotChanges().pipe(W(t=>t.map(r=>L({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.certificates=t,console.log(this.certificates)})}certificates=[];static \u0275fac=function(t){return new(t||n)(ze(Jh))};static \u0275cmp=ut({type:n,selectors:[["app-certificates"]],standalone:!1,decls:3,vars:1,consts:[[1,"shadow-title"],[4,"ngFor","ngForOf"]],template:function(t,r){t&1&&(te(0,"h2",0),ge(1,"Certificates "),ne(),Wt(2,BB,10,3,"ul",1)),t&2&&(pe(2),Nt("ngForOf",r.certificates))},dependencies:[jt],encapsulation:2})};var ep=class n{constructor(e){this.db=e;this.languagesRef=e.collection(this.dbPath)}accesoLanguages="languages running...";dbPath="/languages";languagesRef;getLanguages(){return this.languagesRef}static \u0275fac=function(t){return new(t||n)(F($t))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};function HB(n,e){if(n&1&&(te(0,"li")(1,"b"),ge(2),ne()()),n&2){let t=e.$implicit;pe(2),ot(t.languageName)}}var tp=class n{constructor(e){this.languagesService=e;console.log(this.languagesService),this.languagesService.getLanguages().snapshotChanges().pipe(W(t=>t.map(r=>L({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.languages=t,console.log(this.languages)})}languages=[];static \u0275fac=function(t){return new(t||n)(ze(ep))};static \u0275cmp=ut({type:n,selectors:[["app-languages"]],standalone:!1,decls:4,vars:1,consts:[[1,"shadow-title"],[4,"ngFor","ngForOf"]],template:function(t,r){t&1&&(te(0,"h2",0),ge(1,"Languages"),ne(),te(2,"ul"),Wt(3,HB,3,1,"li",1),ne()),t&2&&(pe(3),Nt("ngForOf",r.languages))},dependencies:[jt],encapsulation:2})};var np=class n{constructor(e){this.db=e;this.interestsRef=e.collection(this.dbPath)}accesoInterests="interests running...";dbPath="/interests";interestsRef;getInterests(){return this.interestsRef}static \u0275fac=function(t){return new(t||n)(F($t))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};function GB(n,e){if(n&1&&(te(0,"ul")(1,"li")(2,"b"),ge(3),ne()()()),n&2){let t=e.$implicit;pe(3),on("",t.interest," ")}}var rp=class n{constructor(e){this.interestsService=e;console.log(this.interestsService),this.interestsService.getInterests().snapshotChanges().pipe(W(t=>t.map(r=>L({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.interests=t,console.log(this.interests)})}interests=[];static \u0275fac=function(t){return new(t||n)(ze(np))};static \u0275cmp=ut({type:n,selectors:[["app-interests"]],standalone:!1,decls:3,vars:1,consts:[[1,"shadow-title"],[4,"ngFor","ngForOf"]],template:function(t,r){t&1&&(te(0,"h2",0),ge(1,"Interests"),ne(),Wt(2,GB,4,1,"ul",1)),t&2&&(pe(2),Nt("ngForOf",r.interests))},dependencies:[jt],encapsulation:2})};var ip=class n{constructor(e){this.cd=e}actualizarVista(){this.cd.detectChanges()}static \u0275fac=function(t){return new(t||n)(ze(ki))};static \u0275cmp=ut({type:n,selectors:[["app-root"]],standalone:!1,decls:19,vars:0,consts:[["border","10","align","center"],["colspan","9"],["colspan","7"]],template:function(t,r){t&1&&(te(0,"table",0)(1,"tr")(2,"td",1),ve(3,"app-header"),ne()(),te(4,"tr")(5,"td",2),ve(6,"app-languages"),ne(),te(7,"td"),ve(8,"app-education"),ne()(),te(9,"tr")(10,"td",2),ve(11,"app-skills"),ne(),te(12,"td"),ve(13,"app-work-experience"),ne()(),te(14,"tr")(15,"td",2),ve(16,"app-interests"),ne(),te(17,"td"),ve(18,"app-certificates"),ne()()())},dependencies:[zh,Wh,Qh,Yh,Xh,tp,rp],styles:["body[_ngcontent-%COMP%]{background-color:#1a1a4b;background:linear-gradient(to right,#1a1a4b,#34346e);color:#fff;font-family:Poppins,sans-serif;text-align:center;margin:0}.cv-container[_ngcontent-%COMP%]{background:#fff;max-width:900px;margin:auto;padding:20px;border-radius:10px;box-shadow:0 0 10px #0000324d;text-align:center}.cv-container[_ngcontent-%COMP%]{box-shadow:0 0 15px #0000324d}.cv-section[_ngcontent-%COMP%]{box-shadow:0 0 10px #fff3}td[_ngcontent-%COMP%]{background-color:#111a38;color:#fff;padding:15px;border-radius:10px}.cv-section[_ngcontent-%COMP%]:hover{transform:scale(1.05);transition:.3s ease-in-out}table[_ngcontent-%COMP%]{width:50%;margin:auto;border-collapse:separate;border-spacing:10px}"]})};var dx={production:!1,firebase:{apiKey:"AIzaSyCExS9k2lHf3jpAkogR9dGzuSEptDjFdtg",authDomain:"mycv-f1c7a.firebaseapp.com",projectId:"mycv-f1c7a",storageBucket:"mycv-f1c7a.firebasestorage.app",messagingSenderId:"1086865603987",appId:"1:1086865603987:web:d381724747fc9bf950fc66"}};var op=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Dt({type:n,bootstrap:[ip]});static \u0275inj=It({imports:[ty,Xd,rS.initializeApp(dx.firebase)]})};ey().bootstrapModule(op,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
