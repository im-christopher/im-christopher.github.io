import{A as Ht,a as L,b as be,c as Np,d as x,e as SI,f as Xu,g as AI,h as RI,i as MI,j as kp,k as xI,l as ba,m as Pp,n as el,o as NI,p as kI,q as tl,r as Le,s as gi,t as Cn,u as nl,v as Sa,w as PI,x as OI,y as FI,z as Ar}from"./chunk-SC2QCK7C.js";function LI(n,e){return Object.is(n,e)}var it=null,rl=!1,Fp=1,wo=Symbol("SIGNAL");function Te(n){let e=it;return it=n,e}function Lp(){return it}var il={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Vp(n){if(rl)throw new Error("");if(it===null)return;it.consumerOnSignalRead(n);let e=it.nextProducerIndex++;if(sl(it),e<it.producerNode.length&&it.producerNode[e]!==n&&Aa(it)){let t=it.producerNode[e];ol(t,it.producerIndexOfThis[e])}it.producerNode[e]!==n&&(it.producerNode[e]=n,it.producerIndexOfThis[e]=Aa(it)?$I(n,it,e):0),it.producerLastReadVersion[e]=n.version}function VI(){Fp++}function jI(n){if(!(Aa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Fp)){if(!n.producerMustRecompute(n)&&!Up(n)){Op(n);return}n.producerRecomputeValue(n),Op(n)}}function jp(n){if(n.liveConsumerNode===void 0)return;let e=rl;rl=!0;try{for(let t of n.liveConsumerNode)t.dirty||Wx(t)}finally{rl=e}}function BI(){return it?.consumerAllowSignalWrites!==!1}function Wx(n){n.dirty=!0,jp(n),n.consumerMarkedDirty?.(n)}function Op(n){n.dirty=!1,n.lastCleanEpoch=Fp}function Bp(n){return n&&(n.nextProducerIndex=0),Te(n)}function UI(n,e){if(Te(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Aa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)ol(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Up(n){sl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(jI(t),r!==t.version))return!0}return!1}function $p(n){if(sl(n),Aa(n))for(let e=0;e<n.producerNode.length;e++)ol(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function $I(n,e,t){if(HI(n),n.liveConsumerNode.length===0&&qI(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=$I(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function ol(n,e){if(HI(n),n.liveConsumerNode.length===1&&qI(n))for(let r=0;r<n.producerNode.length;r++)ol(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];sl(i),i.producerIndexOfThis[r]=e}}function Aa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function sl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function HI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function qI(n){return n.producerNode!==void 0}function Kx(){throw new Error}var zI=Kx;function Qx(n){zI(n)}function Hp(n){zI=n}var Zx=null;function qp(n,e){BI()||Qx(n),n.equal(n.value,e)||(n.value=e,Yx(n))}var zp=be(L({},il),{equal:LI,value:void 0,kind:"signal"});function Yx(n){n.version++,VI(),jp(n),Zx?.()}var Gp;function Ra(){return Gp}function Kn(n){let e=Gp;return Gp=n,e}var al=Symbol("NotFound");function ee(n){return typeof n=="function"}function Eo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var cl=Eo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function mi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var qe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ee(r))try{r()}catch(o){e=o instanceof cl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{GI(o)}catch(s){e=e??[],s instanceof cl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new cl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)GI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&mi(t,e)}remove(e){let{_finalizers:t}=this;t&&mi(t,e),e instanceof n&&e._removeParent(this)}};qe.EMPTY=(()=>{let n=new qe;return n.closed=!0,n})();var Wp=qe.EMPTY;function ul(n){return n instanceof qe||n&&"closed"in n&&ee(n.remove)&&ee(n.add)&&ee(n.unsubscribe)}function GI(n){ee(n)?n():n.unsubscribe()}var un={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Io={setTimeout(n,e,...t){let{delegate:r}=Io;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Io;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ll(n){Io.setTimeout(()=>{let{onUnhandledError:e}=un;if(e)e(n);else throw n})}function Ma(){}var WI=Kp("C",void 0,void 0);function KI(n){return Kp("E",void 0,n)}function QI(n){return Kp("N",n,void 0)}function Kp(n,e,t){return{kind:n,value:e,error:t}}var yi=null;function Do(n){if(un.useDeprecatedSynchronousErrorHandling){let e=!yi;if(e&&(yi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=yi;if(yi=null,t)throw r}}else n()}function ZI(n){un.useDeprecatedSynchronousErrorHandling&&yi&&(yi.errorThrown=!0,yi.error=n)}var vi=class extends qe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ul(e)&&e.add(this)):this.destination=aN}static create(e,t,r){return new Qn(e,t,r)}next(e){this.isStopped?Zp(QI(e),this):this._next(e)}error(e){this.isStopped?Zp(KI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Zp(WI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},oN=Function.prototype.bind;function Qp(n,e){return oN.call(n,e)}var Yp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){dl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){dl(r)}else dl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){dl(t)}}},Qn=class extends vi{constructor(e,t,r){super();let i;if(ee(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&un.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Qp(e.next,o),error:e.error&&Qp(e.error,o),complete:e.complete&&Qp(e.complete,o)}):i=e}this.destination=new Yp(i)}};function dl(n){un.useDeprecatedSynchronousErrorHandling?ZI(n):ll(n)}function sN(n){throw n}function Zp(n,e){let{onStoppedNotification:t}=un;t&&Io.setTimeout(()=>t(n,e))}var aN={closed:!0,next:Ma,error:sN,complete:Ma};var To=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Rt(n){return n}function Jp(...n){return Xp(n)}function Xp(n){return n.length===0?Rt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var de=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=uN(t)?t:new Qn(t,r,i);return Do(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=YI(r),new r((i,o)=>{let s=new Qn({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[To](){return this}pipe(...t){return Xp(t)(this)}toPromise(t){return t=YI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function YI(n){var e;return(e=n??un.Promise)!==null&&e!==void 0?e:Promise}function cN(n){return n&&ee(n.next)&&ee(n.error)&&ee(n.complete)}function uN(n){return n&&n instanceof vi||cN(n)&&ul(n)}function eg(n){return ee(n?.lift)}function se(n){return e=>{if(eg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(n,e,t,r,i){return new tg(n,e,t,r,i)}var tg=class extends vi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Co(){return se((n,e)=>{let t=null;n._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var bo=class extends de{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,eg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new qe;let t=this.getSubject();e.add(this.source.subscribe(ue(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=qe.EMPTY)}return e}refCount(){return Co()(this)}};var JI=Eo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ve=(()=>{class n extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new fl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new JI}next(t){Do(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Do(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Do(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Wp:(this.currentObservers=null,o.push(t),new qe(()=>{this.currentObservers=null,mi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new de;return t.source=this,t}}return n.create=(e,t)=>new fl(e,t),n})(),fl=class extends Ve{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Wp}};var ht=class extends Ve{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var xa={now(){return(xa.delegate||Date).now()},delegate:void 0};var Na=class extends Ve{constructor(e=1/0,t=1/0,r=xa){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var hl=class extends qe{constructor(e,t){super()}schedule(e,t=0){return this}};var ka={setInterval(n,e,...t){let{delegate:r}=ka;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ka;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var So=class extends hl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return ka.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ka.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,mi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ao=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ao.now=xa.now;var Ro=class extends Ao{constructor(e,t=Ao.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Pa=new Ro(So);var pl=class extends So{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var gl=class extends Ro{};var ng=new gl(pl);var Et=new de(n=>n.complete());function XI(n){return n&&ee(n.schedule)}function rg(n){return n[n.length-1]}function eD(n){return ee(rg(n))?n.pop():void 0}function bn(n){return XI(rg(n))?n.pop():void 0}function tD(n,e){return typeof rg(n)=="number"?n.pop():e}var ml=n=>n&&typeof n.length=="number"&&typeof n!="function";function yl(n){return ee(n?.then)}function vl(n){return ee(n[To])}function _l(n){return Symbol.asyncIterator&&ee(n?.[Symbol.asyncIterator])}function wl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function lN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var El=lN();function Il(n){return ee(n?.[El])}function Dl(n){return AI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Xu(t.read());if(i)return yield Xu(void 0);yield yield Xu(r)}}finally{t.releaseLock()}})}function Tl(n){return ee(n?.getReader)}function je(n){if(n instanceof de)return n;if(n!=null){if(vl(n))return dN(n);if(ml(n))return fN(n);if(yl(n))return hN(n);if(_l(n))return nD(n);if(Il(n))return pN(n);if(Tl(n))return gN(n)}throw wl(n)}function dN(n){return new de(e=>{let t=n[To]();if(ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fN(n){return new de(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function hN(n){return new de(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ll)})}function pN(n){return new de(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function nD(n){return new de(e=>{mN(n,e).catch(t=>e.error(t))})}function gN(n){return nD(Dl(n))}function mN(n,e){var t,r,i,o;return SI(this,void 0,void 0,function*(){try{for(t=RI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ot(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Sn(n,e=0){return se((t,r)=>{t.subscribe(ue(r,i=>Ot(r,n,()=>r.next(i),e),()=>Ot(r,n,()=>r.complete(),e),i=>Ot(r,n,()=>r.error(i),e)))})}function Zn(n,e=0){return se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function rD(n,e){return je(n).pipe(Zn(e),Sn(e))}function iD(n,e){return je(n).pipe(Zn(e),Sn(e))}function oD(n,e){return new de(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function sD(n,e){return new de(t=>{let r;return Ot(t,e,()=>{r=n[El](),Ot(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ee(r?.return)&&r.return()})}function Cl(n,e){if(!n)throw new Error("Iterable cannot be null");return new de(t=>{Ot(t,e,()=>{let r=n[Symbol.asyncIterator]();Ot(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function aD(n,e){return Cl(Dl(n),e)}function cD(n,e){if(n!=null){if(vl(n))return rD(n,e);if(ml(n))return oD(n,e);if(yl(n))return iD(n,e);if(_l(n))return Cl(n,e);if(Il(n))return sD(n,e);if(Tl(n))return aD(n,e)}throw wl(n)}function we(n,e){return e?cD(n,e):je(n)}function Y(...n){let e=bn(n);return we(n,e)}function Mo(n,e){let t=ee(n)?n:()=>n,r=i=>i.error(t());return new de(e?i=>e.schedule(r,0,i):r)}function ig(n){return!!n&&(n instanceof de||ee(n.lift)&&ee(n.subscribe))}var Yn=Eo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function W(n,e){return se((t,r)=>{let i=0;t.subscribe(ue(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:yN}=Array;function vN(n,e){return yN(e)?n(...e):n(e)}function uD(n){return W(e=>vN(n,e))}var{isArray:_N}=Array,{getPrototypeOf:wN,prototype:EN,keys:IN}=Object;function lD(n){if(n.length===1){let e=n[0];if(_N(e))return{args:e,keys:null};if(DN(e)){let t=IN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function DN(n){return n&&typeof n=="object"&&wN(n)===EN}function dD(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Oa(...n){let e=bn(n),t=eD(n),{args:r,keys:i}=lD(n);if(r.length===0)return we([],e);let o=new de(TN(r,e,i?s=>dD(i,s):Rt));return t?o.pipe(uD(t)):o}function TN(n,e,t=Rt){return r=>{fD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)fD(e,()=>{let l=we(n[u],e),f=!1;l.subscribe(ue(r,p=>{o[u]=p,f||(f=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function fD(n,e,t){n?Ot(t,n,e):e()}function hD(n,e,t,r,i,o,s,a){let u=[],l=0,f=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=A=>l<r?b(A):u.push(A),b=A=>{o&&e.next(A),l++;let N=!1;je(t(A,f++)).subscribe(ue(e,H=>{i?.(H),o?y(H):e.next(H)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let H=u.shift();s?Ot(e,s,()=>b(H)):b(H)}m()}catch(H){e.error(H)}}))};return n.subscribe(ue(e,y,()=>{p=!0,m()})),()=>{a?.()}}function We(n,e,t=1/0){return ee(e)?We((r,i)=>W((o,s)=>e(r,o,i,s))(je(n(r,i))),t):(typeof e=="number"&&(t=e),se((r,i)=>hD(r,i,n,t)))}function Rr(n=1/0){return We(Rt,n)}function pD(){return Rr(1)}function xo(...n){return pD()(we(n,bn(n)))}function bl(n){return new de(e=>{je(n()).subscribe(e)})}function og(...n){let e=bn(n),t=tD(n,1/0),r=n;return r.length?r.length===1?je(r[0]):Rr(t)(we(r,e)):Et}function ct(n,e){return se((t,r)=>{let i=0;t.subscribe(ue(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Jn(n){return se((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ue(t,void 0,void 0,s=>{o=je(n(s,Jn(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function gD(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(ue(s,f=>{let p=l++;u=a?n(u,f,p):(a=!0,f),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Mr(n,e){return ee(e)?We(n,e,1):We(n,1)}function xr(n){return se((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Xn(n){return n<=0?()=>Et:se((e,t)=>{let r=0;e.subscribe(ue(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function sg(n,e=Rt){return n=n??CN,se((t,r)=>{let i,o=!0;t.subscribe(ue(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function CN(n,e){return n===e}function Sl(n=bN){return se((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function bN(){return new Yn}function Fa(n){return se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ln(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ct((i,o)=>n(i,o,r)):Rt,Xn(1),t?xr(e):Sl(()=>new Yn))}function No(n){return n<=0?()=>Et:se((e,t)=>{let r=[];e.subscribe(ue(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ag(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ct((i,o)=>n(i,o,r)):Rt,No(1),t?xr(e):Sl(()=>new Yn))}function La(){return se((n,e)=>{let t,r=!1;n.subscribe(ue(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function _i(n,e){return se(gD(n,e,arguments.length>=2,!0))}function mD(n={}){let{connector:e=()=>new Ve,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,f=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=u=void 0,f=p=!1},b=()=>{let A=s;y(),A?.unsubscribe()};return se((A,N)=>{l++,!p&&!f&&m();let H=u=u??e();N.add(()=>{l--,l===0&&!p&&!f&&(a=cg(b,i))}),H.subscribe(N),!s&&l>0&&(s=new Qn({next:K=>H.next(K),error:K=>{p=!0,m(),a=cg(y,t,K),H.error(K)},complete:()=>{f=!0,m(),a=cg(y,r),H.complete()}}),je(A).subscribe(s))})(o)}}function cg(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Qn({next:()=>{r.unsubscribe(),n()}});return je(e(...t)).subscribe(r)}function Al(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,mD({connector:()=>new Na(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function wi(...n){let e=bn(n);return se((t,r)=>{(e?xo(n,t,e):xo(n,t)).subscribe(r)})}function ze(n,e){return se((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ue(r,u=>{i?.unsubscribe();let l=0,f=o++;je(n(u,f)).subscribe(i=ue(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Rl(n,e){return ee(e)?ze(()=>n,e):ze(()=>n)}function ug(n){return se((e,t)=>{je(n).subscribe(ue(t,()=>t.complete(),Ma)),!t.closed&&e.subscribe(t)})}function pt(n,e,t){let r=ee(n)||e||t?{next:n,error:e,complete:t}:n;return r?se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ue(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Rt}var nT="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Q=class extends Error{code;constructor(e,t){super(rT(e,t)),this.code=e}};function SN(n){return`NG0${Math.abs(n)}`}function rT(n,e){return`${SN(n)}${e?": "+e:""}`}var iT=Symbol("InputSignalNode#UNSET"),AN=be(L({},zp),{transformFn:void 0,applyValueToInputSignal(n,e){qp(n,e)}});function oT(n,e){let t=Object.create(AN);t.value=n,t.transformFn=e?.transform;function r(){if(Vp(t),t.value===iT){let i=null;throw new Q(-950,i)}return t.value}return r[wo]=t,r}function Ya(n){return{toString:n}.toString()}var Ml="__parameters__";function RN(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function sT(n,e,t){return Ya(()=>{let r=RN(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,f){let p=u.hasOwnProperty(Ml)?u[Ml]:Object.defineProperty(u,Ml,{value:[]})[Ml];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var ir=globalThis;function xe(n){for(let e in n)if(n[e]===xe)return e;throw Error("Could not find renamed property on target object.")}function qt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(qt).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function yD(n,e){return n?e?`${n} ${e}`:n:e||""}var MN=xe({__forward_ref__:xe});function aT(n){return n.__forward_ref__=aT,n.toString=function(){return qt(this())},n}function en(n){return cT(n)?n():n}function cT(n){return typeof n=="function"&&n.hasOwnProperty(MN)&&n.__forward_ref__===aT}function B(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function It(n){return{providers:n.providers||[],imports:n.imports||[]}}function ud(n){return vD(n,lT)||vD(n,dT)}function uT(n){return ud(n)!==null}function vD(n,e){return n.hasOwnProperty(e)?n[e]:null}function xN(n){let e=n&&(n[lT]||n[dT]);return e||null}function _D(n){return n&&(n.hasOwnProperty(wD)||n.hasOwnProperty(NN))?n[wD]:null}var lT=xe({\u0275prov:xe}),wD=xe({\u0275inj:xe}),dT=xe({ngInjectableDef:xe}),NN=xe({ngInjectorDef:xe}),z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=B({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function fT(n){return n&&!!n.\u0275providers}var kN=xe({\u0275cmp:xe}),PN=xe({\u0275dir:xe}),ON=xe({\u0275pipe:xe}),FN=xe({\u0275mod:xe}),Fl=xe({\u0275fac:xe}),Ua=xe({__NG_ELEMENT_ID__:xe}),ED=xe({__NG_ENV_ID__:xe});function Ha(n){return typeof n=="string"?n:n==null?"":String(n)}function LN(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ha(n)}function hT(n,e){throw new Q(-200,n)}function Jg(n,e){throw new Q(-201,!1)}var ae=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ae||{}),yg;function pT(){return yg}function Xt(n){let e=yg;return yg=n,e}function gT(n,e,t){let r=ud(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ae.Optional)return null;if(e!==void 0)return e;Jg(n,"Injector")}var VN={},Ei=VN,vg="__NG_DI_FLAG__",Ll=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?al:Ei,r)}},Vl="ngTempTokenPath",jN="ngTokenPath",BN=/\n/gm,UN="\u0275",ID="__source";function $N(n,e=ae.Default){if(Ra()===void 0)throw new Q(-203,!1);if(Ra()===null)return gT(n,void 0,e);{let t=Ra(),r;return t instanceof Ll?r=t.injector:r=t,r.get(n,e&ae.Optional?null:void 0,e)}}function F(n,e=ae.Default){return(pT()||$N)(en(n),e)}function O(n,e=ae.Default){return F(n,ld(e))}function ld(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function _g(n){let e=[];for(let t=0;t<n.length;t++){let r=en(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Q(900,!1);let i,o=ae.Default;for(let s=0;s<r.length;s++){let a=r[s],u=HN(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(F(i,o))}else e.push(F(r))}return e}function mT(n,e){return n[vg]=e,n.prototype[vg]=e,n}function HN(n){return n[vg]}function qN(n,e,t,r){let i=n[Vl];throw e[ID]&&i.unshift(e[ID]),n.message=zN(`
`+n.message,i,t,r),n[jN]=i,n[Vl]=null,n}function zN(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==UN?n.slice(2):n;let i=qt(e);if(Array.isArray(e))i=e.map(qt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):qt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(BN,`
  `)}`}var Xg=mT(sT("Optional"),8);var GN=mT(sT("SkipSelf"),4);function jo(n,e){let t=n.hasOwnProperty(Fl);return t?n[Fl]:null}function em(n,e){n.forEach(t=>Array.isArray(t)?em(t,e):e(t))}function yT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function jl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var Bo={},An=[],qa=new z(""),vT=new z("",-1),_T=new z(""),Bl=class{get(e,t=Ei){if(t===Ei){let r=new Error(`NullInjectorError: No provider for ${qt(e)}!`);throw r.name="NullInjectorError",r}return t}};function wT(n,e){let t=n[FN]||null;if(!t&&e===!0)throw new Error(`Type ${qt(n)} does not have '\u0275mod' property.`);return t}function Ti(n){return n[kN]||null}function WN(n){return n[PN]||null}function KN(n){return n[ON]||null}function ET(n){return{\u0275providers:n}}function QN(...n){return{\u0275providers:IT(!0,n),\u0275fromNgModule:!0}}function IT(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return em(e,s=>{let a=s;wg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&DT(i,o),t}function DT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];tm(i,o=>{e(o,r)})}}function wg(n,e,t,r){if(n=en(n),!n)return!1;let i=null,o=_D(n),s=!o&&Ti(n);if(!o&&!s){let u=n.ngModule;if(o=_D(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)wg(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{em(o.imports,f=>{wg(f,e,t,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&DT(l,e)}if(!a){let l=jo(i)||(()=>new i);e({provide:i,useFactory:l,deps:An},i),e({provide:_T,useValue:i,multi:!0},i),e({provide:qa,useValue:()=>F(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;tm(u,f=>{e(f,l)})}}else return!1;return i!==n&&n.providers!==void 0}function tm(n,e){for(let t of n)fT(t)&&(t=t.\u0275providers),Array.isArray(t)?tm(t,e):e(t)}var ZN=xe({provide:String,useValue:xe});function TT(n){return n!==null&&typeof n=="object"&&ZN in n}function YN(n){return!!(n&&n.useExisting)}function JN(n){return!!(n&&n.useFactory)}function Eg(n){return typeof n=="function"}var dd=new z(""),Nl={},DD={},lg;function nm(){return lg===void 0&&(lg=new Bl),lg}var Ke=class{},za=class extends Ke{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Dg(e,s=>this.processProvider(s)),this.records.set(vT,ko(void 0,this)),i.has("environment")&&this.records.set(Ke,ko(void 0,this));let o=this.records.get(dd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(_T,An,ae.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?al:Ei,r)}destroy(){ja(this),this._destroyed=!0;let e=Te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Te(e)}}onDestroy(e){return ja(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ja(this);let t=Kn(this),r=Xt(void 0),i;try{return e()}finally{Kn(t),Xt(r)}}get(e,t=Ei,r=ae.Default){if(ja(this),e.hasOwnProperty(ED))return e[ED](this);r=ld(r);let i,o=Kn(this),s=Xt(void 0);try{if(!(r&ae.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=ik(e)&&ud(e);l&&this.injectableDefInScope(l)?u=ko(Ig(e),Nl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ae.Self?nm():this.parent;return t=r&ae.Optional&&t===Ei?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Vl]=a[Vl]||[]).unshift(qt(e)),o)throw a;return qN(a,e,"R3InjectorError",this.source)}else throw a}finally{Xt(s),Kn(o)}}resolveInjectorInitializers(){let e=Te(null),t=Kn(this),r=Xt(void 0),i;try{let o=this.get(qa,An,ae.Self);for(let s of o)s()}finally{Kn(t),Xt(r),Te(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(qt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=en(e);let t=Eg(e)?e:en(e&&e.provide),r=ek(e);if(!Eg(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ko(void 0,Nl,!0),i.factory=()=>_g(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Te(null);try{return t.value===DD?hT(qt(e)):t.value===Nl&&(t.value=DD,t.value=t.factory()),typeof t.value=="object"&&t.value&&rk(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=en(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ig(n){let e=ud(n),t=e!==null?e.factory:jo(n);if(t!==null)return t;if(n instanceof z)throw new Q(204,!1);if(n instanceof Function)return XN(n);throw new Q(204,!1)}function XN(n){if(n.length>0)throw new Q(204,!1);let t=xN(n);return t!==null?()=>t.factory(n):()=>new n}function ek(n){if(TT(n))return ko(void 0,n.useValue);{let e=tk(n);return ko(e,Nl)}}function tk(n,e,t){let r;if(Eg(n)){let i=en(n);return jo(i)||Ig(i)}else if(TT(n))r=()=>en(n.useValue);else if(JN(n))r=()=>n.useFactory(..._g(n.deps||[]));else if(YN(n))r=()=>F(en(n.useExisting));else{let i=en(n&&(n.useClass||n.provide));if(nk(n))r=()=>new i(..._g(n.deps));else return jo(i)||Ig(i)}return r}function ja(n){if(n.destroyed)throw new Q(205,!1)}function ko(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function nk(n){return!!n.deps}function rk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function ik(n){return typeof n=="function"||typeof n=="object"&&n instanceof z}function Dg(n,e){for(let t of n)Array.isArray(t)?Dg(t,e):t&&fT(t)?Dg(t.\u0275providers,e):e(t)}function zt(n,e){let t;n instanceof za?(ja(n),t=n):t=new Ll(n);let r,i=Kn(t),o=Xt(void 0);try{return e()}finally{Kn(i),Xt(o)}}function CT(){return pT()!==void 0||Ra()!=null}function rm(n){if(!CT())throw new Q(-203,!1)}function ok(n){let e=ir.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function sk(n){return typeof n=="function"}var or=0,Ee=1,re=2,Mt=3,fn=4,pn=5,Ul=6,TD=7,hn=8,Ga=9,er=10,Lt=11,Wa=12,CD=13,Ja=14,Mn=15,Uo=16,Po=17,$o=18,fd=19,bT=20,Nr=21,dg=22,$l=23,tn=24,Lo=25,tr=26,ST=1;var Ci=7,Hl=8,ql=9,nn=10;function Ii(n){return Array.isArray(n)&&typeof n[ST]=="object"}function sr(n){return Array.isArray(n)&&n[ST]===!0}function AT(n){return(n.flags&4)!==0}function Xa(n){return n.componentOffset>-1}function RT(n){return(n.flags&1)===1}function Ri(n){return!!n.template}function zl(n){return(n[re]&512)!==0}function ec(n){return(n[re]&256)===256}var Tg=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function MT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var hd=(()=>{let n=()=>xT;return n.ngInherit=!0,n})();function xT(n){return n.type.prototype.ngOnChanges&&(n.setInput=ck),ak}function ak(){let n=kT(this),e=n?.current;if(e){let t=n.previous;if(t===Bo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function ck(n,e,t,r,i){let o=this.declaredInputs[r],s=kT(n)||uk(n,{previous:Bo,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Tg(l&&l.currentValue,t,u===Bo),MT(n,e,i,t)}var NT="__ngSimpleChanges__";function kT(n){return n[NT]||null}function uk(n,e){return n[NT]=e}var bD=null;var Oe=function(n,e=null,t){bD?.(n,e,t)},lk="svg",dk="math";function nr(n){for(;Array.isArray(n);)n=n[or];return n}function fk(n,e){return nr(e[n])}function Or(n,e){return nr(e[n.index])}function PT(n,e){return n.data[e]}function kr(n,e){let t=e[n];return Ii(t)?t:t[or]}function im(n){return(n[re]&128)===128}function hk(n){return sr(n[Mt])}function Gl(n,e){return e==null?null:n[e]}function OT(n){n[Po]=0}function FT(n){n[re]&1024||(n[re]|=1024,im(n)&&tc(n))}function pd(n){return!!(n[re]&9216||n[tn]?.dirty)}function Cg(n){n[er].changeDetectionScheduler?.notify(8),n[re]&64&&(n[re]|=1024),pd(n)&&tc(n)}function tc(n){n[er].changeDetectionScheduler?.notify(0);let e=bi(n);for(;e!==null&&!(e[re]&8192||(e[re]|=8192,!im(e)));)e=bi(e)}function LT(n,e){if(ec(n))throw new Q(911,!1);n[Nr]===null&&(n[Nr]=[]),n[Nr].push(e)}function pk(n,e){if(n[Nr]===null)return;let t=n[Nr].indexOf(e);t!==-1&&n[Nr].splice(t,1)}function bi(n){let e=n[Mt];return sr(e)?e[Mt]:e}var Ie={lFrame:GT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var bg=!1;function gk(){return Ie.lFrame.elementDepthCount}function mk(){Ie.lFrame.elementDepthCount++}function yk(){Ie.lFrame.elementDepthCount--}function VT(){return Ie.bindingsEnabled}function vk(){return Ie.skipHydrationRootTNode!==null}function _k(n){return Ie.skipHydrationRootTNode===n}function wk(){Ie.skipHydrationRootTNode=null}function ot(){return Ie.lFrame.lView}function Mi(){return Ie.lFrame.tView}function ar(){let n=jT();for(;n!==null&&n.type===64;)n=n.parent;return n}function jT(){return Ie.lFrame.currentTNode}function Ek(){let n=Ie.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function nc(n,e){let t=Ie.lFrame;t.currentTNode=n,t.isParent=e}function BT(){return Ie.lFrame.isParent}function Ik(){Ie.lFrame.isParent=!1}function UT(){return bg}function SD(n){let e=bg;return bg=n,e}function Dk(){return Ie.lFrame.bindingIndex}function Tk(n){return Ie.lFrame.bindingIndex=n}function $T(){return Ie.lFrame.bindingIndex++}function Ck(n){let e=Ie.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function bk(){return Ie.lFrame.inI18n}function Sk(n,e){let t=Ie.lFrame;t.bindingIndex=t.bindingRootIndex=n,Sg(e)}function Ak(){return Ie.lFrame.currentDirectiveIndex}function Sg(n){Ie.lFrame.currentDirectiveIndex=n}function HT(n){Ie.lFrame.currentQueryIndex=n}function Rk(n){let e=n[Ee];return e.type===2?e.declTNode:e.type===1?n[pn]:null}function qT(n,e,t){if(t&ae.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ae.Host);)if(i=Rk(o),i===null||(o=o[Ja],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Ie.lFrame=zT();return r.currentTNode=e,r.lView=n,!0}function om(n){let e=zT(),t=n[Ee];Ie.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function zT(){let n=Ie.lFrame,e=n===null?null:n.child;return e===null?GT(n):e}function GT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function WT(){let n=Ie.lFrame;return Ie.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var KT=WT;function sm(){let n=WT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function gd(){return Ie.lFrame.selectedIndex}function Si(n){Ie.lFrame.selectedIndex=n}function QT(){let n=Ie.lFrame;return PT(n.tView,n.selectedIndex)}function Mk(){return Ie.lFrame.currentNamespace}var ZT=!0;function am(){return ZT}function cm(n){ZT=n}function xk(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=xT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function YT(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function kl(n,e,t){JT(n,e,3,t)}function Pl(n,e,t,r){(n[re]&3)===t&&JT(n,e,t,r)}function fg(n,e){let t=n[re];(t&3)===e&&(t&=16383,t+=1,n[re]=t)}function JT(n,e,t,r){let i=r!==void 0?n[Po]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Po]+=65536),(a<o||o==-1)&&(Nk(n,t,e,u),n[Po]=(n[Po]&4294901760)+u+2),u++}function AD(n,e){Oe(4,n,e);let t=Te(null);try{e.call(n)}finally{Te(t),Oe(5,n,e)}}function Nk(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[re]>>14<n[Po]>>16&&(n[re]&3)===e&&(n[re]+=16384,AD(a,o)):AD(a,o)}var Vo=-1,Ka=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function kk(n){return(n.flags&8)!==0}function Pk(n){return(n.flags&16)!==0}function Ok(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];Lk(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Fk(n){return n===3||n===4||n===6}function Lk(n){return n.charCodeAt(0)===64}function um(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?RD(n,t,i,null,e[++r]):RD(n,t,i,null,null))}}return n}function RD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function XT(n){return n!==Vo}function Wl(n){return n&32767}function Vk(n){return n>>16}function Kl(n,e){let t=Vk(n),r=e;for(;t>0;)r=r[Ja],t--;return r}var Ag=!0;function MD(n){let e=Ag;return Ag=n,e}var jk=256,eC=jk-1,tC=5,Bk=0,Rn={};function Uk(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ua)&&(r=t[Ua]),r==null&&(r=t[Ua]=Bk++);let i=r&eC,o=1<<i;e.data[n+(i>>tC)]|=o}function nC(n,e){let t=rC(n,e);if(t!==-1)return t;let r=e[Ee];r.firstCreatePass&&(n.injectorIndex=e.length,hg(r.data,n),hg(e,null),hg(r.blueprint,null));let i=lm(n,e),o=n.injectorIndex;if(XT(i)){let s=Wl(i),a=Kl(i,e),u=a[Ee].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function hg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function rC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function lm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=cC(i),r===null)return Vo;if(t++,i=i[Ja],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Vo}function $k(n,e,t){Uk(n,e,t)}function iC(n,e,t){if(t&ae.Optional||n!==void 0)return n;Jg(e,"NodeInjector")}function oC(n,e,t,r){if(t&ae.Optional&&r===void 0&&(r=null),(t&(ae.Self|ae.Host))===0){let i=n[Ga],o=Xt(void 0);try{return i?i.get(e,r,t&ae.Optional):gT(e,r,t&ae.Optional)}finally{Xt(o)}}return iC(r,e,t)}function sC(n,e,t,r=ae.Default,i){if(n!==null){if(e[re]&2048&&!(r&ae.Self)){let s=Wk(n,e,t,r,Rn);if(s!==Rn)return s}let o=aC(n,e,t,r,Rn);if(o!==Rn)return o}return oC(e,t,r,i)}function aC(n,e,t,r,i){let o=zk(t);if(typeof o=="function"){if(!qT(e,n,r))return r&ae.Host?iC(i,t,r):oC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ae.Optional))Jg(t);else return s}finally{KT()}}else if(typeof o=="number"){let s=null,a=rC(n,e),u=Vo,l=r&ae.Host?e[Mn][pn]:null;for((a===-1||r&ae.SkipSelf)&&(u=a===-1?lm(n,e):e[a+8],u===Vo||!ND(r,!1)?a=-1:(s=e[Ee],a=Wl(u),e=Kl(u,e)));a!==-1;){let f=e[Ee];if(xD(o,a,f.data)){let p=Hk(a,e,t,s,r,l);if(p!==Rn)return p}u=e[a+8],u!==Vo&&ND(r,e[Ee].data[a+8]===l)&&xD(o,a,e)?(s=f,a=Wl(u),e=Kl(u,e)):a=-1}}return i}function Hk(n,e,t,r,i,o){let s=e[Ee],a=s.data[n+8],u=r==null?Xa(a)&&Ag:r!=s&&(a.type&3)!==0,l=i&ae.Host&&o===a,f=qk(a,s,t,u,l);return f!==null?Rg(e,s,f,a):Rn}function qk(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,f=o>>20,p=r?a:a+f,m=i?a+f:l;for(let y=p;y<m;y++){let b=s[y];if(y<u&&t===b||y>=u&&b.type===t)return y}if(i){let y=s[u];if(y&&Ri(y)&&y.type===t)return u}return null}function Rg(n,e,t,r){let i=n[t],o=e.data;if(i instanceof Ka){let s=i;s.resolving&&hT(LN(o[t]));let a=MD(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Xt(s.injectImpl):null,f=qT(n,r,ae.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&xk(t,o[t],e)}finally{l!==null&&Xt(l),MD(a),s.resolving=!1,KT()}}return i}function zk(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ua)?n[Ua]:void 0;return typeof e=="number"?e>=0?e&eC:Gk:e}function xD(n,e,t){let r=1<<n;return!!(t[e+(n>>tC)]&r)}function ND(n,e){return!(n&ae.Self)&&!(n&ae.Host&&e)}var Di=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return sC(this._tNode,this._lView,e,ld(r),t)}};function Gk(){return new Di(ar(),ot())}function dm(n){return Ya(()=>{let e=n.prototype.constructor,t=e[Fl]||Mg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Fl]||Mg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Mg(n){return cT(n)?()=>{let e=Mg(en(n));return e&&e()}:jo(n)}function Wk(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[re]&2048&&!zl(s);){let a=aC(o,s,t,r|ae.Self,Rn);if(a!==Rn)return a;let u=o.parent;if(!u){let l=s[bT];if(l){let f=l.get(t,Rn,r);if(f!==Rn)return f}u=cC(s),s=s[Ja]}o=u}return i}function cC(n){let e=n[Ee],t=e.type;return t===2?e.declTNode:t===1?n[pn]:null}function kD(n,e=null,t=null,r){let i=uC(n,e,t,r);return i.resolveInjectorInitializers(),i}function uC(n,e=null,t=null,r,i=new Set){let o=[t||An,QN(n)];return r=r||(typeof n=="object"?void 0:qt(n)),new za(o,e||nm(),r||null,i)}var xt=class n{static THROW_IF_NOT_FOUND=Ei;static NULL=new Bl;static create(e,t){if(Array.isArray(e))return kD({name:""},t,e,"");{let r=e.name??"";return kD({name:r},e.parent,e.providers,r)}}static \u0275prov=B({token:n,providedIn:"any",factory:()=>F(vT)});static __NG_ELEMENT_ID__=-1};var Kk=new z("");Kk.__NG_ELEMENT_ID__=n=>{let e=ar();if(e===null)throw new Q(204,!1);if(e.type&2)return e.value;if(n&ae.Optional)return null;throw new Q(204,!1)};var lC=!1,Go=(()=>{class n{static __NG_ELEMENT_ID__=Qk;static __NG_ENV_ID__=t=>t}return n})(),xg=class extends Go{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return LT(this._lView,e),()=>pk(this._lView,e)}};function Qk(){return new xg(ot())}var Ai=class{},dC=new z("",{providedIn:"root",factory:()=>!1});var fC=new z(""),hC=new z(""),xi=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new ht(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})(),fm=(()=>{class n{internalPendingTasks=O(xi);scheduler=O(Ai);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return x(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ng=class extends Ve{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,CT()&&(this.destroyRef=O(Go,{optional:!0})??void 0,this.pendingTasks=O(xi,{optional:!0})??void 0)}emit(e){let t=Te(null);try{super.next(e)}finally{Te(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof qe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ft=Ng;function Ql(...n){}function pC(n){let e,t;function r(){n=Ql;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function PD(n){return queueMicrotask(()=>n()),()=>{n=Ql}}var hm="isAngularZone",Zl=hm+"_ID",Zk=0,he=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ft(!1);onMicrotaskEmpty=new Ft(!1);onStable=new Ft(!1);onError=new Ft(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=lC}=e;if(typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Xk(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(hm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Yk,Ql,Ql);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Yk={};function pm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Jk(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){pC(()=>{n.callbackScheduled=!1,kg(n),n.isCheckStableRunning=!0,pm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),kg(n)}function Xk(n){let e=()=>{Jk(n)},t=Zk++;n._inner=n._inner.fork({name:"angular",properties:{[hm]:!0,[Zl]:t,[Zl+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(eP(u))return r.invokeTask(o,s,a,u);try{return OD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),FD(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return OD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!tP(u)&&e(),FD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,kg(n),pm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function kg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function OD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function FD(n){n._nesting--,pm(n)}var Yl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ft;onMicrotaskEmpty=new Ft;onStable=new Ft;onError=new Ft;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function eP(n){return gC(n,"__ignore_ng_zone__")}function tP(n){return gC(n,"__scheduler_tick__")}function gC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function nP(n="zone.js",e){return n==="noop"?new Yl:n==="zone.js"?new he(e):n}var rr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},rP=new z("",{providedIn:"root",factory:()=>{let n=O(he),e=O(rr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function LD(n,e){return oT(n,e)}function iP(n){return oT(iT,n)}var mC=(LD.required=iP,LD);function oP(){return md(ar(),ot())}function md(n,e){return new yd(Or(n,e))}var yd=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=oP}return n})();function yC(n){return(n.flags&128)===128}var vC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(vC||{}),_C=new Map,sP=0;function aP(){return sP++}function cP(n){_C.set(n[fd],n)}function Pg(n){_C.delete(n[fd])}var VD="__ngContext__";function rc(n,e){Ii(e)?(n[VD]=e[fd],cP(e)):n[VD]=e}function wC(n){return IC(n[Wa])}function EC(n){return IC(n[fn])}function IC(n){for(;n!==null&&!sr(n);)n=n[fn];return n}var Og;function DC(n){Og=n}function uP(){if(Og!==void 0)return Og;if(typeof document<"u")return document;throw new Q(210,!1)}var gm=new z("",{providedIn:"root",factory:()=>lP}),lP="ng",mm=new z(""),rn=new z("",{providedIn:"platform",factory:()=>"unknown"});var ym=new z("",{providedIn:"root",factory:()=>uP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var dP="h",fP="b";var TC=!1,hP=new z("",{providedIn:"root",factory:()=>TC});var vm=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(vm||{}),Wo=new z(""),jD=new Set;function ic(n){jD.has(n)||(jD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var CC=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=pP}return n})();function pP(){return new CC(ot(),ar())}var Oo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Oo||{}),bC=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})(),gP=[Oo.EarlyRead,Oo.Write,Oo.MixedReadWrite,Oo.Read],mP=(()=>{class n{ngZone=O(he);scheduler=O(Ai);errorHandler=O(rr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){O(Wo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Oe(16),this.executing=!0;for(let r of gP)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Oe(17)}register(t){let{view:r}=t;r!==void 0?((r[Lo]??=[]).push(t),tc(r),r[re]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(vm.AFTER_NEXT_RENDER,t):t()}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})(),Fg=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Lo];e&&(this.view[Lo]=e.filter(t=>t!==this))}};function _m(n,e){!e?.injector&&rm(_m);let t=e?.injector??O(xt);return ic("NgAfterNextRender"),vP(n,t,e,!0)}function yP(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function vP(n,e,t,r){let i=e.get(bC);i.impl??=e.get(mP);let o=e.get(Wo,null,{optional:!0}),s=t?.phase??Oo.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(Go):null,u=e.get(CC,null,{optional:!0}),l=new Fg(i.impl,yP(n,s),u?.view,r,a,o?.snapshot(null));return i.impl.register(l),l}var _P=()=>null;function SC(n,e,t=!1){return _P(n,e,t)}function AC(n,e){let t=n.contentQueries;if(t!==null){let r=Te(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];HT(o),a.contentQueries(2,e[s],s)}}}finally{Te(r)}}}function Lg(n,e,t){HT(0);let r=Te(null);try{e(n,t)}finally{Te(r)}}function RC(n,e,t){if(AT(e)){let r=Te(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{Te(r)}}}var xn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(xn||{});var Jl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nT})`}};function MC(n){return n instanceof Jl?n.changingThisBreaksApplicationSecurity:n}function wP(n,e){let t=EP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${nT})`)}return t===e}function EP(n){return n instanceof Jl&&n.getTypeName()||null}var IP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function DP(n){return n=String(n),n.match(IP)?n:"unsafe:"+n}var xC=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(xC||{});function NC(n){let e=TP();return e?e.sanitize(xC.URL,n)||"":wP(n,"URL")?MC(n):DP(Ha(n))}function TP(){let n=ot();return n&&n[er].sanitizer}function kC(n){return n instanceof Function?n():n}function CP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var PC="ng-template";function bP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&CP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(wm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function wm(n){return n.type===4&&n.value!==PC}function SP(n,e,t){let r=n.type===4&&!t?PC:n.value;return e===r}function AP(n,e,t){let r=4,i=n.attrs,o=i!==null?xP(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!dn(r)&&!dn(u))return!1;if(s&&dn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!SP(n,u,t)||u===""&&e.length===1){if(dn(r))return!1;s=!0}}else if(r&8){if(i===null||!bP(n,i,u,t)){if(dn(r))return!1;s=!0}}else{let l=e[++a],f=RP(u,i,wm(n),t);if(f===-1){if(dn(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(dn(r))return!1;s=!0}}}}return dn(r)||s}function dn(n){return(n&1)===0}function RP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return NP(e,n)}function MP(n,e,t=!1){for(let r=0;r<e.length;r++)if(AP(n,e[r],t))return!0;return!1}function xP(n){for(let e=0;e<n.length;e++){let t=n[e];if(Fk(t))return e}return n.length}function NP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function BD(n,e){return n?":not("+e.trim()+")":e}function kP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!dn(s)&&(e+=BD(o,i),i=""),r=s,o=o||!dn(r);t++}return i!==""&&(e+=BD(o,i)),e}function PP(n){return n.map(kP).join(",")}function OP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!dn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Ni={};function FP(n,e){return n.createText(e)}function LP(n,e,t){n.setValue(e,t)}function OC(n,e,t){return n.createElement(e,t)}function Xl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function FC(n,e,t){n.appendChild(e,t)}function UD(n,e,t,r,i){r!==null?Xl(n,e,t,r,i):FC(n,e,t)}function VP(n,e,t){n.removeChild(null,e,t)}function jP(n,e,t){n.setAttribute(e,"style",t)}function BP(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function LC(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Ok(n,e,r),i!==null&&BP(n,e,i),o!==null&&jP(n,e,o)}function Em(n,e,t,r,i,o,s,a,u,l,f){let p=tr+r,m=p+i,y=UP(p,m),b=typeof l=="function"?l():l;return y[Ee]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:f}}function UP(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ni);return t}function $P(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Em(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Im(n,e,t,r,i,o,s,a,u,l,f){let p=e.blueprint.slice();return p[or]=i,p[re]=r|4|128|8|64|1024,(l!==null||n&&n[re]&2048)&&(p[re]|=2048),OT(p),p[Mt]=p[Ja]=n,p[hn]=t,p[er]=s||n&&n[er],p[Lt]=a||n&&n[Lt],p[Ga]=u||n&&n[Ga]||null,p[pn]=o,p[fd]=aP(),p[Ul]=f,p[bT]=l,p[Mn]=e.type==2?n[Mn]:p,p}function HP(n,e,t){let r=Or(e,n),i=$P(t),o=n[er].rendererFactory,s=Dm(n,Im(n,i,null,VC(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function VC(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function jC(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Dm(n,e){return n[Wa]?n[CD][fn]=e:n[Wa]=e,n[CD]=e,e}function pe(n=1){BC(Mi(),ot(),gd()+n,!1)}function BC(n,e,t,r){if(!r)if((e[re]&3)===3){let o=n.preOrderCheckHooks;o!==null&&kl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Pl(e,o,0,t)}Si(t)}var vd=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(vd||{});function Vg(n,e,t,r){let i=Te(null);try{let[o,s,a]=n.inputs[t],u=null;(s&vd.SignalBased)!==0&&(u=e[o][wo]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):MT(e,u,o,r)}finally{Te(i)}}function UC(n,e,t,r,i){let o=gd(),s=r&2;try{Si(-1),s&&e.length>tr&&BC(n,e,tr,!1),Oe(s?2:0,i),t(r,i)}finally{Si(o),Oe(s?3:1,i)}}function Tm(n,e,t){QP(n,e,t),(t.flags&64)===64&&ZP(n,e,t)}function $C(n,e,t=Or){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function qP(n,e,t,r){let o=r.get(hP,TC)||t===xn.ShadowDom,s=n.selectRootElement(e,o);return zP(s),s}function zP(n){GP(n)}var GP=()=>null;function WP(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function HC(n,e,t,r,i,o,s,a){if(!a&&Cm(e,n,t,r,i)){Xa(e)&&KP(t,e.index);return}if(e.type&3){let u=Or(e,t);r=WP(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function KP(n,e){let t=kr(e,n);t[re]&16||(t[re]|=64)}function QP(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Xa(t)&&HP(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||nC(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=Rg(e,n,s,t);if(rc(u,e),o!==null&&JP(e,s-r,u,a,t,o),Ri(a)){let l=kr(t.index,e);l[hn]=Rg(e,n,s,t)}}}function ZP(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=Ak();try{Si(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Sg(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&YP(u,l)}}finally{Si(-1),Sg(s)}}function YP(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function qC(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];MP(e,o.selectors,!1)&&(r??=[],Ri(o)?r.unshift(o):r.push(o))}return r}function JP(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Vg(r,t,u,l)}}function XP(n,e){let t=n[Ga],r=t?t.get(rr,null):null;r&&r.handleError(e)}function Cm(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],f=s[u+1],p=e.data[l];Vg(p,t[l],f,i),a=!0}if(o)for(let u of o){let l=t[u],f=e.data[u];Vg(f,l,r,i),a=!0}return a}function e1(n,e){let t=kr(e,n),r=t[Ee];t1(r,t);let i=t[or];i!==null&&t[Ul]===null&&(t[Ul]=SC(i,t[Ga])),Oe(18),bm(r,t,t[hn]),Oe(19,t[hn])}function t1(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function bm(n,e,t){om(e);try{let r=n.viewQuery;r!==null&&Lg(1,r,t);let i=n.template;i!==null&&UC(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[$o]?.finishViewCreation(n),n.staticContentQueries&&AC(n,e),n.staticViewQueries&&Lg(2,n.viewQuery,t);let o=n.components;o!==null&&n1(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[re]&=-5,sm()}}function n1(n,e){for(let t=0;t<e.length;t++)e1(n,e[t])}function r1(n,e,t,r){let i=Te(null);try{let o=e.tView,a=n[re]&4096?4096:16,u=Im(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Uo]=l;let f=n[$o];return f!==null&&(u[$o]=f.createEmbeddedView(o)),bm(o,u,t),u}finally{Te(i)}}function $D(n,e){return!e||e.firstChild===null||yC(n)}var i1;function Sm(n,e){return i1(n,e)}var Ko=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ko||{});function zC(n){return(n.flags&32)===32}function Fo(n,e,t,r,i){if(r!=null){let o,s=!1;sr(r)?o=r:Ii(r)&&(s=!0,r=r[or]);let a=nr(r);n===0&&t!==null?i==null?FC(e,t,a):Xl(e,t,a,i||null,!0):n===1&&t!==null?Xl(e,t,a,i||null,!0):n===2?VP(e,a,s):n===3&&e.destroyNode(a),o!=null&&m1(e,n,o,t,i)}}function o1(n,e){GC(n,e),e[or]=null,e[pn]=null}function s1(n,e,t,r,i,o){r[or]=i,r[pn]=e,_d(n,r,t,1,i,o)}function GC(n,e){e[er].changeDetectionScheduler?.notify(9),_d(n,e,e[Lt],2,null,null)}function a1(n){let e=n[Wa];if(!e)return pg(n[Ee],n);for(;e;){let t=null;if(Ii(e))t=e[Wa];else{let r=e[nn];r&&(t=r)}if(!t){for(;e&&!e[fn]&&e!==n;)Ii(e)&&pg(e[Ee],e),e=e[Mt];e===null&&(e=n),Ii(e)&&pg(e[Ee],e),t=e&&e[fn]}e=t}}function Am(n,e){let t=n[ql],r=t.indexOf(e);t.splice(r,1)}function WC(n,e){if(ec(e))return;let t=e[Lt];t.destroyNode&&_d(n,e,t,3,null,null),a1(e)}function pg(n,e){if(ec(e))return;let t=Te(null);try{e[re]&=-129,e[re]|=256,e[tn]&&$p(e[tn]),u1(n,e),c1(n,e),e[Ee].type===1&&e[Lt].destroy();let r=e[Uo];if(r!==null&&sr(e[Mt])){r!==e[Mt]&&Am(r,e);let i=e[$o];i!==null&&i.detachView(n)}Pg(e)}finally{Te(t)}}function c1(n,e){let t=n.cleanup,r=e[TD];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[TD]=null);let i=e[Nr];if(i!==null){e[Nr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[$l];if(o!==null){e[$l]=null;for(let s of o)s.destroy()}}function u1(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ka)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Oe(4,a,u);try{u.call(a)}finally{Oe(5,a,u)}}else{Oe(4,i,o);try{o.call(i)}finally{Oe(5,i,o)}}}}}function l1(n,e,t){return d1(n,e.parent,t)}function d1(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[or];if(Xa(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===xn.None||i===xn.Emulated)return null}return Or(r,t)}function f1(n,e,t){return p1(n,e,t)}function h1(n,e,t){return n.type&40?Or(n,t):null}var p1=h1,HD;function Rm(n,e,t,r){let i=l1(n,r,e),o=e[Lt],s=r.parent||e[pn],a=f1(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)UD(o,i,t[u],a,!1);else UD(o,i,t,a,!1);HD!==void 0&&HD(o,r,e,t,i)}function Ba(n,e){if(e!==null){let t=e.type;if(t&3)return Or(e,n);if(t&4)return jg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ba(n,r);{let i=n[e.index];return sr(i)?jg(-1,i):nr(i)}}else{if(t&128)return Ba(n,e.next);if(t&32)return Sm(e,n)()||nr(n[e.index]);{let r=KC(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=bi(n[Mn]);return Ba(i,r)}else return Ba(n,e.next)}}}return null}function KC(n,e){if(e!==null){let r=n[Mn][pn],i=e.projection;return r.projection[i]}return null}function jg(n,e){let t=nn+n+1;if(t<e.length){let r=e[t],i=r[Ee].firstChild;if(i!==null)return Ba(r,i)}return e[Ci]}function Mm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&rc(nr(a),r),t.flags|=2),!zC(t))if(u&8)Mm(n,e,t.child,r,i,o,!1),Fo(e,n,i,a,o);else if(u&32){let l=Sm(t,r),f;for(;f=l();)Fo(e,n,i,f,o);Fo(e,n,i,a,o)}else u&16?g1(n,e,r,t,i,o):Fo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function _d(n,e,t,r,i,o){Mm(t,r,n.firstChild,e,i,o,!1)}function g1(n,e,t,r,i,o){let s=t[Mn],u=s[pn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];Fo(e,n,i,f,o)}else{let l=u,f=s[Mt];yC(r)&&(l.flags|=128),Mm(n,e,l,f,i,o,!0)}}function m1(n,e,t,r,i){let o=t[Ci],s=nr(t);o!==s&&Fo(e,n,r,o,i);for(let a=nn;a<t.length;a++){let u=t[a];_d(u[Ee],u,n,e,r,o)}}function ed(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(nr(o)),sr(o)&&y1(o,r);let s=t.type;if(s&8)ed(n,e,t.child,r);else if(s&32){let a=Sm(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=KC(e,t);if(Array.isArray(a))r.push(...a);else{let u=bi(e[Mn]);ed(u[Ee],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function y1(n,e){for(let t=nn;t<n.length;t++){let r=n[t],i=r[Ee].firstChild;i!==null&&ed(r[Ee],r,i,e)}n[Ci]!==n[or]&&e.push(n[Ci])}function QC(n){if(n[Lo]!==null){for(let e of n[Lo])e.impl.addSequence(e);n[Lo].length=0}}var ZC=[];function v1(n){return n[tn]??_1(n)}function _1(n){let e=ZC.pop()??Object.create(E1);return e.lView=n,e}function w1(n){n.lView[tn]!==n&&(n.lView=null,ZC.push(n))}var E1=be(L({},il),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{tc(n.lView)},consumerOnSignalRead(){this.lView[tn]=this}});function I1(n){let e=n[tn]??Object.create(D1);return e.lView=n,e}var D1=be(L({},il),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=bi(n.lView);for(;e&&!YC(e[Ee]);)e=bi(e);e&&FT(e)},consumerOnSignalRead(){this.lView[tn]=this}});function YC(n){return n.type!==2}function JC(n){if(n[$l]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[$l])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[re]&8192)}}var T1=100;function XC(n,e=!0,t=0){let i=n[er].rendererFactory,o=!1;o||i.begin?.();try{C1(n,t)}catch(s){throw e&&XP(n,s),s}finally{o||i.end?.()}}function C1(n,e){let t=UT();try{SD(!0),Bg(n,e);let r=0;for(;pd(n);){if(r===T1)throw new Q(103,!1);r++,Bg(n,1)}}finally{SD(t)}}function b1(n,e,t,r){if(ec(e))return;let i=e[re],o=!1,s=!1;om(e);let a=!0,u=null,l=null;o||(YC(n)?(l=v1(e),u=Bp(l)):Lp()===null?(a=!1,l=I1(e),u=Bp(l)):e[tn]&&($p(e[tn]),e[tn]=null));try{OT(e),Tk(n.bindingStartIndex),t!==null&&UC(n,e,t,2,r);let f=(i&3)===3;if(!o)if(f){let y=n.preOrderCheckHooks;y!==null&&kl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Pl(e,y,0,null),fg(e,0)}if(s||S1(e),JC(e),eb(e,0),n.contentQueries!==null&&AC(n,e),!o)if(f){let y=n.contentCheckHooks;y!==null&&kl(e,y)}else{let y=n.contentHooks;y!==null&&Pl(e,y,1),fg(e,1)}R1(n,e);let p=n.components;p!==null&&nb(e,p,0);let m=n.viewQuery;if(m!==null&&Lg(2,m,r),!o)if(f){let y=n.viewCheckHooks;y!==null&&kl(e,y)}else{let y=n.viewHooks;y!==null&&Pl(e,y,2),fg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[dg]){for(let y of e[dg])y();e[dg]=null}o||(QC(e),e[re]&=-73)}catch(f){throw o||tc(e),f}finally{l!==null&&(UI(l,u),a&&w1(l)),sm()}}function eb(n,e){for(let t=wC(n);t!==null;t=EC(t))for(let r=nn;r<t.length;r++){let i=t[r];tb(i,e)}}function S1(n){for(let e=wC(n);e!==null;e=EC(e)){if(!(e[re]&2))continue;let t=e[ql];for(let r=0;r<t.length;r++){let i=t[r];FT(i)}}}function A1(n,e,t){Oe(18);let r=kr(e,n);tb(r,t),Oe(19,r[hn])}function tb(n,e){im(n)&&Bg(n,e)}function Bg(n,e){let r=n[Ee],i=n[re],o=n[tn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Up(o)),s||=!1,o&&(o.dirty=!1),n[re]&=-9217,s)b1(r,n,r.template,n[hn]);else if(i&8192){JC(n),eb(n,1);let a=r.components;a!==null&&nb(n,a,1),QC(n)}}function nb(n,e,t){for(let r=0;r<e.length;r++)A1(n,e[r],t)}function R1(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Si(~i);else{let o=i,s=t[++r],a=t[++r];Sk(s,o);let u=e[o];Oe(24,u),a(2,u),Oe(25,u)}}}finally{Si(-1)}}function rb(n,e){let t=UT()?64:1088;for(n[er].changeDetectionScheduler?.notify(e);n;){n[re]|=t;let r=bi(n);if(zl(n)&&!r)return n;n=r}return null}function ib(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function M1(n,e,t,r=!0){let i=e[Ee];if(x1(i,e,n,t),r){let s=jg(t,n),a=e[Lt],u=a.parentNode(n[Ci]);u!==null&&s1(i,n[pn],a,e,u,s)}let o=e[Ul];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Ug(n,e){if(n.length<=nn)return;let t=nn+e,r=n[t];if(r){let i=r[Uo];i!==null&&i!==n&&Am(i,r),e>0&&(n[t-1][fn]=r[fn]);let o=jl(n,nn+e);o1(r[Ee],r);let s=o[$o];s!==null&&s.detachView(o[Ee]),r[Mt]=null,r[fn]=null,r[re]&=-129}return r}function x1(n,e,t,r){let i=nn+r,o=t.length;r>0&&(t[i-1][fn]=e),r<o-nn?(e[fn]=t[i],yT(t,nn+r,e)):(t.push(e),e[fn]=null),e[Mt]=t;let s=e[Uo];s!==null&&t!==s&&ob(s,e);let a=e[$o];a!==null&&a.insertView(n),Cg(e),e[re]|=128}function ob(n,e){let t=n[ql],r=e[Mt];if(Ii(r))n[re]|=2;else{let i=r[Mt][Mn];e[Mn]!==i&&(n[re]|=2)}t===null?n[ql]=[e]:t.push(e)}var Qa=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Ee];return ed(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[hn]}set context(e){this._lView[hn]=e}get destroyed(){return ec(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Mt];if(sr(e)){let t=e[Hl],r=t?t.indexOf(this):-1;r>-1&&(Ug(e,r),jl(t,r))}this._attachedToViewContainer=!1}WC(this._lView[Ee],this._lView)}onDestroy(e){LT(this._lView,e)}markForCheck(){rb(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[re]&=-129}reattach(){Cg(this._lView),this._lView[re]|=128}detectChanges(){this._lView[re]|=1024,XC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=zl(this._lView),t=this._lView[Uo];t!==null&&!e&&Am(t,this._lView),GC(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e;let t=zl(this._lView),r=this._lView[Uo];r!==null&&!t&&ob(r,this._lView),Cg(this._lView)}};var xm=(()=>{class n{static __NG_ELEMENT_ID__=P1}return n})(),N1=xm,k1=class extends N1{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=r1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Qa(i)}};function P1(){return O1(ar(),ot())}function O1(n,e){return n.type&4?new k1(e,n,md(n,e)):null}function Nm(n,e,t,r,i){let o=n.data[e];if(o===null)o=F1(n,e,t,r,i),bk()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Ek();o.injectorIndex=s===null?-1:s.injectorIndex}return nc(o,!0),o}function F1(n,e,t,r,i){let o=jT(),s=BT(),a=s?o:o&&o.parent,u=n.data[e]=V1(n,a,t,e,r,i);return L1(n,u,o,s),u}function L1(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function V1(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return vk()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var q9=new RegExp(`^(\\d+)*(${fP}|${dP})*(.*)`);var j1=()=>null;function qD(n,e){return j1(n,e)}var B1=class{},sb=class{},$g=class{resolveComponentFactory(e){throw Error(`No component factory found for ${qt(e)}.`)}},wd=class{static NULL=new $g},Ho=class{};var U1=(()=>{class n{static \u0275prov=B({token:n,providedIn:"root",factory:()=>null})}return n})();var gg={},Hg=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=ld(r);let i=this.injector.get(e,gg,r);return i!==gg||t===gg?i:this.parentInjector.get(e,t,r)}};function zD(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=yD(i,a);else if(o==2){let u=a,l=e[++s];r=yD(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Xe(n,e=ae.Default){let t=ot();if(t===null)return F(n,e);let r=ar();return sC(r,t,en(n),e)}function ab(){let n="invalid";throw new Error(n)}function cb(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,u=null,l=null,f=H1(s);f===null?a=s:[a,u,l]=f,G1(n,e,t,a,o,u,l)}o!==null&&r!==null&&$1(t,r,o)}function $1(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Q(-301,!1);r.push(e[i],o)}}function H1(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&Ri(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,q1(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function q1(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function z1(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function G1(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&Ri(y)&&(u=!0,z1(n,t,m)),$k(nC(t,e),n,y.type)}J1(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,f=!1,p=jC(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=um(t.mergedAttrs,y.hostAttrs),K1(n,t,e,p,y),Y1(p,y,i),s!==null&&s.has(y)){let[A,N]=s.get(y);t.directiveToIndex.set(y.type,[p,A+t.directiveStart,N+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let b=y.type.prototype;!l&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!f&&(b.ngOnChanges||b.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),p++}W1(n,t,o)}function W1(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))GD(0,e,i,r),GD(1,e,i,r),KD(e,r,!1);else{let o=t.get(i);WD(0,e,o,r),WD(1,e,o,r),KD(e,r,!0)}}}function GD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),ub(e,o)}}function WD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),ub(e,s)}}function ub(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function KD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||wm(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let f of l)if(f===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let f=0;f<l.length;f+=2)if(l[f]===e){s??=[],s.push(l[f+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function K1(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=jo(i.type,!0)),s=new Ka(o,Ri(i),Xe);n.blueprint[r]=s,t[r]=s,Q1(n,e,r,jC(n,t,i.hostVars,Ni),i)}function Q1(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Z1(s)!=a&&s.push(a),s.push(t,r,o)}}function Z1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Y1(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ri(e)&&(t[""]=n)}}function J1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function lb(n,e,t,r,i,o,s,a){let u=e.consts,l=Gl(u,s),f=Nm(e,n,2,r,l);return o&&cb(e,t,f,Gl(u,a),i),f.mergedAttrs=um(f.mergedAttrs,f.attrs),f.attrs!==null&&zD(f,f.attrs,!1),f.mergedAttrs!==null&&zD(f,f.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,f),f}function db(n,e){YT(n,e),AT(e)&&n.queries.elementEnd(e)}var td=class extends wd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ti(e);return new qo(t,this.ngModule)}};function X1(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&vd.SignalBased)!==0};return i&&(o.transform=i),o})}function eO(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function tO(n,e,t){let r=e instanceof Ke?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Hg(t,r):t}function nO(n){let e=n.get(Ho,null);if(e===null)throw new Q(407,!1);let t=n.get(U1,null),r=n.get(Ai,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function rO(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return OC(e,t,t==="svg"?lk:t==="math"?dk:null)}var qo=class extends sb{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=X1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=eO(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=PP(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){Oe(22);let o=Te(null);try{let s=this.componentDef,a=r?["ng-version","19.2.7"]:OP(this.componentDef.selectors[0]),u=Em(0,null,null,1,0,null,null,null,null,[a],null),l=tO(s,i||this.ngModule,e),f=nO(l),p=f.rendererFactory.createRenderer(null,s),m=r?qP(p,r,s.encapsulation,l):rO(s,p),y=Im(null,u,null,512|VC(s),null,null,f,p,l,null,SC(m,l,!0));y[tr]=m,om(y);let b=null;try{let A=lb(tr,u,y,"#host",()=>[this.componentDef],!0,0);m&&(LC(p,m,A),rc(m,y)),Tm(u,y,A),RC(u,A,y),db(u,A),t!==void 0&&iO(A,this.ngContentSelectors,t),b=kr(A.index,y),y[hn]=b[hn],bm(u,y,null)}catch(A){throw b!==null&&Pg(b),Pg(y),A}finally{Oe(23),sm()}return new qg(this.componentType,y)}finally{Te(o)}}},qg=class extends B1{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=PT(t[Ee],tr),this.location=md(this._tNode,t),this.instance=kr(this._tNode.index,t)[hn],this.hostView=this.changeDetectorRef=new Qa(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Cm(r,i[Ee],i,e,t);this.previousInputValues.set(e,t);let s=kr(r.index,i);rb(s,1)}get injector(){return new Di(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function iO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var oc=(()=>{class n{static __NG_ELEMENT_ID__=oO}return n})();function oO(){let n=ar();return aO(n,ot())}var sO=oc,fb=class extends sO{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return md(this._hostTNode,this._hostLView)}get injector(){return new Di(this._hostTNode,this._hostLView)}get parentInjector(){let e=lm(this._hostTNode,this._hostLView);if(XT(e)){let t=Kl(e,this._hostLView),r=Wl(e),i=t[Ee].data[r+8];return new Di(i,t)}else return new Di(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=QD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-nn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=qD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,$D(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!sk(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let u=s?e:new qo(Ti(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let A=(s?l:this.parentInjector).get(Ke,null);A&&(o=A)}let f=Ti(u.componentType??{}),p=qD(this._lContainer,f?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,a,$D(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(hk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Mt],l=new fb(u,u[pn],u[Mt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return M1(s,i,o,r),e.attachToViewContainerRef(),yT(mg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=QD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Ug(this._lContainer,t);r&&(jl(mg(this._lContainer),t),WC(r[Ee],r))}detach(e){let t=this._adjustIndex(e,-1),r=Ug(this._lContainer,t);return r&&jl(mg(this._lContainer),t)!=null?new Qa(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function QD(n){return n[Hl]}function mg(n){return n[Hl]||(n[Hl]=[])}function aO(n,e){let t,r=e[n.index];return sr(r)?t=r:(t=ib(r,e,null,n),e[n.index]=t,Dm(e,t)),uO(t,e,n,r),new fb(t,n,e)}function cO(n,e){let t=n[Lt],r=t.createComment(""),i=Or(e,n),o=t.parentNode(i);return Xl(t,o,r,t.nextSibling(i),!1),r}var uO=fO,lO=()=>!1;function dO(n,e,t){return lO(n,e,t)}function fO(n,e,t,r){if(n[Ci])return;let i;t.type&8?i=nr(r):i=cO(e,t),n[Ci]=i}function hO(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(yO))}return o}return nd.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,f=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(y=>{a[l+m]=y,f.splice(f.indexOf(p),1),f.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>vO(o));e.push(u)}),gO(),Promise.all(e).then(()=>{})}var nd=new Map,pO=new Set;function gO(){let n=nd;return nd=new Map,n}function mO(){return nd.size===0}function yO(n){return typeof n=="string"?n:n.text()}function vO(n){pO.delete(n)}var Za=class{},km=class{};var rd=class extends Za{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new td(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=wT(e);this._bootstrapComponents=kC(o.bootstrap),this._r3Injector=uC(e,t,[{provide:Za,useValue:this},{provide:wd,useValue:this.componentFactoryResolver},...r],qt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},id=class extends km{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new rd(this.moduleType,e,[])}};function _O(n,e,t){return new rd(n,e,t,!1)}var zg=class extends Za{injector;componentFactoryResolver=new td(this);instance=null;constructor(e){super();let t=new za([...e.providers,{provide:Za,useValue:this},{provide:wd,useValue:this.componentFactoryResolver}],e.parent||nm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function sc(n,e,t=null){return new zg({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var wO=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=IT(!1,t.type),i=r.length>0?sc([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=B({token:n,providedIn:"environment",factory:()=>new n(F(Ke))})}return n})();function ut(n){return Ya(()=>{let e=hb(n),t=be(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===vC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(wO).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||xn.Emulated,styles:n.styles||An,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&ic("NgStandalone"),pb(t);let r=n.dependencies;return t.directiveDefs=ZD(r,!1),t.pipeDefs=ZD(r,!0),t.id=CO(t),t})}function EO(n){return Ti(n)||WN(n)}function IO(n){return n!==null}function Dt(n){return Ya(()=>({type:n.type,bootstrap:n.bootstrap||An,declarations:n.declarations||An,imports:n.imports||An,exports:n.exports||An,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function DO(n,e){if(n==null)return Bo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=vd.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function TO(n){if(n==null)return Bo;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ac(n){return Ya(()=>{let e=hb(n);return pb(e),e})}function hb(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Bo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||An,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:DO(n.inputs,e),outputs:TO(n.outputs),debugInfo:null}}function pb(n){n.features?.forEach(e=>e(n))}function ZD(n,e){if(!n)return null;let t=e?KN:EO;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(IO)}function CO(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function gb(n){return SO(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function bO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function SO(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function od(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function AO(n,e,t,r){let i=od(n,e,t);return od(n,e+1,r)||i}function RO(n,e,t,r,i,o,s,a,u){let l=e.consts,f=Nm(e,n,4,s||null,a||null);VT()&&cb(e,t,f,Gl(l,u),qC),f.mergedAttrs=um(f.mergedAttrs,f.attrs),YT(e,f);let p=f.tView=Em(2,f,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}function MO(n,e,t,r,i,o,s,a,u,l){let f=t+tr,p=e.firstCreatePass?RO(f,e,n,r,i,o,s,a,u):e.data[f];nc(p,!1);let m=xO(e,n,p,t);am()&&Rm(e,n,m,p),rc(m,n);let y=ib(m,n,m,p);return n[f]=y,Dm(n,y),dO(y,p,n),RT(p)&&Tm(e,n,p),u!=null&&$C(n,p,l),p}function Gt(n,e,t,r,i,o,s,a){let u=ot(),l=Mi(),f=Gl(l.consts,o);return MO(u,l,n,e,t,r,i,f,s,a),Gt}var xO=NO;function NO(n,e,t,r){return cm(!0),e[Lt].createComment("")}var mb=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Pm=new z(""),cc=new z(""),Ed=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];taskTrackingZone=null;constructor(t,r,i){this._ngZone=t,this.registry=r,Om||(kO(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(F(he),F(Id),F(cc))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),Id=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Om?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function kO(n){Om=n}var Om,PO=(()=>{class n{static \u0275prov=B({token:n,providedIn:"root",factory:()=>new Gg})}return n})(),Gg=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Dd(n){return!!n&&typeof n.then=="function"}function OO(n){return!!n&&typeof n.subscribe=="function"}var yb=new z("");function Fm(n){return ET([{provide:yb,multi:!0,useValue:n}])}var vb=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=O(yb,{optional:!0})??[];injector=O(xt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=zt(this.injector,i);if(Dd(o))t.push(o);else if(OO(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lm=new z("");function FO(){Hp(()=>{throw new Q(600,!1)})}function LO(n){return n.isBoundToModule}var VO=10;function _b(n,e){return Array.isArray(e)?e.reduce(_b,n):L(L({},n),e)}var Pr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=O(rP);afterRenderManager=O(bC);zonelessEnabled=O(dC);rootEffectScheduler=O(PO);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Ve;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=O(xi).hasPendingTasks.pipe(W(t=>!t));constructor(){O(Wo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=O(Ke);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=xt.NULL){Oe(10);let o=t instanceof sb;if(!this._injector.get(vb).done){let y="";throw new Q(405,y)}let a;o?a=t:a=this._injector.get(wd).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let u=LO(a)?void 0:this._injector.get(Za),l=r||a.selector,f=a.create(i,[],l,u),p=f.location.nativeElement,m=f.injector.get(Pm,null);return m?.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),Ol(this.components,f),m?.unregisterApplication(p)}),this._loadComponent(f),Oe(11,f),f}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Oe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(vm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Q(101,!1);let t=Te(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Te(t),this.afterTick.next(),Oe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ho,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<VO;)Oe(14),this.synchronizeOnce(),Oe(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)jO(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>pd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Ol(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Lm,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ol(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Q(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ol(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function jO(n,e,t,r){if(!t&&!pd(n))return;XC(n,e,t&&!r?0:1)}function wb(n,e,t,r){return od(n,$T(),t)?e+Ha(t)+r:Ni}function BO(n,e,t,r,i,o){let s=Dk(),a=AO(n,s,t,i);return Ck(2),a?e+Ha(t)+r+Ha(i)+o:Ni}function Wt(n,e,t){let r=ot(),i=$T();if(od(r,i,e)){let o=Mi(),s=QT();HC(o,s,r,n,e,r[Lt],t,!1)}return Wt}function YD(n,e,t,r,i){Cm(e,n,t,i?"class":"style",r)}function ce(n,e,t,r){let i=ot(),o=Mi(),s=tr+n,a=i[Lt],u=o.firstCreatePass?lb(s,o,i,e,qC,VT(),t,r):o.data[s],l=UO(o,i,u,a,e,n);i[s]=l;let f=RT(u);return nc(u,!0),LC(a,l,u),!zC(u)&&am()&&Rm(o,i,l,u),(gk()===0||f)&&rc(l,i),mk(),f&&(Tm(o,i,u),RC(o,u,i)),r!==null&&$C(i,u),ce}function le(){let n=ar();BT()?Ik():(n=n.parent,nc(n,!1));let e=n;_k(e)&&wk(),yk();let t=Mi();return t.firstCreatePass&&db(t,e),e.classesWithoutHost!=null&&kk(e)&&YD(t,e,ot(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Pk(e)&&YD(t,e,ot(),e.stylesWithoutHost,!1),le}function De(n,e,t,r){return ce(n,e,t,r),le(),De}var UO=(n,e,t,r,i,o)=>(cm(!0),OC(r,i,Mk()));var sd="en-US";var $O=sd;function HO(n){typeof n=="string"&&($O=n.toLowerCase().replace(/_/g,"-"))}function Vm(n,e,t){return Eb(n,"",e,"",t),Vm}function Eb(n,e,t,r,i){let o=ot(),s=wb(o,e,t,r);if(s!==Ni){let a=Mi(),u=QT();HC(a,u,o,n,s,o[Lt],i,!1)}return Eb}function ge(n,e=""){let t=ot(),r=Mi(),i=n+tr,o=r.firstCreatePass?Nm(r,i,1,e,null):r.data[i],s=qO(r,t,o,e,n);t[i]=s,am()&&Rm(r,t,s,o),nc(o,!1)}var qO=(n,e,t,r,i)=>(cm(!0),FP(e[Lt],r));function Fr(n){return Be("",n,""),Fr}function Be(n,e,t){let r=ot(),i=wb(r,n,e,t);return i!==Ni&&Ib(r,gd(),i),Be}function uc(n,e,t,r,i){let o=ot(),s=BO(o,n,e,t,r,i);return s!==Ni&&Ib(o,gd(),s),uc}function Ib(n,e,t){let r=fk(e,n);LP(n[Lt],r,t)}var xl=null;function zO(n){xl!==null&&(n.defaultEncapsulation!==xl.defaultEncapsulation||n.preserveWhitespaces!==xl.preserveWhitespaces)||(xl=n)}var zo=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Db=new zo("19.2.7"),Wg=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Td=(()=>{class n{compileModuleSync(t){return new id(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=wT(t),o=kC(i.declarations).reduce((s,a)=>{let u=Ti(a);return u&&s.push(new qo(u)),s},[]);return new Wg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),GO=new z("");function WO(n,e,t){let r=new id(t);return Promise.resolve(r)}function JD(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var KO=(()=>{class n{zone=O(he);changeDetectionScheduler=O(Ai);applicationRef=O(Pr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QO({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new he(be(L({},Tb()),{scheduleInRootZone:t})),[{provide:he,useFactory:n},{provide:qa,multi:!0,useFactory:()=>{let r=O(KO,{optional:!0});return()=>r.initialize()}},{provide:qa,multi:!0,useFactory:()=>{let r=O(ZO);return()=>{r.initialize()}}},e===!0?{provide:fC,useValue:!0}:[],{provide:hC,useValue:t??lC}]}function Tb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var ZO=(()=>{class n{subscription=new qe;initialized=!1;zone=O(he);pendingTasks=O(xi);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{he.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var YO=(()=>{class n{appRef=O(Pr);taskService=O(xi);ngZone=O(he);zonelessEnabled=O(dC);tracing=O(Wo,{optional:!0});disableScheduling=O(fC,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new qe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Zl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(hC,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Yl||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?PD:pC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Zl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,PD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function JO(){return typeof $localize<"u"&&$localize.locale||sd}var Cb=new z("",{providedIn:"root",factory:()=>O(Cb,ae.Optional|ae.SkipSelf)||JO()});var ad=new z(""),XO=new z("");function Va(n){return!n.moduleRef}function eF(n){let e=Va(n)?n.r3Injector:n.moduleRef.injector,t=e.get(he);return t.run(()=>{Va(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(rr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Va(n)){let o=()=>e.destroy(),s=n.platformInjector.get(ad);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(ad);s.add(o),n.moduleRef.onDestroy(()=>{Ol(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return nF(r,t,()=>{let o=e.get(vb);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Cb,sd);if(HO(s||sd),!e.get(XO,!0))return Va(n)?e.get(Pr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Va(n)){let u=e.get(Pr);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return tF(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function tF(n,e){let t=n.injector.get(Pr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Q(-403,!1);e.push(n)}function nF(n,e,t){try{let r=t();return Dd(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var bb=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>nP(r?.ngZone,be(L({},Tb({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[QO({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Ai,useExisting:YO}],u=_O(t.moduleType,this.injector,a);return eF({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=_b({},r);return WO(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Q(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(ad,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(F(xt))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),$a=null,Sb=new z("");function rF(n){if($a&&!$a.get(Sb,!1))throw new Q(400,!1);FO(),$a=n;let e=n.get(bb);return sF(n),e}function jm(n,e,t=[]){let r=`Platform: ${e}`,i=new z(r);return(o=[])=>{let s=Ab();if(!s||s.injector.get(Sb,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):rF(iF(a,r))}return oF(i)}}function iF(n=[],e){return xt.create({name:e,providers:[{provide:dd,useValue:"platform"},{provide:ad,useValue:new Set([()=>$a=null])},...n]})}function oF(n){let e=Ab();if(!e)throw new Q(401,!1);return e}function Ab(){return $a?.get(bb)??null}function sF(n){let e=n.get(mm,null);zt(n,()=>{e?.forEach(t=>t())})}function lc(){return!1}var dc=(()=>{class n{static __NG_ELEMENT_ID__=aF}return n})();function aF(n){return cF(ar(),ot(),(n&16)===16)}function cF(n,e,t){if(Xa(n)&&!t){let r=kr(n.index,e);return new Qa(r,r)}else if(n.type&175){let r=e[Mn];return new Qa(r,e)}return null}var Kg=class{constructor(){}supports(e){return gb(e)}create(e){return new Qg(e)}},uF=(n,e)=>e,Qg=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||uF}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<XD(r,i,o)?t:r,a=XD(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,f=u-i;if(l!=f){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,b=y+m;f<=b&&b<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=f-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!gb(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,bO(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Zg(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new cd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new cd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Zg=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Yg=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},cd=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Yg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function XD(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function eT(){return new Bm([new Kg])}var Bm=(()=>{class n{factories;static \u0275prov=B({token:n,providedIn:"root",factory:eT});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||eT()),deps:[[n,new GN,new Xg]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Q(901,!1)}}return n})();var Rb=jm(null,"core",[]),Mb=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(F(Pr))};static \u0275mod=Dt({type:n});static \u0275inj=It({})}return n})();var tT=class{[wo];constructor(e){this[wo]=e}destroy(){this[wo].destroy()}};function xb(n){let e=Ti(n);if(!e)return null;let t=new qo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var lt=new z("");var Pb=null;function Nn(){return Pb}function Um(n){Pb??=n}var fc=class{},hc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>O(Ob),providedIn:"platform"})}return n})(),$m=new z(""),Ob=(()=>{class n extends hc{_location;_history;_doc=O(lt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Nn().getBaseHref(this._doc)}onPopState(t){let r=Nn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Nn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Cd(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function Nb(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function gn(n){return n&&n[0]!=="?"?`?${n}`:n}var cr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>O(Sd),providedIn:"root"})}return n})(),bd=new z(""),Sd=(()=>{class n extends cr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(lt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Cd(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+gn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+gn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+gn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(F(hc),F(bd,8))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lr=(()=>{class n{_subject=new Ve;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=fF(Nb(kb(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+gn(r))}normalize(t){return n.stripTrailingSlash(dF(this._basePath,kb(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=gn;static joinWithSlash=Cd;static stripTrailingSlash=Nb;static \u0275fac=function(r){return new(r||n)(F(cr))};static \u0275prov=B({token:n,factory:()=>lF(),providedIn:"root"})}return n})();function lF(){return new Lr(F(cr))}function dF(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function kb(n){return n.replace(/\/index.html$/,"")}function fF(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Hm=(()=>{class n extends cr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Cd(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+gn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+gn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(F(hc),F(bd,8))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})();var Ad=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Vt=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ad(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Fb(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Fb(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Xe(oc),Xe(xm),Xe(Bm))};static \u0275dir=ac({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Fb(n,e){n.context.$implicit=e.item}var qm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Dt({type:n});static \u0275inj=It({})}return n})();function zm(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Gm="browser",Vb="server";function Vr(n){return n===Vb}var pc=class{};var jb=(()=>{class n{static \u0275prov=B({token:n,providedIn:"root",factory:()=>new Wm(O(lt),window)})}return n})(),Wm=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=gF(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function gF(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var xd=new z(""),Ym=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(F(xd),F(he))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),gc=class{_doc;constructor(e){this._doc=e}manager},Rd="ng-app-id";function Bb(n){for(let e of n)e.remove()}function Ub(n,e){let t=e.createElement("style");return t.textContent=n,t}function mF(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Rd}="${e}"],link[${Rd}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Rd),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Qm(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Jm=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Vr(o),mF(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Ub);r?.forEach(i=>this.addUsage(i,this.external,Qm))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Bb(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Bb(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Ub(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Qm(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Rd,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(F(lt),F(gm),F(ym,8),F(rn))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),Km={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Xm=/%COMP%/g;var Hb="%COMP%",yF=`_nghost-${Hb}`,vF=`_ngcontent-${Hb}`,_F=!0,wF=new z("",{providedIn:"root",factory:()=>_F});function EF(n){return vF.replace(Xm,n)}function IF(n){return yF.replace(Xm,n)}function qb(n,e){return e.map(t=>t.replace(Xm,n))}var ey=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,f=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=f,this.platformIsServer=Vr(a),this.defaultRenderer=new mc(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===xn.ShadowDom&&(r=be(L({},r),{encapsulation:xn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Md?i.applyToHost(t):i instanceof yc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case xn.Emulated:o=new Md(u,l,r,this.appId,f,s,a,p,m);break;case xn.ShadowDom:return new Zm(u,l,t,r,s,a,this.nonce,p,m);default:o=new yc(u,l,r,f,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(F(Ym),F(Jm),F(gm),F(wF),F(lt),F(rn),F(he),F(ym),F(Wo,8))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),mc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Km[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){($b(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&($b(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Km[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Km[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ko.DashCase|Ko.Important)?e.style.setProperty(t,r,i&Ko.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ko.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Nn().getGlobalEventTarget(this.doc,e),!e))throw new Q(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function $b(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Zm=class extends mc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=qb(i.id,f);for(let m of f){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=Qm(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},yc=class extends mc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=l?qb(l,f):f,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Md=class extends yc{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let f=i+"-"+r.id;super(e,t,r,o,s,a,u,l,f),this.contentAttr=EF(f),this.hostAttr=IF(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Nd=class n extends fc{supportsDOMEvents=!0;static makeCurrent(){Um(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=DF();return t==null?null:TF(t)}resetBaseElement(){vc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return zm(document.cookie,e)}},vc=null;function DF(){return vc=vc||document.querySelector("base"),vc?vc.getAttribute("href"):null}function TF(n){return new URL(n,document.baseURI).pathname}var kd=class{addToWindow(e){ir.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new Q(5103,!1);return o},ir.getAllAngularTestabilities=()=>e.getAllTestabilities(),ir.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=ir.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};ir.frameworkStabilizers||(ir.frameworkStabilizers=[]),ir.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Nn().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},CF=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),Gb=(()=>{class n extends gc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(F(lt))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),zb=["alt","control","meta","shift"],bF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},SF={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Wb=(()=>{class n extends gc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Nn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),zb.forEach(l=>{let f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=bF[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),zb.forEach(s=>{if(s!==i){let a=SF[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(F(lt))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})();function AF(){Nd.makeCurrent()}function RF(){return new rr}function MF(){return DC(document),document}var xF=[{provide:rn,useValue:Gm},{provide:mm,useValue:AF,multi:!0},{provide:lt,useFactory:MF}],ty=jm(Rb,"browser",xF);var NF=[{provide:cc,useClass:kd},{provide:Pm,useClass:Ed,deps:[he,Id,cc]},{provide:Ed,useClass:Ed,deps:[he,Id,cc]}],kF=[{provide:dd,useValue:"root"},{provide:rr,useFactory:RF},{provide:xd,useClass:Gb,multi:!0,deps:[lt]},{provide:xd,useClass:Wb,multi:!0,deps:[lt]},ey,Jm,Ym,{provide:Ho,useExisting:ey},{provide:pc,useClass:CF},[]],ny=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Dt({type:n});static \u0275inj=It({providers:[...kF,...NF],imports:[qm,Mb]})}return n})();var Kb=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(F(lt))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var oe="primary",Nc=Symbol("RouteTitle"),ay=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ts(n){return new ay(n)}function OF(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function FF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!kn(n[t],e[t]))return!1;return!0}function kn(n,e){let t=n?cy(n):void 0,r=e?cy(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!n0(n[i],e[i]))return!1;return!0}function cy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function n0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function r0(n){return n.length>0?n[n.length-1]:null}function jr(n){return ig(n)?n:Dd(n)?we(Promise.resolve(n)):Y(n)}var LF={exact:o0,subset:s0},i0={exact:VF,subset:jF,ignored:()=>!0};function Qb(n,e,t){return LF[t.paths](n.root,e.root,t.matrixParams)&&i0[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function VF(n,e){return kn(n,e)}function o0(n,e,t){if(!Pi(n.segments,e.segments)||!Fd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!o0(n.children[r],e.children[r],t))return!1;return!0}function jF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>n0(n[t],e[t]))}function s0(n,e,t){return a0(n,e,e.segments,t)}function a0(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Pi(i,t)||e.hasChildren()||!Fd(i,t,r))}else if(n.segments.length===t.length){if(!Pi(n.segments,t)||!Fd(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!s0(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Pi(n.segments,i)||!Fd(n.segments,i,r)||!n.children[oe]?!1:a0(n.children[oe],e,o,r)}}function Fd(n,e,t){return e.every((r,i)=>i0[t](n[i].parameters,r.parameters))}var lr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ce([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ts(this.queryParams),this._queryParamMap}toString(){return $F.serialize(this)}},Ce=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ld(this)}},ki=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ts(this.parameters),this._parameterMap}toString(){return u0(this)}};function BF(n,e){return Pi(n,e)&&n.every((t,r)=>kn(t.parameters,e[r].parameters))}function Pi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function UF(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(t=t.concat(e(i,r)))}),t}var os=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>new Oi,providedIn:"root"})}return n})(),Oi=class{parse(e){let t=new ly(e);return new lr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${_c(e.root,!0)}`,r=zF(e.queryParams),i=typeof e.fragment=="string"?`#${HF(e.fragment)}`:"";return`${t}${r}${i}`}},$F=new Oi;function Ld(n){return n.segments.map(e=>u0(e)).join("/")}function _c(n,e){if(!n.hasChildren())return Ld(n);if(e){let t=n.children[oe]?_c(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${_c(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=UF(n,(r,i)=>i===oe?[_c(n.children[oe],!1)]:[`${i}:${_c(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${Ld(n)}/${t[0]}`:`${Ld(n)}/(${t.join("//")})`}}function c0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pd(n){return c0(n).replace(/%3B/gi,";")}function HF(n){return encodeURI(n)}function uy(n){return c0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vd(n){return decodeURIComponent(n)}function Zb(n){return Vd(n.replace(/\+/g,"%20"))}function u0(n){return`${uy(n.path)}${qF(n.parameters)}`}function qF(n){return Object.entries(n).map(([e,t])=>`;${uy(e)}=${uy(t)}`).join("")}function zF(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Pd(t)}=${Pd(i)}`).join("&"):`${Pd(t)}=${Pd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var GF=/^[^\/()?;#]+/;function ry(n){let e=n.match(GF);return e?e[0]:""}var WF=/^[^\/()?;=#]+/;function KF(n){let e=n.match(WF);return e?e[0]:""}var QF=/^[^=?&#]+/;function ZF(n){let e=n.match(QF);return e?e[0]:""}var YF=/^[^&#]+/;function JF(n){let e=n.match(YF);return e?e[0]:""}var ly=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ce([],{}):new Ce([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[oe]=new Ce(e,t)),r}parseSegment(){let e=ry(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new ki(Vd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=KF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=ry(this.remaining);i&&(r=i,this.capture(r))}e[Vd(t)]=Vd(r)}parseQueryParam(e){let t=ZF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=JF(this.remaining);s&&(r=s,this.capture(r))}let i=Zb(t),o=Zb(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ry(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Q(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[oe]:new Ce([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}};function l0(n){return n.segments.length>0?new Ce([],{[oe]:n}):n}function d0(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=d0(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ce(n.segments,e);return XF(t)}function XF(n){if(n.numberOfChildren===1&&n.children[oe]){let e=n.children[oe];return new Ce(n.segments.concat(e.segments),e.children)}return n}function ns(n){return n instanceof lr}function eL(n,e,t=null,r=null){let i=f0(n);return h0(i,e,t,r)}function f0(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Ce(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=l0(r);return e??i}function h0(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return iy(i,i,i,t,r);let o=tL(e);if(o.toRoot())return iy(i,i,new Ce([],{}),t,r);let s=nL(o,i,n),a=s.processChildren?Ec(s.segmentGroup,s.index,o.commands):g0(s.segmentGroup,s.index,o.commands);return iy(i,s.segmentGroup,a,t,r)}function Bd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Dc(n){return typeof n=="object"&&n!=null&&n.outlets}function iy(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`});let s;n===e?s=t:s=p0(n,e,t);let a=l0(d0(s));return new lr(a,o,i)}function p0(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=p0(o,e,t)}),new Ce(n.segments,r)}var Ud=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Bd(r[0]))throw new Q(4003,!1);let i=r.find(Dc);if(i&&i!==r0(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function tL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ud(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ud(t,e,r)}var Jo=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function nL(n,e,t){if(n.isAbsolute)return new Jo(e,!0,0);if(!t)return new Jo(e,!1,NaN);if(t.parent===null)return new Jo(t,!0,0);let r=Bd(n.commands[0])?0:1,i=t.segments.length-1+r;return rL(t,i,n.numberOfDoubleDots)}function rL(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new Jo(r,!1,i-o)}function iL(n){return Dc(n[0])?n[0].outlets:{[oe]:n}}function g0(n,e,t){if(n??=new Ce([],{}),n.segments.length===0&&n.hasChildren())return Ec(n,e,t);let r=oL(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ce(n.segments.slice(0,r.pathIndex),{});return o.children[oe]=new Ce(n.segments.slice(r.pathIndex),n.children),Ec(o,0,i)}else return r.match&&i.length===0?new Ce(n.segments,{}):r.match&&!n.hasChildren()?dy(n,e,t):r.match?Ec(n,0,i):dy(n,e,t)}function Ec(n,e,t){if(t.length===0)return new Ce(n.segments,{});{let r=iL(t),i={};if(Object.keys(r).some(o=>o!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let o=Ec(n.children[oe],e,t);return new Ce(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=g0(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ce(n.segments,i)}}function oL(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Dc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!Jb(u,l,s))return o;r+=2}else{if(!Jb(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function dy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Dc(o)){let u=sL(o.outlets);return new Ce(r,u)}if(i===0&&Bd(t[0])){let u=n.segments[e];r.push(new ki(u.path,Yb(t[0]))),i++;continue}let s=Dc(o)?o.outlets[oe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Bd(a)?(r.push(new ki(s,Yb(a))),i+=2):(r.push(new ki(s,{})),i++)}return new Ce(r,{})}function sL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=dy(new Ce([],{}),0,r))}),e}function Yb(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Jb(n,e,t){return n==t.path&&kn(e,t.parameters)}var jd="imperative",dt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(dt||{}),on=class{id;url;constructor(e,t){this.id=e,this.url=t}},Fi=class extends on{type=dt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Pn=class extends on{urlAfterRedirects;type=dt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Qt||{}),Tc=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Tc||{}),ur=class extends on{reason;code;type=dt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},dr=class extends on{reason;code;type=dt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Cc=class extends on{error;target;type=dt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},$d=class extends on{urlAfterRedirects;state;type=dt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fy=class extends on{urlAfterRedirects;state;type=dt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hy=class extends on{urlAfterRedirects;state;shouldActivate;type=dt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},py=class extends on{urlAfterRedirects;state;type=dt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gy=class extends on{urlAfterRedirects;state;type=dt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},my=class{route;type=dt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},yy=class{route;type=dt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},vy=class{snapshot;type=dt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_y=class{snapshot;type=dt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wy=class{snapshot;type=dt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ey=class{snapshot;type=dt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bc=class{routerEvent;position;anchor;type=dt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Sc=class{},rs=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function aL(n,e){return n.providers&&!n._injector&&(n._injector=sc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function mn(n){return n.outlet||oe}function cL(n,e){let t=n.filter(r=>mn(r)===e);return t.push(...n.filter(r=>mn(r)!==e)),t}function kc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Iy=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return kc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ss(this.rootInjector)}},ss=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Iy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(F(Ke))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Dy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Dy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Ty(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ty(e,this._root).map(t=>t.value)}};function Dy(n,e){if(n===e.value)return e;for(let t of e.children){let r=Dy(n,t);if(r)return r}return null}function Ty(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Ty(n,t);if(r.length)return r.unshift(e),r}return[]}var Kt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Yo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var qd=class extends Hd{snapshot;constructor(e,t){super(e),this.snapshot=t,ky(this,e)}toString(){return this.snapshot.toString()}};function m0(n){let e=uL(n),t=new ht([new ki("",{})]),r=new ht({}),i=new ht({}),o=new ht({}),s=new ht(""),a=new Li(t,r,o,s,i,oe,n,e.root);return a.snapshot=e.root,new qd(new Kt(a,[]),e)}function uL(n){let e={},t={},r={},i="",o=new Xo([],e,r,i,t,oe,n,null,{});return new Gd("",new Kt(o,[]))}var Li=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(W(l=>l[Nc]))??Y(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(W(e=>ts(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(W(e=>ts(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function zd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&v0(i)&&(r.resolve[Nc]=i.title),r}var Xo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Nc]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ts(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ts(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Gd=class extends Hd{url;constructor(e,t){super(t),this.url=e,ky(this,t)}toString(){return y0(this._root)}};function ky(n,e){e.value._routerState=n,e.children.forEach(t=>ky(n,t))}function y0(n){let e=n.children.length>0?` { ${n.children.map(y0).join(", ")} } `:"";return`${n.value}${e}`}function oy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,kn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),kn(e.params,t.params)||n.paramsSubject.next(t.params),FF(e.url,t.url)||n.urlSubject.next(t.url),kn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Cy(n,e){let t=kn(n.params,e.params)&&BF(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Cy(n.parent,e.parent))}function v0(n){return typeof n.title=="string"||n.title===null}var lL=new z(""),_0=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=oe;activateEvents=new Ft;deactivateEvents=new Ft;attachEvents=new Ft;detachEvents=new Ft;routerOutletData=mC(void 0);parentContexts=O(ss);location=O(oc);changeDetector=O(dc);inputBinder=O(Pc,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new by(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ac({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[hd]})}return n})(),by=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Li?this.route:e===ss?this.childContexts:e===lL?this.outletData:this.parent.get(e,t)}},Pc=new z(""),Py=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Oa([r.queryParams,r.params,r.data]).pipe(ze(([o,s,a],u)=>(a=L(L(L({},o),s),a),u===0?Y(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=xb(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})();function dL(n,e,t){let r=Ac(n,e._root,t?t._root:void 0);return new qd(r,e)}function Ac(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=fL(n,e,t);return new Kt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ac(n,a)),s}}let r=hL(e.value),i=e.children.map(o=>Ac(n,o));return new Kt(r,i)}}function fL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ac(n,r,i);return Ac(n,r)})}function hL(n){return new Li(new ht(n.url),new ht(n.params),new ht(n.queryParams),new ht(n.fragment),new ht(n.data),n.outlet,n.component,n)}var Rc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},w0="ngNavigationCancelingError";function Wd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ns(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=E0(!1,Qt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function E0(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[w0]=!0,t.cancellationCode=e,t}function pL(n){return I0(n)&&ns(n.url)}function I0(n){return!!n&&n[w0]}var gL=(n,e,t,r)=>W(i=>(new Sy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Sy=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),oy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Yo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Yo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Yo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Yo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ey(o.value.snapshot))}),e.children.length&&this.forwardEvent(new _y(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(oy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),oy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Kd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},es=class{component;route;constructor(e,t){this.component=e,this.route=t}};function mL(n,e,t){let r=n._root,i=e?e._root:null;return wc(r,i,t,[r.value])}function yL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function as(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!uT(n)?n:e.get(n):r}function wc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Yo(e);return n.children.forEach(s=>{vL(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ic(a,t.getContext(s),i)),i}function vL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=_L(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Kd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?wc(n,e,a?a.children:null,r,i):wc(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new es(a.outlet.component,s))}else s&&Ic(e,a,i),i.canActivateChecks.push(new Kd(r)),o.component?wc(n,null,a?a.children:null,r,i):wc(n,null,t,r,i);return i}function _L(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Pi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Pi(n.url,e.url)||!kn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Cy(n,e)||!kn(n.queryParams,e.queryParams);case"paramsChange":default:return!Cy(n,e)}}function Ic(n,e,t){let r=Yo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ic(s,e.children.getContext(o),t):Ic(s,null,t):Ic(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new es(e.outlet.component,i)):t.canDeactivateChecks.push(new es(null,i)):t.canDeactivateChecks.push(new es(null,i))}function Oc(n){return typeof n=="function"}function wL(n){return typeof n=="boolean"}function EL(n){return n&&Oc(n.canLoad)}function IL(n){return n&&Oc(n.canActivate)}function DL(n){return n&&Oc(n.canActivateChild)}function TL(n){return n&&Oc(n.canDeactivate)}function CL(n){return n&&Oc(n.canMatch)}function D0(n){return n instanceof Yn||n?.name==="EmptyError"}var Od=Symbol("INITIAL_VALUE");function is(){return ze(n=>Oa(n.map(e=>e.pipe(Xn(1),wi(Od)))).pipe(W(e=>{for(let t of e)if(t!==!0){if(t===Od)return Od;if(t===!1||bL(t))return t}return!0}),ct(e=>e!==Od),Xn(1)))}function bL(n){return ns(n)||n instanceof Rc}function SL(n,e){return We(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Y(be(L({},t),{guardsResult:!0})):AL(s,r,i,n).pipe(We(a=>a&&wL(a)?RL(r,o,n,e):Y(a)),W(a=>be(L({},t),{guardsResult:a})))})}function AL(n,e,t,r){return we(n).pipe(We(i=>PL(i.component,i.route,t,e,r)),ln(i=>i!==!0,!0))}function RL(n,e,t,r){return we(e).pipe(Mr(i=>xo(xL(i.route.parent,r),ML(i.route,r),kL(n,i.path,t),NL(n,i.route,t))),ln(i=>i!==!0,!0))}function ML(n,e){return n!==null&&e&&e(new wy(n)),Y(!0)}function xL(n,e){return n!==null&&e&&e(new vy(n)),Y(!0)}function NL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(o=>bl(()=>{let s=kc(e)??t,a=as(o,s),u=IL(a)?a.canActivate(e,n):zt(s,()=>a(e,n));return jr(u).pipe(ln())}));return Y(i).pipe(is())}function kL(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>yL(s)).filter(s=>s!==null).map(s=>bl(()=>{let a=s.guards.map(u=>{let l=kc(s.node)??t,f=as(u,l),p=DL(f)?f.canActivateChild(r,n):zt(l,()=>f(r,n));return jr(p).pipe(ln())});return Y(a).pipe(is())}));return Y(o).pipe(is())}function PL(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let u=kc(e)??i,l=as(a,u),f=TL(l)?l.canDeactivate(n,e,t,r):zt(u,()=>l(n,e,t,r));return jr(f).pipe(ln())});return Y(s).pipe(is())}function OL(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let o=i.map(s=>{let a=as(s,n),u=EL(a)?a.canLoad(e,t):zt(n,()=>a(e,t));return jr(u)});return Y(o).pipe(is(),T0(r))}function T0(n){return Jp(pt(e=>{if(typeof e!="boolean")throw Wd(n,e)}),W(e=>e===!0))}function FL(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let o=i.map(s=>{let a=as(s,n),u=CL(a)?a.canMatch(e,t):zt(n,()=>a(e,t));return jr(u)});return Y(o).pipe(is(),T0(r))}var Mc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},xc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Zo(n){return Mo(new Mc(n))}function LL(n){return Mo(new Q(4e3,!1))}function VL(n){return Mo(E0(!1,Qt.GuardRejected))}var Ay=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[oe])return LL(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:f,url:p,outlet:m,params:y,data:b,title:A}=i,N=zt(o,()=>a({params:y,data:b,queryParams:u,fragment:l,routeConfig:f,url:p,outlet:m,title:A}));if(N instanceof lr)throw new xc(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new xc(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new lr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ce(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Ry={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jL(n,e,t,r,i){let o=C0(n,e,t);return o.matched?(r=aL(e,r),FL(r,e,t,i).pipe(W(s=>s===!0?o:L({},Ry)))):Y(o)}function C0(n,e,t){if(e.path==="**")return BL(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},Ry):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||OF)(t,n,e);if(!i)return L({},Ry);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function BL(n){return{matched:!0,parameters:n.length>0?r0(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Xb(n,e,t,r){return t.length>0&&HL(n,t,r)?{segmentGroup:new Ce(e,$L(r,new Ce(t,n.children))),slicedSegments:[]}:t.length===0&&qL(n,t,r)?{segmentGroup:new Ce(n.segments,UL(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ce(n.segments,n.children),slicedSegments:t}}function UL(n,e,t,r){let i={};for(let o of t)if(Qd(n,e,o)&&!r[mn(o)]){let s=new Ce([],{});i[mn(o)]=s}return L(L({},r),i)}function $L(n,e){let t={};t[oe]=e;for(let r of n)if(r.path===""&&mn(r)!==oe){let i=new Ce([],{});t[mn(r)]=i}return t}function HL(n,e,t){return t.some(r=>Qd(n,e,r)&&mn(r)!==oe)}function qL(n,e,t){return t.some(r=>Qd(n,e,r))}function Qd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function zL(n,e,t){return e.length===0&&!n.children[t]}var My=class{};function GL(n,e,t,r,i,o,s="emptyOnly"){return new xy(n,e,t,r,i,s,o).recognize()}var WL=31,xy=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Ay(this.urlSerializer,this.urlTree)}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){let e=Xb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(W(({children:t,rootSnapshot:r})=>{let i=new Kt(r,t),o=new Gd("",i),s=eL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Xo([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,t).pipe(W(r=>({children:r,rootSnapshot:t})),Jn(r=>{if(r instanceof xc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Mc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(W(s=>s instanceof Kt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return we(o).pipe(Mr(s=>{let a=r.children[s],u=cL(t,s);return this.processSegmentGroup(e,u,a,s,i)}),_i((s,a)=>(s.push(...a),s)),xr(null),ag(),We(s=>{if(s===null)return Zo(r);let a=b0(s);return KL(a),Y(a)}))}processSegment(e,t,r,i,o,s,a){return we(t).pipe(Mr(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Jn(l=>{if(l instanceof Mc)return Y(null);throw l}))),ln(u=>!!u),Jn(u=>{if(D0(u))return zL(r,i,o)?Y(new My):Zo(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return mn(r)!==s&&(s===oe||!Qd(i,o,r))?Zo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Zo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:f,positionalParamSegments:p,remainingSegments:m}=C0(t,i,o);if(!u)return Zo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>WL&&(this.allowRedirects=!1));let y=new Xo(o,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,e0(i),mn(i),i.component??i._loadedComponent??null,i,t0(i)),b=zd(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);let A=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(We(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=jL(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(ze(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ze(({routes:l})=>{let f=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,b=new Xo(m,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,e0(r),mn(r),r.component??r._loadedComponent??null,r,t0(r)),A=zd(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(A.params),b.data=Object.freeze(A.data);let{segmentGroup:N,slicedSegments:H}=Xb(t,m,y,l);if(H.length===0&&N.hasChildren())return this.processChildren(f,l,N,b).pipe(W(V=>new Kt(b,V)));if(l.length===0&&H.length===0)return Y(new Kt(b,[]));let K=mn(r)===o;return this.processSegment(f,l,N,H,K?oe:o,!0,b).pipe(W(V=>new Kt(b,V instanceof Kt?[V]:[])))}))):Zo(t)))}getChildConfig(e,t,r){return t.children?Y({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Y({routes:t._loadedRoutes,injector:t._loadedInjector}):OL(e,t,r,this.urlSerializer).pipe(We(i=>i?this.configLoader.loadChildren(e,t).pipe(pt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):VL(t))):Y({routes:[],injector:e})}};function KL(n){n.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet))}function QL(n){let e=n.value.routeConfig;return e&&e.path===""}function b0(n){let e=[],t=new Set;for(let r of n){if(!QL(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=b0(r.children);e.push(new Kt(r.value,i))}return e.filter(r=>!t.has(r))}function e0(n){return n.data||{}}function t0(n){return n.resolve||{}}function ZL(n,e,t,r,i,o){return We(s=>GL(n,e,t,r,s.extractedUrl,i,o).pipe(W(({state:a,tree:u})=>be(L({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function YL(n,e){return We(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Y(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of S0(u))s.add(l);let a=0;return we(s).pipe(Mr(u=>o.has(u)?JL(u,r,n,e):(u.data=zd(u,u.parent,n).resolve,Y(void 0))),pt(()=>a++),No(1),We(u=>a===s.size?Y(t):Et))})}function S0(n){let e=n.children.map(t=>S0(t)).flat();return[n,...e]}function JL(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!v0(i)&&(o[Nc]=i.title),XL(o,n,e,r).pipe(W(s=>(n._resolvedData=s,n.data=zd(n,n.parent,t).resolve,null)))}function XL(n,e,t,r){let i=cy(n);if(i.length===0)return Y({});let o={};return we(i).pipe(We(s=>eV(n[s],e,t,r).pipe(ln(),pt(a=>{if(a instanceof Rc)throw Wd(new Oi,a);o[s]=a}))),No(1),W(()=>o),Jn(s=>D0(s)?Et:Mo(s)))}function eV(n,e,t,r){let i=kc(e)??r,o=as(n,i),s=o.resolve?o.resolve(e,t):zt(i,()=>o(e,t));return jr(s)}function sy(n){return ze(e=>{let t=n(e);return t?we(t).pipe(W(()=>e)):Y(e)})}var A0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(t){return t.data[Nc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>O(tV),providedIn:"root"})}return n})(),tV=(()=>{class n extends A0{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(F(Kb))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cs=new z("",{providedIn:"root",factory:()=>({})}),R0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ut({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&De(0,"router-outlet")},dependencies:[_0],encapsulation:2})}return n})();function Oy(n){let e=n.children&&n.children.map(Oy),t=e?be(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==oe&&(t.component=R0),t}var Fc=new z(""),Zd=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=O(Td);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Y(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=jr(t.loadComponent()).pipe(W(M0),pt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Fa(()=>{this.componentLoaders.delete(t)})),i=new bo(r,()=>new Ve).pipe(Co());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=nV(r,this.compiler,t,this.onLoadEndListener).pipe(Fa(()=>{this.childrenLoaders.delete(r)})),s=new bo(o,()=>new Ve).pipe(Co());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nV(n,e,t,r){return jr(n.loadChildren()).pipe(W(M0),We(i=>i instanceof km||Array.isArray(i)?Y(i):we(e.compileModuleAsync(i))),W(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Fc,[],{optional:!0,self:!0}).flat()),{routes:s.map(Oy),injector:o}}))}function rV(n){return n&&typeof n=="object"&&"default"in n}function M0(n){return rV(n)?n.default:n}var Fy=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>O(iV),providedIn:"root"})}return n})(),iV=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ly=new z(""),Vy=new z("");function x0(n,e,t){let r=n.get(Vy),i=n.get(lt);return n.get(he).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),oV(n))),{onViewTransitionCreated:u}=r;return u&&zt(n,()=>u({transition:a,from:e,to:t})),s})}function oV(n){return new Promise(e=>{_m({read:()=>setTimeout(e)},{injector:n})})}var jy=new z(""),Yd=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ve;transitionAbortSubject=new Ve;configLoader=O(Zd);environmentInjector=O(Ke);destroyRef=O(Go);urlSerializer=O(os);rootContexts=O(ss);location=O(Lr);inputBindingEnabled=O(Pc,{optional:!0})!==null;titleStrategy=O(A0);options=O(cs,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=O(Fy);createViewTransition=O(Ly,{optional:!0});navigationErrorHandler=O(jy,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Y(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new my(i)),r=i=>this.events.next(new yy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(be(L({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new ht(null),this.transitions.pipe(ct(r=>r!==null),ze(r=>{let i=!1,o=!1;return Y(r).pipe(ze(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Qt.SupersededByNewNavigation),Et;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?be(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&u!=="reload"){let l="";return this.events.next(new dr(s.id,this.urlSerializer.serialize(s.rawUrl),l,Tc.IgnoredSameUrlNavigation)),s.resolve(!1),Et}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Y(s).pipe(ze(l=>(this.events.next(new Fi(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Et:Promise.resolve(l))),ZL(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),pt(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=be(L({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let f=new $d(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:f,source:p,restoredState:m,extras:y}=s,b=new Fi(l,this.urlSerializer.serialize(f),p,m);this.events.next(b);let A=m0(this.rootComponentType).snapshot;return this.currentTransition=r=be(L({},s),{targetSnapshot:A,urlAfterRedirects:f,extras:be(L({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,Y(r)}else{let l="";return this.events.next(new dr(s.id,this.urlSerializer.serialize(s.extractedUrl),l,Tc.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Et}}),pt(s=>{let a=new fy(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),W(s=>(this.currentTransition=r=be(L({},s),{guards:mL(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),SL(this.environmentInjector,s=>this.events.next(s)),pt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Wd(this.urlSerializer,s.guardsResult);let a=new hy(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),ct(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Qt.GuardRejected),!1)),sy(s=>{if(s.guards.canActivateChecks.length!==0)return Y(s).pipe(pt(a=>{let u=new py(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),ze(a=>{let u=!1;return Y(a).pipe(YL(this.paramsInheritanceStrategy,this.environmentInjector),pt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",Qt.NoDataFromResolver)}}))}),pt(a=>{let u=new gy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),sy(s=>{let a=u=>{let l=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(u.routeConfig).pipe(pt(f=>{u.component=f}),W(()=>{})));for(let f of u.children)l.push(...a(f));return l};return Oa(a(s.targetSnapshot.root)).pipe(xr(null),Xn(1))}),sy(()=>this.afterPreactivation()),ze(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?we(u).pipe(W(()=>r)):Y(r)}),W(s=>{let a=dL(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=be(L({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),pt(()=>{this.events.next(new Sc)}),gL(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Xn(1),pt({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Pn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),ug(this.transitionAbortSubject.pipe(pt(s=>{throw s}))),Fa(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",Qt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Jn(s=>{if(this.destroyed)return r.resolve(!1),Et;if(o=!0,I0(s))this.events.next(new ur(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),pL(s)?this.events.next(new rs(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Cc(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=zt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Rc){let{message:l,cancellationCode:f}=Wd(this.urlSerializer,u);this.events.next(new ur(r.id,this.urlSerializer.serialize(r.extractedUrl),l,f)),this.events.next(new rs(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Et}))}))}cancelNavigationTransition(t,r,i){let o=new ur(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sV(n){return n!==jd}var aV=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>O(cV),providedIn:"root"})}return n})(),Ny=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},cV=(()=>{class n extends Ny{static \u0275fac=(()=>{let t;return function(i){return(t||(t=dm(n)))(i||n)}})();static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),N0=(()=>{class n{urlSerializer=O(os);options=O(cs,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=O(Lr);urlHandlingStrategy=O(Fy);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new lr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof lr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=m0(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>O(uV),providedIn:"root"})}return n})(),uV=(()=>{class n extends N0{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Fi?this.updateStateMemento():t instanceof dr?this.commitTransition(r):t instanceof $d?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Sc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof ur&&(t.code===Qt.GuardRejected||t.code===Qt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Cc?this.restoreHistory(r,!0):t instanceof Pn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=L(L({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=L(L({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=dm(n)))(i||n)}})();static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function By(n,e){n.events.pipe(ct(t=>t instanceof Pn||t instanceof ur||t instanceof Cc||t instanceof dr),W(t=>t instanceof Pn||t instanceof dr?0:(t instanceof ur?t.code===Qt.Redirect||t.code===Qt.SupersededByNewNavigation:!1)?2:1),ct(t=>t!==2),Xn(1)).subscribe(()=>{e()})}var lV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Vi=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=O(mb);stateManager=O(N0);options=O(cs,{optional:!0})||{};pendingTasks=O(xi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=O(Yd);urlSerializer=O(os);location=O(Lr);urlHandlingStrategy=O(Fy);_events=new Ve;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=O(aV);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=O(Fc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!O(Pc,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new qe;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ur&&r.code!==Qt.Redirect&&r.code!==Qt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Pn)this.navigated=!0;else if(r instanceof rs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||sV(i.source)},s);this.scheduleNavigation(a,jd,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}hV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),jd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Oy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=f0(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return h0(p,t,f,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ns(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,jd,null,r)}navigate(t,r={skipLocationChange:!1}){return fV(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},lV):r===!1?i=L({},dV):i=r,ns(t))return Qb(this.currentUrlTree,t,i);let o=this.parseUrl(t);return Qb(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let f=this.pendingTasks.add();return By(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fV(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Q(4008,!1)}function hV(n){return!(n instanceof Sc)&&!(n instanceof rs)}var Lc=class{};var k0=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ct(t=>t instanceof Pn),Mr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=sc(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return we(i).pipe(Rr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Y(null);let o=i.pipe(We(s=>s===null?Y(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return we([o,s]).pipe(Rr())}else return o})}static \u0275fac=function(r){return new(r||n)(F(Vi),F(Td),F(Ke),F(Lc),F(Zd))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),P0=new z(""),pV=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Fi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Pn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof dr&&t.code===Tc.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof bc&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new bc(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){ab()};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})();function gV(n){return n.routerState.root}function Vc(n,e){return{\u0275kind:n,\u0275providers:e}}function mV(){let n=O(xt);return e=>{let t=n.get(Pr);if(e!==t.components[0])return;let r=n.get(Vi),i=n.get(O0);n.get($y)===1&&r.initialNavigation(),n.get(V0,null,ae.Optional)?.setUpPreloading(),n.get(P0,null,ae.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var O0=new z("",{factory:()=>new Ve}),$y=new z("",{providedIn:"root",factory:()=>1});function F0(){let n=[{provide:$y,useValue:0},Fm(()=>{let e=O(xt);return e.get($m,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Vi),o=e.get(O0);By(i,()=>{r(!0)}),e.get(Yd).afterPreactivation=()=>(r(!0),o.closed?Y(void 0):o),i.initialNavigation()}))})];return Vc(2,n)}function L0(){let n=[Fm(()=>{O(Vi).setUpLocationChangeListener()}),{provide:$y,useValue:2}];return Vc(3,n)}var V0=new z("");function j0(n){return Vc(0,[{provide:V0,useExisting:k0},{provide:Lc,useExisting:n}])}function B0(){return Vc(8,[Py,{provide:Pc,useExisting:Py}])}function U0(n){ic("NgRouterViewTransitions");let e=[{provide:Ly,useValue:x0},{provide:Vy,useValue:L({skipNextTransition:!!n?.skipInitialTransition},n)}];return Vc(9,e)}var $0=[Lr,{provide:os,useClass:Oi},Vi,ss,{provide:Li,useFactory:gV,deps:[Vi]},Zd,[]],Jd=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[$0,[],{provide:Fc,multi:!0,useValue:t},[],r?.errorHandler?{provide:jy,useValue:r.errorHandler}:[],{provide:cs,useValue:r||{}},r?.useHash?vV():_V(),yV(),r?.preloadingStrategy?j0(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?wV(r):[],r?.bindToComponentInputs?B0().\u0275providers:[],r?.enableViewTransitions?U0().\u0275providers:[],EV()]}}static forChild(t){return{ngModule:n,providers:[{provide:Fc,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Dt({type:n});static \u0275inj=It({})}return n})();function yV(){return{provide:P0,useFactory:()=>{let n=O(jb),e=O(he),t=O(cs),r=O(Yd),i=O(os);return t.scrollOffset&&n.setOffset(t.scrollOffset),new pV(i,r,n,e,t)}}}function vV(){return{provide:cr,useClass:Hm}}function _V(){return{provide:cr,useClass:Sd}}function wV(n){return[n.initialNavigation==="disabled"?L0().\u0275providers:[],n.initialNavigation==="enabledBlocking"?F0().\u0275providers:[]]}var Uy=new z("");function EV(){return[{provide:Uy,useFactory:mV},{provide:Lm,multi:!0,useExisting:Uy}]}var DV=[],Xd=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Dt({type:n});static \u0275inj=It({imports:[Jd.forRoot(DV),Jd]})};var ef=class{id;name="name";goalLife="goal";photoUrl="photo";email="email@domain.com";phoneNumber="999-999-9999";location="city, country";socialNetwork="@facebook"};var TV="firebase",CV="11.6.0";Ar(TV,CV,"app");function Nt(n){n===void 0&&(rm(Nt),n=O(xt));let e=n.get(fm);return t=>new de(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var nf=new zo("ANGULARFIRE2_VERSION");var H0=(n,e)=>{let t=e?[e]:FI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Hy=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Hy||{}),E6=lc()&&typeof Zone<"u"?Hy.WARN:Hy.SILENT;var tf=class{zone;delegate;constructor(e,t=ng){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},jc=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=O(he);this.outsideAngular=t.runOutsideAngular(()=>new tf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new tf(typeof Zone>"u"?void 0:Zone.current,Pa))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var AV=new Map,RV={activated:!1,tokenObservers:[]},MV={initialized:!1,enabled:!1};function yn(n){return AV.get(n)||Object.assign({},RV)}function K0(){return MV}var xV="https://content-firebaseappcheck.googleapis.com/v1";var NV="exchangeDebugToken",z0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},R6=24*60*60*1e3;var Gy=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return x(this,null,function*(){this.stop();try{this.pending=new kp,this.pending.promise.catch(t=>{}),yield kV(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new kp,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function kV(n){return new Promise(e=>{setTimeout(e,n)})}var PV={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Br=new kI("appCheck","AppCheck",PV);function Q0(n){if(!yn(n).activated)throw Br.create("use-before-activation",{appName:n.name})}function Z0(r,i){return x(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw Br.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Br.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Br.create("fetch-parse-error",{originalErrorMessage:y?.message})}let f=l.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw Br.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(f[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function Y0(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${xV}/projects/${t}/apps/${r}:${NV}?key=${i}`,body:{debug_token:e}}}var OV="firebase-app-check-database",FV=1,Wy="firebase-app-check-store";var rf=null;function LV(){return rf||(rf=new Promise((n,e)=>{try{let t=indexedDB.open(OV,FV);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Br.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Wy,{keyPath:"compositeKey"})}}}catch(t){e(Br.create("storage-open",{originalErrorMessage:t?.message}))}}),rf)}function VV(n,e){return jV(BV(n),e)}function jV(n,e){return x(this,null,function*(){let r=(yield LV()).transaction(Wy,"readwrite"),o=r.objectStore(Wy).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Br.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function BV(n){return`${n.options.appId}-${n.name}`}var Bc=new nl("@firebase/app-check");function qy(n,e){return el()?VV(n,e).catch(t=>{Bc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function J0(){return K0().enabled}function X0(){return x(this,null,function*(){let n=K0();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var UV={error:"UNKNOWN_ERROR"};function $V(n){return MI.encodeString(JSON.stringify(n),!1)}function Ky(n,e=!1,t=!1){return x(this,null,function*(){let r=n.app;Q0(r);let i=yn(r),o=i.token,s;if(o&&!Uc(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Uc(l)?o=l:yield qy(r,void 0))}if(!e&&o&&Uc(o))return{token:o.token};let a=!1;if(J0())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=Z0(Y0(r,yield X0()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield qy(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Bc.warn(l.message):t&&Bc.error(l),zy(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield yn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Bc.warn(l.message):t&&Bc.error(l),s=l}let u;return o?s?Uc(o)?u={token:o.token,internalError:s}:u=zy(s):(u={token:o.token},i.token=o,yield qy(r,o)):u=zy(s),a&&GV(r,u),u})}function HV(n){return x(this,null,function*(){let e=n.app;Q0(e);let{provider:t}=yn(e);if(J0()){let r=yield X0(),{token:i}=yield Z0(Y0(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function qV(n,e,t,r){let{app:i}=n,o=yn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Uc(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),G0(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>G0(n))}function eS(n,e){let t=yn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function G0(n){let{app:e}=n,t=yn(e),r=t.tokenRefresher;r||(r=zV(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function zV(n){let{app:e}=n;return new Gy(()=>x(this,null,function*(){let t=yn(e),r;if(t.token?r=yield Ky(n,!0):r=yield Ky(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=yn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},z0.RETRIAL_MIN_WAIT,z0.RETRIAL_MAX_WAIT)}function GV(n,e){let t=yn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Uc(n){return n.expireTimeMillis-Date.now()>0}function zy(n){return{token:$V(UV),error:n}}var Qy=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=yn(this.app);for(let t of e)eS(this.app,t.next);return Promise.resolve()}};function WV(n,e){return new Qy(n,e)}function KV(n){return{getToken:e=>Ky(n,e),getLimitedUseToken:()=>HV(n),addTokenListener:e=>qV(n,"INTERNAL",e),removeTokenListener:e=>eS(n.app,e)}}var QV="@firebase/app-check",ZV="0.8.13";var YV="app-check",W0="app-check-internal";function JV(){Sa(new gi(YV,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return WV(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(W0).initialize()})),Sa(new gi(W0,n=>{let e=n.getProvider("app-check").getImmediate();return KV(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ar(QV,ZV)}JV();var XV="app-check";var us=class{constructor(){return H0(XV)}};var ej=["localhost","0.0.0.0","127.0.0.1"],q6=typeof window<"u"&&ej.includes(window.location.hostname);var tj="firebase",nj="11.6.0";Ht.registerVersion(tj,nj,"app-compat");var rj=["ngOnDestroy"],rS=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(rj.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(f=>{let p=f?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var of=class{constructor(e){return e}},ls=new z("angularfire2.app.options"),ds=new z("angularfire2.app.name");function $c(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Ht.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ht.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;ij("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new of(s)}var ij=(n,...e)=>{lc()&&typeof console<"u"&&console[n](...e)},oj={provide:of,useFactory:$c,deps:[ls,he,[new Xg,ds]]},iS=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:ls,useValue:t},{provide:ds,useValue:r}]}}constructor(t){Ht.registerVersion("angularfire",nf.full,"core"),Ht.registerVersion("angularfire",nf.full,"app-compat"),Ht.registerVersion("angular",Db.full,t.toString())}static \u0275fac=function(r){return new(r||n)(F(rn))};static \u0275mod=Dt({type:n});static \u0275inj=It({providers:[oj]})}return n})();function sf(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return sj(i,s)||(nS("error",`${e} was already initialized on the ${t} Firebase App with different settings.${aj?" You may need to reload as Firebase is not HMR aware.":""}`),nS("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function sj(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var aj=typeof module<"u"&&!!module.hot,nS=(n,...e)=>{lc()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Zy=new z("angularfire2.auth.use-emulator"),Yy=new z("angularfire2.auth.settings"),Jy=new z("angularfire2.auth.tenant-id"),Xy=new z("angularfire2.auth.langugage-code"),ev=new z("angularfire2.auth.use-device-language"),tv=new z("angularfire.auth.persistence"),nv=(n,e,t,r,i,o,s,a)=>sf(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,f]of Object.entries(s))u.settings[l]=f;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),oS=(()=>{class n{injector=O(Ke);authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,f,p,m,y){let b=new Ve,A=Y(void 0).pipe(Sn(s.outsideAngular),ze(()=>o.runOutsideAngular(()=>import("./chunk-N4IJLZBM.js"))),W(()=>$c(t,o,r)),W(N=>nv(N,o,a,l,f,p,u,m)),Al({bufferSize:1,refCount:!1}));if(Vr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Y(null);else{A.pipe(ln()).subscribe();let N=A.pipe(ze(V=>V.getRedirectResult().then(J=>J,()=>null)),Nt(this.injector),Al({bufferSize:1,refCount:!1})),H=A.pipe(ze(V=>new de(J=>({unsubscribe:o.runOutsideAngular(()=>V.onAuthStateChanged(te=>J.next(te),te=>J.error(te),()=>J.complete()))})))),K=A.pipe(ze(V=>new de(J=>({unsubscribe:o.runOutsideAngular(()=>V.onIdTokenChanged(te=>J.next(te),te=>J.error(te),()=>J.complete()))}))));this.authState=N.pipe(Rl(H),Zn(s.outsideAngular),Sn(s.insideAngular)),this.user=N.pipe(Rl(K),Zn(s.outsideAngular),Sn(s.insideAngular)),this.idToken=this.user.pipe(ze(V=>V?we(V.getIdToken()):Y(null))),this.idTokenResult=this.user.pipe(ze(V=>V?we(V.getIdTokenResult()):Y(null))),this.credential=og(N,b,this.authState.pipe(ct(V=>!V))).pipe(W(V=>V?.user?V:null),Zn(s.outsideAngular),Sn(s.insideAngular))}return rS(this,A,o,{spy:{apply:(N,H,K)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&K.then(V=>b.next(V))}}})}static \u0275fac=function(r){return new(r||n)(F(ls),F(ds,8),F(rn),F(he),F(jc),F(Zy,8),F(Yy,8),F(Jy,8),F(Xy,8),F(ev,8),F(tv,8),F(us,8))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var sS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aS={};var fr,rv;(function(){var n;function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(I,D,C){for(var _=Array(arguments.length-2),zn=2;zn<arguments.length;zn++)_[zn-2]=arguments[zn];return v.prototype[D].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)I[D]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(D=0;16>D;++D)I[D]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],D=E.g[2];var C=E.g[3],_=v+(C^w&(D^C))+I[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=C+(D^v&(w^D))+I[1]+3905402710&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(w^C&(v^w))+I[2]+606105819&4294967295,D=C+(_<<17&4294967295|_>>>15),_=w+(v^D&(C^v))+I[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(C^w&(D^C))+I[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=C+(D^v&(w^D))+I[5]+1200080426&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(w^C&(v^w))+I[6]+2821735955&4294967295,D=C+(_<<17&4294967295|_>>>15),_=w+(v^D&(C^v))+I[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(C^w&(D^C))+I[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=C+(D^v&(w^D))+I[9]+2336552879&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(w^C&(v^w))+I[10]+4294925233&4294967295,D=C+(_<<17&4294967295|_>>>15),_=w+(v^D&(C^v))+I[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(C^w&(D^C))+I[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=C+(D^v&(w^D))+I[13]+4254626195&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(w^C&(v^w))+I[14]+2792965006&4294967295,D=C+(_<<17&4294967295|_>>>15),_=w+(v^D&(C^v))+I[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(D^C&(w^D))+I[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=C+(w^D&(v^w))+I[6]+3225465664&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(C^v))+I[11]+643717713&4294967295,D=C+(_<<14&4294967295|_>>>18),_=w+(C^v&(D^C))+I[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^C&(w^D))+I[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=C+(w^D&(v^w))+I[10]+38016083&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(C^v))+I[15]+3634488961&4294967295,D=C+(_<<14&4294967295|_>>>18),_=w+(C^v&(D^C))+I[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^C&(w^D))+I[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=C+(w^D&(v^w))+I[14]+3275163606&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(C^v))+I[3]+4107603335&4294967295,D=C+(_<<14&4294967295|_>>>18),_=w+(C^v&(D^C))+I[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^C&(w^D))+I[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=C+(w^D&(v^w))+I[2]+4243563512&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(C^v))+I[7]+1735328473&4294967295,D=C+(_<<14&4294967295|_>>>18),_=w+(C^v&(D^C))+I[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(w^D^C)+I[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=C+(v^w^D)+I[8]+2272392833&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^w)+I[11]+1839030562&4294967295,D=C+(_<<16&4294967295|_>>>16),_=w+(D^C^v)+I[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^C)+I[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=C+(v^w^D)+I[4]+1272893353&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^w)+I[7]+4139469664&4294967295,D=C+(_<<16&4294967295|_>>>16),_=w+(D^C^v)+I[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^C)+I[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=C+(v^w^D)+I[0]+3936430074&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^w)+I[3]+3572445317&4294967295,D=C+(_<<16&4294967295|_>>>16),_=w+(D^C^v)+I[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^C)+I[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=C+(v^w^D)+I[12]+3873151461&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^w)+I[15]+530742520&4294967295,D=C+(_<<16&4294967295|_>>>16),_=w+(D^C^v)+I[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(D^(w|~C))+I[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=C+(w^(v|~D))+I[7]+1126891415&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~w))+I[14]+2878612391&4294967295,D=C+(_<<15&4294967295|_>>>17),_=w+(C^(D|~v))+I[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~C))+I[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=C+(w^(v|~D))+I[3]+2399980690&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~w))+I[10]+4293915773&4294967295,D=C+(_<<15&4294967295|_>>>17),_=w+(C^(D|~v))+I[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~C))+I[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=C+(w^(v|~D))+I[15]+4264355552&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~w))+I[6]+2734768916&4294967295,D=C+(_<<15&4294967295|_>>>17),_=w+(C^(D|~v))+I[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~C))+I[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=C+(w^(v|~D))+I[11]+3174756917&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~w))+I[2]+718787259&4294967295,D=C+(_<<15&4294967295|_>>>17),_=w+(C^(D|~v))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+C&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,I=this.B,D=this.h,C=0;C<v;){if(D==0)for(;C<=w;)i(this,E,C),C+=this.blockSize;if(typeof E=="string"){for(;C<v;)if(I[D++]=E.charCodeAt(C++),D==this.blockSize){i(this,I),D=0;break}}else for(;C<v;)if(I[D++]=E[C++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)E[w++]=this.g[v]>>>I&255;return E};function o(E,v){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function s(E,v){this.h=v;for(var w=[],I=!0,D=E.length-1;0<=D;D--){var C=E[D]|0;I&&C==v||(w[D]=C,I=!1)}this.g=w}var a={};function u(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return N(l(-E));for(var v=[],w=1,I=0;E>=w;I++)v[I]=E/w|0,w*=4294967296;return new s(v,0)}function f(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return N(f(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),I=p,D=0;D<E.length;D+=8){var C=Math.min(8,E.length-D),_=parseInt(E.substring(D,D+C),v);8>C?(C=l(Math.pow(v,C)),I=I.j(C).add(l(_))):(I=I.j(w),I=I.add(l(_)))}return I}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(A(this))return-N(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);E+=(0<=I?I:4294967296+I)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(b(this))return"0";if(A(this))return"-"+N(this).toString(E);for(var v=l(Math.pow(E,6)),w=this,I="";;){var D=J(w,v).g;w=H(w,D.j(v));var C=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=D,b(w))return C+I;for(;6>C.length;)C="0"+C;I=C+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function b(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function A(E){return E.h==-1}n.l=function(E){return E=H(this,E),A(E)?-1:b(E)?0:1};function N(E){for(var v=E.g.length,w=[],I=0;I<v;I++)w[I]=~E.g[I];return new s(w,~E.h).add(m)}n.abs=function(){return A(this)?N(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0,D=0;D<=v;D++){var C=I+(this.i(D)&65535)+(E.i(D)&65535),_=(C>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);I=_>>>16,C&=65535,_&=65535,w[D]=_<<16|C}return new s(w,w[w.length-1]&-2147483648?-1:0)};function H(E,v){return E.add(N(v))}n.j=function(E){if(b(this)||b(E))return p;if(A(this))return A(E)?N(this).j(N(E)):N(N(this).j(E));if(A(E))return N(this.j(N(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<E.g.length;D++){var C=this.i(I)>>>16,_=this.i(I)&65535,zn=E.i(D)>>>16,aa=E.i(D)&65535;w[2*I+2*D]+=_*aa,K(w,2*I+2*D),w[2*I+2*D+1]+=C*aa,K(w,2*I+2*D+1),w[2*I+2*D+1]+=_*zn,K(w,2*I+2*D+1),w[2*I+2*D+2]+=C*zn,K(w,2*I+2*D+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new s(w,0)};function K(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function V(E,v){this.g=E,this.h=v}function J(E,v){if(b(v))throw Error("division by zero");if(b(E))return new V(p,p);if(A(E))return v=J(N(E),v),new V(N(v.g),N(v.h));if(A(v))return v=J(E,N(v)),new V(N(v.g),v.h);if(30<E.g.length){if(A(E)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,I=v;0>=I.l(E);)w=te(w),I=te(I);var D=ne(w,1),C=ne(I,1);for(I=ne(I,2),w=ne(w,2);!b(I);){var _=C.add(I);0>=_.l(E)&&(D=D.add(w),C=_),I=ne(I,1),w=ne(w,1)}return v=H(E,D.j(v)),new V(D,v)}for(D=p;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),C=l(w),_=C.j(v);A(_)||0<_.l(E);)w-=I,C=l(w),_=C.j(v);b(C)&&(C=m),D=D.add(C),E=H(E,_)}return new V(D,E)}n.A=function(E){return J(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&E.i(I);return new s(w,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|E.i(I);return new s(w,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^E.i(I);return new s(w,this.h^E.h)};function te(E){for(var v=E.g.length+1,w=[],I=0;I<v;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new s(w,E.h)}function ne(E,v){var w=v>>5;v%=32;for(var I=E.g.length-w,D=[],C=0;C<I;C++)D[C]=0<v?E.i(C+w)>>>v|E.i(C+w+1)<<32-v:E.i(C+w);return new s(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,rv=aS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,fr=aS.Integer=s}).apply(typeof sS<"u"?sS:typeof self<"u"?self:typeof window<"u"?window:{});var af=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hr={};var iv,uj,fs,ov,Hc,cf,sv,av,cv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,h){return c==Array.prototype||c==Object.prototype||(c[d]=h.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof af=="object"&&af];for(var d=0;d<c.length;++d){var h=c[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var h=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var T=c[g];if(!(T in h))break e;h=h[T]}c=c[c.length-1],g=h[c],d=d(g),d!=g&&d!=null&&e(h,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var h=0,g=!1,T={next:function(){if(!g&&h<c.length){var M=h++;return{value:d(M,c[M]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,h){return h})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function f(c,d,h){return c.call.apply(c.bind,arguments)}function p(c,d,h){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function m(c,d,h){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function y(c,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function h(){}h.prototype=d.prototype,c.aa=d.prototype,c.prototype=new h,c.prototype.constructor=c,c.Qb=function(g,T,M){for(var j=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)j[Me-2]=arguments[Me];return d.prototype[T].apply(g,j)}}function A(c){let d=c.length;if(0<d){let h=Array(d);for(let g=0;g<d;g++)h[g]=c[g];return h}return[]}function N(c,d){for(let h=1;h<arguments.length;h++){let g=arguments[h];if(u(g)){let T=c.length||0,M=g.length||0;c.length=T+M;for(let j=0;j<M;j++)c[T+j]=g[j]}else c.push(g)}}class H{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function K(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function J(c){return J[" "](c),c}J[" "]=function(){};var te=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function ne(c,d,h){for(let g in c)d.call(h,c[g],g,c)}function E(c,d){for(let h in c)d.call(void 0,c[h],h,c)}function v(c){let d={};for(let h in c)d[h]=c[h];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let h,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(h in g)c[h]=g[h];for(let M=0;M<w.length;M++)h=w[M],Object.prototype.hasOwnProperty.call(g,h)&&(c[h]=g[h])}}function D(c){var d=1;c=c.split(":");let h=[];for(;0<d&&c.length;)h.push(c.shift()),d--;return c.length&&h.push(c.join(":")),h}function C(c){a.setTimeout(()=>{throw c},0)}function _(){var c=ap;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class zn{constructor(){this.h=this.g=null}add(d,h){let g=aa.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var aa=new H(()=>new hx,c=>c.reset());class hx{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let ca,ua=!1,ap=new zn,bE=()=>{let c=a.Promise.resolve(void 0);ca=()=>{c.then(px)}};var px=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(h){C(h)}var d=aa;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}ua=!1};function Tr(){this.s=this.s,this.C=this.C}Tr.prototype.s=!1,Tr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Tr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function yt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}yt.prototype.h=function(){this.defaultPrevented=!0};var gx=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let h=()=>{};a.addEventListener("test",h,d),a.removeEventListener("test",h,d)}catch{}return c}();function la(c,d){if(yt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var h=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(te){e:{try{J(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else h=="mouseover"?d=c.fromElement:h=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:mx[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&la.aa.h.call(this)}}b(la,yt);var mx={2:"touch",3:"pen",4:"mouse"};la.prototype.h=function(){la.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var da="closure_listenable_"+(1e6*Math.random()|0),yx=0;function vx(c,d,h,g,T){this.listener=c,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=T,this.key=++yx,this.da=this.fa=!1}function Fu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Lu(c){this.src=c,this.g={},this.h=0}Lu.prototype.add=function(c,d,h,g,T){var M=c.toString();c=this.g[M],c||(c=this.g[M]=[],this.h++);var j=up(c,d,g,T);return-1<j?(d=c[j],h||(d.fa=!1)):(d=new vx(d,this.src,M,!!g,T),d.fa=h,c.push(d)),d};function cp(c,d){var h=d.type;if(h in c.g){var g=c.g[h],T=Array.prototype.indexOf.call(g,d,void 0),M;(M=0<=T)&&Array.prototype.splice.call(g,T,1),M&&(Fu(d),c.g[h].length==0&&(delete c.g[h],c.h--))}}function up(c,d,h,g){for(var T=0;T<c.length;++T){var M=c[T];if(!M.da&&M.listener==d&&M.capture==!!h&&M.ha==g)return T}return-1}var lp="closure_lm_"+(1e6*Math.random()|0),dp={};function SE(c,d,h,g,T){if(g&&g.once)return RE(c,d,h,g,T);if(Array.isArray(d)){for(var M=0;M<d.length;M++)SE(c,d[M],h,g,T);return null}return h=gp(h),c&&c[da]?c.K(d,h,l(g)?!!g.capture:!!g,T):AE(c,d,h,!1,g,T)}function AE(c,d,h,g,T,M){if(!d)throw Error("Invalid event type");var j=l(T)?!!T.capture:!!T,Me=hp(c);if(Me||(c[lp]=Me=new Lu(c)),h=Me.add(d,h,g,j,M),h.proxy)return h;if(g=_x(),h.proxy=g,g.src=c,g.listener=h,c.addEventListener)gx||(T=j),T===void 0&&(T=!1),c.addEventListener(d.toString(),g,T);else if(c.attachEvent)c.attachEvent(xE(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function _x(){function c(h){return d.call(c.src,c.listener,h)}let d=wx;return c}function RE(c,d,h,g,T){if(Array.isArray(d)){for(var M=0;M<d.length;M++)RE(c,d[M],h,g,T);return null}return h=gp(h),c&&c[da]?c.L(d,h,l(g)?!!g.capture:!!g,T):AE(c,d,h,!0,g,T)}function ME(c,d,h,g,T){if(Array.isArray(d))for(var M=0;M<d.length;M++)ME(c,d[M],h,g,T);else g=l(g)?!!g.capture:!!g,h=gp(h),c&&c[da]?(c=c.i,d=String(d).toString(),d in c.g&&(M=c.g[d],h=up(M,h,g,T),-1<h&&(Fu(M[h]),Array.prototype.splice.call(M,h,1),M.length==0&&(delete c.g[d],c.h--)))):c&&(c=hp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=up(d,h,g,T)),(h=-1<c?d[c]:null)&&fp(h))}function fp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[da])cp(d.i,c);else{var h=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(h,g,c.capture):d.detachEvent?d.detachEvent(xE(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=hp(d))?(cp(h,c),h.h==0&&(h.src=null,d[lp]=null)):Fu(c)}}}function xE(c){return c in dp?dp[c]:dp[c]="on"+c}function wx(c,d){if(c.da)c=!0;else{d=new la(d,this);var h=c.listener,g=c.ha||c.src;c.fa&&fp(c),c=h.call(g,d)}return c}function hp(c){return c=c[lp],c instanceof Lu?c:null}var pp="__closure_events_fn_"+(1e9*Math.random()>>>0);function gp(c){return typeof c=="function"?c:(c[pp]||(c[pp]=function(d){return c.handleEvent(d)}),c[pp])}function vt(){Tr.call(this),this.i=new Lu(this),this.M=this,this.F=null}b(vt,Tr),vt.prototype[da]=!0,vt.prototype.removeEventListener=function(c,d,h,g){ME(this,c,d,h,g)};function St(c,d){var h,g=c.F;if(g)for(h=[];g;g=g.F)h.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new yt(d,c);else if(d instanceof yt)d.target=d.target||c;else{var T=d;d=new yt(g,c),I(d,T)}if(T=!0,h)for(var M=h.length-1;0<=M;M--){var j=d.g=h[M];T=Vu(j,g,!0,d)&&T}if(j=d.g=c,T=Vu(j,g,!0,d)&&T,T=Vu(j,g,!1,d)&&T,h)for(M=0;M<h.length;M++)j=d.g=h[M],T=Vu(j,g,!1,d)&&T}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var h=c.g[d],g=0;g<h.length;g++)Fu(h[g]);delete c.g[d],c.h--}}this.F=null},vt.prototype.K=function(c,d,h,g){return this.i.add(String(c),d,!1,h,g)},vt.prototype.L=function(c,d,h,g){return this.i.add(String(c),d,!0,h,g)};function Vu(c,d,h,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,M=0;M<d.length;++M){var j=d[M];if(j&&!j.da&&j.capture==h){var Me=j.listener,ft=j.ha||j.src;j.fa&&cp(c.i,j),T=Me.call(ft,g)!==!1&&T}}return T&&!g.defaultPrevented}function NE(c,d,h){if(typeof c=="function")h&&(c=m(c,h));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function kE(c){c.g=NE(()=>{c.g=null,c.i&&(c.i=!1,kE(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class Ex extends Tr{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:kE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fa(c){Tr.call(this),this.h=c,this.g={}}b(fa,Tr);var PE=[];function OE(c){ne(c.g,function(d,h){this.g.hasOwnProperty(h)&&fp(d)},c),c.g={}}fa.prototype.N=function(){fa.aa.N.call(this),OE(this)},fa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mp=a.JSON.stringify,Ix=a.JSON.parse,Dx=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function yp(){}yp.prototype.h=null;function FE(c){return c.h||(c.h=c.i())}function LE(){}var ha={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vp(){yt.call(this,"d")}b(vp,yt);function _p(){yt.call(this,"c")}b(_p,yt);var di={},VE=null;function ju(){return VE=VE||new vt}di.La="serverreachability";function jE(c){yt.call(this,di.La,c)}b(jE,yt);function pa(c){let d=ju();St(d,new jE(d))}di.STAT_EVENT="statevent";function BE(c,d){yt.call(this,di.STAT_EVENT,c),this.stat=d}b(BE,yt);function At(c){let d=ju();St(d,new BE(d,c))}di.Ma="timingevent";function UE(c,d){yt.call(this,di.Ma,c),this.size=d}b(UE,yt);function ga(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ma(){this.g=!0}ma.prototype.xa=function(){this.g=!1};function Tx(c,d,h,g,T,M){c.info(function(){if(c.g)if(M)for(var j="",Me=M.split("&"),ft=0;ft<Me.length;ft++){var _e=Me[ft].split("=");if(1<_e.length){var _t=_e[0];_e=_e[1];var wt=_t.split("_");j=2<=wt.length&&wt[1]=="type"?j+(_t+"="+_e+"&"):j+(_t+"=redacted&")}}else j=null;else j=M;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+h+`
`+j})}function Cx(c,d,h,g,T,M,j){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+h+`
`+M+" "+j})}function mo(c,d,h,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+Sx(c,h)+(g?" "+g:"")})}function bx(c,d){c.info(function(){return"TIMEOUT: "+d})}ma.prototype.info=function(){};function Sx(c,d){if(!c.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(c=0;c<h.length;c++)if(Array.isArray(h[c])){var g=h[c];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var M=T[0];if(M!="noop"&&M!="stop"&&M!="close")for(var j=1;j<T.length;j++)T[j]=""}}}}return mp(h)}catch{return d}}var Bu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$E={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wp;function Uu(){}b(Uu,yp),Uu.prototype.g=function(){return new XMLHttpRequest},Uu.prototype.i=function(){return{}},wp=new Uu;function Cr(c,d,h,g){this.j=c,this.i=d,this.l=h,this.R=g||1,this.U=new fa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new HE}function HE(){this.i=null,this.g="",this.h=!1}var qE={},Ep={};function Ip(c,d,h){c.L=1,c.v=zu(Gn(d)),c.m=h,c.P=!0,zE(c,null)}function zE(c,d){c.F=Date.now(),$u(c),c.A=Gn(c.v);var h=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),oI(h.i,"t",g),c.C=0,h=c.j.J,c.h=new HE,c.g=DI(c.j,h?d:null,!c.m),0<c.O&&(c.M=new Ex(m(c.Y,c,c.g),c.O)),d=c.U,h=c.g,g=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(PE[0]=T.toString()),T=PE);for(var M=0;M<T.length;M++){var j=SE(h,T[M],g||d.handleEvent,!1,d.h||d);if(!j)break;d.g[j.key]=j}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),pa(),Tx(c.i,c.u,c.A,c.l,c.R,c.m)}Cr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Wn(c)==3?d.j():this.Y(c)},Cr.prototype.Y=function(c){try{if(c==this.g)e:{let wt=Wn(this.g);var d=this.g.Ba();let _o=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||fI(this.g)))){this.J||wt!=4||d==7||(d==8||0>=_o?pa(3):pa(2)),Dp(this);var h=this.g.Z();this.X=h;t:if(GE(this)){var g=fI(this.g);c="";var T=g.length,M=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fi(this),ya(this);var j="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(M&&d==T-1)});g.length=0,this.h.g+=c,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=h==200,Cx(this.i,this.u,this.A,this.l,this.R,wt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Me,ft=this.g;if((Me=ft.g?ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(Me)){var _e=Me;break t}}_e=null}if(h=_e)mo(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tp(this,h);else{this.o=!1,this.s=3,At(12),fi(this),ya(this);break e}}if(this.P){h=!0;let cn;for(;!this.J&&this.C<j.length;)if(cn=Ax(this,j),cn==Ep){wt==4&&(this.s=4,At(14),h=!1),mo(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==qE){this.s=4,At(15),mo(this.i,this.l,j,"[Invalid Chunk]"),h=!1;break}else mo(this.i,this.l,cn,null),Tp(this,cn);if(GE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||j.length!=0||this.h.h||(this.s=1,At(16),h=!1),this.o=this.o&&h,!h)mo(this.i,this.l,j,"[Invalid Chunked Response]"),fi(this),ya(this);else if(0<j.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Mp(_t),_t.M=!0,At(11))}}else mo(this.i,this.l,j,null),Tp(this,j);wt==4&&fi(this),this.o&&!this.J&&(wt==4?_I(this.j,this):(this.o=!1,$u(this)))}else zx(this.g),h==400&&0<j.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),fi(this),ya(this)}}}catch{}finally{}};function GE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Ax(c,d){var h=c.C,g=d.indexOf(`
`,h);return g==-1?Ep:(h=Number(d.substring(h,g)),isNaN(h)?qE:(g+=1,g+h>d.length?Ep:(d=d.slice(g,g+h),c.C=g+h,d)))}Cr.prototype.cancel=function(){this.J=!0,fi(this)};function $u(c){c.S=Date.now()+c.I,WE(c,c.I)}function WE(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ga(m(c.ba,c),d)}function Dp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Cr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(bx(this.i,this.A),this.L!=2&&(pa(),At(17)),fi(this),this.s=2,ya(this)):WE(this,this.S-c)};function ya(c){c.j.G==0||c.J||_I(c.j,c)}function fi(c){Dp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,OE(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Tp(c,d){try{var h=c.j;if(h.G!=0&&(h.g==c||Cp(h.h,c))){if(!c.K&&Cp(h.h,c)&&h.G==3){try{var g=h.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<c.F)Zu(h),Ku(h);else break e;Rp(h),At(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=ga(m(h.Za,h),6e3));if(1>=ZE(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else pi(h,11)}else if((c.K||h.g==c)&&Zu(h),!K(d))for(T=h.Da.g.parse(d),d=0;d<T.length;d++){let _e=T[d];if(h.T=_e[0],_e=_e[1],h.G==2)if(_e[0]=="c"){h.K=_e[1],h.ia=_e[2];let _t=_e[3];_t!=null&&(h.la=_t,h.j.info("VER="+h.la));let wt=_e[4];wt!=null&&(h.Aa=wt,h.j.info("SVER="+h.Aa));let _o=_e[5];_o!=null&&typeof _o=="number"&&0<_o&&(g=1.5*_o,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let cn=c.g;if(cn){let Ju=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ju){var M=g.h;M.g||Ju.indexOf("spdy")==-1&&Ju.indexOf("quic")==-1&&Ju.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(bp(M,M.h),M.h=null))}if(g.D){let xp=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;xp&&(g.ya=xp,ke(g.I,g.D,xp))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-c.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var j=c;if(g.qa=II(g,g.J?g.ia:null,g.W),j.K){YE(g.h,j);var Me=j,ft=g.L;ft&&(Me.I=ft),Me.B&&(Dp(Me),$u(Me)),g.g=j}else yI(g);0<h.i.length&&Qu(h)}else _e[0]!="stop"&&_e[0]!="close"||pi(h,7);else h.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?pi(h,7):Ap(h):_e[0]!="noop"&&h.l&&h.l.ta(_e),h.v=0)}}pa(4)}catch{}}var Rx=class{constructor(c,d){this.g=c,this.map=d}};function KE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function QE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ZE(c){return c.h?1:c.g?c.g.size:0}function Cp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function bp(c,d){c.g?c.g.add(d):c.h=d}function YE(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}KE.prototype.cancel=function(){if(this.i=JE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function JE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let h of c.g.values())d=d.concat(h.D);return d}return A(c.i)}function Mx(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],h=c.length,g=0;g<h;g++)d.push(c[g]);return d}d=[],h=0;for(g in c)d[h++]=c[g];return d}function xx(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var h=0;h<c;h++)d.push(h);return d}d=[],h=0;for(let g in c)d[h++]=g;return d}}}function XE(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var h=xx(c),g=Mx(c),T=g.length,M=0;M<T;M++)d.call(void 0,g[M],h&&h[M],c)}var eI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nx(c,d){if(c){c=c.split("&");for(var h=0;h<c.length;h++){var g=c[h].indexOf("="),T=null;if(0<=g){var M=c[h].substring(0,g);T=c[h].substring(g+1)}else M=c[h];d(M,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function hi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof hi){this.h=c.h,Hu(this,c.j),this.o=c.o,this.g=c.g,qu(this,c.s),this.l=c.l;var d=c.i,h=new wa;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),tI(this,h),this.m=c.m}else c&&(d=String(c).match(eI))?(this.h=!1,Hu(this,d[1]||"",!0),this.o=va(d[2]||""),this.g=va(d[3]||"",!0),qu(this,d[4]),this.l=va(d[5]||"",!0),tI(this,d[6]||"",!0),this.m=va(d[7]||"")):(this.h=!1,this.i=new wa(null,this.h))}hi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(_a(d,nI,!0),":");var h=this.g;return(h||d=="file")&&(c.push("//"),(d=this.o)&&c.push(_a(d,nI,!0),"@"),c.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&c.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&c.push("/"),c.push(_a(h,h.charAt(0)=="/"?Ox:Px,!0))),(h=this.i.toString())&&c.push("?",h),(h=this.m)&&c.push("#",_a(h,Lx)),c.join("")};function Gn(c){return new hi(c)}function Hu(c,d,h){c.j=h?va(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function qu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function tI(c,d,h){d instanceof wa?(c.i=d,Vx(c.i,c.h)):(h||(d=_a(d,Fx)),c.i=new wa(d,c.h))}function ke(c,d,h){c.i.set(d,h)}function zu(c){return ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function va(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function _a(c,d,h){return typeof c=="string"?(c=encodeURI(c).replace(d,kx),h&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function kx(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var nI=/[#\/\?@]/g,Px=/[#\?:]/g,Ox=/[#\?]/g,Fx=/[#\?@]/g,Lx=/#/g;function wa(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function br(c){c.g||(c.g=new Map,c.h=0,c.i&&Nx(c.i,function(d,h){c.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}n=wa.prototype,n.add=function(c,d){br(this),this.i=null,c=yo(this,c);var h=this.g.get(c);return h||this.g.set(c,h=[]),h.push(d),this.h+=1,this};function rI(c,d){br(c),d=yo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function iI(c,d){return br(c),d=yo(c,d),c.g.has(d)}n.forEach=function(c,d){br(this),this.g.forEach(function(h,g){h.forEach(function(T){c.call(d,T,g,this)},this)},this)},n.na=function(){br(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let g=0;g<d.length;g++){let T=c[g];for(let M=0;M<T.length;M++)h.push(d[g])}return h},n.V=function(c){br(this);let d=[];if(typeof c=="string")iI(this,c)&&(d=d.concat(this.g.get(yo(this,c))));else{c=Array.from(this.g.values());for(let h=0;h<c.length;h++)d=d.concat(c[h])}return d},n.set=function(c,d){return br(this),this.i=null,c=yo(this,c),iI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function oI(c,d,h){rI(c,d),0<h.length&&(c.i=null,c.g.set(yo(c,d),A(h)),c.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var g=d[h];let M=encodeURIComponent(String(g)),j=this.V(g);for(g=0;g<j.length;g++){var T=M;j[g]!==""&&(T+="="+encodeURIComponent(String(j[g]))),c.push(T)}}return this.i=c.join("&")};function yo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Vx(c,d){d&&!c.j&&(br(c),c.i=null,c.g.forEach(function(h,g){var T=g.toLowerCase();g!=T&&(rI(this,g),oI(this,T,h))},c)),c.j=d}function jx(c,d){let h=new ma;if(a.Image){let g=new Image;g.onload=y(Sr,h,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Sr,h,"TestLoadImage: error",!1,d,g),g.onabort=y(Sr,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Sr,h,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function Bx(c,d){let h=new ma,g=new AbortController,T=setTimeout(()=>{g.abort(),Sr(h,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(M=>{clearTimeout(T),M.ok?Sr(h,"TestPingServer: ok",!0,d):Sr(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Sr(h,"TestPingServer: error",!1,d)})}function Sr(c,d,h,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(h)}catch{}}function Ux(){this.g=new Dx}function $x(c,d,h){let g=h||"";try{XE(c,function(T,M){let j=T;l(T)&&(j=mp(T)),d.push(g+M+"="+encodeURIComponent(j))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function Ea(c){this.l=c.Ub||null,this.j=c.eb||!1}b(Ea,yp),Ea.prototype.g=function(){return new Gu(this.l,this.j)},Ea.prototype.i=function(c){return function(){return c}}({});function Gu(c,d){vt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Gu,vt),n=Gu.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Da(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ia(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Da(this)),this.g&&(this.readyState=3,Da(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function sI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ia(this):Da(this),this.readyState==3&&sI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ia(this))},n.Qa=function(c){this.g&&(this.response=c,Ia(this))},n.ga=function(){this.g&&Ia(this)};function Ia(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Da(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,c.push(h[0]+": "+h[1]),h=d.next();return c.join(`\r
`)};function Da(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Gu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function aI(c){let d="";return ne(c,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function Sp(c,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=aI(h),typeof c=="string"?h!=null&&encodeURIComponent(String(h)):ke(c,d,h))}function He(c){vt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(He,vt);var Hx=/^https?$/i,qx=["POST","PUT"];n=He.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wp.g(),this.v=this.o?FE(this.o):FE(wp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(M){cI(this,M);return}if(c=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)h.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let M of g.keys())h.set(M,g.get(M));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(M=>M.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qx,d,void 0))||g||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,j]of h)this.g.setRequestHeader(M,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{dI(this),this.u=!0,this.g.send(c),this.u=!1}catch(M){cI(this,M)}};function cI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,uI(c),Wu(c)}function uI(c){c.A||(c.A=!0,St(c,"complete"),St(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,St(this,"complete"),St(this,"abort"),Wu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wu(this,!0)),He.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?lI(this):this.bb())},n.bb=function(){lI(this)};function lI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Wn(c)!=4||c.Z()!=2)){if(c.u&&Wn(c)==4)NE(c.Ea,0,c);else if(St(c,"readystatechange"),Wn(c)==4){c.h=!1;try{let j=c.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=j===0){var T=String(c.D).match(eI)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),g=!Hx.test(T?T.toLowerCase():"")}h=g}if(h)St(c,"complete"),St(c,"success");else{c.m=6;try{var M=2<Wn(c)?c.g.statusText:""}catch{M=""}c.l=M+" ["+c.Z()+"]",uI(c)}}finally{Wu(c)}}}}function Wu(c,d){if(c.g){dI(c);let h=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||St(c,"ready");try{h.onreadystatechange=g}catch{}}}function dI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Wn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Ix(d)}};function fI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function zx(c){let d={};c=(c.g&&2<=Wn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(K(c[g]))continue;var h=D(c[g]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let M=d[T]||[];d[T]=M,M.push(h)}E(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ta(c,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[c]||d}function hI(c){this.Aa=0,this.i=[],this.j=new ma,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ta("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ta("baseRetryDelayMs",5e3,c),this.cb=Ta("retryDelaySeedMs",1e4,c),this.Wa=Ta("forwardChannelMaxRetries",2,c),this.wa=Ta("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new KE(c&&c.concurrentRequestLimit),this.Da=new Ux,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=hI.prototype,n.la=8,n.G=1,n.connect=function(c,d,h,g){At(0),this.W=c,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=II(this,null,this.W),Qu(this)};function Ap(c){if(pI(c),c.G==3){var d=c.U++,h=Gn(c.I);if(ke(h,"SID",c.K),ke(h,"RID",d),ke(h,"TYPE","terminate"),Ca(c,h),d=new Cr(c,c.j,d),d.L=2,d.v=zu(Gn(h)),h=!1,a.navigator&&a.navigator.sendBeacon)try{h=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&a.Image&&(new Image().src=d.v,h=!0),h||(d.g=DI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),$u(d)}EI(c)}function Ku(c){c.g&&(Mp(c),c.g.cancel(),c.g=null)}function pI(c){Ku(c),c.u&&(a.clearTimeout(c.u),c.u=null),Zu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Qu(c){if(!QE(c.h)&&!c.s){c.s=!0;var d=c.Ga;ca||bE(),ua||(ca(),ua=!0),ap.add(d,c),c.B=0}}function Gx(c,d){return ZE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ga(m(c.Ga,c,d),wI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new Cr(this,this.j,c),M=this.o;if(this.S&&(M?(M=v(M),I(M,this.S)):M=this.S),this.m!==null||this.O||(T.H=M,M=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=mI(this,T,d),h=Gn(this.I),ke(h,"RID",c),ke(h,"CVER",22),this.D&&ke(h,"X-HTTP-Session-Id",this.D),Ca(this,h),M&&(this.O?d="headers="+encodeURIComponent(String(aI(M)))+"&"+d:this.m&&Sp(h,this.m,M)),bp(this.h,T),this.Ua&&ke(h,"TYPE","init"),this.P?(ke(h,"$req",d),ke(h,"SID","null"),T.T=!0,Ip(T,h,null)):Ip(T,h,d),this.G=2}}else this.G==3&&(c?gI(this,c):this.i.length==0||QE(this.h)||gI(this))};function gI(c,d){var h;d?h=d.l:h=c.U++;let g=Gn(c.I);ke(g,"SID",c.K),ke(g,"RID",h),ke(g,"AID",c.T),Ca(c,g),c.m&&c.o&&Sp(g,c.m,c.o),h=new Cr(c,c.j,h,c.B+1),c.m===null&&(h.H=c.o),d&&(c.i=d.D.concat(c.i)),d=mI(c,h,1e3),h.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),bp(c.h,h),Ip(h,g,d)}function Ca(c,d){c.H&&ne(c.H,function(h,g){ke(d,g,h)}),c.l&&XE({},function(h,g){ke(d,g,h)})}function mI(c,d,h){h=Math.min(c.i.length,h);var g=c.l?m(c.l.Na,c.l,c):null;e:{var T=c.i;let M=-1;for(;;){let j=["count="+h];M==-1?0<h?(M=T[0].g,j.push("ofs="+M)):M=0:j.push("ofs="+M);let Me=!0;for(let ft=0;ft<h;ft++){let _e=T[ft].g,_t=T[ft].map;if(_e-=M,0>_e)M=Math.max(0,T[ft].g-100),Me=!1;else try{$x(_t,j,"req"+_e+"_")}catch{g&&g(_t)}}if(Me){g=j.join("&");break e}}}return c=c.i.splice(0,h),d.D=c,g}function yI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ca||bE(),ua||(ca(),ua=!0),ap.add(d,c),c.v=0}}function Rp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ga(m(c.Fa,c),wI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,vI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ga(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),Ku(this),vI(this))};function Mp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function vI(c){c.g=new Cr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Gn(c.qa);ke(d,"RID","rpc"),ke(d,"SID",c.K),ke(d,"AID",c.T),ke(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&ke(d,"TO",c.ja),ke(d,"TYPE","xmlhttp"),Ca(c,d),c.m&&c.o&&Sp(d,c.m,c.o),c.L&&(c.g.I=c.L);var h=c.g;c=c.ia,h.L=1,h.v=zu(Gn(d)),h.m=null,h.P=!0,zE(h,c)}n.Za=function(){this.C!=null&&(this.C=null,Ku(this),Rp(this),At(19))};function Zu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function _I(c,d){var h=null;if(c.g==d){Zu(c),Mp(c),c.g=null;var g=2}else if(Cp(c.h,d))h=d.D,YE(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;g=ju(),St(g,new UE(g,h)),Qu(c)}else yI(c);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&Gx(c,d)||g==2&&Rp(c)))switch(h&&0<h.length&&(d=c.h,d.i=d.i.concat(h)),T){case 1:pi(c,5);break;case 4:pi(c,10);break;case 3:pi(c,6);break;default:pi(c,2)}}}function wI(c,d){let h=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(h*=2),h*d}function pi(c,d){if(c.j.info("Error code "+d),d==2){var h=m(c.fb,c),g=c.Xa;let T=!g;g=new hi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Hu(g,"https"),zu(g),T?jx(g.toString(),h):Bx(g.toString(),h)}else At(2);c.G=0,c.l&&c.l.sa(d),EI(c),pI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function EI(c){if(c.G=0,c.ka=[],c.l){let d=JE(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function II(c,d,h){var g=h instanceof hi?Gn(h):new hi(h);if(g.g!="")d&&(g.g=d+"."+g.g),qu(g,g.s);else{var T=a.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var M=new hi(null);g&&Hu(M,g),d&&(M.g=d),T&&qu(M,T),h&&(M.l=h),g=M}return h=c.D,d=c.ya,h&&d&&ke(g,h,d),ke(g,"VER",c.la),Ca(c,g),g}function DI(c,d,h){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new He(new Ea({eb:h})):new He(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function TI(){}n=TI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Yu(){}Yu.prototype.g=function(c,d){return new $t(c,d)};function $t(c,d){vt.call(this),this.g=new hI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!K(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!K(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new vo(this)}b($t,vt),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){Ap(this.g)},$t.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var h={};h.__data__=c,c=h}else this.u&&(h={},h.__data__=mp(c),c=h);d.i.push(new Rx(d.Ya++,c)),d.G==3&&Qu(d)},$t.prototype.N=function(){this.g.l=null,delete this.j,Ap(this.g),delete this.g,$t.aa.N.call(this)};function CI(c){vp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let h in d){c=h;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(CI,vp);function bI(){_p.call(this),this.status=1}b(bI,_p);function vo(c){this.g=c}b(vo,TI),vo.prototype.ua=function(){St(this.g,"a")},vo.prototype.ta=function(c){St(this.g,new CI(c))},vo.prototype.sa=function(c){St(this.g,new bI)},vo.prototype.ra=function(){St(this.g,"b")},Yu.prototype.createWebChannel=Yu.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,cv=hr.createWebChannelTransport=function(){return new Yu},av=hr.getStatEventTarget=function(){return ju()},sv=hr.Event=di,cf=hr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bu.NO_ERROR=0,Bu.TIMEOUT=8,Bu.HTTP_ERROR=6,Hc=hr.ErrorCode=Bu,$E.COMPLETE="complete",ov=hr.EventType=$E,LE.EventType=ha,ha.OPEN="a",ha.CLOSE="b",ha.ERROR="c",ha.MESSAGE="d",vt.prototype.listen=vt.prototype.K,fs=hr.WebChannel=LE,uj=hr.FetchXmlHttpFactory=Ea,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,iv=hr.XhrIo=He}).apply(typeof af<"u"?af:typeof self<"u"?self:typeof window<"u"?window:{});var cS="@firebase/firestore",uS="4.7.10";var nt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nt.UNAUTHENTICATED=new nt(null),nt.GOOGLE_CREDENTIALS=new nt("google-credentials-uid"),nt.FIRST_PARTY=new nt("first-party-uid"),nt.MOCK_USER=new nt("mock-user");var Ys="11.5.0";var Qr=new nl("@firebase/firestore");function _s(){return Qr.logLevel}function IA(n){Qr.setLogLevel(n)}function P(n,...e){if(Qr.logLevel<=Cn.DEBUG){let t=e.map(Iw);Qr.debug(`Firestore (${Ys}): ${n}`,...t)}}function Qe(n,...e){if(Qr.logLevel<=Cn.ERROR){let t=e.map(Iw);Qr.error(`Firestore (${Ys}): ${n}`,...t)}}function _n(n,...e){if(Qr.logLevel<=Cn.WARN){let t=e.map(Iw);Qr.warn(`Firestore (${Ys}): ${n}`,...t)}}function Iw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function q(n="Unexpected state"){let e=`FIRESTORE (${Ys}) INTERNAL ASSERTION FAILED: `+n;throw Qe(e),new Error(e)}function G(n,e){n||q()}function DA(n,e){n||q()}function U(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends NI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var st=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ef=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},mv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(nt.UNAUTHENTICATED))}shutdown(){}},yv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},vv=class{constructor(e){this.t=e,this.currentUser=nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){G(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new st;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new st,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>x(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new st)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(G(typeof r.accessToken=="string"),new Ef(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return G(e===null||typeof e=="string"),new nt(e)}},_v=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=nt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},wv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new _v(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},If=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ev=class{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,PI(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){G(this.o===void 0);let r=o=>{o.error!=null&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,P("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new If(this.V));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(G(typeof t.token=="string"),this.R=t.token,new If(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function lj(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function Dw(){return new TextEncoder}var Df=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=lj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function X(n,e){return n<e?-1:n>e?1:0}function Iv(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return X(r,i);{let o=Dw(),s=dj(o.encode(lS(n,t)),o.encode(lS(e,t)));return s!==0?s:X(r,i)}}t+=r>65535?2:1}return X(n.length,e.length)}function lS(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function dj(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return X(n[t],e[t]);return X(n.length,e.length)}function As(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function TA(n){return n+"\0"}var dS=-62135596800,fS=1e6,Ue=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*fS);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<dS)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fS}_compareTo(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-dS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Z=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ue(0,0))}static max(){return new n(new Ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var hS="__name__",Tf=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&q(),r===void 0?r=e.length-t:r>e.length-t&&q(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return X(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Iv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fr.fromString(e.substring(4,e.length-2))}},ye=class n extends Tf{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},fj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ze=class n extends Tf{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return fj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hS}static keyField(){return new n([hS])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(ye.fromString(e))}static fromName(e){return new n(ye.fromString(e).popFirst(5))}static empty(){return new n(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ye(e.slice()))}};var Rs=-1,Ms=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Dv(n){return n.fields.find(e=>e.kind===2)}function Bi(n){return n.fields.filter(e=>e.kind!==2)}Ms.UNKNOWN_ID=-1;var Cs=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var nu=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,sn.min())}};function CA(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new Ue(t+1,0):new Ue(t,r));return new sn(i,$.empty(),e)}function bA(n){return new sn(n.readTime,n.key,Rs)}var sn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Z.min(),$.empty(),Rs)}static max(){return new n(Z.max(),$.empty(),Rs)}};function Tw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:X(n.largestBatchId,e.largestBatchId))}var SA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Cf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function si(n){return x(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==SA)throw n;P("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(f=>{s[l]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Zt="SimpleDb",bf=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Ki(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new st,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new Ki(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{let i=Cw(r.target.error);this.m.reject(new Ki(e,i))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(P(Zt,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Cv(t)}},Zr=class n{static delete(e){return P(Zt,"Removing database:",e),$i(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!el())return!1;if(n.v())return!0;let e=ba(),t=n.C(e),r=0<t&&t<10,i=AA(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,n.C(ba())===12.2&&Qe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}N(e){return x(this,null,function*(){return this.db||(P(Zt,"Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Ki(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Ki(e,s))},i.onupgradeneeded=o=>{P(Zt,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.O.B(s,i.transaction,o.oldVersion,this.version).next(()=>{P(Zt,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db})}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return x(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.N(e);let a=bf.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.S(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.p,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(P(Zt,"Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function AA(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Tv=class{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return $i(this.q.delete())}},Ki=class extends k{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function ai(n){return n.name==="IndexedDbTransactionError"}var Cv=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(P(Zt,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(P(Zt,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),$i(r)}add(e){return P(Zt,"ADD",this.store.name,e,e),$i(this.store.add(e))}get(e){return $i(this.store.get(e)).next(t=>(t===void 0&&(t=null),P(Zt,"GET",this.store.name,e,t),t))}delete(e){return P(Zt,"DELETE",this.store.name,e),$i(this.store.delete(e))}count(){return P(Zt,"COUNT",this.store.name),$i(this.store.count())}G(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.j(o,(a,u)=>{s.push(u)}).next(()=>s)}}H(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}J(e,t){P(Zt,"DELETE ALL",this.store.name);let r=this.options(e,t);r.Y=!1;let i=this.cursor(r);return this.j(i,(o,s,a)=>a.delete())}Z(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.j(i,t)}X(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=Cw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}j(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Tv(a),l=t(a.primaryKey,a.value,u);if(l instanceof S){let f=l.catch(p=>(u.done(),S.reject(p)));r.push(f)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function $i(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Cw(r.target.error);t(i)}})}var pS=!1;function Cw(n){let e=Zr.C(ba());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pS||(pS=!0,setTimeout(()=>{throw r},0)),r}}return n}var Zc="IndexBackfiller",bv=class{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){P(Zc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>x(this,null,function*(){this.task=null;try{let t=yield this.ee.ne();P(Zc,`Documents written: ${t}`)}catch(t){ai(t)?P(Zc,"Ignoring IndexedDB error during index backfill: ",t):yield si(t)}yield this.te(6e4)}))}},Sv=class{constructor(e,t){this.localStore=e,this.persistence=t}ne(e=50){return x(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))})}re(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return P(Zc,`Processing collection: ${s}`),this.ie(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.se(i,o)).next(a=>(P(Zc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}se(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=bA(o);Tw(s,r)>0&&(r=s)}),new sn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Yt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this._e&&this._e(t),t}}n.ae=-1;return n})(),Wr=-1;function Su(n){return n==null}function ru(n){return n===0&&1/n==-1/0}function RA(n){return typeof n=="number"&&Number.isInteger(n)&&!ru(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Sf="";function bt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=gS(e)),e=hj(n.get(t),e);return gS(e)}function hj(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case Sf:t+="";break;default:t+=o}}return t}function gS(n){return n+Sf+""}function Fn(n){let e=n.length;if(G(e>=2),e===2)return G(n.charAt(0)===Sf&&n.charAt(1)===""),ye.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf(Sf,o);switch((s<0||s>t)&&q(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:q()}o=s+2}return new ye(r)}var Ui="remoteDocuments",Au="owner",hs="owner",iu="mutationQueues",pj="userId",vn="mutations",mS="batchId",Gi="userMutationsIndex",yS=["userId","batchId"];function pf(n,e){return[n,bt(e)]}function MA(n,e,t){return[n,bt(e),t]}var gj={},xs="documentMutations",Af="remoteDocumentsV14",mj=["prefixPath","collectionGroup","readTime","documentId"],gf="documentKeyIndex",yj=["prefixPath","collectionGroup","documentId"],xA="collectionGroupIndex",vj=["collectionGroup","readTime","prefixPath","documentId"],ou="remoteDocumentGlobal",Av="remoteDocumentGlobalKey",Ns="targets",NA="queryTargetsIndex",_j=["canonicalId","targetId"],ks="targetDocuments",wj=["targetId","path"],bw="documentTargetsIndex",Ej=["path","targetId"],Rf="targetGlobalKey",Qi="targetGlobal",su="collectionParents",Ij=["collectionId","parent"],Ps="clientMetadata",Dj="clientId",Ch="bundles",Tj="bundleId",bh="namedQueries",Cj="name",Sw="indexConfiguration",bj="indexId",Rv="collectionGroupIndex",Sj="collectionGroup",Mf="indexState",Aj=["indexId","uid"],kA="sequenceNumberIndex",Rj=["uid","sequenceNumber"],xf="indexEntries",Mj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],PA="documentKeyIndex",xj=["indexId","uid","orderedDocumentKey"],Sh="documentOverlays",Nj=["userId","collectionPath","documentId"],Mv="collectionPathOverlayIndex",kj=["userId","collectionPath","largestBatchId"],OA="collectionGroupOverlayIndex",Pj=["userId","collectionGroup","largestBatchId"],Aw="globals",Oj="name",FA=[iu,vn,xs,Ui,Ns,Au,Qi,ks,Ps,ou,su,Ch,bh],Fj=[...FA,Sh],LA=[iu,vn,xs,Af,Ns,Au,Qi,ks,Ps,ou,su,Ch,bh,Sh],VA=LA,Rw=[...VA,Sw,Mf,xf],Lj=Rw,Vj=[...Rw,Aw];var au=class extends Cf{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}};function at(n,e){let t=U(n);return Zr.M(t.ue,e)}function vS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ci(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Pe=class n{constructor(e,t){this.comparator=e,this.root=t||Vn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ts(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ts(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ts(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ts(this.root,e,this.comparator,!0)}},Ts=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Vn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw q();let e=this.left.check();if(e!==this.right.check())throw q();return e+(this.isRed()?0:1)}};Vn.EMPTY=null,Vn.RED=!0,Vn.BLACK=!1;Vn.EMPTY=new class{constructor(){this.size=0}get key(){throw q()}get value(){throw q()}get color(){throw q()}get left(){throw q()}get right(){throw q()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Vn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Re=class n{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nf(this.data.getIterator())}getIteratorFrom(e){return new Nf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Nf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ps(n){return n.hasNext()?n.getNext():void 0}var Jt=class n{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new n([])}unionWith(e){let t=new Re(Ze.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return As(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var kf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function BA(){return typeof atob<"u"}var Je=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new kf("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return X(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Je.EMPTY_BYTE_STRING=new Je("");var jj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mr(n){if(G(!!n),typeof n=="string"){let e=0,t=jj.exec(n);if(G(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(n.seconds),nanos:Fe(n.nanos)}}function Fe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function yr(n){return typeof n=="string"?Je.fromBase64String(n):Je.fromUint8Array(n)}var UA="server_timestamp",$A="__type__",HA="__previous_value__",qA="__local_write_time__";function Ah(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[$A])===null||t===void 0?void 0:t.stringValue)===UA}function Rh(n){let e=n.mapValue.fields[HA];return Ah(e)?Rh(e):e}function cu(n){let e=mr(n.mapValue.fields[qA].timestampValue);return new Ue(e.seconds,e.nanos)}var xv=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Nv="(default)",Yr=class n{constructor(e,t){this.projectId=e,this.database=t||Nv}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Nv}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Mw="__type__",zA="__max__",zr={mapValue:{fields:{__type__:{stringValue:zA}}}},xw="__vector__",Os="value",mf={nullValue:"NULL_VALUE"};function Jr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ah(n)?4:GA(n)?9007199254740991:Mh(n)?10:11:q()}function Un(n,e){if(n===e)return!0;let t=Jr(n);if(t!==Jr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cu(n).isEqual(cu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=mr(i.timestampValue),a=mr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return yr(i.bytesValue).isEqual(yr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Fe(i.geoPointValue.latitude)===Fe(o.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Fe(i.integerValue)===Fe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Fe(i.doubleValue),a=Fe(o.doubleValue);return s===a?ru(s)===ru(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return As(n.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(vS(s)!==vS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Un(s[u],a[u])))return!1;return!0}(n,e);default:return q()}}function uu(n,e){return(n.values||[]).find(t=>Un(t,e))!==void 0}function Xr(n,e){if(n===e)return 0;let t=Jr(n),r=Jr(e);if(t!==r)return X(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return X(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Fe(o.integerValue||o.doubleValue),u=Fe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return _S(n.timestampValue,e.timestampValue);case 4:return _S(cu(n),cu(e));case 5:return Iv(n.stringValue,e.stringValue);case 6:return function(o,s){let a=yr(o),u=yr(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let f=X(a[l],u[l]);if(f!==0)return f}return X(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=X(Fe(o.latitude),Fe(s.latitude));return a!==0?a:X(Fe(o.longitude),Fe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return wS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,f;let p=o.fields||{},m=s.fields||{},y=(a=p[Os])===null||a===void 0?void 0:a.arrayValue,b=(u=m[Os])===null||u===void 0?void 0:u.arrayValue,A=X(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((f=b?.values)===null||f===void 0?void 0:f.length)||0);return A!==0?A:wS(y,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===zr.mapValue&&s===zr.mapValue)return 0;if(o===zr.mapValue)return 1;if(s===zr.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let m=Iv(u[p],f[p]);if(m!==0)return m;let y=Xr(a[u[p]],l[f[p]]);if(y!==0)return y}return X(u.length,f.length)}(n.mapValue,e.mapValue);default:throw q()}}function _S(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return X(n,e);let t=mr(n),r=mr(e),i=X(t.seconds,r.seconds);return i!==0?i:X(t.nanos,r.nanos)}function wS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Xr(t[i],r[i]);if(o)return o}return X(t.length,r.length)}function Fs(n){return kv(n)}function kv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=mr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return yr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=kv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${kv(t.fields[s])}`;return i+"}"}(n.mapValue):q()}function yf(n){switch(Jr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Rh(n);return e?16+yf(e):16;case 5:return 2*n.stringValue.length;case 6:return yr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+yf(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return ci(r.fields,(o,s)=>{i+=o.length+yf(s)}),i}(n.mapValue);default:throw q()}}function Zi(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Pv(n){return!!n&&"integerValue"in n}function lu(n){return!!n&&"arrayValue"in n}function ES(n){return!!n&&"nullValue"in n}function IS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vf(n){return!!n&&"mapValue"in n}function Mh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Mw])===null||t===void 0?void 0:t.stringValue)===xw}function Yc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ci(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Yc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function GA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===zA}var WA={mapValue:{fields:{[Mw]:{stringValue:xw},[Os]:{arrayValue:{}}}}};function Bj(n){return"nullValue"in n?mf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Zi(Yr.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Mh(n)?WA:{mapValue:{}}:q()}function Uj(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Zi(Yr.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?WA:"mapValue"in n?Mh(n)?{mapValue:{}}:zr:q()}function DS(n,e){let t=Xr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function TS(n,e){let t=Xr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Ct=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yc(t)}setAll(e){let t=Ze.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Yc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());vf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];vf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ci(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Yc(this.value))}};function KA(n){let e=[];return ci(n.fields,(t,r)=>{let i=new Ze([t]);if(vf(r)){let o=KA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Jt(e)}var rt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Z.min(),Z.min(),Z.min(),Ct.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Z.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Z.min(),Z.min(),Ct.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Z.min(),Z.min(),Ct.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var $n=class{constructor(e,t){this.position=e,this.inclusive=t}};function CS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=Xr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function bS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Un(n.position[t],e.position[t]))return!1;return!0}var Yi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function $j(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Pf=class{},fe=class n extends Pf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Lv(e,t,r):t==="array-contains"?new Bv(e,r):t==="in"?new Of(e,r):t==="not-in"?new Uv(e,r):t==="array-contains-any"?new $v(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Vv(e,r):new jv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Xr(t,this.value)):t!==null&&Jr(this.value)===Jr(t)&&this.matchesComparison(Xr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Se=class n extends Pf{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new n(e,t)}matches(e){return Ls(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}};function Ls(n){return n.op==="and"}function Ov(n){return n.op==="or"}function Nw(n){return QA(n)&&Ls(n)}function QA(n){for(let e of n.filters)if(e instanceof Se)return!1;return!0}function Fv(n){if(n instanceof fe)return n.field.canonicalString()+n.op.toString()+Fs(n.value);if(Nw(n))return n.filters.map(e=>Fv(e)).join(",");{let e=n.filters.map(t=>Fv(t)).join(",");return`${n.op}(${e})`}}function ZA(n,e){return n instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&Un(r.value,i.value)}(n,e):n instanceof Se?function(r,i){return i instanceof Se&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&ZA(s,i.filters[a]),!0):!1}(n,e):void q()}function YA(n,e){let t=n.filters.concat(e);return Se.create(t,n.op)}function JA(n){return n instanceof fe?function(t){return`${t.field.canonicalString()} ${t.op} ${Fs(t.value)}`}(n):n instanceof Se?function(t){return t.op.toString()+" {"+t.getFilters().map(JA).join(" ,")+"}"}(n):"Filter"}var Lv=class extends fe{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},Vv=class extends fe{constructor(e,t){super(e,"in",t),this.keys=XA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},jv=class extends fe{constructor(e,t){super(e,"not-in",t),this.keys=XA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function XA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var Bv=class extends fe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return lu(t)&&uu(t.arrayValue,this.value)}},Of=class extends fe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&uu(this.value.arrayValue,t)}},Uv=class extends fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!uu(this.value.arrayValue,t)}},$v=class extends fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!lu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>uu(this.value.arrayValue,r))}};var Hv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.le=null}};function qv(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Hv(n,e,t,r,i,o,s)}function Ji(n){let e=U(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Fv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Su(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fs(r)).join(",")),e.le=t}return e.le}function Ru(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$j(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ZA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!bS(n.startAt,e.startAt)&&bS(n.endAt,e.endAt)}function Ff(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Lf(n,e){return n.filters.filter(t=>t instanceof fe&&t.field.isEqual(e))}function SS(n,e,t){let r=mf,i=!0;for(let o of Lf(n,e)){let s=mf,a=!0;switch(o.op){case"<":case"<=":s=Bj(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=mf}DS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];DS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function AS(n,e,t){let r=zr,i=!0;for(let o of Lf(n,e)){let s=zr,a=!0;switch(o.op){case">=":case">":s=Uj(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=zr}TS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];TS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var wn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}};function eR(n,e,t,r,i,o,s,a){return new wn(n,e,t,r,i,o,s,a)}function Js(n){return new wn(n)}function RS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function kw(n){return n.collectionGroup!==null}function bs(n){let e=U(n);if(e.he===null){e.he=[];let t=new Set;for(let o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Re(Ze.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new Yi(o,r))}),t.has(Ze.keyField().canonicalString())||e.he.push(new Yi(Ze.keyField(),r))}return e.he}function kt(n){let e=U(n);return e.Pe||(e.Pe=Hj(e,bs(n))),e.Pe}function Hj(n,e){if(n.limitType==="F")return qv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Yi(i.field,o)});let t=n.endAt?new $n(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new $n(n.startAt.position,n.startAt.inclusive):null;return qv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function zv(n,e){let t=n.filters.concat([e]);return new wn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Vf(n,e,t){return new wn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Mu(n,e){return Ru(kt(n),kt(e))&&n.limitType===e.limitType}function tR(n){return`${Ji(kt(n))}|lt:${n.limitType}`}function ws(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>JA(i)).join(", ")}]`),Su(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Fs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Fs(i)).join(",")),`Target(${r})`}(kt(n))}; limitType=${n.limitType})`}function xu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of bs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=CS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,bs(r),i)||r.endAt&&!function(s,a,u){let l=CS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,bs(r),i))}(n,e)}function nR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rR(n){return(e,t)=>{let r=!1;for(let i of bs(n)){let o=qj(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function qj(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Xr(u,l):q()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return q()}}var En=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ci(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return jA(this.inner)}size(){return this.innerSize}};var zj=new Pe($.comparator);function Bt(){return zj}var iR=new Pe($.comparator);function Kc(...n){let e=iR;for(let t of n)e=e.insert(t.key,t);return e}function oR(n){let e=iR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ln(){return Jc()}function sR(){return Jc()}function Jc(){return new En(n=>n.toString(),(n,e)=>n.isEqual(e))}var Gj=new Pe($.comparator),Wj=new Re($.comparator);function ie(...n){let e=Wj;for(let t of n)e=e.add(t);return e}var Kj=new Re(X);function Pw(){return Kj}function Ow(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ru(e)?"-0":e}}function aR(n){return{integerValue:""+n}}function cR(n,e){return RA(e)?aR(e):Ow(n,e)}var Vs=class{constructor(){this._=void 0}};function Qj(n,e,t){return n instanceof ei?function(i,o){let s={fields:{[$A]:{stringValue:UA},[qA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Ah(o)&&(o=Rh(o)),o&&(s.fields[HA]=o),{mapValue:s}}(t,e):n instanceof vr?lR(n,e):n instanceof _r?dR(n,e):function(i,o){let s=uR(i,o),a=MS(s)+MS(i.Ie);return Pv(s)&&Pv(i.Ie)?aR(a):Ow(i.serializer,a)}(n,e)}function Zj(n,e,t){return n instanceof vr?lR(n,e):n instanceof _r?dR(n,e):t}function uR(n,e){return n instanceof ti?function(r){return Pv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var ei=class extends Vs{},vr=class extends Vs{constructor(e){super(),this.elements=e}};function lR(n,e){let t=fR(e);for(let r of n.elements)t.some(i=>Un(i,r))||t.push(r);return{arrayValue:{values:t}}}var _r=class extends Vs{constructor(e){super(),this.elements=e}};function dR(n,e){let t=fR(e);for(let r of n.elements)t=t.filter(i=>!Un(i,r));return{arrayValue:{values:t}}}var ti=class extends Vs{constructor(e,t){super(),this.serializer=e,this.Ie=t}};function MS(n){return Fe(n.integerValue||n.doubleValue)}function fR(n){return lu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Xi=class{constructor(e,t){this.field=e,this.transform=t}};function Yj(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof vr&&i instanceof vr||r instanceof _r&&i instanceof _r?As(r.elements,i.elements,Un):r instanceof ti&&i instanceof ti?Un(r.Ie,i.Ie):r instanceof ei&&i instanceof ei}(n.transform,e.transform)}var Gv=class{constructor(e,t){this.version=e,this.transformResults=t}},Ge=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function _f(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var js=class{};function hR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ri(n.key,Ge.none()):new ni(n.key,n.data,Ge.none());{let t=n.data,r=Ct.empty(),i=new Re(Ze.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new In(n.key,r,new Jt(i.toArray()),Ge.none())}}function Jj(n,e,t){n instanceof ni?function(i,o,s){let a=i.value.clone(),u=NS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof In?function(i,o,s){if(!_f(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=NS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(pR(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Xc(n,e,t,r){return n instanceof ni?function(o,s,a,u){if(!_f(o.precondition,s))return a;let l=o.value.clone(),f=kS(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof In?function(o,s,a,u){if(!_f(o.precondition,s))return a;let l=kS(o.fieldTransforms,u,s),f=s.data;return f.setAll(pR(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return _f(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function Xj(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=uR(r.transform,i||null);o!=null&&(t===null&&(t=Ct.empty()),t.set(r.field,o))}return t||null}function xS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&As(r,i,(o,s)=>Yj(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ni=class extends js{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},In=class extends js{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function pR(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function NS(n,e,t){let r=new Map;G(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Zj(s,a,t[i]))}return r}function kS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,Qj(o,s,e))}return r}var ri=class extends js{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},du=class extends js{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var fu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Jj(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Xc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Xc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=sR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=hR(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ie())}isEqual(e){return this.batchId===e.batchId&&As(this.mutations,e.mutations,(t,r)=>xS(t,r))&&As(this.baseMutations,e.baseMutations,(t,r)=>xS(t,r))}},Wv=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){G(e.mutations.length===r.length);let i=function(){return Gj}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var hu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Kv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var et,me;function gR(n){switch(n){case R.OK:return q();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0;default:return q()}}function mR(n){if(n===void 0)return Qe("GRPC error has no .code"),R.UNKNOWN;switch(n){case et.OK:return R.OK;case et.CANCELLED:return R.CANCELLED;case et.UNKNOWN:return R.UNKNOWN;case et.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case et.INTERNAL:return R.INTERNAL;case et.UNAVAILABLE:return R.UNAVAILABLE;case et.UNAUTHENTICATED:return R.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case et.NOT_FOUND:return R.NOT_FOUND;case et.ALREADY_EXISTS:return R.ALREADY_EXISTS;case et.PERMISSION_DENIED:return R.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case et.ABORTED:return R.ABORTED;case et.OUT_OF_RANGE:return R.OUT_OF_RANGE;case et.UNIMPLEMENTED:return R.UNIMPLEMENTED;case et.DATA_LOSS:return R.DATA_LOSS;default:return q()}}(me=et||(et={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";var PS=null;var e2=new fr([4294967295,4294967295],0);function OS(n){let e=Dw().encode(n),t=new rv;return t.update(e),new Uint8Array(t.digest())}function FS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new fr([t,r],0),new fr([i,o],0)]}var Qv=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Wi(`Invalid padding: ${t}`);if(r<0)throw new Wi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Wi(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=fr.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(fr.fromNumber(r)));return i.compare(e2)===1&&(i=new fr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;let t=OS(e),[r,i]=FS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ae(r,i,o);if(!this.Re(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ee===0)return;let t=OS(e),[r,i]=FS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ae(r,i,o);this.Ve(s)}}Ve(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Wi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var pu=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,gu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Z.min(),i,new Pe(X),Bt(),ie())}},gu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ie(),ie(),ie())}};var Ss=class{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}},jf=class{constructor(e,t){this.targetId=e,this.ge=t}},Bf=class{constructor(e,t,r=Je.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Uf=class{constructor(){this.pe=0,this.ye=LS(),this.we=Je.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=ie(),t=ie(),r=ie();return this.ye.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:q()}}),new gu(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=LS()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,G(this.pe>=0)}Le(){this.be=!0,this.Se=!0}},Zv=class{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Bt(),this.$e=uf(),this.Ue=uf(),this.Ke=new Pe(X)}We(e){for(let t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(let t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{let r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:q()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){let t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){let o=i.target;if(Ff(o))if(r===0){let s=new $(o.path);this.ze(t,s,rt.newNoDocument(s,Z.min()))}else G(r===1);else{let s=this.et(t);if(s!==r){let a=this.tt(e),u=a?this.nt(a,e,s):1;if(u!==0){this.Ye(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,l)}PS?.rt(function(f,p,m,y,b){var A,N,H,K,V,J;let te={localCacheCount:f,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},ne=p.unchangedNames;return ne&&(te.bloomFilter={applied:b===0,hashCount:(A=ne?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(K=(H=(N=ne?.bits)===null||N===void 0?void 0:N.bitmap)===null||H===void 0?void 0:H.length)!==null&&K!==void 0?K:0,padding:(J=(V=ne?.bits)===null||V===void 0?void 0:V.padding)!==null&&J!==void 0?J:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),te}(s,e.ge,this.ke.it(),a,u))}}}}tt(e){let t=e.ge.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=yr(r).toUint8Array()}catch(u){if(u instanceof kf)return _n("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Qv(s,i,o)}catch(u){return _n(u instanceof Wi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ee===0?null:a}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){let r=this.ke.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.ke.it(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,o,null),i++)}),i}ot(e){let t=new Map;this.qe.forEach((o,s)=>{let a=this.Xe(s);if(a){if(o.current&&Ff(a.target)){let u=new $(a.target.path);this._t(u).has(s)||this.ut(s,u)||this.ze(s,u,rt.newNoDocument(u,e))}o.ve&&(t.set(s,o.Fe()),o.Me())}});let r=ie();this.Ue.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Xe(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.Qe.forEach((o,s)=>s.setReadTime(e));let i=new pu(e,t,this.Ke,this.Qe,r);return this.Qe=Bt(),this.$e=uf(),this.Ue=uf(),this.Ke=new Pe(X),i}Ge(e,t){if(!this.Je(e))return;let r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;let i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){let t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Uf,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Re(X),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Re(X),this.$e=this.$e.insert(e,t)),t}Je(e){let t=this.Xe(e)!==null;return t||P("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){let t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Uf),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}};function uf(){return new Pe($.comparator)}function LS(){return new Pe($.comparator)}var t2={asc:"ASCENDING",desc:"DESCENDING"},n2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},r2={and:"AND",or:"OR"},Yv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Jv(n,e){return n.useProto3Json||Su(e)?e:{value:e}}function Bs(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function i2(n,e){return Bs(n,e.toTimestamp())}function Ye(n){return G(!!n),Z.fromTimestamp(function(t){let r=mr(t);return new Ue(r.seconds,r.nanos)}(n))}function Fw(n,e){return Xv(n,e).canonicalString()}function Xv(n,e){let t=function(i){return new ye(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function vR(n){let e=ye.fromString(n);return G(AR(e)),e}function mu(n,e){return Fw(n.databaseId,e.path)}function jn(n,e){let t=vR(e);if(t.get(1)!==n.databaseId.projectId)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(ER(t))}function _R(n,e){return Fw(n.databaseId,e)}function wR(n){let e=vR(n);return e.length===4?ye.emptyPath():ER(e)}function e_(n){return new ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ER(n){return G(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function VS(n,e,t){return{name:mu(n,e),fields:t.value.mapValue.fields}}function IR(n,e,t){let r=jn(n,e.name),i=Ye(e.updateTime),o=e.createTime?Ye(e.createTime):Z.min(),s=new Ct({mapValue:{fields:e.fields}}),a=rt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function o2(n,e){return"found"in e?function(r,i){G(!!i.found),i.found.name,i.found.updateTime;let o=jn(r,i.found.name),s=Ye(i.found.updateTime),a=i.found.createTime?Ye(i.found.createTime):Z.min(),u=new Ct({mapValue:{fields:i.found.fields}});return rt.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){G(!!i.missing),G(!!i.readTime);let o=jn(r,i.missing),s=Ye(i.readTime);return rt.newNoDocument(o,s)}(n,e):q()}function s2(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,f){return l.useProto3Json?(G(f===void 0||typeof f=="string"),Je.fromBase64String(f||"")):(G(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Je.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let f=l.code===void 0?R.UNKNOWN:mR(l.code);return new k(f,l.message||"")}(s);t=new Bf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=jn(n,r.document.name),o=Ye(r.document.updateTime),s=r.document.createTime?Ye(r.document.createTime):Z.min(),a=new Ct({mapValue:{fields:r.document.fields}}),u=rt.newFoundDocument(i,o,s,a),l=r.targetIds||[],f=r.removedTargetIds||[];t=new Ss(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=jn(n,r.document),o=r.readTime?Ye(r.readTime):Z.min(),s=rt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ss([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=jn(n,r.document),o=r.removedTargetIds||[];t=new Ss([],o,i,null)}else{if(!("filter"in e))return q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Kv(i,o),a=r.targetId;t=new jf(a,s)}}return t}function yu(n,e){let t;if(e instanceof ni)t={update:VS(n,e.key,e.value)};else if(e instanceof ri)t={delete:mu(n,e.key)};else if(e instanceof In)t={update:VS(n,e.key,e.data),updateMask:f2(e.fieldMask)};else{if(!(e instanceof du))return q();t={verify:mu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof ei)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _r)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ti)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw q()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:i2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:q()}(n,e.precondition)),t}function t_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Ge.updateTime(Ye(o.updateTime)):o.exists!==void 0?Ge.exists(o.exists):Ge.none()}(e.currentDocument):Ge.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)G(a.setToServerValue==="REQUEST_TIME"),u=new ei;else if("appendMissingElements"in a){let f=a.appendMissingElements.values||[];u=new vr(f)}else if("removeAllFromArray"in a){let f=a.removeAllFromArray.values||[];u=new _r(f)}else"increment"in a?u=new ti(s,a.increment):q();let l=Ze.fromServerFormat(a.fieldPath);return new Xi(l,u)}(n,i)):[];if(e.update){e.update.name;let i=jn(n,e.update.name),o=new Ct({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new Jt(l.map(f=>Ze.fromServerFormat(f)))}(e.updateMask);return new In(i,o,s,t,r)}return new ni(i,o,t,r)}if(e.delete){let i=jn(n,e.delete);return new ri(i,t)}if(e.verify){let i=jn(n,e.verify);return new du(i,t)}return q()}function a2(n,e){return n&&n.length>0?(G(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Ye(i.updateTime):Ye(o);return s.isEqual(Z.min())&&(s=Ye(o)),new Gv(s,i.transformResults||[])}(t,e))):[]}function DR(n,e){return{documents:[_R(n,e.path)]}}function TR(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=_R(n,i);let o=function(l){if(l.length!==0)return SR(Se.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(f=>function(m){return{field:Es(m.field),direction:u2(m.dir)}}(f))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Jv(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ht:t,parent:i}}function CR(n){let e=wR(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){G(r===1);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=function(p){let m=bR(p);return m instanceof Se&&Nw(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new Yi(Is(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Su(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new $n(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new $n(y,m)}(t.endAt)),eR(e,i,s,o,a,"F",u,l)}function c2(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bR(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Is(t.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Is(t.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Is(t.unaryFilter.field);return fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Is(t.unaryFilter.field);return fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return q()}}(n):n.fieldFilter!==void 0?function(t){return fe.create(Is(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return q()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Se.create(t.compositeFilter.filters.map(r=>bR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q()}}(t.compositeFilter.op))}(n):q()}function u2(n){return t2[n]}function l2(n){return n2[n]}function d2(n){return r2[n]}function Es(n){return{fieldPath:n.canonicalString()}}function Is(n){return Ze.fromServerFormat(n.fieldPath)}function SR(n){return n instanceof fe?function(t){if(t.op==="=="){if(IS(t.value))return{unaryFilter:{field:Es(t.field),op:"IS_NAN"}};if(ES(t.value))return{unaryFilter:{field:Es(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(IS(t.value))return{unaryFilter:{field:Es(t.field),op:"IS_NOT_NAN"}};if(ES(t.value))return{unaryFilter:{field:Es(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Es(t.field),op:l2(t.op),value:t.value}}}(n):n instanceof Se?function(t){let r=t.getFilters().map(i=>SR(i));return r.length===1?r[0]:{compositeFilter:{op:d2(t.op),filters:r}}}(n):q()}function f2(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function AR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Us=class n{constructor(e,t,r,i,o=Z.min(),s=Z.min(),a=Je.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var $f=class{constructor(e){this.Tt=e}};function h2(n,e){let t;if(e.document)t=IR(n.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=to(e.noDocument.readTime);t=rt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return q();{let r=$.fromSegments(e.unknownDocument.path),i=to(e.unknownDocument.version);t=rt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ue(i[0],i[1]);return Z.fromTimestamp(o)}(e.readTime)),t}function jS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Hf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:mu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Bs(o,s.version.toTimestamp()),createTime:Bs(o,s.createTime.toTimestamp())}}(n.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:eo(e.version)};else{if(!e.isUnknownDocument())return q();r.unknownDocument={path:t.path.toArray(),version:eo(e.version)}}return r}function Hf(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function eo(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function to(n){let e=new Ue(n.seconds,n.nanoseconds);return Z.fromTimestamp(e)}function Hi(n,e){let t=(e.baseMutations||[]).map(o=>t_(n.Tt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>t_(n.Tt,o)),i=Ue.fromMillis(e.localWriteTimeMs);return new fu(e.batchId,i,t,r)}function Qc(n){let e=to(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?to(n.lastLimboFreeSnapshotVersion):Z.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return G(o.documents.length===1),kt(Js(wR(o.documents[0])))}(n.query):function(o){return kt(CR(o))}(n.query),new Us(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Je.fromBase64String(n.resumeToken))}function RR(n,e){let t=eo(e.snapshotVersion),r=eo(e.lastLimboFreeSnapshotVersion),i;i=Ff(e.target)?DR(n.Tt,e.target):TR(n.Tt,e.target).ht;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ji(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Lw(n){let e=CR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Vf(e,e.limit,"L"):e}function uv(n,e){return new hu(e.largestBatchId,t_(n.Tt,e.overlayMutation))}function BS(n,e){let t=e.path.lastSegment();return[n,bt(e.path.popLast()),t]}function US(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:eo(r.readTime),documentKey:bt(r.documentKey.path),largestBatchId:r.largestBatchId}}var n_=class{getBundleMetadata(e,t){return $S(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:to(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return $S(e).put(function(i){return{bundleId:i.id,createTime:eo(Ye(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return HS(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:Lw(o.bundledQuery),readTime:to(o.readTime)}}(r)})}saveNamedQuery(e,t){return HS(e).put(function(i){return{name:i.name,readTime:eo(Ye(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function $S(n){return at(n,Ch)}function HS(n){return at(n,bh)}var qf=class n{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return qc(e).get(BS(this.userId,t)).next(r=>r?uv(this.serializer,r):null)}getOverlays(e,t){let r=Ln();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new hu(t,s);i.push(this.Et(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(bt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(qc(e).J(Mv,a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Ln(),o=bt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return qc(e).G(Mv,s).next(a=>{for(let u of a){let l=uv(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Ln(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qc(e).Z({index:OA,range:a},(u,l,f)=>{let p=uv(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):f.done()}).next(()=>o)}Et(e,t){return qc(e).put(function(i,o,s){let[a,u,l]=BS(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:yu(i.Tt,s.mutation)}}(this.serializer,this.userId,t))}};function qc(n){return at(n,Sh)}var r_=class{dt(e){return at(e,Aw)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Je.fromUint8Array(r):Je.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var pr=class{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(Fe(e.integerValue));else if("doubleValue"in e){let r=Fe(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),ru(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=mr(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(yr(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?GA(e)?this.ft(t,Number.MAX_SAFE_INTEGER):Mh(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):q()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){let r=e.fields||{};this.ft(t,55);for(let i of Object.keys(r))this.wt(i,t),this.Rt(r[i],t)}vt(e,t){var r,i;let o=e.fields||{};this.ft(t,53);let s=Os,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.ft(t,15),t.gt(Fe(a)),this.wt(s,t),this.Rt(o[s],t)}Ft(e,t){let r=e.values||[];this.ft(t,50);for(let i of r)this.Rt(i,t)}Dt(e,t){this.ft(t,37),$.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}};pr.xt=new pr;var gs=255;function p2(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function qS(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=p2(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var i_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{let i=t.codePointAt(0);this.Nt(240|i>>>18),this.Nt(128|63&i>>>12),this.Nt(128|63&i>>>6),this.Nt(128|63&i)}}this.Bt()}$t(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{let i=t.codePointAt(0);this.kt(240|i>>>18),this.kt(128|63&i>>>12),this.kt(128|63&i>>>6),this.kt(128|63&i)}}this.qt()}Ut(e){let t=this.Kt(e),r=qS(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Gt(e){let t=this.Kt(e),r=qS(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}zt(){this.jt(gs),this.jt(255)}Ht(){this.Jt(gs),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Nt(e){let t=255&e;t===0?(this.jt(0),this.jt(255)):t===gs?(this.jt(gs),this.jt(0)):this.jt(t)}kt(e){let t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===gs?(this.Jt(gs),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},o_=class{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}},s_=class{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}},qi=class{constructor(){this.Zt=new i_,this.Xt=new o_(this.Zt),this.en=new s_(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}};var zi=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}nn(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Ur(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=zS(n.arrayValue,e.arrayValue),t!==0?t:(t=zS(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function zS(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var zf=class{constructor(e){this.rn=new Re((t,r)=>Ze.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(let t of e.filters){let r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(G(e.collectionGroup===this.collectionId),this.an)return!1;let t=Dv(e);if(t!==void 0&&!this.cn(t))return!1;let r=Bi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.cn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.rn.size>0){let a=this.rn.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.ln(a,u)||!this.hn(this.sn[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.sn.length||!this.hn(this.sn[s++],a))return!1}return!0}Pn(){if(this.an)return null;let e=new Re(Ze.comparator),t=[];for(let r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Cs(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Cs(r.field,0))}for(let r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Cs(r.field,r.dir==="asc"?0:1)));return new Ms(Ms.UNKNOWN_ID,this.collectionId,t,nu.empty())}cn(e){for(let t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function MR(n){var e,t;if(G(n instanceof fe||n instanceof Se),n instanceof fe){if(n instanceof Of){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>fe.create(n.field,"==",o)))||[];return Se.create(i,"or")}return n}let r=n.filters.map(i=>MR(i));return Se.create(r,n.op)}function g2(n){if(n.getFilters().length===0)return[];let e=u_(MR(n));return G(xR(e)),a_(e)||c_(e)?[e]:e.getFilters()}function a_(n){return n instanceof fe}function c_(n){return n instanceof Se&&Nw(n)}function xR(n){return a_(n)||c_(n)||function(t){if(t instanceof Se&&Ov(t)){for(let r of t.getFilters())if(!a_(r)&&!c_(r))return!1;return!0}return!1}(n)}function u_(n){if(G(n instanceof fe||n instanceof Se),n instanceof fe)return n;if(n.filters.length===1)return u_(n.filters[0]);let e=n.filters.map(r=>u_(r)),t=Se.create(e,n.op);return t=Gf(t),xR(t)?t:(G(t instanceof Se),G(Ls(t)),G(t.filters.length>1),t.filters.reduce((r,i)=>Vw(r,i)))}function Vw(n,e){let t;return G(n instanceof fe||n instanceof Se),G(e instanceof fe||e instanceof Se),t=n instanceof fe?e instanceof fe?function(i,o){return Se.create([i,o],"and")}(n,e):GS(n,e):e instanceof fe?GS(e,n):function(i,o){if(G(i.filters.length>0&&o.filters.length>0),Ls(i)&&Ls(o))return YA(i,o.getFilters());let s=Ov(i)?i:o,a=Ov(i)?o:i,u=s.filters.map(l=>Vw(l,a));return Se.create(u,"or")}(n,e),Gf(t)}function GS(n,e){if(Ls(e))return YA(e,n.getFilters());{let t=e.filters.map(r=>Vw(n,r));return Se.create(t,"or")}}function Gf(n){if(G(n instanceof fe||n instanceof Se),n instanceof fe)return n;let e=n.getFilters();if(e.length===1)return Gf(e[0]);if(QA(n))return n;let t=e.map(i=>Gf(i)),r=[];return t.forEach(i=>{i instanceof fe?r.push(i):i instanceof Se&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Se.create(r,n.op)}var l_=class{constructor(){this.Tn=new vu}addToCollectionParentIndex(e,t){return this.Tn.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(sn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(sn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},vu=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Re(ye.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Re(ye.comparator)).toArray()}};var WS="IndexedDbIndexManager",lf=new Uint8Array(0),d_=class{constructor(e,t){this.databaseId=t,this.In=new vu,this.En=new En(r=>Ji(r),(r,i)=>Ru(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});let o={collectionId:r,parent:bt(i)};return KS(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[TA(t),""],!1,!0);return KS(e).G(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Fn(s.parent))}return r})}addFieldIndex(e,t){let r=zc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=ys(e);return o.next(a=>{s.put(US(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=zc(e),i=ys(e),o=ms(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=zc(e),r=ms(e),i=ys(e);return t.J().next(()=>r.J()).next(()=>i.J())}createTargetIndexes(e,t){return S.forEach(this.dn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new zf(r).Pn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=ms(e),i=!0,o=new Map;return S.forEach(this.dn(t),s=>this.An(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ie(),a=[];return S.forEach(o,(u,l)=>{P(WS,`Using index ${function(V){return`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map(J=>`${J.fieldPath}:${J.kind}`).join(",")}`}(u)} to execute ${Ji(t)}`);let f=function(V,J){let te=Dv(J);if(te===void 0)return null;for(let ne of Lf(V,te.fieldPath))switch(ne.op){case"array-contains-any":return ne.value.arrayValue.values||[];case"array-contains":return[ne.value]}return null}(l,u),p=function(V,J){let te=new Map;for(let ne of Bi(J))for(let E of Lf(V,ne.fieldPath))switch(E.op){case"==":case"in":te.set(ne.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return te.set(ne.fieldPath.canonicalString(),E.value),Array.from(te.values())}return null}(l,u),m=function(V,J){let te=[],ne=!0;for(let E of Bi(J)){let v=E.kind===0?SS(V,E.fieldPath,V.startAt):AS(V,E.fieldPath,V.startAt);te.push(v.value),ne&&(ne=v.inclusive)}return new $n(te,ne)}(l,u),y=function(V,J){let te=[],ne=!0;for(let E of Bi(J)){let v=E.kind===0?AS(V,E.fieldPath,V.endAt):SS(V,E.fieldPath,V.endAt);te.push(v.value),ne&&(ne=v.inclusive)}return new $n(te,ne)}(l,u),b=this.Rn(u,l,m),A=this.Rn(u,l,y),N=this.Vn(u,l,p),H=this.mn(u.indexId,f,b,m.inclusive,A,y.inclusive,N);return S.forEach(H,K=>r.H(K,t.limit).next(V=>{V.forEach(J=>{let te=$.fromSegments(J.documentKey);s.has(te)||(s=s.add(te),a.push(te))})}))}).next(()=>a)}return S.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=g2(Se.create(e.filters,"and")).map(r=>qv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),f=[];for(let p=0;p<u;++p){let m=t?this.fn(t[p/l]):lf,y=this.gn(e,m,r[p%l],i),b=this.pn(e,m,o[p%l],s),A=a.map(N=>this.gn(e,m,N,!0));f.push(...this.createRange(y,b,A))}return f}gn(e,t,r,i){let o=new zi(e,$.empty(),t,r);return i?o:o.nn()}pn(e,t,r,i){let o=new zi(e,$.empty(),t,r);return i?o.nn():o}An(e,t){let r=new zf(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.un(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.dn(t);return S.forEach(i,o=>this.An(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Re(Ze.comparator),f=!1;for(let p of u.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?f=!0:l=l.add(m.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(f?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}yn(e,t){let r=new qi;for(let i of Bi(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.tn(i.kind);pr.xt.At(o,s)}return r.Yt()}fn(e){let t=new qi;return pr.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){let r=new qi;return pr.xt.At(Zi(this.databaseId,t),r.tn(function(o){let s=Bi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let i=[];i.push(new qi);let o=0;for(let s of Bi(e)){let a=r[o++];for(let u of i)if(this.Sn(t,s.fieldPath)&&lu(a))i=this.bn(i,s,a);else{let l=u.tn(s.kind);pr.xt.At(a,l)}}return this.Dn(i)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}bn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new qi;u.seed(a.Yt()),pr.xt.At(s,u.tn(t.kind)),o.push(u)}return o}Sn(e,t){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=zc(e),i=ys(e);return(t?r.G(Rv,IDBKeyRange.bound(t,t)):r.G()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(f,p){let m=p?new nu(p.sequenceNumber,new sn(to(p.readTime),new $(Fn(p.documentKey)),p.largestBatchId)):nu.empty(),y=f.fields.map(([b,A])=>new Cs(Ze.fromServerFormat(b),A));return new Ms(f.indexId,f.collectionGroup,y,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:X(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=zc(e),o=ys(e);return this.vn(e).next(s=>i.G(Rv,IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,u=>o.put(US(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.Cn(e,i,u).next(l=>{let f=this.Fn(o,u);return l.isEqual(f)?S.resolve():this.Mn(e,o,u,l,f)}))))})}xn(e,t,r,i){return ms(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,i){return ms(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){let i=ms(e),o=new Re(Ur);return i.Z({index:PA,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(s,a)=>{o=o.add(new zi(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Fn(e,t){let r=new Re(Ur),i=this.yn(t,e);if(i==null)return r;let o=Dv(t);if(o!=null){let s=e.data.field(o.fieldPath);if(lu(s))for(let a of s.arrayValue.values||[])r=r.add(new zi(t.indexId,e.key,this.fn(a),i))}else r=r.add(new zi(t.indexId,e.key,lf,i));return r}Mn(e,t,r,i,o){P(WS,"Updating index entries for document '%s'",t.key);let s=[];return function(u,l,f,p,m){let y=u.getIterator(),b=l.getIterator(),A=ps(y),N=ps(b);for(;A||N;){let H=!1,K=!1;if(A&&N){let V=f(A,N);V<0?K=!0:V>0&&(H=!0)}else A!=null?K=!0:H=!0;H?(p(N),N=ps(b)):K?(m(A),A=ps(y)):(A=ps(y),N=ps(b))}}(i,o,Ur,a=>{s.push(this.xn(e,t,r,a))},a=>{s.push(this.On(e,t,r,a))}),S.waitFor(s)}vn(e){let t=1;return ys(e).Z({index:kA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Ur(s,a)).filter((s,a,u)=>!a||Ur(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Ur(s,e),u=Ur(s,t);if(a===0)i[0]=e.nn();else if(a>0&&u<0)i.push(s),i.push(s.nn());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Nn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,lf,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,lf,[]];o.push(IDBKeyRange.bound(a,u))}return o}Nn(e,t){return Ur(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(QS)}getMinOffset(e,t){return S.mapArray(this.dn(t),r=>this.An(e,r).next(i=>i||q())).next(QS)}};function KS(n){return at(n,su)}function ms(n){return at(n,xf)}function zc(n){return at(n,Sw)}function ys(n){return at(n,Mf)}function QS(n){G(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Tw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new sn(e.readTime,e.documentKey,t)}var ZS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},NR=41943040,jt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function kR(n,e,t){let r=n.store(vn),i=n.store(xs),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.Z({range:s},(f,p,m)=>(a++,m.delete()));o.push(u.next(()=>{G(a===1)}));let l=[];for(let f of t.mutations){let p=MA(e,f.key.path,t.batchId);o.push(i.delete(p)),l.push(f.key)}return S.waitFor(o).next(()=>l)}function Wf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw q();e=n.noDocument}return JSON.stringify(e).length}jt.DEFAULT_COLLECTION_PERCENTILE=10,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jt.DEFAULT=new jt(NR,jt.DEFAULT_COLLECTION_PERCENTILE,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jt.DISABLED=new jt(-1,0,0);var Kf=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Bn={}}static It(e,t,r,i){G(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $r(e).Z({index:Gi,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Ds(e),s=$r(e);return s.add({}).next(a=>{G(typeof a=="number");let u=new fu(a,t,r,i),l=function(y,b,A){let N=A.baseMutations.map(K=>yu(y.Tt,K)),H=A.mutations.map(K=>yu(y.Tt,K));return{userId:b,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:N,mutations:H}}(this.serializer,this.userId,u),f=[],p=new Re((m,y)=>X(m.canonicalString(),y.canonicalString()));for(let m of i){let y=MA(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),f.push(s.put(l)),f.push(o.put(y,gj))}return p.forEach(m=>{f.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Bn[a]=u.keys()}),S.waitFor(f).next(()=>u)})}lookupMutationBatch(e,t){return $r(e).get(t).next(r=>r?(G(r.userId===this.userId),Hi(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?S.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Bn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return $r(e).Z({index:Gi,range:i},(s,a,u)=>{a.userId===this.userId&&(G(a.batchId>=r),o=Hi(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=Wr;return $r(e).Z({index:Gi,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,Wr],[this.userId,Number.POSITIVE_INFINITY]);return $r(e).G(Gi,t).next(r=>r.map(i=>Hi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=pf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ds(e).Z({range:i},(s,a,u)=>{let[l,f,p]=s,m=Fn(f);if(l===this.userId&&t.path.isEqual(m))return $r(e).get(p).next(y=>{if(!y)throw q();G(y.userId===this.userId),o.push(Hi(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Re(X),i=[];return t.forEach(o=>{let s=pf(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Ds(e).Z({range:a},(l,f,p)=>{let[m,y,b]=l,A=Fn(y);m===this.userId&&o.path.isEqual(A)?r=r.add(b):p.done()});i.push(u)}),S.waitFor(i).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=pf(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Re(X);return Ds(e).Z({range:s},(u,l,f)=>{let[p,m,y]=u,b=Fn(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(y)):f.done()}).next(()=>this.kn(e,a))}kn(e,t){let r=[],i=[];return t.forEach(o=>{i.push($r(e).get(o).next(s=>{if(s===null)throw q();G(s.userId===this.userId),r.push(Hi(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return kR(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Ds(e).Z({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Fn(o[1]);i.push(u)}else a.done()}).next(()=>{G(i.length===0)})})}containsKey(e,t){return PR(e,this.userId,t)}Qn(e){return OR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Wr,lastStreamToken:""})}};function PR(n,e,t){let r=pf(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ds(n).Z({range:o,Y:!0},(a,u,l)=>{let[f,p,m]=a;f===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function $r(n){return at(n,vn)}function Ds(n){return at(n,xs)}function OR(n){return at(n,iu)}var $s=class n{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new n(0)}static Kn(){return new n(-1)}};var f_=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{let r=new $s(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>Z.fromTimestamp(new Ue(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Gn(e,i)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>vs(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(G(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return vs(e).Z((s,a)=>{let u=Qc(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return vs(e).Z((r,i)=>{let o=Qc(i);t(o)})}Wn(e){return YS(e).get(Rf).next(t=>(G(t!==null),t))}Gn(e,t){return YS(e).put(Rf,t)}zn(e,t){return vs(e).put(RR(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Ji(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return vs(e).Z({range:i,index:NA},(s,a,u)=>{let l=Qc(a);Ru(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=qr(e);return t.forEach(s=>{let a=bt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=qr(e);return S.forEach(t,o=>{let s=bt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=qr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=qr(e),o=ie();return i.Z({range:r,Y:!0},(s,a,u)=>{let l=Fn(s[1]),f=new $(l);o=o.add(f)}).next(()=>o)}containsKey(e,t){let r=bt(t.path),i=IDBKeyRange.bound([r],[TA(r)],!1,!0),o=0;return qr(e).Z({index:bw,Y:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}lt(e,t){return vs(e).get(t).next(r=>r?Qc(r):null)}};function vs(n){return at(n,Ns)}function YS(n){return at(n,Qi)}function qr(n){return at(n,ks)}var JS="LruGarbageCollector",m2=1048576;function XS([n,e],[t,r]){let i=X(n,t);return i===0?X(e,r):i}var h_=class{constructor(e){this.Hn=e,this.buffer=new Re(XS),this.Jn=0}Yn(){return++this.Jn}Zn(e){let t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();XS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Qf=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){P(JS,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>x(this,null,function*(){this.Xn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ai(t)?P(JS,"Ignoring IndexedDB error during garbage collection: ",t):yield si(t)}yield this.er(3e5)}))}},p_=class{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(Yt.ae);let r=new h_(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(P("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(ZS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZS):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,o,s,a,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),_s()<=Cn.DEBUG&&P("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function FR(n,e){return new p_(n,e)}var g_=class{constructor(e,t){this.db=e,this.garbageCollector=FR(this,t)}nr(e){let t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,i)=>t(i))}addReference(e,t,r){return df(e,r)}removeReference(e,t,r){return df(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return df(e,t)}ar(e,t){return function(i,o){let s=!1;return OR(i).X(a=>PR(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this._r(e,(s,a)=>{if(a<=t){let u=this.ar(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Z.min()),qr(e).delete(function(p){return[0,bt(p.path)]}(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return df(e,t)}_r(e,t){let r=qr(e),i,o=Yt.ae;return r.Z({index:bw},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==Yt.ae&&t(new $(Fn(i)),o),o=l,i=u):o=Yt.ae}).next(()=>{o!==Yt.ae&&t(new $(Fn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function df(n,e){return qr(n).put(function(r,i){return{targetId:0,path:bt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Zf=class{constructor(){this.changes=new En(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var m_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ji(e).put(r)}removeEntry(e,t,r){return ji(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Hf(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=rt.newInvalidDocument(t);return ji(e).Z({index:gf,range:IDBKeyRange.only(Gc(t))},(i,o)=>{r=this.cr(t,o)}).next(()=>r)}lr(e,t){let r={size:0,document:rt.newInvalidDocument(t)};return ji(e).Z({index:gf,range:IDBKeyRange.only(Gc(t))},(i,o)=>{r={document:this.cr(t,o),size:Wf(o)}}).next(()=>r)}getEntries(e,t){let r=Bt();return this.hr(e,t,(i,o)=>{let s=this.cr(i,o);r=r.insert(i,s)}).next(()=>r)}Pr(e,t){let r=Bt(),i=new Pe($.comparator);return this.hr(e,t,(o,s)=>{let a=this.cr(o,s);r=r.insert(o,a),i=i.insert(o,Wf(s))}).next(()=>({documents:r,Tr:i}))}hr(e,t,r){if(t.isEmpty())return S.resolve();let i=new Re(nA);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(Gc(i.first()),Gc(i.last())),s=i.getIterator(),a=s.getNext();return ji(e).Z({index:gf,range:o},(u,l,f)=>{let p=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&nA(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?f.W(Gc(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Hf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ji(e).G(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let f=Bt();for(let p of l){let m=this.cr($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(xu(t,m)||i.has(m.key))&&(f=f.insert(m.key,m))}return f})}getAllFromCollectionGroup(e,t,r,i){let o=Bt(),s=tA(t,r),a=tA(t,sn.max());return ji(e).Z({index:xA,range:IDBKeyRange.bound(s,a,!0)},(u,l,f)=>{let p=this.cr($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&f.done()}).next(()=>o)}newChangeBuffer(e){return new y_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return eA(e).get(Av).next(t=>(G(!!t),t))}ur(e,t){return eA(e).put(Av,t)}cr(e,t){if(t){let r=h2(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Z.min())))return r}return rt.newInvalidDocument(e)}};function LR(n){return new m_(n)}var y_=class extends Zf{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new En(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Re((o,s)=>X(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Er.get(o);if(t.push(this.Ir.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=jS(this.Ir.serializer,s);i=i.add(o.path.popLast());let l=Wf(u);r+=l-a.size,t.push(this.Ir.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=jS(this.Ir.serializer,s.convertToNoDocument(Z.min()));t.push(this.Ir.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Ir.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:i})=>(i.forEach((o,s)=>{this.Er.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function eA(n){return at(n,ou)}function ji(n){return at(n,Af)}function Gc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function tA(n,e){let t=e.documentKey.path.toArray();return[n,Hf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function nA(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=X(t[o],r[o]),i)return i;return i=X(t.length,r.length),i||(i=X(t[t.length-2],r[r.length-2]),i||X(t[t.length-1],r[r.length-1]))}var v_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Yf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Xc(r.mutation,i,Jt.empty(),Ue.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ie()){let i=Ln();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Kc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Ln();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Bt(),s=Jc(),a=function(){return Jc()}();return t.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof In)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),Xc(f.mutation,l,f.mutation.getFieldMask(),Ue.now())):s.set(l.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),t.forEach((l,f)=>{var p;return a.set(l,new v_(f,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Jc(),i=new Pe((s,a)=>s-a),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let f=r.get(u)||Jt.empty();f=a.applyToLocalView(l,f),r.set(u,f);let p=(i.get(a.batchId)||ie()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,f=u.value,p=sR();f.forEach(m=>{if(!o.has(m)){let y=hR(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(Ln()),a=Rs,u=o;return s.next(l=>S.forEach(l,(f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(f)?S.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ie())).next(f=>({batchId:a,changes:oR(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=Kc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Kc();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=function(p,m){return new wn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,rt.newInvalidDocument(f)))});let a=Kc();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&Xc(f.mutation,l,Jt.empty(),Ue.now()),xu(t,l)&&(a=a.insert(u,l))}),a})}};var __=class{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return S.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ye(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:Lw(i.bundledQuery),readTime:Ye(i.readTime)}}(t)),S.resolve()}};var w_=class{constructor(){this.overlays=new Pe($.comparator),this.Rr=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ln();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Et(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Rr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=Ln(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Pe((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=Ln(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let a=Ln(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return S.resolve(a)}Et(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new hu(t,r));let o=this.Rr.get(t);o===void 0&&(o=ie(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}};var E_=class{constructor(){this.sessionToken=Je.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var _u=class{constructor(){this.Vr=new Re(tt.mr),this.gr=new Re(tt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){let r=new tt(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new tt(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){let t=new $(new ye([])),r=new tt(t,e),i=new tt(t,e+1),o=[];return this.gr.forEachInRange([r,i],s=>{this.wr(s),o.push(s.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){let t=new $(new ye([])),r=new tt(t,e),i=new tt(t,e+1),o=ie();return this.gr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new tt(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},tt=class{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return $.comparator(e.key,t.key)||X(e.Cr,t.Cr)}static pr(e,t){return X(e.Cr,t.Cr)||$.comparator(e.key,t.key)}};var I_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Re(tt.mr)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new fu(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Mr=this.Mr.add(new tt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Nr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?Wr:this.Fr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new tt(t,0),i=new tt(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,i],s=>{let a=this.Or(s.Cr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Re(X);return t.forEach(i=>{let o=new tt(i,0),s=new tt(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,s],a=>{r=r.add(a.Cr)})}),S.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new tt(new $(o),0),a=new Re(X);return this.Mr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Cr)),!0)},s),S.resolve(this.Br(a))}Br(e){let t=[];return e.forEach(r=>{let i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){G(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return S.forEach(t.mutations,i=>{let o=new tt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){let r=new tt(t,0),i=this.Mr.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){let t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var D_=class{constructor(e){this.kr=e,this.docs=function(){return new Pe($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():rt.newInvalidDocument(t))}getEntries(e,t){let r=Bt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():rt.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Bt(),s=t.path,a=new $(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Tw(bA(f),r)<=0||(i.has(f.key)||xu(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){q()}qr(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new T_(this)}getSize(e){return S.resolve(this.size)}},T_=class extends Zf{constructor(e){super(),this.Ir=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}};var C_=class{constructor(e){this.persistence=e,this.Qr=new En(t=>Ji(t),Ru),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.$r=0,this.Ur=new _u,this.targetCount=0,this.Kr=$s.Un()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),S.resolve()}zn(e){this.Qr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Kr=new $s(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.zn(t),S.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Qr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Qr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Qr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Ur.vr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Ur.containsKey(t))}};var wu=class{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Yt(0),this.zr=!1,this.zr=!0,this.jr=new E_,this.referenceDelegate=e(this),this.Hr=new C_(this),this.indexManager=new l_,this.remoteDocumentCache=function(i){return new D_(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new $f(t),this.Yr=new __(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new w_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new I_(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){P("MemoryPersistence","Starting transaction:",e);let i=new b_(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(o=>this.referenceDelegate.Xr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}ei(e,t){return S.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}},b_=class extends Cf{constructor(e){super(),this.currentSequenceNumber=e}},Jf=class n{constructor(e){this.persistence=e,this.ti=new _u,this.ni=null}static ri(e){return new n(e)}get ii(){if(this.ni)return this.ni;throw q()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),S.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(i=>this.ii.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.ii,r=>{let i=$.fromPath(r);return this.si(e,i).next(o=>{o||t.removeEntry(i,Z.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return S.or([()=>S.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}},Xf=class n{constructor(e,t){this.persistence=e,this.oi=new En(r=>bt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=FR(this,t)}static ri(e,t){return new n(e,t)}Zr(){}Xr(e){return S.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){let t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return S.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(o=>o?S.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.qr(e,s=>this.ar(e,s,t).next(a=>{a||(r++,o.removeEntry(s,Z.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),S.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),S.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),S.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),S.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=yf(e.data.value)),t}ar(e,t,r){return S.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.oi.get(t);return S.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var S_=class{constructor(e){this.serializer=e}B(e,t,r,i){let o=new bf("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore(Au)}(e),function(u){u.createObjectStore(iu,{keyPath:pj}),u.createObjectStore(vn,{keyPath:mS,autoIncrement:!0}).createIndex(Gi,yS,{unique:!0}),u.createObjectStore(xs)}(e),rA(e),function(u){u.createObjectStore(Ui)}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore(ks),u.deleteObjectStore(Ns),u.deleteObjectStore(Qi)}(e),rA(e)),s=s.next(()=>function(u){let l=u.store(Qi),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Z.min().toTimestamp(),targetCount:0};return l.put(Rf,f)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store(vn).G().next(p=>{u.deleteObjectStore(vn),u.createObjectStore(vn,{keyPath:mS,autoIncrement:!0}).createIndex(Gi,yS,{unique:!0});let m=l.store(vn),y=p.map(b=>m.put(b));return S.waitFor(y)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore(Ps,{keyPath:Dj})})(e)})),r<5&&i>=5&&(s=s.next(()=>this._i(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore(ou)}(e),this.ai(o)))),r<7&&i>=7&&(s=s.next(()=>this.ui(o))),r<8&&i>=8&&(s=s.next(()=>this.ci(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.li(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore(Ch,{keyPath:Tj})})(e),function(u){u.createObjectStore(bh,{keyPath:Cj})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore(Sh,{keyPath:Nj});l.createIndex(Mv,kj,{unique:!1}),l.createIndex(OA,Pj,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore(Af,{keyPath:mj});l.createIndex(gf,yj),l.createIndex(xA,vj)}(e)).next(()=>this.hi(e,o)).next(()=>e.deleteObjectStore(Ui))),r<14&&i>=14&&(s=s.next(()=>this.Pi(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore(Sw,{keyPath:bj,autoIncrement:!0}).createIndex(Rv,Sj,{unique:!1}),u.createObjectStore(Mf,{keyPath:Aj}).createIndex(kA,Rj,{unique:!1}),u.createObjectStore(xf,{keyPath:Mj}).createIndex(PA,xj,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(Mf).clear()}).next(()=>{t.objectStore(xf).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore(Aw,{keyPath:Oj})})(e)})),s}ai(e){let t=0;return e.store(Ui).Z((r,i)=>{t+=Wf(i)}).next(()=>{let r={byteSize:t};return e.store(ou).put(Av,r)})}_i(e){let t=e.store(iu),r=e.store(vn);return t.G().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,Wr],[o.userId,o.lastAcknowledgedBatchId]);return r.G(Gi,s).next(a=>S.forEach(a,u=>{G(u.userId===o.userId);let l=Hi(this.serializer,u);return kR(e,o.userId,l).next(()=>{})}))}))}ui(e){let t=e.store(ks),r=e.store(Ui);return e.store(Qi).get(Rf).next(i=>{let o=[];return r.Z((s,a)=>{let u=new ye(s),l=function(p){return[0,bt(p)]}(u);o.push(t.get(l).next(f=>f?S.resolve():(p=>t.put({targetId:0,path:bt(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}ci(e,t){e.createObjectStore(su,{keyPath:Ij});let r=t.store(su),i=new vu,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:bt(u)})}};return t.store(Ui).Z({Y:!0},(s,a)=>{let u=new ye(s);return o(u.popLast())}).next(()=>t.store(xs).Z({Y:!0},([s,a,u],l)=>{let f=Fn(a);return o(f.popLast())}))}li(e){let t=e.store(Ns);return t.Z((r,i)=>{let o=Qc(i),s=RR(this.serializer,o);return t.put(s)})}hi(e,t){let r=t.store(Ui),i=[];return r.Z((o,s)=>{let a=t.store(Af),u=function(p){return p.document?new $(ye.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):q()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}Pi(e,t){let r=t.store(vn),i=LR(this.serializer),o=new wu(Jf.ri,this.serializer.Tt);return r.G().next(s=>{let a=new Map;return s.forEach(u=>{var l;let f=(l=a.get(u.userId))!==null&&l!==void 0?l:ie();Hi(this.serializer,u).keys().forEach(p=>f=f.add(p)),a.set(u.userId,f)}),S.forEach(a,(u,l)=>{let f=new nt(l),p=qf.It(this.serializer,f),m=o.getIndexManager(f),y=Kf.It(f,this.serializer,m,o.referenceDelegate);return new Yf(i,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new au(t,Yt.ae),u).next()})})}};function rA(n){n.createObjectStore(ks,{keyPath:wj}).createIndex(bw,Ej,{unique:!0}),n.createObjectStore(Ns,{keyPath:"targetId"}).createIndex(NA,_j,{unique:!0}),n.createObjectStore(Qi)}var Hr="IndexedDbPersistence",lv=18e5,dv=5e3,fv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",VR="main",A_=class n{constructor(e,t,r,i,o,s,a,u,l,f,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=o,this.window=s,this.document=a,this.Ii=l,this.Ei=f,this.di=p,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=m=>Promise.resolve(),!n.D())throw new k(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new g_(this,i),this.gi=t+VR,this.serializer=new $f(u),this.pi=new Zr(this.gi,this.di,new S_(this.serializer)),this.jr=new r_,this.Hr=new f_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=LR(this.serializer),this.Yr=new n_,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,f===!1&&Qe(Hr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,fv);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new Yt(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=t=>x(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(t=>x(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(()=>x(this,null,function*(){this.started&&(yield this.wi())})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ff(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(ai(e))return P(Hr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return P(Hr,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return Wc(e).get(hs).next(t=>S.resolve(this.Ni(t)))}Bi(e){return ff(e).delete(this.clientId)}Li(){return x(this,null,function*(){if(this.isPrimary&&!this.ki(this.mi,lv)){this.mi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=at(t,Ps);return r.G().next(i=>{let o=this.qi(i,lv),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.yi)for(let t of e)this.yi.removeItem(this.Qi(t.clientId))}})}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?S.resolve(!0):Wc(e).get(hs).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,dv)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,fv);return!1}}return!(!this.networkEnabled||!this.inForeground)||ff(e).G().next(r=>this.qi(r,dv).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&P(Hr,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return x(this,null,function*(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),yield this.pi.runTransaction("shutdown","readwrite",[Au,Ps],e=>{let t=new au(e,Yt.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()})}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>ff(e).G().next(t=>this.qi(t,lv).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return Kf.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new d_(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return qf.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){P(Hr,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?Vj:u===16?Lj:u===15?Rw:u===14?VA:u===13?LA:u===12?Fj:u===11?FA:void q()}(this.di),s;return this.pi.runTransaction(e,i,o,a=>(s=new au(a,this.Gr?this.Gr.next():Yt.ae),t==="readwrite-primary"?this.Fi(s).next(u=>!!u||this.Mi(s)).next(u=>{if(!u)throw Qe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new k(R.FAILED_PRECONDITION,SA);return r(s)}).next(u=>this.Oi(s).next(()=>u)):this.ji(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ji(e){return Wc(e).get(hs).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,dv)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new k(R.FAILED_PRECONDITION,fv)})}Oi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wc(e).put(hs,t)}static D(){return Zr.D()}xi(e){let t=Wc(e);return t.get(hs).next(r=>this.Ni(r)?(P(Hr,"Releasing primary lease."),t.delete(hs)):S.resolve())}ki(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Qe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();let t=/(?:Version|Mobile)\/1[456]/;Pp()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{let r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return P(Hr,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Qe(Hr,"Failed to get zombied client id.",r),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){Qe("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Wc(n){return at(n,Au)}function ff(n){return at(n,Ps)}function jw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var R_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=ie(),i=ie();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var M_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var eh=class{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return Pp()?8:AA(ba())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.rs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ss(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new M_;return this._s(e,t,s).next(a=>{if(o.result=a,this.Xi)return this.us(e,t,s,a.size)})}).next(()=>o.result)}us(e,t,r,i){return r.documentReadCount<this.es?(_s()<=Cn.DEBUG&&P("QueryEngine","SDK will not create cache indexes for query:",ws(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),S.resolve()):(_s()<=Cn.DEBUG&&P("QueryEngine","Query:",ws(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(_s()<=Cn.DEBUG&&P("QueryEngine","The SDK decides to create cache indexes for query:",ws(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kt(t))):S.resolve())}rs(e,t){if(RS(t))return S.resolve(null);let r=kt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Vf(t,null,"F"),r=kt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ie(...o);return this.ns.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.cs(t,a);return this.ls(t,l,s,u.readTime)?this.rs(e,Vf(t,null,"F")):this.hs(e,l,t,u)}))})))}ss(e,t,r,i){return RS(t)||i.isEqual(Z.min())?S.resolve(null):this.ns.getDocuments(e,r).next(o=>{let s=this.cs(t,o);return this.ls(t,s,r,i)?S.resolve(null):(_s()<=Cn.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ws(t)),this.hs(e,s,t,CA(i,Rs)).next(a=>a))})}cs(e,t){let r=new Re(rR(e));return t.forEach((i,o)=>{xu(e,o)&&(r=r.add(o))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}_s(e,t,r){return _s()<=Cn.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",ws(t)),this.ns.getDocumentsMatchingQuery(e,t,sn.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Bw="LocalStore",y2=3e8,x_=class{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new Pe(X),this.Is=new En(o=>Ji(o),Ru),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yf(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}};function jR(n,e,t,r){return new x_(n,e,t,r)}function BR(n,e){return x(this,null,function*(){let t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ie();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){a.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Rs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function v2(n,e){let t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,u,l,f){let p=l.batch,m=p.keys(),y=S.resolve();return m.forEach(b=>{y=y.next(()=>f.getEntry(u,b)).next(A=>{let N=l.docVersions.get(b);G(N!==null),A.version.compareTo(N)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),f.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function UR(n){let e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function _2(n,e){let t=U(n),r=e.snapshotVersion,i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;let a=[];e.targetChanges.forEach((f,p)=>{let m=i.get(p);if(!m)return;a.push(t.Hr.removeMatchingKeys(o,f.removedDocuments,p).next(()=>t.Hr.addMatchingKeys(o,f.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Je.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),function(A,N,H){return A.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=y2?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(m,y,f)&&a.push(t.Hr.updateTargetData(o,y))});let u=Bt(),l=ie();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push($R(o,s,e.documentUpdates).next(f=>{u=f.Vs,l=f.fs})),!r.isEqual(Z.min())){let f=t.Hr.getLastRemoteSnapshotVersion(o).next(p=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Ts=i,o))}function $R(n,e,t){let r=ie(),i=ie();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Bt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):P(Bw,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Vs:s,fs:i}})}function w2(n,e){let t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Wr),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Hs(n,e){let t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Hr.allocateTargetId(r).next(s=>(i=new Us(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}function qs(n,e,t){return x(this,null,function*(){let r=U(n),i=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ai(s))throw s;P(Bw,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)})}function th(n,e,t){let r=U(n),i=Z.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,f){let p=U(u),m=p.Is.get(f);return m!==void 0?S.resolve(p.Ts.get(m)):p.Hr.getTargetData(l,f)}(r,s,kt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Ps.getDocumentsMatchingQuery(s,e,t?i:Z.min(),t?o:ie())).next(a=>(zR(r,nR(e),a),{documents:a,gs:o})))}function HR(n,e){let t=U(n),r=U(t.Hr),i=t.Ts.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.lt(o,e).next(s=>s?s.target:null))}function qR(n,e){let t=U(n),r=t.Es.get(e)||Z.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ds.getAllFromCollectionGroup(i,e,CA(r,Rs),Number.MAX_SAFE_INTEGER)).then(i=>(zR(t,e,i),i))}function zR(n,e,t){let r=n.Es.get(e)||Z.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}function E2(n,e,t,r){return x(this,null,function*(){let i=U(n),o=ie(),s=Bt();for(let l of t){let f=e.ps(l.metadata.name);l.document&&(o=o.add(f));let p=e.ys(l);p.setReadTime(e.ws(l.metadata.readTime)),s=s.insert(f,p)}let a=i.ds.newChangeBuffer({trackRemovals:!0}),u=yield Hs(i,function(f){return kt(Js(ye.fromString(`__bundle__/docs/${f}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>$R(l,a,s).next(f=>(a.apply(l),f)).next(f=>i.Hr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Hr.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,f.Vs,f.fs)).next(()=>f.Vs)))})}function I2(r,i){return x(this,arguments,function*(n,e,t=ie()){let o=yield Hs(n,kt(Lw(e.bundledQuery))),s=U(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Ye(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Yr.saveNamedQuery(a,e);let l=o.withResumeToken(Je.EMPTY_BYTE_STRING,u);return s.Ts=s.Ts.insert(l.targetId,l),s.Hr.updateTargetData(a,l).next(()=>s.Hr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Hr.addMatchingKeys(a,t,o.targetId)).next(()=>s.Yr.saveNamedQuery(a,e))})})}var GR="firestore_clients";function iA(n,e){return`${GR}_${n}_${e}`}var WR="firestore_mutations";function oA(n,e,t){let r=`${WR}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}var KR="firestore_targets";function hv(n,e){return`${KR}_${n}_${e}`}var On="SharedClientState",nh=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ss(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Qe(On,`Failed to parse mutation state for ID '${t}': ${r}`),null)}bs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},eu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ss(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new n(e,r.state,i):(Qe(On,`Failed to parse target state for ID '${e}': ${t}`),null)}bs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},rh=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ss(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Pw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=RA(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Qe(On,`Failed to parse client data for instance '${e}': ${t}`),null)}},N_=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Ss(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Qe(On,`Failed to parse online state: ${e}`),null)}},Eu=class{constructor(){this.activeTargetIds=Pw()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},tu=class{constructor(e,t,r,i,o){this.window=e,this.Ti=t,this.persistenceKey=r,this.Cs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new Pe(X),this.started=!1,this.Os=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ns=iA(this.persistenceKey,this.Cs),this.Bs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new Eu),this.Ls=new RegExp(`^${GR}_${s}_([^_]*)$`),this.ks=new RegExp(`^${WR}_${s}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${KR}_${s}_(\\d+)$`),this.Qs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.$s=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}start(){return x(this,null,function*(){let e=yield this.syncEngine.zi();for(let r of e){if(r===this.Cs)continue;let i=this.getItem(iA(this.persistenceKey,r));if(i){let o=rh.Ss(r,i);o&&(this.xs=this.xs.insert(o.clientId,o))}}this.Us();let t=this.storage.getItem(this.Qs);if(t){let r=this.Ks(t);r&&this.Ws(r)}for(let r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,r){this.zs(e,t,r),this.js(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(hv(this.persistenceKey,e));if(i){let o=eu.Ss(e,i);o&&(r=o.state)}}return t&&this.Hs.Ds(e),this.Us(),r}removeLocalQueryTarget(e){this.Hs.vs(e),this.Us()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Js(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.js(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return P(On,"READ",e,t),t}setItem(e,t){P(On,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){P(On,"REMOVE",e),this.storage.removeItem(e)}Ms(e){let t=e;if(t.storageArea===this.storage){if(P(On,"EVENT",t.key,t.newValue),t.key===this.Ns)return void Qe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(()=>x(this,null,function*(){if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){let r=this.Xs(t.key);return this.eo(r,null)}{let r=this.no(t.key,t.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(t.key)){if(t.newValue!==null){let r=this.ro(t.key,t.newValue);if(r)return this.io(r)}}else if(this.qs.test(t.key)){if(t.newValue!==null){let r=this.so(t.key,t.newValue);if(r)return this.oo(r)}}else if(t.key===this.Qs){if(t.newValue!==null){let r=this.Ks(t.newValue);if(r)return this.Ws(r)}}else if(t.key===this.Bs){let r=function(o){let s=Yt.ae;if(o!=null)try{let a=JSON.parse(o);G(typeof a=="number"),s=a}catch(a){Qe(On,"Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Yt.ae&&this.sequenceNumberHandler(r)}else if(t.key===this.$s){let r=this._o(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.ao(i)))}}}else this.Os.push(t)}))}}get Hs(){return this.xs.get(this.Cs)}Us(){this.setItem(this.Ns,this.Hs.bs())}zs(e,t,r){let i=new nh(this.currentUser,e,t,r),o=oA(this.persistenceKey,this.currentUser,e);this.setItem(o,i.bs())}js(e){let t=oA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){let t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,r){let i=hv(this.persistenceKey,e),o=new eu(e,t,r);this.setItem(i,o.bs())}Zs(e){let t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){let t=this.Ls.exec(e);return t?t[1]:null}no(e,t){let r=this.Xs(e);return rh.Ss(r,t)}ro(e,t){let r=this.ks.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return nh.Ss(new nt(o),i,t)}so(e,t){let r=this.qs.exec(e),i=Number(r[1]);return eu.Ss(i,t)}Ks(e){return N_.Ss(e)}_o(e){return JSON.parse(e)}io(e){return x(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);P(On,`Ignoring mutation for non-active user ${e.user.uid}`)})}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){let r=t?this.xs.insert(e,t):this.xs.remove(e),i=this.Gs(this.xs),o=this.Gs(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.lo(s,a).then(()=>{this.xs=r})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=Pw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},ih=class{constructor(){this.ho=new Eu,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Eu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var k_=class{To(e){}shutdown(){}};var sA="ConnectivityMonitor",oh=class{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){P(sA,"Network connectivity changed: AVAILABLE");for(let e of this.Vo)e(0)}Ro(){P(sA,"Network connectivity changed: UNAVAILABLE");for(let e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var hf=null;function P_(){return hf===null?hf=function(){return 268435456+Math.round(2147483648*Math.random())}():hf++,"0x"+hf.toString(16)}var pv="RestConnection",D2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},O_=class{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===Nv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(e,t,r,i,o){let s=P_(),a=this.bo(e,t.toUriEncodedString());P(pv,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,i,o),this.vo(e,a,u,r).then(l=>(P(pv,`Received RPC '${e}' ${s}: `,l),l),l=>{throw _n(pv,`RPC '${e}' ${s} failed with error: `,l,"url: ",a,"request:",r),l})}Co(e,t,r,i,o,s){return this.So(e,t,r,i,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ys}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}bo(e,t){let r=D2[e];return`${this.po}/v1/${t}:${r}`}terminate(){}};var F_=class{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}};var Tt="WebChannelConnection",L_=class extends O_{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){let o=P_();return new Promise((s,a)=>{let u=new iv;u.setWithCredentials(!0),u.listenOnce(ov.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Hc.NO_ERROR:let f=u.getResponseJson();P(Tt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case Hc.TIMEOUT:P(Tt,`RPC '${e}' ${o} timed out`),a(new k(R.DEADLINE_EXCEEDED,"Request time out"));break;case Hc.HTTP_ERROR:let p=u.getStatus();if(P(Tt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let b=function(N){let H=N.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(H)>=0?H:R.UNKNOWN}(y.status);a(new k(b,y.message))}else a(new k(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new k(R.UNAVAILABLE,"Connection failed."));break;default:q()}}finally{P(Tt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);P(Tt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Wo(e,t,r){let i=P_(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=cv(),a=av(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let f=o.join("");P(Tt,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u),m=!1,y=!1,b=new F_({Fo:N=>{y?P(Tt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(P(Tt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),P(Tt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Mo:()=>p.close()}),A=(N,H,K)=>{N.listen(H,V=>{try{K(V)}catch(J){setTimeout(()=>{throw J},0)}})};return A(p,fs.EventType.OPEN,()=>{y||(P(Tt,`RPC '${e}' stream ${i} transport opened.`),b.Qo())}),A(p,fs.EventType.CLOSE,()=>{y||(y=!0,P(Tt,`RPC '${e}' stream ${i} transport closed`),b.Uo())}),A(p,fs.EventType.ERROR,N=>{y||(y=!0,_n(Tt,`RPC '${e}' stream ${i} transport errored:`,N),b.Uo(new k(R.UNAVAILABLE,"The operation could not be completed")))}),A(p,fs.EventType.MESSAGE,N=>{var H;if(!y){let K=N.data[0];G(!!K);let V=K,J=V?.error||((H=V[0])===null||H===void 0?void 0:H.error);if(J){P(Tt,`RPC '${e}' stream ${i} received error:`,J);let te=J.status,ne=function(w){let I=et[w];if(I!==void 0)return mR(I)}(te),E=J.message;ne===void 0&&(ne=R.INTERNAL,E="Unknown error status: "+te+" with message "+J.message),y=!0,b.Uo(new k(ne,E)),p.close()}else P(Tt,`RPC '${e}' stream ${i} received:`,K),b.Ko(K)}}),A(a,sv.STAT_EVENT,N=>{N.stat===cf.PROXY?P(Tt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===cf.NOPROXY&&P(Tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.$o()},0),b}};function QR(){return typeof window<"u"?window:null}function wf(){return typeof document<"u"?document:null}function Nu(n){return new Yv(n,!0)}var Iu=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();let t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&P("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}};var aA="PersistentStream",sh=class{constructor(e,t,r,i,o,s,a,u){this.Ti=e,this.n_=r,this.r_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Iu(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}stop(){return x(this,null,function*(){this.u_()&&(yield this.close(0))})}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}T_(){return x(this,null,function*(){if(this.c_())return this.close(0)})}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}close(e,t){return x(this,null,function*(){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(Qe(t.toString()),Qe("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Lo(t)})}A_(){}auth(){this.state=1;let e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{let i=new k(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){let r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(()=>x(this,null,function*(){this.state=0,this.start()}))}m_(e){return P(aA,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(P(aA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},V_=class extends sh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();let t=s2(this.serializer,e),r=function(o){if(!("targetChange"in o))return Z.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Z.min():s.readTime?Ye(s.readTime):Z.min()}(e);return this.listener.p_(t,r)}y_(e){let t={};t.database=e_(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=Ff(u)?{documents:DR(o,u)}:{query:TR(o,u).ht},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=yR(o,s.resumeToken);let l=Jv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Z.min())>0){a.readTime=Bs(o,s.snapshotVersion.toTimestamp());let l=Jv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=c2(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){let t={};t.database=e_(this.serializer),t.removeTarget=e,this.I_(t)}},j_=class extends sh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return G(!!e.streamToken),this.lastStreamToken=e.streamToken,G(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){G(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();let t=a2(e.writeResults,e.commitTime),r=Ye(e.commitTime);return this.listener.v_(r,t)}C_(){let e={};e.database=e_(this.serializer),this.I_(e)}b_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>yu(this.serializer,r))};this.I_(t)}};var B_=class{},U_=class extends B_{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,Xv(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(R.UNKNOWN,o.toString())})}Co(e,t,r,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(e,Xv(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(R.UNKNOWN,s.toString())})}terminate(){this.F_=!0,this.connection.terminate()}},$_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Qe(t),this.N_=!1):P("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}};var no="RemoteStore",H_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(s=>{r.enqueueAndForget(()=>x(this,null,function*(){ui(this)&&(P(no,"Restarting streams for network reachability change."),yield function(u){return x(this,null,function*(){let l=U(u);l.W_.add(4),yield Xs(l),l.j_.set("Unknown"),l.W_.delete(4),yield ku(l)})}(this))}))}),this.j_=new $_(r,i)}};function ku(n){return x(this,null,function*(){if(ui(n))for(let e of n.G_)yield e(!0)})}function Xs(n){return x(this,null,function*(){for(let e of n.G_)yield e(!1)})}function xh(n,e){let t=U(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),Hw(t)?$w(t):ta(t).c_()&&Uw(t,e))}function zs(n,e){let t=U(n),r=ta(t);t.K_.delete(e),r.c_()&&ZR(t,e),t.K_.size===0&&(r.c_()?r.P_():ui(t)&&t.j_.set("Unknown"))}function Uw(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ta(n).y_(e)}function ZR(n,e){n.H_.Ne(e),ta(n).w_(e)}function $w(n){n.H_=new Zv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),ta(n).start(),n.j_.B_()}function Hw(n){return ui(n)&&!ta(n).u_()&&n.K_.size>0}function ui(n){return U(n).W_.size===0}function YR(n){n.H_=void 0}function T2(n){return x(this,null,function*(){n.j_.set("Online")})}function C2(n){return x(this,null,function*(){n.K_.forEach((e,t)=>{Uw(n,e)})})}function b2(n,e){return x(this,null,function*(){YR(n),Hw(n)?(n.j_.q_(e),$w(n)):n.j_.set("Unknown")})}function S2(n,e,t){return x(this,null,function*(){if(n.j_.set("Online"),e instanceof Bf&&e.state===2&&e.cause)try{yield function(i,o){return x(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.K_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.K_.delete(a),i.H_.removeTarget(a))})}(n,e)}catch(r){P(no,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ah(n,r)}else if(e instanceof Ss?n.H_.We(e):e instanceof jf?n.H_.Ze(e):n.H_.je(e),!t.isEqual(Z.min()))try{let r=yield UR(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.H_.ot(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.K_.get(l);f&&o.K_.set(l,f.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let f=o.K_.get(u);if(!f)return;o.K_.set(u,f.withResumeToken(Je.EMPTY_BYTE_STRING,f.snapshotVersion)),ZR(o,u);let p=new Us(f.target,u,l,f.sequenceNumber);Uw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){P(no,"Failed to raise snapshot:",r),yield ah(n,r)}})}function ah(n,e,t){return x(this,null,function*(){if(!ai(e))throw e;n.W_.add(1),yield Xs(n),n.j_.set("Offline"),t||(t=()=>UR(n.localStore)),n.asyncQueue.enqueueRetryable(()=>x(this,null,function*(){P(no,"Retrying IndexedDB access"),yield t(),n.W_.delete(1),yield ku(n)}))})}function JR(n,e){return e().catch(t=>ah(n,t,e))}function ea(n){return x(this,null,function*(){let e=U(n),t=ii(e),r=e.U_.length>0?e.U_[e.U_.length-1].batchId:Wr;for(;A2(e);)try{let i=yield w2(e.localStore,r);if(i===null){e.U_.length===0&&t.P_();break}r=i.batchId,R2(e,i)}catch(i){yield ah(e,i)}XR(e)&&eM(e)})}function A2(n){return ui(n)&&n.U_.length<10}function R2(n,e){n.U_.push(e);let t=ii(n);t.c_()&&t.S_&&t.b_(e.mutations)}function XR(n){return ui(n)&&!ii(n).u_()&&n.U_.length>0}function eM(n){ii(n).start()}function M2(n){return x(this,null,function*(){ii(n).C_()})}function x2(n){return x(this,null,function*(){let e=ii(n);for(let t of n.U_)e.b_(t.mutations)})}function N2(n,e,t){return x(this,null,function*(){let r=n.U_.shift(),i=Wv.from(r,e,t);yield JR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ea(n)})}function k2(n,e){return x(this,null,function*(){e&&ii(n).S_&&(yield function(r,i){return x(this,null,function*(){if(function(s){return gR(s)&&s!==R.ABORTED}(i.code)){let o=r.U_.shift();ii(r).h_(),yield JR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ea(r)}})}(n,e)),XR(n)&&eM(n)})}function cA(n,e){return x(this,null,function*(){let t=U(n);t.asyncQueue.verifyOperationInProgress(),P(no,"RemoteStore received new credentials");let r=ui(t);t.W_.add(3),yield Xs(t),r&&t.j_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),yield ku(t)})}function q_(n,e){return x(this,null,function*(){let t=U(n);e?(t.W_.delete(2),yield ku(t)):e||(t.W_.add(2),yield Xs(t),t.j_.set("Unknown"))})}function ta(n){return n.J_||(n.J_=function(t,r,i){let o=U(t);return o.M_(),new V_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:T2.bind(null,n),No:C2.bind(null,n),Lo:b2.bind(null,n),p_:S2.bind(null,n)}),n.G_.push(e=>x(this,null,function*(){e?(n.J_.h_(),Hw(n)?$w(n):n.j_.set("Unknown")):(yield n.J_.stop(),YR(n))}))),n.J_}function ii(n){return n.Y_||(n.Y_=function(t,r,i){let o=U(t);return o.M_(),new j_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:M2.bind(null,n),Lo:k2.bind(null,n),D_:x2.bind(null,n),v_:N2.bind(null,n)}),n.G_.push(e=>x(this,null,function*(){e?(n.Y_.h_(),yield ea(n)):(yield n.Y_.stop(),n.U_.length>0&&(P(no,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))}))),n.Y_}var z_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new st,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function na(n,e){if(Qe("AsyncQueue",`${e}: ${n}`),ai(n))return new k(R.UNAVAILABLE,`${e}: ${n}`);throw n}var ch=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=Kc(),this.sortedSet=new Pe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var uh=class{constructor(){this.Z_=new Pe($.comparator)}track(e){let t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):q():this.Z_=this.Z_.insert(t,e)}X_(){let e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}},Gs=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,ch.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var G_=class{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}},W_=class{constructor(){this.queries=uA(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){let i=U(t),o=i.queries;i.queries=uA(),o.forEach((s,a)=>{for(let u of a.ta)u.onError(r)})})(this,new k(R.ABORTED,"Firestore shutting down"))}};function uA(){return new En(n=>tR(n),Mu)}function qw(n,e){return x(this,null,function*(){let t=U(n),r=3,i=e.query,o=t.queries.get(i);o?!o.na()&&e.ra()&&(r=2):(o=new G_,r=e.ra()?0:1);try{switch(r){case 0:o.ea=yield t.onListen(i,!0);break;case 1:o.ea=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=na(s,`Initialization of query '${ws(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&Gw(t)})}function zw(n,e){return x(this,null,function*(){let t=U(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.ta.indexOf(e);s>=0&&(o.ta.splice(s,1),o.ta.length===0?i=e.ra()?0:1:!o.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function P2(n,e){let t=U(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.ta)a.oa(i)&&(r=!0);s.ea=i}}r&&Gw(t)}function O2(n,e,t){let r=U(n),i=r.queries.get(e);if(i)for(let o of i.ta)o.onError(t);r.queries.delete(e)}function Gw(n){n.ia.forEach(e=>{e.next()})}var K_,lA;(lA=K_||(K_={}))._a="default",lA.Cache="cache";var Du=class{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Gs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;let r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;let t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Gs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==K_.Cache}};var Q_=class{constructor(e,t){this.Ia=e,this.byteLength=t}Ea(){return"metadata"in this.Ia}};var lh=class{constructor(e){this.serializer=e}ps(e){return jn(this.serializer,e)}ys(e){return e.metadata.exists?IR(this.serializer,e.document,!1):rt.newNoDocument(this.ps(e.metadata.name),this.ws(e.metadata.readTime))}ws(e){return Ye(e)}},Z_=class{constructor(e,t,r){this.da=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=tM(e)}Aa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ia.namedQuery)this.queries.push(e.Ia.namedQuery);else if(e.Ia.documentMetadata){this.documents.push({metadata:e.Ia.documentMetadata}),e.Ia.documentMetadata.exists||++t;let r=ye.fromString(e.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ia.document&&(this.documents[this.documents.length-1].document=e.Ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ra(e){let t=new Map,r=new lh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.ps(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ie()).add(o);t.set(s,a)}}return t}complete(){return x(this,null,function*(){let e=yield E2(this.localStore,new lh(this.serializer),this.documents,this.da.id),t=this.Ra(this.documents);for(let r of this.queries)yield I2(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:e}})}};function tM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var dh=class{constructor(e){this.key=e}},fh=class{constructor(e){this.key=e}},hh=class{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ie(),this.mutatedKeys=ie(),this.ya=rR(e),this.wa=new ch(this.ya)}get Sa(){return this.fa}ba(e,t){let r=t?t.Da:new uh,i=t?t.wa:this.wa,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let m=i.get(f),y=xu(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;m&&y?m.data.isEqual(y.data)?b!==A&&(r.track({type:3,doc:y}),N=!0):this.va(m,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.ya(y,u)>0||l&&this.ya(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),N=!0):m&&!y&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(a=!0)),N&&(y?(s=s.add(y),o=A?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{wa:s,Da:r,ls:a,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;let s=e.Da.X_();s.sort((f,p)=>function(y,b){let A=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q()}};return A(y)-A(b)}(f.type,p.type)||this.ya(f.doc,p.doc)),this.Ca(r),i=i!=null&&i;let a=t&&!i?this.Fa():[],u=this.pa.size===0&&this.current&&!i?1:0,l=u!==this.ga;return this.ga=u,s.length!==0||l?{snapshot:new Gs(this.query,e.wa,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new uh,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];let e=this.pa;this.pa=ie(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});let t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new fh(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new dh(r))}),t}Oa(e){this.fa=e.gs,this.pa=ie();let t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Gs.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}},li="SyncEngine",Y_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},J_=class{constructor(e){this.key=e,this.Ba=!1}},X_=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new En(a=>tR(a),Mu),this.qa=new Map,this.Qa=new Set,this.$a=new Pe($.comparator),this.Ua=new Map,this.Ka=new _u,this.Wa={},this.Ga=new Map,this.za=$s.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}};function F2(n,e,t=!0){return x(this,null,function*(){let r=Nh(n),i,o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Na()):i=yield nM(r,e,t,!0),i})}function L2(n,e){return x(this,null,function*(){let t=Nh(n);yield nM(t,e,!0,!1)})}function nM(n,e,t,r){return x(this,null,function*(){let i=yield Hs(n.localStore,kt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Ww(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&xh(n.remoteStore,i),a})}function Ww(n,e,t,r,i){return x(this,null,function*(){n.Ha=(p,m,y)=>function(A,N,H,K){return x(this,null,function*(){let V=N.view.ba(H);V.ls&&(V=yield th(A.localStore,N.query,!1).then(({documents:E})=>N.view.ba(E,V)));let J=K&&K.targetChanges.get(N.targetId),te=K&&K.targetMismatches.get(N.targetId)!=null,ne=N.view.applyChanges(V,A.isPrimaryClient,J,te);return ew(A,N.targetId,ne.Ma),ne.snapshot})}(n,p,m,y);let o=yield th(n.localStore,e,!0),s=new hh(e,o.gs),a=s.ba(o.documents),u=gu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);ew(n,t,l.Ma);let f=new Y_(e,t,s);return n.ka.set(e,f),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),l.snapshot})}function V2(n,e,t){return x(this,null,function*(){let r=U(n),i=r.ka.get(e),o=r.qa.get(i.targetId);if(o.length>1)return r.qa.set(i.targetId,o.filter(s=>!Mu(s,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield qs(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&zs(r.remoteStore,i.targetId),Ws(r,i.targetId)}).catch(si))):(Ws(r,i.targetId),yield qs(r.localStore,i.targetId,!0))})}function j2(n,e){return x(this,null,function*(){let t=U(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),zs(t.remoteStore,r.targetId))})}function B2(n,e,t){return x(this,null,function*(){let r=Yw(n);try{let i=yield function(s,a){let u=U(s),l=Ue.now(),f=a.reduce((y,b)=>y.add(b.key),ie()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Bt(),A=ie();return u.ds.getEntries(y,f).next(N=>{b=N,b.forEach((H,K)=>{K.isValidDocument()||(A=A.add(H))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,b)).next(N=>{p=N;let H=[];for(let K of a){let V=Xj(K,p.get(K.key).overlayedDocument);V!=null&&H.push(new In(K.key,V,KA(V.value.mapValue),Ge.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,H,a)}).next(N=>{m=N;let H=N.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,N.batchId,H)})}).then(()=>({batchId:m.batchId,changes:oR(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Wa[s.currentUser.toKey()];l||(l=new Pe(X)),l=l.insert(a,u),s.Wa[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Ir(r,i.changes),yield ea(r.remoteStore)}catch(i){let o=na(i,"Failed to persist write");t.reject(o)}})}function rM(n,e){return x(this,null,function*(){let t=U(n);try{let r=yield _2(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Ua.get(o);s&&(G(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ba=!0:i.modifiedDocuments.size>0?G(s.Ba):i.removedDocuments.size>0&&(G(s.Ba),s.Ba=!1))}),yield Ir(t,r,e)}catch(r){yield si(r)}})}function dA(n,e,t){let r=U(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ka.forEach((o,s)=>{let a=s.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=U(s);u.onlineState=a;let l=!1;u.queries.forEach((f,p)=>{for(let m of p.ta)m.sa(a)&&(l=!0)}),l&&Gw(u)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function U2(n,e,t){return x(this,null,function*(){let r=U(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Ua.get(e),o=i&&i.key;if(o){let s=new Pe($.comparator);s=s.insert(o,rt.newNoDocument(o,Z.min()));let a=ie().add(o),u=new pu(Z.min(),new Map,new Pe(X),s,a);yield rM(r,u),r.$a=r.$a.remove(o),r.Ua.delete(e),Zw(r)}else yield qs(r.localStore,e,!1).then(()=>Ws(r,e,t)).catch(si)})}function $2(n,e){return x(this,null,function*(){let t=U(n),r=e.batch.batchId;try{let i=yield v2(t.localStore,e);Qw(t,r,null),Kw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ir(t,i)}catch(i){yield si(i)}})}function H2(n,e,t){return x(this,null,function*(){let r=U(n);try{let i=yield function(s,a){let u=U(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(G(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})}(r.localStore,e);Qw(r,e,t),Kw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ir(r,i)}catch(i){yield si(i)}})}function q2(n,e){return x(this,null,function*(){let t=U(n);ui(t.remoteStore)||P(li,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=U(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===Wr)return void e.resolve();let i=t.Ga.get(r)||[];i.push(e),t.Ga.set(r,i)}catch(r){let i=na(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Kw(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function Qw(n,e,t){let r=U(n),i=r.Wa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function Ws(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||iM(n,r)})}function iM(n,e){n.Qa.delete(e.path.canonicalString());let t=n.$a.get(e);t!==null&&(zs(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),Zw(n))}function ew(n,e,t){for(let r of t)r instanceof dh?(n.Ka.addReference(r.key,e),z2(n,r)):r instanceof fh?(P(li,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||iM(n,r.key)):q()}function z2(n,e){let t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(P(li,"New document in limbo: "+t),n.Qa.add(r),Zw(n))}function Zw(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){let e=n.Qa.values().next().value;n.Qa.delete(e);let t=new $(ye.fromString(e)),r=n.za.next();n.Ua.set(r,new J_(t)),n.$a=n.$a.insert(t,r),xh(n.remoteStore,new Us(kt(Js(t.path)),r,"TargetPurposeLimboResolution",Yt.ae))}}function Ir(n,e,t){return x(this,null,function*(){let r=U(n),i=[],o=[],s=[];r.ka.isEmpty()||(r.ka.forEach((a,u)=>{s.push(r.Ha(u,e,t).then(l=>{var f;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(f=t?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=R_.Yi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.La.p_(i),yield function(u,l){return x(this,null,function*(){let f=U(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.Hi,y=>f.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>S.forEach(m.Ji,y=>f.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!ai(p))throw p;P(Bw,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=f.Ts.get(m),b=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(b);f.Ts=f.Ts.insert(m,A)}}})}(r.localStore,o))})}function G2(n,e){return x(this,null,function*(){let t=U(n);if(!t.currentUser.isEqual(e)){P(li,"User change. New user:",e.toKey());let r=yield BR(t.localStore,e);t.currentUser=e,function(o,s){o.Ga.forEach(a=>{a.forEach(u=>{u.reject(new k(R.CANCELLED,s))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ir(t,r.Rs)}})}function W2(n,e){let t=U(n),r=t.Ua.get(e);if(r&&r.Ba)return ie().add(r.key);{let i=ie(),o=t.qa.get(e);if(!o)return i;for(let s of o){let a=t.ka.get(s);i=i.unionWith(a.view.Sa)}return i}}function K2(n,e){return x(this,null,function*(){let t=U(n),r=yield th(t.localStore,e.query,!0),i=e.view.Oa(r);return t.isPrimaryClient&&ew(t,e.targetId,i.Ma),i})}function Q2(n,e){return x(this,null,function*(){let t=U(n);return qR(t.localStore,e).then(r=>Ir(t,r))})}function Z2(n,e,t,r){return x(this,null,function*(){let i=U(n),o=yield function(a,u){let l=U(a),f=U(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>f.Ln(p,u).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield ea(i.remoteStore):t==="acknowledged"||t==="rejected"?(Qw(i,e,r||null),Kw(i,e),function(a,u){U(U(a).mutationQueue).qn(u)}(i.localStore,e)):q(),yield Ir(i,o)):P(li,"Cannot apply mutation batch with id: "+e)})}function Y2(n,e){return x(this,null,function*(){let t=U(n);if(Nh(t),Yw(t),e===!0&&t.ja!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield fA(t,r.toArray());t.ja=!0,yield q_(t.remoteStore,!0);for(let o of i)xh(t.remoteStore,o)}else if(e===!1&&t.ja!==!1){let r=[],i=Promise.resolve();t.qa.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ws(t,s),qs(t.localStore,s,!0))),zs(t.remoteStore,s)}),yield i,yield fA(t,r),function(s){let a=U(s);a.Ua.forEach((u,l)=>{zs(a.remoteStore,l)}),a.Ka.Dr(),a.Ua=new Map,a.$a=new Pe($.comparator)}(t),t.ja=!1,yield q_(t.remoteStore,!1)}})}function fA(n,e,t){return x(this,null,function*(){let r=U(n),i=[],o=[];for(let s of e){let a,u=r.qa.get(s);if(u&&u.length!==0){a=yield Hs(r.localStore,kt(u[0]));for(let l of u){let f=r.ka.get(l),p=yield K2(r,f);p.snapshot&&o.push(p.snapshot)}}else{let l=yield HR(r.localStore,s);a=yield Hs(r.localStore,l),yield Ww(r,oM(l),s,!1,a.resumeToken)}i.push(a)}return r.La.p_(o),i})}function oM(n){return eR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function J2(n){return function(t){return U(U(t).persistence).zi()}(U(n).localStore)}function X2(n,e,t,r){return x(this,null,function*(){let i=U(n);if(i.ja)return void P(li,"Ignoring unexpected query state notification.");let o=i.qa.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield qR(i.localStore,nR(o[0])),a=pu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Je.EMPTY_BYTE_STRING);yield Ir(i,s,a);break}case"rejected":yield qs(i.localStore,e,!0),Ws(i,e,r);break;default:q()}})}function eB(n,e,t){return x(this,null,function*(){let r=Nh(n);if(r.ja){for(let i of e){if(r.qa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){P(li,"Adding an already active target "+i);continue}let o=yield HR(r.localStore,i),s=yield Hs(r.localStore,o);yield Ww(r,oM(o),s.targetId,!1,s.resumeToken),xh(r.remoteStore,s)}for(let i of t)r.qa.has(i)&&(yield qs(r.localStore,i,!1).then(()=>{zs(r.remoteStore,i),Ws(r,i)}).catch(si))}})}function Nh(n){let e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=W2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=U2.bind(null,e),e.La.p_=P2.bind(null,e.eventManager),e.La.Ja=O2.bind(null,e.eventManager),e}function Yw(n){let e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H2.bind(null,e),e}function tB(n,e,t){let r=U(n);(function(o,s,a){return x(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,b){let A=U(y),N=Ye(b.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",H=>A.Yr.getBundleMetadata(H,b.id)).then(H=>!!H&&H.createTime.compareTo(N)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(tM(u));let l=new Z_(u,o.localStore,s.serializer),f=yield s.Ya();for(;f;){let m=yield l.Aa(f);m&&a._updateProgress(m),f=yield s.Ya()}let p=yield l.complete();return yield Ir(o,p.ma,void 0),yield function(y,b){let A=U(y);return A.persistence.runTransaction("Save bundle","readwrite",N=>A.Yr.saveBundleMetadata(N,b))}(o.localStore,u),a._completeWith(p.progress),Promise.resolve(p.Va)}catch(u){return _n(li,`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Jw=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return x(this,null,function*(){this.serializer=Nu(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),yield this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)})}tu(t,r){return null}nu(t,r){return null}eu(t){return jR(this.persistence,new eh,t.initialUser,this.serializer)}Xa(t){return new wu(Jf.ri,this.serializer)}Za(t){return new ih}terminate(){return x(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),tw=class extends Jw{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){G(this.persistence.referenceDelegate instanceof Xf);let r=this.persistence.referenceDelegate.garbageCollector;return new Qf(r,e.asyncQueue,t)}Xa(e){let t=this.cacheSizeBytes!==void 0?jt.withCacheSize(this.cacheSizeBytes):jt.DEFAULT;return new wu(r=>Xf.ri(r,t),this.serializer)}},ph=class n extends Jw{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return x(this,null,function*(){yield Np(n.prototype,this,"initialize").call(this,e),yield this.ru.initialize(this,e),yield Yw(this.ru.syncEngine),yield ea(this.ru.remoteStore),yield this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}eu(e){return jR(this.persistence,new eh,e.initialUser,this.serializer)}tu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Qf(r,e.asyncQueue,t)}nu(e,t){let r=new Sv(t,this.persistence);return new bv(e.asyncQueue,r)}Xa(e){let t=jw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?jt.withCacheSize(this.cacheSizeBytes):jt.DEFAULT;return new A_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,QR(),wf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new ih}},nw=class n extends ph{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return x(this,null,function*(){yield Np(n.prototype,this,"initialize").call(this,e);let t=this.ru.syncEngine;this.sharedClientState instanceof tu&&(this.sharedClientState.syncEngine={uo:Z2.bind(null,t),co:X2.bind(null,t),lo:eB.bind(null,t),zi:J2.bind(null,t),ao:Q2.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.Ci(r=>x(this,null,function*(){yield Y2(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Za(e){let t=QR();if(!tu.D(t))throw new k(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=jw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Xw=(()=>{class n{initialize(t,r){return x(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>dA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=G2.bind(null,this.syncEngine),yield q_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new W_}()}createDatastore(t){let r=Nu(t.databaseInfo.databaseId),i=function(s){return new L_(s)}(t.databaseInfo);return function(s,a,u,l){return new U_(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new H_(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>dA(this.syncEngine,r,0),function(){return oh.D()?new oh:new k_}())}createSyncEngine(t,r){return function(o,s,a,u,l,f,p){let m=new X_(o,s,a,u,l,f);return p&&(m.ja=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return x(this,null,function*(){var t,r;yield function(o){return x(this,null,function*(){let s=U(o);P(no,"RemoteStore shutting down."),s.W_.add(5),yield Xs(s),s.z_.shutdown(),s.j_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function hA(n,e=10240){let t=0;return{read(){return x(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return x(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ks=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Qe("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var rw=class{constructor(e,t){this.ou=e,this.serializer=t,this.metadata=new st,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}getMetadata(){return x(this,null,function*(){return this.metadata.promise})}Ya(){return x(this,null,function*(){return yield this.getMetadata(),this.au()})}au(){return x(this,null,function*(){let e=yield this.uu();if(e===null)return null;let t=this._u.decode(e),r=Number(t);isNaN(r)&&this.cu(`length string (${t}) is not valid number`);let i=yield this.lu(r);return new Q_(JSON.parse(i),e.length+r)})}hu(){return this.buffer.findIndex(e=>e===123)}uu(){return x(this,null,function*(){for(;this.hu()<0&&!(yield this.Pu()););if(this.buffer.length===0)return null;let e=this.hu();e<0&&this.cu("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}lu(e){return x(this,null,function*(){for(;this.buffer.length<e;)(yield this.Pu())&&this.cu("Reached the end of bundle when more is expected.");let t=this._u.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}cu(e){throw this.ou.cancel(),new Error(`Invalid bundle format: ${e}`)}Pu(){return x(this,null,function*(){let e=yield this.ou.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var iw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return x(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return x(this,null,function*(){let s=U(i),a={documents:o.map(p=>mu(s.serializer,p))},u=yield s.Co("BatchGetDocuments",s.serializer.databaseId,ye.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let m=o2(s.serializer,p);l.set(m.key.toString(),m)});let f=[];return o.forEach(p=>{let m=l.get(p.toString());G(!!m),f.push(m)}),f})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ri(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return x(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new du(i,this.precondition(i)))}),yield function(r,i){return x(this,null,function*(){let o=U(r),s={writes:i.map(a=>yu(o.serializer,a))};yield o.So("Commit",o.serializer.databaseId,ye.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw q();t=Z.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new k(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Z.min())?Ge.exists(!1):Ge.updateTime(t):Ge.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Z.min()))throw new k(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ge.updateTime(t)}return Ge.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var ow=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Tu=r.maxAttempts,this.a_=new Iu(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(()=>x(this,null,function*(){let e=new iw(this.datastore),t=this.du(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Au(i)}))}).catch(r=>{this.Au(r)})}))}du(e){try{let t=this.updateFunction(e);return!Su(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(e)}Ru(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!gR(t)}return!1}};var oi="FirestoreClient",sw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=nt.UNAUTHENTICATED,this.clientId=Df.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>x(this,null,function*(){P(oi,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(P(oi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new st;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>x(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=na(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function gv(n,e){return x(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),P(oi,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>x(this,null,function*(){r.isEqual(i)||(yield BR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function pA(n,e){return x(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield eE(n);P(oi,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>cA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>cA(e.remoteStore,i)),n._onlineComponents=e})}function eE(n){return x(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){P(oi,"Using user provided OfflineComponentProvider");try{yield gv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;_n("Error using user provided cache. Falling back to memory cache: "+t),yield gv(n,new Jw)}}else P(oi,"Using default OfflineComponentProvider"),yield gv(n,new tw(void 0));return n._offlineComponents})}function kh(n){return x(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(P(oi,"Using user provided OnlineComponentProvider"),yield pA(n,n._uninitializedComponentsProvider._online)):(P(oi,"Using default OnlineComponentProvider"),yield pA(n,new Xw))),n._onlineComponents})}function sM(n){return eE(n).then(e=>e.persistence)}function tE(n){return eE(n).then(e=>e.localStore)}function aM(n){return kh(n).then(e=>e.remoteStore)}function nE(n){return kh(n).then(e=>e.syncEngine)}function nB(n){return kh(n).then(e=>e.datastore)}function Qs(n){return x(this,null,function*(){let e=yield kh(n),t=e.eventManager;return t.onListen=F2.bind(null,e.syncEngine),t.onUnlisten=V2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=L2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=j2.bind(null,e.syncEngine),t})}function rB(n){return n.asyncQueue.enqueue(()=>x(this,null,function*(){let e=yield sM(n),t=yield aM(n);return e.setNetworkEnabled(!0),function(i){let o=U(i);return o.W_.delete(0),ku(o)}(t)}))}function iB(n){return n.asyncQueue.enqueue(()=>x(this,null,function*(){let e=yield sM(n),t=yield aM(n);return e.setNetworkEnabled(!1),function(i){return x(this,null,function*(){let o=U(i);o.W_.add(0),yield Xs(o),o.j_.set("Offline")})}(t)}))}function oB(n,e){let t=new st;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,o,s){return x(this,null,function*(){try{let a=yield function(l,f){let p=U(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,f))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=na(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield tE(n),e,t)})),t.promise}function cM(n,e,t={}){let r=new st;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(o,s,a,u,l){let f=new Ks({next:m=>{f.su(),s.enqueueAndForget(()=>zw(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new k(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Du(Js(a.path),f,{includeMetadataChanges:!0,Ta:!0});return qw(o,p)}(yield Qs(n),n.asyncQueue,e,t,r)})),r.promise}function sB(n,e){let t=new st;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,o,s){return x(this,null,function*(){try{let a=yield th(i,o,!0),u=new hh(o,a.gs),l=u.ba(a.documents),f=u.applyChanges(l,!1);s.resolve(f.snapshot)}catch(a){let u=na(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield tE(n),e,t)})),t.promise}function uM(n,e,t={}){let r=new st;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(o,s,a,u,l){let f=new Ks({next:m=>{f.su(),s.enqueueAndForget(()=>zw(o,p)),m.fromCache&&u.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Du(a,f,{includeMetadataChanges:!0,Ta:!0});return qw(o,p)}(yield Qs(n),n.asyncQueue,e,t,r)})),r.promise}function aB(n,e){let t=new Ks(e);return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,o){U(i).ia.add(o),o.next()}(yield Qs(n),t)})),()=>{t.su(),n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,o){U(i).ia.delete(o)}(yield Qs(n),t)}))}}function cB(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?Dw().encode(s):s,function(f,p){return new rw(f,p)}(function(f,p){if(f instanceof Uint8Array)return hA(f,p);if(f instanceof ArrayBuffer)return hA(new Uint8Array(f),p);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,Nu(e));n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){tB(yield nE(n),i,r)}))}function uB(n,e){return n.asyncQueue.enqueue(()=>x(this,null,function*(){return function(r,i){let o=U(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Yr.getNamedQuery(s,i))}(yield tE(n),e)}))}function lM(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var gA=new Map;function rE(n,e,t){if(!t)throw new k(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function iE(n,e,t,r){if(e===!0&&r===!0)throw new k(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mA(n){if(!$.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yA(n){if($.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ph(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":q()}function ve(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new k(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Ph(n);throw new k(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function dM(n,e){if(e<=0)throw new k(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var fM="firestore.googleapis.com",vA=!0,gh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fM,this.ssl=vA}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:vA;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=NR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<m2)throw new k(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ro=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new k(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new mv;switch(r.type){case"firstParty":return new wv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return x(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=gA.get(t);r&&(P("ComponentProvider","Removing Datastore"),gA.delete(t),r.terminate())}(this),Promise.resolve()}};function hM(n,e,t,r={}){var i;let o=(n=ve(n,ro))._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;o.host!==fM&&o.host!==a&&_n("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},o),{host:a,ssl:!1,emulatorOptions:r});if(!tl(u,s)&&(n._setSettings(u),r.mockUserToken)){let l,f;if(typeof r.mockUserToken=="string")l=r.mockUserToken,f=nt.MOCK_USER;else{l=xI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new k(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new nt(p)}n._authCredentials=new yv(new Ef(l,f))}}var gt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ne=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Bn=class n extends gt{constructor(e,t,r){super(e,t,Js(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ne(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function oE(n,e,...t){if(n=Le(n),rE("collection","path",e),n instanceof ro){let r=ye.fromString(e,...t);return yA(r),new Bn(n,null,r)}{if(!(n instanceof Ne||n instanceof Bn))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return yA(r),new Bn(n.firestore,null,r)}}function pM(n,e){if(n=ve(n,ro),rE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gt(n,null,function(r){return new wn(ye.emptyPath(),r)}(e))}function Pu(n,e,...t){if(n=Le(n),arguments.length===1&&(e=Df.newId()),rE("doc","path",e),n instanceof ro){let r=ye.fromString(e,...t);return mA(r),new Ne(n,null,new $(r))}{if(!(n instanceof Ne||n instanceof Bn))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return mA(r),new Ne(n.firestore,n instanceof Bn?n.converter:null,new $(r))}}function sE(n,e){return n=Le(n),e=Le(e),(n instanceof Ne||n instanceof Bn)&&(e instanceof Ne||e instanceof Bn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function aE(n,e){return n=Le(n),e=Le(e),n instanceof gt&&e instanceof gt&&n.firestore===e.firestore&&Mu(n._query,e._query)&&n.converter===e.converter}var _A="AsyncQueue",mh=class{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Iu(this,"async_queue_retry"),this.Su=()=>{let r=wf();r&&P(_A,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;let t=wf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;let t=wf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});let t=new st;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}Cu(){return x(this,null,function*(){if(this.Vu.length!==0){try{yield this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!ai(e))throw e;P(_A,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}})}vu(e){let t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Qe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);let i=z_.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(i),i}Du(){this.gu&&q()}verifyOperationInProgress(){}Mu(){return x(this,null,function*(){let e;do e=this.bu,yield e;while(e!==this.bu)})}xu(e){for(let t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){let t=this.fu.indexOf(e);this.fu.splice(t,1)}};function aw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var cw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new st,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var gM=-1,$e=class extends ro{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new mh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return x(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new mh(e),this._firestoreClient=void 0,yield e}})}};function mt(n){if(n._terminated)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||mM(n),n._firestoreClient}function mM(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,f){return new xv(a,u,l,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,lM(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new sw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function yM(n,e){_n("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return _M(n,Xw.provider,{build:r=>new ph(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function vM(n){return x(this,null,function*(){_n("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();_M(n,Xw.provider,{build:t=>new nw(t,e.cacheSizeBytes)})})}function _M(n,e,t){if((n=ve(n,$e))._firestoreClient||n._terminated)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new k(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},mM(n)}function wM(n){if(n._initialized&&!n._terminated)throw new k(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new st;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>x(this,null,function*(){try{yield function(r){return x(this,null,function*(){if(!Zr.D())return Promise.resolve();let i=r+VR;yield Zr.delete(i)})}(jw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function EM(n){return function(t){let r=new st;return t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return q2(yield nE(t),r)})),r.promise}(mt(n=ve(n,$e)))}function IM(n){return rB(mt(n=ve(n,$e)))}function DM(n){return iB(mt(n=ve(n,$e)))}function TM(n,e){let t=mt(n=ve(n,$e)),r=new cw;return cB(t,n._databaseId,e,r),r}function CM(n,e){return uB(mt(n=ve(n,$e)),e).then(t=>t?new gt(n,null,t.query):null)}var Hn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Je.fromBase64String(e))}catch(t){throw new k(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Dn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new k(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var wr=class{constructor(e){this._methodName=e}};var io=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new k(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new k(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return X(this._lat,e._lat)||X(this._long,e._long)}};var Tu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var lB=/^__.*__$/,uw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new In(e,this.data,this.fieldMask,t,this.fieldTransforms):new ni(e,this.data,t,this.fieldTransforms)}},yh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new In(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function bM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q()}}var vh=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Uu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return _h(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(bM(this.Lu)&&lB.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}},lw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Nu(e)}ju(e,t,r,i=!1){return new vh({Lu:e,methodName:t,zu:r,path:Ze.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ao(n){let e=n._freezeSettings(),t=Nu(n._databaseId);return new lw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Oh(n,e,t,r,i,o={}){let s=n.ju(o.merge||o.mergeFields?2:0,e,t,i);lE("Data must be an object, but it was:",s,r);let a=RM(r,s),u,l;if(o.merge)u=new Jt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let m=gw(e,p,t);if(!s.contains(m))throw new k(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);xM(f,m)||f.push(m)}u=new Jt(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new uw(new Ct(a),u,l)}var Cu=class n extends wr{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function SM(n,e,t){return new vh({Lu:3,zu:e.settings.zu,methodName:n._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var dw=class n extends wr{_toFieldTransform(e){return new Xi(e.path,new ei)}isEqual(e){return e instanceof n}},fw=class n extends wr{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){let t=SM(this,e,!0),r=this.Hu.map(o=>co(o,t)),i=new vr(r);return new Xi(e.path,i)}isEqual(e){return e instanceof n&&tl(this.Hu,e.Hu)}},hw=class n extends wr{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){let t=SM(this,e,!0),r=this.Hu.map(o=>co(o,t)),i=new _r(r);return new Xi(e.path,i)}isEqual(e){return e instanceof n&&tl(this.Hu,e.Hu)}},pw=class n extends wr{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){let t=new ti(e.serializer,cR(e.serializer,this.Ju));return new Xi(e.path,t)}isEqual(e){return e instanceof n&&this.Ju===e.Ju}};function cE(n,e,t,r){let i=n.ju(1,e,t);lE("Data must be an object, but it was:",i,r);let o=[],s=Ct.empty();ci(r,(u,l)=>{let f=dE(e,u,t);l=Le(l);let p=i.Uu(f);if(l instanceof Cu)o.push(f);else{let m=co(l,p);m!=null&&(o.push(f),s.set(f,m))}});let a=new Jt(o);return new yh(s,a,i.fieldTransforms)}function uE(n,e,t,r,i,o){let s=n.ju(1,e,t),a=[gw(e,r,t)],u=[i];if(o.length%2!=0)throw new k(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(gw(e,o[m])),u.push(o[m+1]);let l=[],f=Ct.empty();for(let m=a.length-1;m>=0;--m)if(!xM(l,a[m])){let y=a[m],b=u[m];b=Le(b);let A=s.Uu(y);if(b instanceof Cu)l.push(y);else{let N=co(b,A);N!=null&&(l.push(y),f.set(y,N))}}let p=new Jt(l);return new yh(f,p,s.fieldTransforms)}function AM(n,e,t,r=!1){return co(t,n.ju(r?4:3,e))}function co(n,e){if(MM(n=Le(n)))return lE("Unsupported field value:",e,n),RM(n,e);if(n instanceof wr)return function(r,i){if(!bM(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=co(a,i.Ku(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Le(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ue.fromDate(r);return{timestampValue:Bs(i.serializer,o)}}if(r instanceof Ue){let o=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bs(i.serializer,o)}}if(r instanceof io)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hn)return{bytesValue:yR(i.serializer,r._byteString)};if(r instanceof Ne){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Wu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Fw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Tu)return function(s,a){return{mapValue:{fields:{[Mw]:{stringValue:xw},[Os]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Wu("VectorValues must only contain numeric values.");return Ow(a.serializer,l)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${Ph(r)}`)}(n,e)}function RM(n,e){let t={};return jA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ci(n,(r,i)=>{let o=co(i,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function MM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ue||n instanceof io||n instanceof Hn||n instanceof Ne||n instanceof wr||n instanceof Tu)}function lE(n,e,t){if(!MM(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Ph(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function gw(n,e,t){if((e=Le(e))instanceof Dn)return e._internalPath;if(typeof e=="string")return dE(n,e);throw _h("Field path arguments must be of type string or ",n,!1,void 0,t)}var dB=new RegExp("[~\\*/\\[\\]]");function dE(n,e,t){if(e.search(dB)>=0)throw _h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Dn(...e.split("."))._internalPath}catch{throw _h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _h(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new k(R.INVALID_ARGUMENT,a+n+u)}function xM(n,e){return n.some(t=>t.isEqual(e))}var oo=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ne(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new mw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Fh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},mw=class extends oo{data(){return super.data()}};function Fh(n,e){return typeof e=="string"?dE(n,e):e instanceof Dn?e._internalPath:e._delegate._internalPath}function NM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new k(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var bu=class{},so=class extends bu{};function Dr(n,e,...t){let r=[];e instanceof bu&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof yw).length,a=o.filter(u=>u instanceof wh).length;if(s>1||s>0&&a>0)throw new k(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var wh=class n extends so{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return $M(e._query,t),new gt(e.firestore,e.converter,zv(e._query,t))}_parse(e){let t=ao(e.firestore);return function(o,s,a,u,l,f,p){let m;if(l.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new k(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){EA(p,f);let b=[];for(let A of p)b.push(wA(u,o,A));m={arrayValue:{values:b}}}else m=wA(u,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||EA(p,f),m=AM(a,s,p,f==="in"||f==="not-in");return fe.create(l,f,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function kM(n,e,t){let r=e,i=Fh("where",n);return wh._create(i,r,t)}var yw=class n extends bu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Se.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)$M(s,u),s=zv(s,u)}(e._query,t),new gt(e.firestore,e.converter,zv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var vw=class n extends so{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yi(o,s)}(e._query,this._field,this._direction);return new gt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new wn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function PM(n,e="asc"){let t=e,r=Fh("orderBy",n);return vw._create(r,t)}var Eh=class n extends so{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new gt(e.firestore,e.converter,Vf(e._query,this._limit,this._limitType))}};function OM(n){return dM("limit",n),Eh._create("limit",n,"F")}function FM(n){return dM("limitToLast",n),Eh._create("limitToLast",n,"L")}var Ih=class n extends so{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=UM(e,this.type,this._docOrFields,this._inclusive);return new gt(e.firestore,e.converter,function(i,o){return new wn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function LM(...n){return Ih._create("startAt",n,!0)}function VM(...n){return Ih._create("startAfter",n,!1)}var Dh=class n extends so{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=UM(e,this.type,this._docOrFields,this._inclusive);return new gt(e.firestore,e.converter,function(i,o){return new wn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function jM(...n){return Dh._create("endBefore",n,!1)}function BM(...n){return Dh._create("endAt",n,!0)}function UM(n,e,t,r){if(t[0]=Le(t[0]),t[0]instanceof oo)return function(o,s,a,u,l){if(!u)throw new k(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let f=[];for(let p of bs(o))if(p.field.isKeyField())f.push(Zi(s,u.key));else{let m=u.data.field(p.field);if(Ah(m))throw new k(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=p.field.canonicalString();throw new k(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}f.push(m)}return new $n(f,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=ao(n.firestore);return function(s,a,u,l,f,p){let m=s.explicitOrderBy;if(f.length>m.length)throw new k(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let b=0;b<f.length;b++){let A=f[b];if(m[b].field.isKeyField()){if(typeof A!="string")throw new k(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof A}`);if(!kw(s)&&A.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${A}' contains a slash.`);let N=s.path.child(ye.fromString(A));if(!$.isDocumentKey(N))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let H=new $(N);y.push(Zi(a,H))}else{let N=AM(u,l,A);y.push(N)}}return new $n(y,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function wA(n,e,t){if(typeof(t=Le(t))=="string"){if(t==="")throw new k(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kw(e)&&t.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ye.fromString(t));if(!$.isDocumentKey(r))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zi(n,new $(r))}if(t instanceof Ne)return Zi(n,t._key);throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ph(t)}.`)}function EA(n,e){if(!Array.isArray(n)||n.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $M(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Zs=class{convertValue(e,t="none"){switch(Jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw q()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ci(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Os].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Fe(s.doubleValue));return new Tu(o)}convertGeoPoint(e){return new io(Fe(e.latitude),Fe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Rh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(cu(e));default:return null}}convertTimestamp(e){let t=mr(e);return new Ue(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ye.fromString(e);G(AR(r));let i=new Yr(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||Qe(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Lh(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var _w=class extends Zs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ne(this.firestore,null,t)}};var gr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},an=class extends oo{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Kr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Fh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Kr=class extends an{data(e={}){return super.data(e)}},Tn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new gr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Kr(this._firestore,this._userDataWriter,r.key,r,new gr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new k(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Kr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new gr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Kr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new gr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:fB(a.type),doc:u,oldIndex:l,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function fB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q()}}function fE(n,e){return n instanceof an&&e instanceof an?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Tn&&e instanceof Tn&&n._firestore===e._firestore&&aE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function HM(n){n=ve(n,Ne);let e=ve(n.firestore,$e);return cM(mt(e),n._key).then(t=>mE(e,n,t))}var Er=class extends Zs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ne(this.firestore,null,t)}};function qM(n){n=ve(n,Ne);let e=ve(n.firestore,$e),t=mt(e),r=new Er(e);return oB(t,n._key).then(i=>new an(e,r,n._key,i,new gr(i!==null&&i.hasLocalMutations,!0),n.converter))}function zM(n){n=ve(n,Ne);let e=ve(n.firestore,$e);return cM(mt(e),n._key,{source:"server"}).then(t=>mE(e,n,t))}function GM(n){n=ve(n,gt);let e=ve(n.firestore,$e),t=mt(e),r=new Er(e);return NM(n._query),uM(t,n._query).then(i=>new Tn(e,r,n,i))}function WM(n){n=ve(n,gt);let e=ve(n.firestore,$e),t=mt(e),r=new Er(e);return sB(t,n._query).then(i=>new Tn(e,r,n,i))}function KM(n){n=ve(n,gt);let e=ve(n.firestore,$e),t=mt(e),r=new Er(e);return uM(t,n._query,{source:"server"}).then(i=>new Tn(e,r,n,i))}function hE(n,e,t){n=ve(n,Ne);let r=ve(n.firestore,$e),i=Lh(n.converter,e,t);return ra(r,[Oh(ao(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ge.none())])}function pE(n,e,t,...r){n=ve(n,Ne);let i=ve(n.firestore,$e),o=ao(i),s;return s=typeof(e=Le(e))=="string"||e instanceof Dn?uE(o,"updateDoc",n._key,e,t,r):cE(o,"updateDoc",n._key,e),ra(i,[s.toMutation(n._key,Ge.exists(!0))])}function QM(n){return ra(ve(n.firestore,$e),[new ri(n._key,Ge.none())])}function ZM(n,e){let t=ve(n.firestore,$e),r=Pu(n),i=Lh(n.converter,e);return ra(t,[Oh(ao(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ge.exists(!1))]).then(()=>r)}function gE(n,...e){var t,r,i;n=Le(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||aw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(aw(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,f;if(n instanceof Ne)l=ve(n.firestore,$e),f=Js(n._key.path),u={next:p=>{e[s]&&e[s](mE(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=ve(n,gt);l=ve(p.firestore,$e),f=p._query;let m=new Er(l);u={next:y=>{e[s]&&e[s](new Tn(l,m,p,y))},error:e[s+1],complete:e[s+2]},NM(n._query)}return function(m,y,b,A){let N=new Ks(A),H=new Du(y,N,b);return m.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return qw(yield Qs(m),H)})),()=>{N.su(),m.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return zw(yield Qs(m),H)}))}}(mt(l),f,a,u)}function YM(n,e){return aB(mt(n=ve(n,$e)),aw(e)?e:{next:e})}function ra(n,e){return function(r,i){let o=new st;return r.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return B2(yield nE(r),i,o)})),o.promise}(mt(n),e)}function mE(n,e,t){let r=t.docs.get(e._key),i=new Er(n);return new an(n,i,e._key,r,new gr(t.hasPendingWrites,t.fromCache),e.converter)}var hB={maxAttempts:5};var Th=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ao(e)}set(e,t,r){this._verifyNotCommitted();let i=Gr(e,this._firestore),o=Lh(i.converter,t,r),s=Oh(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ge.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Gr(e,this._firestore),s;return s=typeof(t=Le(t))=="string"||t instanceof Dn?uE(this._dataReader,"WriteBatch.update",o._key,t,r,i):cE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Ge.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Gr(e,this._firestore);return this._mutations=this._mutations.concat(new ri(t._key,Ge.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Gr(n,e){if((n=Le(n)).firestore!==e)throw new k(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var ww=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ao(e)}get(e){let t=Gr(e,this._firestore),r=new _w(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return q();let o=i[0];if(o.isFoundDocument())return new oo(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new oo(this._firestore,r,t._key,null,t.converter);throw q()})}set(e,t,r){let i=Gr(e,this._firestore),o=Lh(i.converter,t,r),s=Oh(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=Gr(e,this._firestore),s;return s=typeof(t=Le(t))=="string"||t instanceof Dn?uE(this._dataReader,"Transaction.update",o._key,t,r,i):cE(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=Gr(e,this._firestore);return this._transaction.delete(t._key),this}};var Ew=class extends ww{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Gr(e,this._firestore),r=new Er(this._firestore);return super.get(e).then(i=>new an(this._firestore,r,t._key,i._document,new gr(!1,!1),t.converter))}};function JM(n,e,t){n=ve(n,$e);let r=Object.assign(Object.assign({},hB),t);return function(o){if(o.maxAttempts<1)throw new k(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new st;return o.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){let l=yield nB(o);new ow(o.asyncQueue,l,a,s,u).Iu()})),u.promise}(mt(n),i=>e(new Ew(n,i)),r)}function XM(){return new Cu("deleteField")}function ex(){return new dw("serverTimestamp")}function tx(...n){return new fw("arrayUnion",n)}function nx(...n){return new hw("arrayRemove",n)}function rx(n){return new pw("increment",n)}(function(e,t=!0){(function(i){Ys=i})(OI),Sa(new gi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new $e(new vv(r.getProvider("auth-internal")),new Ev(s,r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yr(l.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ar(cS,uS,e),Ar(cS,uS,"esm2017")})();var pB="@firebase/firestore-compat",gB="0.3.45";function IE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new k("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function ix(){if(typeof Uint8Array>"u")throw new k("unimplemented","Uint8Arrays are not available in this environment.")}function ox(){if(!BA())throw new k("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Vh=class n{constructor(e){this._delegate=e}static fromBase64String(e){return ox(),new n(Hn.fromBase64String(e))}static fromUint8Array(e){return ix(),new n(Hn.fromUint8Array(e))}toBase64(){return ox(),this._delegate.toBase64()}toUint8Array(){return ix(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function yE(n){return mB(n,["next","error","complete"])}function mB(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var vE=class{enableIndexedDbPersistence(e,t){return yM(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return vM(e._delegate)}clearIndexedDbPersistence(e){return wM(e._delegate)}},jh=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Yr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&_n("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){hM(this._delegate,e,t,r)}enableNetwork(){return IM(this._delegate)}disableNetwork(){return DM(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,iE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return EM(this._delegate)}onSnapshotsInSync(e){return YM(this._delegate,e)}get app(){if(!this._appCompat)throw new k("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new sa(this,oE(this._delegate,e))}catch(t){throw Pt(t,"collection()","Firestore.collection()")}}doc(e){try{return new qn(this,Pu(this._delegate,e))}catch(t){throw Pt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ho(this,pM(this._delegate,e))}catch(t){throw Pt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return JM(this._delegate,t=>e(new Bh(this,t)))}batch(){return mt(this._delegate),new Uh(new Th(this._delegate,e=>ra(this._delegate,e)))}loadBundle(e){return TM(this._delegate,e)}namedQuery(e){return CM(this._delegate,e).then(t=>t?new ho(this,t):null)}},ia=class extends Zs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vh(new Hn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return qn.forKey(t,this.firestore,null)}};function yB(n){IA(n)}var Bh=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ia(e)}get(e){let t=uo(e);return this._delegate.get(t).then(r=>new lo(this._firestore,new an(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=uo(e);return r?(IE("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=uo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=uo(e);return this._delegate.delete(t),this}},Uh=class{constructor(e){this._delegate=e}set(e,t,r){let i=uo(e);return r?(IE("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=uo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=uo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},oa=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Kr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new fo(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new ia(e),t),i.set(t,o)),o}};oa.INSTANCES=new WeakMap;var qn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ia(e)}static forPath(e,t,r){if(e.length%2!==0)throw new k("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Ne(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Ne(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new sa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new sa(this.firestore,oE(this._delegate,e))}catch(t){throw Pt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Le(e),e instanceof Ne?sE(this._delegate,e):!1}set(e,t){t=IE("DocumentReference.set",t);try{return t?hE(this._delegate,e,t):hE(this._delegate,e)}catch(r){throw Pt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?pE(this._delegate,e):pE(this._delegate,e,t,...r)}catch(i){throw Pt(i,"updateDoc()","DocumentReference.update()")}}delete(){return QM(this._delegate)}onSnapshot(...e){let t=sx(e),r=ax(e,i=>new lo(this.firestore,new an(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return gE(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=qM(this._delegate):e?.source==="server"?t=zM(this._delegate):t=HM(this._delegate),t.then(r=>new lo(this.firestore,new an(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(oa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Pt(n,e,t){return n.message=n.message.replace(e,t),n}function sx(n){for(let e of n)if(typeof e=="object"&&!yE(e))return e;return{}}function ax(n,e){var t,r;let i;return yE(n[0])?i=n[0]:yE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var lo=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new qn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return fE(this._delegate,e._delegate)}},fo=class extends lo{data(e){let t=this._delegate.data(e);return this._delegate._converter||DA(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},ho=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ia(e)}where(e,t,r){try{return new n(this.firestore,Dr(this._delegate,kM(e,t,r)))}catch(i){throw Pt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Dr(this._delegate,PM(e,t)))}catch(r){throw Pt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Dr(this._delegate,OM(e)))}catch(t){throw Pt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Dr(this._delegate,FM(e)))}catch(t){throw Pt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Dr(this._delegate,LM(...e)))}catch(t){throw Pt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Dr(this._delegate,VM(...e)))}catch(t){throw Pt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Dr(this._delegate,jM(...e)))}catch(t){throw Pt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Dr(this._delegate,BM(...e)))}catch(t){throw Pt(t,"endAt()","Query.endAt()")}}isEqual(e){return aE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=WM(this._delegate):e?.source==="server"?t=KM(this._delegate):t=GM(this._delegate),t.then(r=>new Ou(this.firestore,new Tn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=sx(e),r=ax(e,i=>new Ou(this.firestore,new Tn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return gE(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(oa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},_E=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new fo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Ou=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ho(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new fo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new _E(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new fo(this._firestore,r))})}isEqual(e){return fE(this._delegate,e._delegate)}},sa=class n extends ho{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new qn(this.firestore,e):null}doc(e){try{return e===void 0?new qn(this.firestore,Pu(this._delegate)):new qn(this.firestore,Pu(this._delegate,e))}catch(t){throw Pt(t,"doc()","CollectionReference.doc()")}}add(e){return ZM(this._delegate,e).then(t=>new qn(this.firestore,t))}isEqual(e){return sE(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(oa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function uo(n){return ve(n,Ne)}var wE=class n{constructor(...e){this._delegate=new Dn(...e)}static documentId(){return new n(Ze.keyField().canonicalString())}isEqual(e){return e=Le(e),e instanceof Dn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var EE=class n{static serverTimestamp(){let e=ex();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=XM();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=tx(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=nx(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=rx(e);return t._methodName="FieldValue.increment",new n(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}};var vB={Firestore:jh,GeoPoint:io,Timestamp:Ue,Blob:Vh,Transaction:Bh,WriteBatch:Uh,DocumentReference:qn,DocumentSnapshot:lo,Query:ho,QueryDocumentSnapshot:fo,QuerySnapshot:Ou,CollectionReference:sa,FieldPath:wE,FieldValue:EE,setLogLevel:yB,CACHE_SIZE_UNLIMITED:gM};function _B(n,e){n.INTERNAL.registerComponent(new gi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},vB)))}function wB(n){_B(n,(e,t)=>new jh(e,t,new vE)),n.registerVersion(pB,gB)}wB(Ht);function EB(n,e=Pa){return new de(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function cx(n,e){return EB(n,e)}function IB(n,e){return cx(n,e).pipe(wi(void 0),La(),W(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function CE(n,e){return cx(n,e).pipe(W(t=>({payload:t,type:"query"})))}var $h=class{ref;afs;injector=O(Ke);constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=dx(r,t);return new qh(i,o,this.afs)}snapshotChanges(){return IB(this.ref,this.afs.schedulers.outsideAngular).pipe(Nt(this.injector))}valueChanges(e={}){return this.snapshotChanges().pipe(W(({payload:t})=>e.idField?be(L({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return we(this.ref.get(e)).pipe(Nt(this.injector))}};function Hh(n,e){return CE(n,e).pipe(wi(void 0),La(),W(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function ux(n,e,t){return Hh(n,t).pipe(_i((r,i)=>DB(r,i.map(o=>o.payload),e),[]),sg(),W(r=>r.map(i=>({type:i.type,payload:i}))))}function DB(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=TB(n,r))}),n}function DE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function TB(n,e){switch(e.type){case"added":if(!n[e.newIndex]?.doc.ref.isEqual(e.doc.ref))return DE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return DE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]?.doc.ref.isEqual(e.doc.ref))return DE(n,e.oldIndex,1);break}return n}function lx(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var qh=class{ref;query;afs;injector=O(Ke);constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Hh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(W(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(wi(void 0),La(),ct(([r,i])=>i.length>0||!r),W(([,r])=>r),Nt(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(_i((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=lx(e);return ux(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nt(this.injector))}valueChanges(e={}){return CE(this.query,this.afs.schedulers.outsideAngular).pipe(W(t=>t.payload.docs.map(r=>e.idField?be(L({},r.data()),{[e.idField]:r.id}):r.data())),Nt(this.injector))}get(e){return we(this.query.get(e)).pipe(Nt(this.injector))}add(e){return this.ref.add(e)}doc(e){return new $h(this.ref.doc(e),this.afs)}},TE=class{query;afs;injector=O(Ke);constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Hh(this.query,this.afs.schedulers.outsideAngular).pipe(Nt(this.injector)):Hh(this.query,this.afs.schedulers.outsideAngular).pipe(W(t=>t.filter(r=>e.indexOf(r.type)>-1)),ct(t=>t.length>0),Nt(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(_i((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=lx(e);return ux(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nt(this.injector))}valueChanges(e={}){return CE(this.query,this.afs.schedulers.outsideAngular).pipe(W(r=>r.payload.docs.map(i=>e.idField?L({[e.idField]:i.id},i.data()):i.data())),Nt(this.injector))}get(e){return we(this.query.get(e)).pipe(Nt(this.injector))}},CB=new z("angularfire2.enableFirestorePersistence"),bB=new z("angularfire2.firestore.persistenceSettings"),SB=new z("angularfire2.firestore.settings"),AB=new z("angularfire2.firestore.use-emulator");function dx(n,e=t=>t){return{query:e(n),ref:n}}var Ut=(()=>{class n{schedulers;firestore;persistenceEnabled$;ngZone=O(he);constructor(t,r,i,o,s,a,u,l,f,p,m,y,b,A,N,H,K){this.schedulers=u;let V=$c(t,a,r),J=f;p&&nv(V,a,m,b,A,N,y,H),[this.firestore,this.persistenceEnabled$]=sf(`${V.name}.firestore`,"AngularFirestore",V.name,()=>{let te=a.runOutsideAngular(()=>V.firestore());if(o&&te.settings(o),J&&te.useEmulator(...J),i&&!Vr(s)){let ne=()=>{try{return we(te.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),Y(!1)}};return[te,a.runOutsideAngular(ne)]}else return[te,Y(!1)]},[o,J,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=dx(i,r),a=this.ngZone.run(()=>o);return new qh(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new TE(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.ngZone.run(()=>r);return new $h(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(F(ls),F(ds,8),F(CB,8),F(SB,8),F(rn),F(he),F(jc),F(bB,8),F(AB,8),F(oS,8),F(Zy,8),F(Yy,8),F(Jy,8),F(Xy,8),F(ev,8),F(tv,8),F(us,8))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var zh=class n{constructor(e){this.db=e;this.headerRef=e.collection(this.dbPath)}accessHeader="header service running...";dbPath="/header";headerRef;getHeader(){return this.headerRef}static \u0275fac=function(t){return new(t||n)(F(Ut))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};var Gh=class n{constructor(e){this.headerService=e;this.headerService.getHeader().snapshotChanges().pipe(W(t=>t.map(r=>L({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.header=t[0],console.log(this.header.name),console.log(this.header)})}header=new ef;static \u0275fac=function(t){return new(t||n)(Xe(zh))};static \u0275cmp=ut({type:n,selectors:[["app-header"]],standalone:!1,decls:17,vars:7,consts:[["width","300",3,"src"]],template:function(t,r){t&1&&(ce(0,"tr")(1,"td"),ge(2),De(3,"br"),ge(4),De(5,"br"),le(),ce(6,"td"),De(7,"img",0),le(),ce(8,"td"),ge(9),De(10,"br"),ge(11),De(12,"br"),ge(13),De(14,"br"),ge(15),De(16,"br"),le()()),t&2&&(pe(2),Be(" ",r.header.name," "),pe(2),Be(" ",r.header.goalLife," "),pe(3),Vm("src",r.header.photoUrl,NC),pe(2),Be(" ",r.header.email," "),pe(2),Be(" ",r.header.phoneNumber," "),pe(2),Be(" ",r.header.location," "),pe(2),Be(" ",r.header.socialNetwork," "))},encapsulation:2})};var Wh=class n{constructor(e){this.db=e;this.workExperienceRef=e.collection(this.dbPath)}accessWorkExperience="work experience running...";dbPath="/work-experience";workExperienceRef;getWorkExperience(){return this.workExperienceRef}static \u0275fac=function(t){return new(t||n)(F(Ut))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};function NB(n,e){if(n&1&&(ce(0,"ul")(1,"li"),ge(2),ce(3,"i"),ge(4),le(),De(5,"br"),ce(6,"b"),ge(7),le(),De(8,"br"),ge(9),De(10,"br"),ge(11," Logros: "),De(12,"br"),ce(13,"ul"),ge(14),le()()()),n&2){let t=e.$implicit;pe(2),uc(" ",t.startDate," - ",t.endDate," "),pe(2),Fr(t.location),pe(3),Fr(t.position),pe(2),Be(" ",t.company," "),pe(5),Be(" ",t.accomplishment," ")}}var Kh=class n{constructor(e){this.workExperienceService=e;console.log(this.workExperienceService),this.workExperienceService.getWorkExperience().snapshotChanges().pipe(W(t=>t.map(r=>L({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.workExperience=t,console.log(this.workExperience)})}workExperience=[];static \u0275fac=function(t){return new(t||n)(Xe(Wh))};static \u0275cmp=ut({type:n,selectors:[["app-work-experience"]],standalone:!1,decls:3,vars:1,consts:[[1,"shadow-title"],[4,"ngFor","ngForOf"]],template:function(t,r){t&1&&(ce(0,"h2",0),ge(1,"Work Experience"),le(),Gt(2,NB,15,6,"ul",1)),t&2&&(pe(2),Wt("ngForOf",r.workExperience))},dependencies:[Vt],encapsulation:2})};var Qh=class n{constructor(e){this.db=e;this.educationRef=e.collection(this.dbPath)}accesoEducation="education running...";dbPath="/education";educationRef;getEducation(){return this.educationRef}static \u0275fac=function(t){return new(t||n)(F(Ut))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};function OB(n,e){if(n&1&&(ce(0,"ul")(1,"li"),ge(2),De(3,"br"),ce(4,"b"),ge(5),le(),De(6,"br"),ge(7),De(8,"br"),le()()),n&2){let t=e.$implicit;pe(2),uc(" ",t.admissionDate," - ",t.gradationDate," "),pe(3),Fr(t.carrer),pe(2),Be(" ",t.institutionName," ")}}var Zh=class n{constructor(e){this.educationService=e;console.log(this.educationService),this.educationService.getEducation().snapshotChanges().pipe(W(t=>t.map(r=>L({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.education=t,console.log(this.education)})}education=[];static \u0275fac=function(t){return new(t||n)(Xe(Qh))};static \u0275cmp=ut({type:n,selectors:[["app-education"]],standalone:!1,decls:3,vars:1,consts:[[1,"shadow-title"],[4,"ngFor","ngForOf"]],template:function(t,r){t&1&&(ce(0,"h2",0),ge(1,"Education"),le(),Gt(2,OB,9,4,"ul",1)),t&2&&(pe(2),Wt("ngForOf",r.education))},dependencies:[Vt],encapsulation:2})};var Yh=class n{constructor(e){this.db=e;this.skillsRef=e.collection(this.dbPath)}accesoSkills="skills running...";dbPath="/skills";skillsRef;getSkills(){return this.skillsRef}static \u0275fac=function(t){return new(t||n)(F(Ut))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};function VB(n,e){if(n&1&&(ce(0,"li"),ge(1),le()),n&2){let t=e.$implicit;pe(),Be(" ",t.skill," ")}}var Jh=class n{constructor(e){this.skillsService=e;console.log(this.skillsService),this.skillsService.getSkills().snapshotChanges().pipe(W(t=>t.map(r=>L({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.skills=t,console.log(this.skills)})}skills=[];static \u0275fac=function(t){return new(t||n)(Xe(Yh))};static \u0275cmp=ut({type:n,selectors:[["app-skills"]],standalone:!1,decls:4,vars:1,consts:[[1,"shadow-title"],[4,"ngFor","ngForOf"]],template:function(t,r){t&1&&(ce(0,"h2",0),ge(1,"Skills "),le(),ce(2,"ul"),Gt(3,VB,2,1,"li",1),le()),t&2&&(pe(3),Wt("ngForOf",r.skills))},dependencies:[Vt],encapsulation:2})};var Xh=class n{constructor(e){this.db=e;this.certificatesRef=e.collection(this.dbPath)}accesoCertificates="certificates running...";dbPath="/certificates";certificatesRef;getCertificates(){return this.certificatesRef}static \u0275fac=function(t){return new(t||n)(F(Ut))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};function UB(n,e){if(n&1&&(ce(0,"ul")(1,"li"),ge(2),De(3,"br"),ce(4,"b"),ge(5),le(),De(6,"br"),ge(7),De(8,"br"),le()()),n&2){let t=e.$implicit;pe(2),Be(" ",t.certificateDate," "),pe(3),Fr(t.certificateName),pe(2),Be(" ",t.description," ")}}var ep=class n{constructor(e){this.certificatesService=e;console.log(this.certificatesService),this.certificatesService.getCertificates().snapshotChanges().pipe(W(t=>t.map(r=>L({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.certificates=t,console.log(this.certificates)})}certificates=[];static \u0275fac=function(t){return new(t||n)(Xe(Xh))};static \u0275cmp=ut({type:n,selectors:[["app-certificates"]],standalone:!1,decls:3,vars:1,consts:[[1,"shadow-title"],[4,"ngFor","ngForOf"]],template:function(t,r){t&1&&(ce(0,"h2",0),ge(1,"Certificates "),le(),Gt(2,UB,9,3,"ul",1)),t&2&&(pe(2),Wt("ngForOf",r.certificates))},dependencies:[Vt],encapsulation:2})};var tp=class n{constructor(e){this.db=e;this.languagesRef=e.collection(this.dbPath)}accesoLanguages="languages running...";dbPath="/languages";languagesRef;getLanguages(){return this.languagesRef}static \u0275fac=function(t){return new(t||n)(F(Ut))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};function qB(n,e){if(n&1&&(ce(0,"li"),ge(1),le()),n&2){let t=e.$implicit;pe(),Be(" ",t.languageName," ")}}var np=class n{constructor(e){this.languagesService=e;console.log(this.languagesService),this.languagesService.getLanguages().snapshotChanges().pipe(W(t=>t.map(r=>L({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.languages=t,console.log(this.languages)})}languages=[];static \u0275fac=function(t){return new(t||n)(Xe(tp))};static \u0275cmp=ut({type:n,selectors:[["app-languages"]],standalone:!1,decls:4,vars:1,consts:[[1,"shadow-title"],[4,"ngFor","ngForOf"]],template:function(t,r){t&1&&(ce(0,"h2",0),ge(1,"Languages"),le(),ce(2,"ul"),Gt(3,qB,2,1,"li",1),le()),t&2&&(pe(3),Wt("ngForOf",r.languages))},dependencies:[Vt],encapsulation:2})};var rp=class n{constructor(e){this.db=e;this.interestsRef=e.collection(this.dbPath)}accesoInterests="interests running...";dbPath="/interests";interestsRef;getInterests(){return this.interestsRef}static \u0275fac=function(t){return new(t||n)(F(Ut))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};function WB(n,e){if(n&1&&(ce(0,"ul")(1,"li"),ge(2),le()()),n&2){let t=e.$implicit;pe(2),Be(" ",t.interest," ")}}var ip=class n{constructor(e){this.interestsService=e;console.log(this.interestsService),this.interestsService.getInterests().snapshotChanges().pipe(W(t=>t.map(r=>L({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.interests=t,console.log(this.interests)})}interests=[];static \u0275fac=function(t){return new(t||n)(Xe(rp))};static \u0275cmp=ut({type:n,selectors:[["app-interests"]],standalone:!1,decls:3,vars:1,consts:[[1,"shadow-title"],[4,"ngFor","ngForOf"]],template:function(t,r){t&1&&(ce(0,"h2",0),ge(1,"Interests"),le(),Gt(2,WB,3,1,"ul",1)),t&2&&(pe(2),Wt("ngForOf",r.interests))},dependencies:[Vt],encapsulation:2})};var op=class n{title="mycv";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ut({type:n,selectors:[["app-root"]],standalone:!1,decls:19,vars:0,consts:[["border","1"],["colspan","2"]],template:function(t,r){t&1&&(ce(0,"table",0)(1,"tr")(2,"td",1),De(3,"app-header"),le()(),ce(4,"tr")(5,"td"),De(6,"app-work-experience"),le(),ce(7,"td"),De(8,"app-skills"),le()(),ce(9,"tr")(10,"td"),De(11,"app-education"),le(),ce(12,"td"),De(13,"app-certificates"),le()(),ce(14,"tr")(15,"td"),De(16,"app-languages"),le(),ce(17,"td"),De(18,"app-interests"),le()()())},dependencies:[Gh,Kh,Zh,Jh,ep,np,ip],encapsulation:2})};var fx={production:!1,firebase:{apiKey:"AIzaSyCExS9k2lHf3jpAkogR9dGzuSEptDjFdtg",authDomain:"mycv-f1c7a.firebaseapp.com",projectId:"mycv-f1c7a",storageBucket:"mycv-f1c7a.firebasestorage.app",messagingSenderId:"1086865603987",appId:"1:1086865603987:web:d381724747fc9bf950fc66"}};var sp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Dt({type:n,bootstrap:[op]});static \u0275inj=It({imports:[ny,Xd,iS.initializeApp(fx.firebase)]})};ty().bootstrapModule(sp,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
